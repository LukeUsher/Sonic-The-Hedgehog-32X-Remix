; Align macro (For ASM68k)
align		macro
			cnop 0,\1
			endm

PWM_First_Location = $FFFFC600
;			
; SONIC THE HEDGEHOG 32X
;
; 68000 code
;
; by drx
; 
; read readme.txt	
;	
; DO NOT modify until "__entry"; Master SH2 bios checks for ICD_MARS at the exact place it is at
; 	

	dc.l	0,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	dc.l	ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS,ICD_MARS
	
	dc.b	'SEGA MEGA DRIVE '
	dc.b	'(C)SEGA 2007.DEC'
	dc.b	'SONIC THE       '
	dc.b	'    HEDGEHOG 32X'
	dc.b	'                '
	dc.b	'SONIC THE       '
	dc.b	'    HEDGEHOG 32X'
	dc.b	'                '
	dc.b	'GM 00001009-32'
	
	dc.w	$0000
	
	dc.b	'J6              '
	
	dc.l	$00000000,$003fffff
	dc.l	$00000000,$00ffffff
	dc.b	'                '
	dc.b	'                '
	dc.b	'                '
	dc.b	'                '
	dc.b	'JUE             '

;	Reset Code
	jmp	$880000+__start
	ds.b	6-(@-($200+6*0))	; Do not change this line

;	Bus Error
	rte
	ds.b	6-(@-($200+6*1))	; Do not change this line

;	Address Error
	rte
	ds.b	6-(@-($200+6*2))	; Do not change this line

;	Illegal Instruction
	rte
	ds.b	6-(@-($200+6*3))	; Do not change this line

;	Divide by 0
	rte
	ds.b	6-(@-($200+6*4))	; Do not change this line

;	CHK Instruction
	rte
	ds.b	6-(@-($200+6*5))	; Do not change this line

;	TRAPV Instruction
	rte
	ds.b	6-(@-($200+6*6))	; Do not change this line

;	Privilege Violation
	rte
	ds.b	6-(@-($200+6*7))	; Do not change this line

;	Trace
	rte
	ds.b	6-(@-($200+6*8))	; Do not change this line

;	Line 1010 Emulator
	rte
	ds.b	6-(@-($200+6*9))	; Do not change this line

;	Line 1111 Emulator
	rte
	ds.b	78-(@-($200+6*10))	; Do not change this line

;	Spurious Interrupt
	rte
	ds.b	6-(@-($200+6*23))	; Do not change this line

;	Level 1 Interrupt
	rte
	ds.b	6-(@-($200+6*24))	; Do not change this line

;	Level 2 Interrupt (TH)
	rte
	ds.b	6-(@-($200+6*25))	; Do not change this line

;	Level 3 Interrupt
	rte
	ds.b	6-(@-($200+6*26))	; Do not change this line

;	Level 4 Interrupt (H-Blank)
	jmp	$880000+__HBlank
	ds.b	6-(@-($200+6*27))	; Do not change this line

;	Level 5 Interrupt
	rte
	ds.b	6-(@-($200+6*28))	; Do not change this line

;	Level 6 Interrupt (V-Blank)
	jmp	$880000+__VBlank
	ds.b	6-(@-($200+6*29))	; Do not change this line

;	Level 7 Interrupt
	rte
	ds.b	6-(@-($200+6*30))	; Do not change this line

;	Trap #0 Instruction
	rte
	ds.b	6-(@-($200+6*31))	; Do not change this line

;	Trap #1 Instruction
	rte
	ds.b	6-(@-($200+6*32))	; Do not change this line

;	Trap #2 Instruction
	rte
	ds.b	6-(@-($200+6*33))	; Do not change this line

;	Trap #3 Instruction
	rte
	ds.b	6-(@-($200+6*34))	; Do not change this line

;	Trap #4 Instruction
	rte
	ds.b	6-(@-($200+6*35))	; Do not change this line

;	Trap #5 Instruction
	rte
	ds.b	6-(@-($200+6*36))	; Do not change this line

;	Trap #6 Instruction
	rte
	ds.b	6-(@-($200+6*37))	; Do not change this line

;	Trap #7 Instruction
	rte
	ds.b	6-(@-($200+6*38))	; Do not change this line

;	Trap #8 Instruction
	rte
	ds.b	6-(@-($200+6*39))	; Do not change this line

;	Trap #9 Instruction
	rte
	ds.b	6-(@-($200+6*40))	; Do not change this line

;	Trap #10 Instruction
	rte
	ds.b	6-(@-($200+6*41))	; Do not change this line

;	Trap #11 Instruction
	rte
	ds.b	6-(@-($200+6*42))	; Do not change this line

;	Trap #12 Instruction
	rte
	ds.b	6-(@-($200+6*43))	; Do not change this line

;	Trap #13 Instruction
	rte
	ds.b	6-(@-($200+6*44))	; Do not change this line

;	Trap #14 Instruction
	rte
	ds.b	6-(@-($200+6*45))	; Do not change this line

;	Trap #15 Instruction
	rte
	ds.b	6-(@-($200+6*46))	; Do not change this line


	ds.b	186
	dc.l	__sh2_m				; Source
	dc.l	$00000000			; Destination
	dc.l	__sh2_e-__sh2_m			; Size
	dc.l	$06000000+$120			; Master SH2 Jump
	dc.l	$06000000+$120+(__sh2_s-__sh2_m); Slave SH2 Jump	
	dc.l	$06000000			; Master SH2 VBR
	dc.l	$06000000+(__sh2_s-__sh2_m)	; Slave SH2 VBR
	
ICD_MARS:
	dc.w	$287C,$FFFF,$FFC0,$23FC,$0000,$0000,$00A1,$5128
	dc.w	$46FC,$2700,$4BF9,$00A1,$0000,$7001,$0CAD,$4D41
	dc.w	$5253,$30EC,$6600,$03E6,$082D,$0007,$5101,$67F8
	dc.w	$4AAD,$0008,$6710,$4A6D,$000C,$670A,$082D,$0000
	dc.w	$5101,$6600,$03B8,$102D,$0001,$0200,$000F,$6706
	dc.w	$2B78,$055A,$4000,$7200,$2C41,$4E66,$41F9,$0000
	dc.w	$04D4,$6100,$0152,$6100,$0176,$47F9,$0000,$04E8
	dc.w	$43F9,$00A0,$0000,$45F9,$00C0,$0011,$3E3C,$0100
	dc.w	$7000,$3B47,$1100,$3B47,$1200,$012D,$1100,$66FA
	dc.w	$7425,$12DB,$51CA,$FFFC,$3B40,$1200,$3B40,$1100
	dc.w	$3B47,$1200,$149B,$149B,$149B,$149B,$41F9,$0000
	dc.w	$04C0,$43F9,$00FF,$0000,$22D8,$22D8,$22D8,$22D8
	dc.w	$22D8,$22D8,$22D8,$22D8,$41F9,$00FF,$0000,$4ED0
	dc.w	$1B7C,$0001,$5101,$41F9,$0000,$06BC,$D1FC,$0088
	dc.w	$0000,$4ED0,$0404,$303C,$076C,$0000,$0000,$FF00
	dc.w	$8137,$0002,$0100,$0000,$AF01,$D91F,$1127,$0021
	dc.w	$2600,$F977,$EDB0,$DDE1,$FDE1,$ED47,$ED4F,$D1E1
	dc.w	$F108,$D9C1,$D1E1,$F1F9,$F3ED,$5636,$E9E9,$9FBF
	dc.w	$DFFF,$4D41,$5253,$2049,$6E69,$7469,$616C,$2026
	dc.w	$2053,$6563,$7572,$6974,$7920,$5072,$6F67,$7261
	dc.w	$6D20,$2020,$2020,$2020,$2020,$2043,$6172,$7472
	dc.w	$6964,$6765,$2056,$6572,$7369,$6F6E,$2020,$2020
	dc.w	$436F,$7079,$7269,$6768,$7420,$5345,$4741,$2045
	dc.w	$4E54,$4552,$5052,$4953,$4553,$2C4C,$5444,$2E20
	dc.w	$3139,$3934,$2020,$2020,$2020,$2020,$2020,$2020
	dc.w	$2020,$2020,$2020,$2020,$2020,$2020,$2020,$2020
	dc.w	$2020,$2020,$2020,$524F,$4D20,$5665,$7273,$696F
	dc.w	$6E20,$312E,$3000,$48E7,$C040,$43F9,$00C0,$0004
	dc.w	$3011,$303C,$8000,$323C,$0100,$3E3C,$0012,$1018
	dc.w	$3280,$D041,$51CF,$FFF8,$4CDF,$0203,$4E75,$48E7
	dc.w	$81C0,$41F9,$0000,$063E,$43F9,$00C0,$0004,$3298
	dc.w	$3298,$3298,$3298,$3298,$3298,$3298,$2298,$3341
	dc.w	$FFFC,$3011,$0800,$0001,$66F8,$3298,$3298,$7000
	dc.w	$22BC,$C000,$0000,$7E0F,$3340,$FFFC,$3340,$FFFC
	dc.w	$3340,$FFFC,$3340,$FFFC,$51CF,$FFEE,$22BC,$4000
	dc.w	$0010,$7E09,$3340,$FFFC,$3340,$FFFC,$3340,$FFFC
	dc.w	$3340,$FFFC,$51CF,$FFEE,$4CDF,$0381,$4E75,$8114
	dc.w	$8F01,$93FF,$94FF,$9500,$9600,$9780,$4000,$0080
	dc.w	$8104,$8F02,$48E7,$C140,$43F9,$00A1,$5180,$08A9
	dc.w	$0007,$FF80,$66F8,$3E3C,$00FF,$7000,$7200,$337C
	dc.w	$00FF,$0004,$3341,$0006,$3340,$0008,$4E71,$0829
	dc.w	$0001,$000B,$66F8,$0641,$0100,$51CF,$FFE8,$4CDF
	dc.w	$0283,$4E75,$48E7,$8180,$41F9,$00A1,$5200,$08A8
	dc.w	$0007,$FF00,$66F8,$3E3C,$001F,$20C0,$20C0,$20C0
	dc.w	$20C0,$51CF,$FFF6,$4CDF,$0181,$4E75,$41F9,$00FF
	dc.w	$0000,$3E3C,$07FF,$7000,$20C0,$20C0,$20C0,$20C0
	dc.w	$20C0,$20C0,$20C0,$20C0,$51CF,$FFEE,$3B7C,$0000
	dc.w	$1200,$7E0A,$51CF,$FFFE,$43F9,$00A1,$5100,$7000
	dc.w	$2340,$0020,$2340,$0024,$1B7C,$0003,$5101,$2E79
	dc.w	$0088,$0000,$0891,$0007,$66FA,$7000,$3340,$0002
	dc.w	$3340,$0004,$3340,$0006,$2340,$0008,$2340,$000C
	dc.w	$3340,$0010,$3340,$0030,$3340,$0032,$3340,$0038
	dc.w	$3340,$0080,$3340,$0082,$08A9,$0000,$008B,$66F8
	dc.w	$6100,$FF12,$08E9,$0000,$008B,$67F8,$6100,$FF06
	dc.w	$08A9,$0000,$008B,$6100,$FF3C,$303C,$0040,$2229
	dc.w	$0020,$0C81,$5351,$4552,$6700,$0092,$303C,$0080
	dc.w	$2229,$0020,$0C81,$5344,$4552,$6700,$0080,$21FC
	dc.w	$0088,$02A2,$0070,$303C,$0002,$7200,$122D,$0001
	dc.w	$1429,$0080,$E14A,$8242,$0801,$000F,$660A,$0801
	dc.w	$0006,$6700,$0058,$6008,$0801,$0006,$6600,$004E
	dc.w	$7020,$41F9,$0088,$0000,$3C28,$018E,$4A46,$6700
	dc.w	$0010,$3429,$0028,$0C42,$0000,$67F6,$B446,$662C
	dc.w	$7000,$2340,$0028,$2340,$002C,$3E14,$2C7C,$FFFF
	dc.w	$FFC0,$4CD6,$7FF9,$44FC,$0000,$6014,$43F9,$00A1
	dc.w	$5100,$3340,$0006,$303C,$8000,$6004,$44FC,$0001


__start:

	bra	__entry


	align 4
__sh2_m:			; Start of Master SH2 execution
	incbin	"sh2_m.bin"
__sh2_s:
	incbin	"sh2_s.bin"
	dc.l	PWMSamples+$22000000	;dirty hack to reference the PWMSamples in SH2
__sh2_e:

	align 4

;--------------------------------
; CODE START - DO NOT EDIT ANYTHING ABOVE
;--------------------------------

__entry:

Entrypoint:

		tst.l	($A10008).l		;Test Port A control
		bne	PortA_Ok

		tst.w	($A1000C).l		;Test Port C control

PortA_Ok:
		bne	SkipSetup

		move.b	($A10001).l,d0		;version
		andi.b	#$F,d0
		beq	SkipSecurity		;if the smd/gen model is 1, skip the security
		move.l	#'SEGA',($A14000).l

SkipSecurity:   

		move.w	($C00004).l,d0		;test if VDP works

		moveq	#0,d0
		movea.l	d0,a6
		move.l	a6,usp			;set usp to $0
		
;---------------------
; Setup VDP registers
;---------------------
		lea	(VDPSetupArrayI)(pc),a0
		move.w	#(VDPSetupArrayIEnd-VDPSetupArrayI)/2,d1	;$18 VDP registers
		
VDPSetupLoop:
		move.w	(a0)+,($C00004).l
		dbf	d1,VDPSetupLoop
		
		
		move.l	#$40000080,($C00004).l
		move.w	#0,($C00000).l		;clean the screen
	
	
;---------------------
; Init the Z80
;---------------------	

		move.w	#$100,($A11100).l	;Stop the Z80
		move.w	#$100,($A11200).l	;Reset the Z80
		
Waitforz80:
		btst	#0,($A11100).l
		bne	Waitforz80		;Wait for z80 to halt
		
		lea	(Z80Init)(pc),a0
		lea	($A00000).l,a1
		move.w	#Z80InitEnd-Z80Init,d1
		
InitZ80:
		move.b	(a0)+,(a1)+
		dbf	d1,InitZ80
		
		move.w	#0,($A11200).l
		move.w	#0,($A11100).l		;Start the Z80
		move.w	#$100,($A11200).l
		
	
;---------------------
; Reset the RAM
;---------------------	

		lea	($FFFF0000).l,a0
		move.w	#$3fff,d1
		
ClearRAM:
		move.l	#0,(a0)+
		dbf	d1,ClearRAM
		
		
;---------------------
; VDP again
;---------------------			
		
		move.w	#$8174,($C00004).l
		move.w	#$8F02,($C00004).l
		
		
;---------------------
; Clear the CRAM
;---------------------	

		move.l	#$C0000000,($C00004).l	;Set VDP ctrl to CRAM write
		move.w	#$3f,d1
		
ClearCRAM:
		move.w	#0,($C00000).l
		dbf	d1,ClearCRAM
		
			
;---------------------
; Clear the VDP stuff
;---------------------		

		move.l	#$40000010,($C00004).l
		move.w	#$13,d1
		
ClearStuff:
		move.l	#0,($C00000).l
		dbf	d1,ClearStuff
		

;---------------------
; Init the PSG
;---------------------	

		move.b	#$9F,($C00011).l
		move.b	#$BF,($C00011).l
		move.b	#$DF,($C00011).l
		move.b	#$FF,($C00011).l
		
		
		move.w	#0,($A11200).l
		
		
;---------------------
; Load the z80 driver
;---------------------

		move.w	#$100,($A11100).l	;Stop the Z80
		move.w	#$100,($A11200).l	;Reset the Z80
		
Waitforz80a:
		btst	#0,($A11100).l
		bne	Waitforz80a		;Wait for z80 to halt
		
		lea	(Z80Driver)(pc),a0
		lea	($A00000).l,a1
		move.W	#Z80DriverEnd-Z80Driver,d1
		
LoadZ80Driver:
		move.b	(a0)+,(a1)+
		dbf	d1,LoadZ80Driver
		
		move.w	#0,($A11100).l		;Start the Z80
	
;---------------------
; Clear the registers
; and set the SR
;---------------------	

		movem.l	($FF0000).l,d0-a6	
		lea	($FFFE00).l,a7
		move	#$2700,sr

SkipSetup:	

	
;-----------------------
; Here starts your code
;-----------------------
Main:

		tst.w	($C00004).l
		btst	#6,($A1000D).l
		beq.s	Init_ProgramRAMClear

		cmpi.l	#'init',($FFFFFFFC).w ; has checksum routine already run?
		beq.w	GameInit	; if yes, branch

Init_ProgramRAMClear:
		lea	($FFFFFE00).w,a6
		moveq	#0,d7
		move.w	#$7F,d6

loc_348:			
		move.l	d7,(a6)+
		dbf	d6,loc_348
		move.b	($A10001).l,d0
		andi.b	#$C0,d0
		move.b	d0,($FFFFFFF8).w
		move.l	#'init',($FFFFFFFC).w ; set flag so checksum won't be run again

GameInit:		
		lea	($FF0000).l,a6
		moveq	#0,d7
		move.w	#$3F7F,d6

GameClrRAM:
		move.l	d7,(a6)+
		dbf	d6,GameClrRAM	; fill RAM ($0000-$FDFF) with $0
		bsr.w	VDPSetupGame
		bsr.w	SoundDriverLoad
		bsr.w	JoypadInit
		move.b	#0,($FFFFF600).w ; set Game Mode to Sega Screen

MainGameLoop:	
		move.b	($FFFFF600).w,d0 ; load	Game Mode
		andi.w	#$1C,d0
		jsr	GameModeArray(pc,d0.w) ; jump to apt location in ROM
		bra.s	MainGameLoop

; ---------------------------------------------------------------------------
; Main game mode array
; ---------------------------------------------------------------------------

GameModeArray:				; Sega Screen (00)
		bra.w	SegaScreen
		bra.w	TitleScreen	; Title	Screen (04)
		bra.w	Level		; Demo Mode (08)
		bra.w	Level		; Normal Level (0C)
		bra.w	SpecialStage	; Special Stage	(10)
		bra.w	ContinueScreen	; Continue Screen (14)
		bra.w	EndingSequence	; End of game sequence (18)
		bra.w	Credits		; Credits (1C)
		rts			



; ---------------------------------------------------------------------------
; Sega screen
; ---------------------------------------------------------------------------

SegaScreen:				; ...
		move.b	#$E4,d0
		bsr.w	PlaySound_Special ; stop music
		bsr.w	ClearPLC
		bsr.w	Pal_FadeFrom
		lea	($C00004).l,a6
		move.w	#$8004,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$8700,(a6)
		move.w	#$8B00,(a6)
		clr.b	($FFFFF64E).w
		move	#$2700,sr
		move.w	($FFFFF60C).w,d0
		andi.b	#$BF,d0
		move.w	d0,($C00004).l
		bsr.w	ClearScreen
		move.l	#$40000000,($C00004).l
		lea	$900000+(Nem_SegaLogo).l,a0 ; load Sega	logo patterns
		bsr.w	NemDec
		lea	($FF0000).l,a1
		lea	$900000+(Eni_SegaLogo).l,a0 ; load Sega	logo mappings
		move.w	#0,d0
		bsr.w	EniDec
		lea	($FF0000).l,a1
		move.l	#$65100003,d0
		moveq	#$17,d1
		moveq	#7,d2
		bsr.w	ShowVDPGraphics
		lea	($FF0180).l,a1
		move.l	#$40000003,d0
		moveq	#$27,d1
		moveq	#$1B,d2
		bsr.w	ShowVDPGraphics
;		dc.w	$60fe
		moveq	#0,d0
		bsr.w	PalLoad2	; load Sega logo pallet
		move.w	#-$A,($FFFFF632).w
		move.w	#0,($FFFFF634).w
		move.w	#0,($FFFFF662).w
		move.w	#0,($FFFFF660).w
		move.w	($FFFFF60C).w,d0
		ori.b	#$40,d0
		move.w	d0,($C00004).l

Sega_WaitPallet:			; ...
		move.b	#2,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	PalCycle_Sega
		bne.s	Sega_WaitPallet
		move.b	#$b5,d0
		move.b	#$E1,d0
		bsr.w	PlaySound_Special ; play "SEGA"	sound
		move.b	#$14,($FFFFF62A).w
		bsr.w	DelayProgram
		move.w	#$1E,($FFFFF614).w

Sega_WaitEnd:				; ...
;		bra	ChecksumError
		move.b	#2,($FFFFF62A).w
		bsr.w	DelayProgram
		tst.w	($FFFFF614).w
		beq.s	Sega_GotoTitle
		andi.b	#$80,($FFFFF605).w ; is	Start button pressed?
		beq.s	Sega_WaitEnd	; if not, branch

Sega_GotoTitle:				; ...
		move.b	#4,($FFFFF600).w ; go to title screen
;		bra	ChecksumError
		rts	

		rts

; ---------------------------------------------------------------------------
; Title	screen
; ---------------------------------------------------------------------------

TitleScreen:				; ...
		move.b	#$E4,d0
		bsr.w	PlaySound_Special ; stop music
		bsr.w	ClearPLC
		bsr.w	Pal_FadeFrom
		move	#$2700,sr
		bsr.w	SoundDriverLoad
		lea	($C00004).l,a6
		move.w	#$8004,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$9001,(a6)
		move.w	#$9200,(a6)
		move.w	#$8B03,(a6)
		move.w	#$8720,(a6)
		clr.b	($FFFFF64E).w
		bsr.w	ClearScreen
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

Title_ClrObjRam:			; ...
		move.l	d0,(a1)+
		dbf	d1,Title_ClrObjRam ; fill object RAM ($D000-$EFFF) with	$0
		move.l	#$40000000,($C00004).l
		lea	$900000+(Nem_JapNames),a0 ; load Japanese credits
		bsr.w	NemDec
		move.l	#$54C00000,($C00004).l
		lea	$900000+(Nem_CreditText),a0 ;	load alphabet
		bsr.w	NemDec
		lea	($FF0000).l,a1
		lea	$900000+(Eni_JapNames),a0 ; load mappings for	Japanese credits
		move.w	#0,d0
		bsr.w	EniDec
		lea	($FF0000).l,a1
		move.l	#$40000003,d0
		moveq	#$27,d1
		moveq	#$1B,d2
		bsr.w	ShowVDPGraphics
		lea	($FFFFFB80).w,a1
		moveq	#0,d0
		move.w	#$1F,d1

Title_ClrPallet:			; ...
		move.l	d0,(a1)+
		dbf	d1,Title_ClrPallet ; fill pallet with 0	(black)
		moveq	#3,d0		; load Sonic's pallet
		bsr.w	PalLoad1
		move.b	#$8A,($FFFFD080).w ; load "SONIC TEAM PRESENTS"	object
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		bsr.w	Pal_FadeTo
		move	#$2700,sr
		move.l	#$40000001,($C00004).l
		lea	$900000+(Nem_TitleFg),a0 ; load title	screen patterns
		bsr.w	NemDec
		move.l	#$60000001,($C00004).l
		lea	$900000+(Nem_TitleSonic),a0 ;	load Sonic title screen	patterns
		bsr.w	NemDec
		move.l	#$62000002,($C00004).l
		lea	$900000+(Nem_TitleTM),a0 ; load "TM" patterns
		bsr.w	NemDec
		lea	($C00000).l,a6
		move.l	#$50000003,4(a6)
		lea	(Art_Text)(pc),a5
		move.w	#$28F,d1

Title_LoadText:				; ...
		move.w	(a5)+,(a6)
		dbf	d1,Title_LoadText ; load uncompressed text patterns
		move.b	#0,($FFFFFE30).w ; clear lamppost counter
		move.w	#0,($FFFFFE08).w ; disable debug item placement	mode
		move.w	#0,($FFFFFFF0).w ; disable debug mode
		move.w	#0,($FFFFFFEA).w
		move.w	#0,($FFFFFE10).w ; set level to	GHZ (00)
		move.w	#0,($FFFFF634).w ; disable pallet cycling
		bsr.w	LevelSizeLoad
		bsr.w	DeformBgLayer
		lea	($FFFFB000).w,a1
		lea	$900000+(Blk16_GHZ),a0 ; load	GHZ 16x16 mappings
		move.w	#0,d0
		bsr.w	EniDec
		lea	$900000+(Blk256_GHZ),a0 ; load GHZ 256x256 mappings
		lea	($FF0000).l,a1
		bsr.w	KosDec
		bsr.w	LevelLayoutLoad
		bsr.w	Pal_FadeFrom
		move	#$2700,sr
		bsr.w	ClearScreen
		lea	($C00004).l,a5
		lea	($C00000).l,a6
		lea	($FFFFF708).w,a3
		lea	($FFFFA440).w,a4
		move.w	#$6000,d2
		bsr.w	LoadTilesFromStart2
		lea	($FF0000).l,a1
		lea	$900000+(Eni_Title),a0 ; load	title screen mappings
		move.w	#0,d0
		bsr.w	EniDec
		lea	($FF0000).l,a1
		move.l	#$42060003,d0
		moveq	#$21,d1
		moveq	#$15,d2
		bsr.w	ShowVDPGraphics
		move.l	#$40000000,($C00004).l
		lea	$900000+(Nem_GHZ_1st),a0 ; load GHZ patterns
		bsr.w	NemDec
		moveq	#1,d0		; load title screen pallet
		bsr.w	PalLoad1
		move.b	#$8A,d0		; play title screen music
		bsr.w	PlaySound_Special
		move.b	#0,($FFFFFFFA).w ; disable debug mode
		move.w	#$178,($FFFFF614).w ; run title	screen for $178	frames
		lea	($FFFFD080).w,a1
		moveq	#0,d0
		move.w	#7,d1

Title_ClrObjRam2:			; ...
		move.l	d0,(a1)+
		dbf	d1,Title_ClrObjRam2
		move.b	#$E,($FFFFD040).w ; load big Sonic object
		move.b	#$F,($FFFFD080).w ; load "PRESS	START BUTTON" object
		move.b	#$F,($FFFFD0C0).w ; load "TM" object
		move.b	#3,($FFFFD0DA).w
		move.b	#$F,($FFFFD100).w
		move.b	#2,($FFFFD11A).w
		jsr	$880000+ObjectsLoad
		bsr.w	DeformBgLayer
		jsr	$880000+BuildSprites
		moveq	#0,d0
		bsr.w	LoadPLC2
		move.w	#0,($FFFFFFE4).w
		move.w	#0,($FFFFFFE6).w
		move.w	($FFFFF60C).w,d0
		ori.b	#$40,d0
		move.w	d0,($C00004).l
		bsr.w	Pal_FadeTo

loc_317C:				; ...
		move.b	#4,($FFFFF62A).w
		bsr.w	DelayProgram
		jsr	$880000+ObjectsLoad
		bsr.w	DeformBgLayer
		jsr	$880000+BuildSprites
		bsr.w	PalCycle_Title
		bsr.w	RunPLC_RAM
		move.w	($FFFFD008).w,d0
		addq.w	#2,d0
		move.w	d0,($FFFFD008).w ; move	Sonic to the right
		cmpi.w	#$1C00,d0	; has Sonic object passed x-position $1C00?
		bcs.s	Title_ChkRegion	; if not, branch
		move.b	#0,($FFFFF600).w ; go to Sega screen
		rts	

Title_ChkRegion:			; ...
		tst.b	($FFFFFFF8).w	; check	if the machine is US or	Japanese
		bpl.s	Title_RegionJ	; if Japanese, branch
		lea	(LevelSelectCode_US)(pc),a0 ; load US code
		bra.s	Title_EnterCheat

Title_RegionJ:				; ...
		lea	(LevelSelectCode_J)(pc),a0 ; load	J code

Title_EnterCheat:			; ...
		move.w	($FFFFFFE4).w,d0
		adda.w	d0,a0
		move.b	($FFFFF605).w,d0 ; get button press
		andi.b	#$F,d0		; read only up/down/left/right buttons
		cmp.b	(a0),d0		; does button press match the cheat code?
		bne.s	loc_3210	; if not, branch
		addq.w	#1,($FFFFFFE4).w ; next	button press
		tst.b	d0
		bne.s	Title_CountC
		lea	($FFFFFFE0).w,a0
		move.w	($FFFFFFE6).w,d1
		lsr.w	#1,d1
		andi.w	#3,d1
		beq.s	Title_PlayRing
		tst.b	($FFFFFFF8).w
		bpl.s	Title_PlayRing
		moveq	#1,d1
		move.b	d1,1(a0,d1.w)

Title_PlayRing:				; ...
		move.b	#1,(a0,d1.w)	; activate cheat
		move.b	#$B5,d0		; play ring sound when code is entered
		bsr.w	PlaySound_Special
		bra.s	Title_CountC

loc_3210:				; ...
		tst.b	d0
		beq.s	Title_CountC
		cmpi.w	#9,($FFFFFFE4).w
		beq.s	Title_CountC
		move.w	#0,($FFFFFFE4).w

Title_CountC:				; ...
		move.b	($FFFFF605).w,d0
		andi.b	#$20,d0		; is C button pressed?
		beq.s	loc_3230	; if not, branch
		addq.w	#1,($FFFFFFE6).w ; increment C button counter

loc_3230:				; ...
		tst.w	($FFFFF614).w
		beq.w	Demo
		andi.b	#$80,($FFFFF605).w ; check if Start is pressed
		beq.w	loc_317C	; if not, branch

Title_ChkLevSel:			; ...
		tst.b	($FFFFFFE0).w	; check	if level select	code is	on
		beq.w	PlayLevel	; if not, play level
		btst	#6,($FFFFF604).w ; check if A is pressed
		beq.w	PlayLevel	; if not, play level
		moveq	#2,d0
		bsr.w	PalLoad2	; load level select pallet
		lea	($FFFFCC00).w,a1
		moveq	#0,d0
		move.w	#$DF,d1

Title_ClrScroll:			; ...
		move.l	d0,(a1)+
		dbf	d1,Title_ClrScroll ; fill scroll data with 0
		move.l	d0,($FFFFF616).w
		move	#$2700,sr
		lea	($C00000).l,a6
		move.l	#$60000003,($C00004).l
		move.w	#$3FF,d1

Title_ClrVram:				; ...
		move.l	d0,(a6)
		dbf	d1,Title_ClrVram ; fill	VRAM with 0
		bsr.w	LevSelTextLoad
; ---------------------------------------------------------------------------
; Level	Select
; ---------------------------------------------------------------------------

LevelSelect:				; ...
		move.b	#4,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	LevSelControls
		bsr.w	RunPLC_RAM
		tst.l	($FFFFF680).w
		bne.s	LevelSelect
		andi.b	#$F0,($FFFFF605).w ; is	A, B, C, or Start pressed?
		beq.s	LevelSelect	; if not, branch
		move.w	($FFFFFF82).w,d0
		cmpi.w	#$14,d0		; have you selected item $14 (sound test)?
		bne.s	LevSel_Level_SS	; if not, go to	Level/SS subroutine
		move.w	($FFFFFF84).w,d0
		addi.w	#$80,d0
		tst.b	($FFFFFFE3).w	; is Japanese Credits cheat on?
		beq.s	LevSel_NoCheat	; if not, branch
		cmpi.w	#$9F,d0		; is sound $9F being played?
		beq.s	LevSel_Ending	; if yes, branch
		cmpi.w	#$9E,d0		; is sound $9E being played?
		beq.s	LevSel_Credits	; if yes, branch

LevSel_NoCheat:				; ...
		cmpi.w	#$94,d0		; is sound $80-$94 being played?
		bcs.s	LevSel_PlaySnd	; if yes, branch
		cmpi.w	#$A0,d0		; is sound $95-$A0 being played?
		bcs.s	LevelSelect	; if yes, branch

LevSel_PlaySnd:				; ...
		bsr.w	PlaySound_Special
		bra.s	LevelSelect

LevSel_Ending:				; ...
		move.b	#$18,($FFFFF600).w ; set screen	mode to	$18 (Ending)
		move.w	#$600,($FFFFFE10).w ; set level	to 0600	(Ending)
		rts	

LevSel_Credits:				; ...
		move.b	#$1C,($FFFFF600).w ; set screen	mode to	$1C (Credits)
		move.b	#$91,d0
		bsr.w	PlaySound_Special ; play credits music
		move.w	#0,($FFFFFFF4).w
		rts	

LevSel_Level_SS:			; ...
		add.w	d0,d0
		move.w	LSelectPointers(pc,d0.w),d0 ; load level number
		bmi.w	LevelSelect
		cmpi.w	#$700,d0	; check	if level is 0700 (Special Stage)
		bne.s	LevSel_Level	; if not, branch
		move.b	#$10,($FFFFF600).w ; set screen	mode to	$10 (Special Stage)
		clr.w	($FFFFFE10).w	; clear	level
		move.b	#3,($FFFFFE12).w ; set lives to	3
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.l	d0,($FFFFFE26).w ; clear score
		rts	

LevSel_Level:				; ...
		andi.w	#$3FFF,d0
		move.w	d0,($FFFFFE10).w ; set level number

PlayLevel:				; ...
		move.b	#$C,($FFFFF600).w ; set	screen mode to $0C (level)
		move.b	#3,($FFFFFE12).w ; set lives to	3
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.l	d0,($FFFFFE26).w ; clear score
		move.b	d0,($FFFFFE16).w ; clear special stage number
		move.b	d0,($FFFFFE57).w ; clear emeralds
		move.l	d0,($FFFFFE58).w ; clear emeralds
		move.l	d0,($FFFFFE5C).w ; clear emeralds
		move.b	d0,($FFFFFE18).w ; clear continues
		move.b	#$E0,d0
		bsr.w	PlaySound_Special ; fade out music
		rts	
; ---------------------------------------------------------------------------
; Level	select - level pointers
; ---------------------------------------------------------------------------
LSelectPointers:dc.w	 0,    1,    2,	$100
		dc.w  $101, $102, $200,	$201
		dc.w  $202, $300, $301,	$302
		dc.w  $400, $401, $402,	$500
		dc.w  $501, $103, $502,	$700
		dc.w $8000
; ---------------------------------------------------------------------------
; Level	select codes
; ---------------------------------------------------------------------------
LevelSelectCode_J:dc.b 1, 2, 4,	8, 0, $FF ; ...
LevelSelectCode_US:dc.b	1, 2, 4, 8, 0, $FF ; ...
; ---------------------------------------------------------------------------
; Demo mode
; ---------------------------------------------------------------------------

Demo:					; ...
		move.w	#$1E,($FFFFF614).w

loc_33B6:				; ...
		move.b	#4,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	DeformBgLayer
		bsr.w	PalCycle_Load
		bsr.w	RunPLC_RAM
		move.w	($FFFFD008).w,d0
		addq.w	#2,d0
		move.w	d0,($FFFFD008).w
		cmpi.w	#$1C00,d0
		bcs.s	loc_33E4
		move.b	#0,($FFFFF600).w ; set screen mode to 00 (level)
		rts	

loc_33E4:				; ...
		andi.b	#$80,($FFFFF605).w ; is	Start button pressed?
		bne.w	Title_ChkLevSel	; if yes, branch
		tst.w	($FFFFF614).w
		bne.w	loc_33B6
		move.b	#$E0,d0
		bsr.w	PlaySound_Special ; fade out music
		move.w	($FFFFFFF2).w,d0 ; load	demo number
		andi.w	#7,d0
		add.w	d0,d0
		move.w	Demo_Levels(pc,d0.w),d0	; load level number for	demo
		move.w	d0,($FFFFFE10).w
		addq.w	#1,($FFFFFFF2).w ; add 1 to demo number
		cmpi.w	#4,($FFFFFFF2).w ; is demo number less than 4?
		bcs.s	loc_3422	; if yes, branch
		move.w	#0,($FFFFFFF2).w ; reset demo number to	0

loc_3422:				; ...
		move.w	#1,($FFFFFFF0).w ; turn	demo mode on
		move.b	#8,($FFFFF600).w ; set screen mode to 08 (demo)
		cmpi.w	#$600,d0	; is level number 0600 (special	stage)?
		bne.s	Demo_Level	; if not, branch
		move.b	#$10,($FFFFF600).w ; set screen	mode to	$10 (Special Stage)
		clr.w	($FFFFFE10).w	; clear	level number
		clr.b	($FFFFFE16).w	; clear	special	stage number

Demo_Level:				; ...
		move.b	#3,($FFFFFE12).w ; set lives to	3
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.l	d0,($FFFFFE26).w ; clear score
		rts	
; ---------------------------------------------------------------------------
; Levels used in demos
; ---------------------------------------------------------------------------
Demo_Levels:	dc.w 0			; Green	Hill
		dc.w $200		; Marble
		dc.w $400		; Spring Yard
		dc.w $600		; Special Stage
; ---------------------------------------------------------------------------
; Subroutine to	change what you're selecting in the level select
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevSelControls:				; ...
		move.b	($FFFFF605).w,d1
		andi.b	#3,d1		; is up/down pressed and held?
		bne.s	LevSel_UpDown	; if yes, branch
		subq.w	#1,($FFFFFF80).w ; subtract 1 from time	to next	move
		bpl.s	LevSel_SndTest	; if time remains, branch

LevSel_UpDown:				; ...
		move.w	#$B,($FFFFFF80).w ; reset time delay
		move.b	($FFFFF604).w,d1
		andi.b	#3,d1		; is up/down pressed?
		beq.s	LevSel_SndTest	; if not, branch
		move.w	($FFFFFF82).w,d0
		btst	#0,d1		; is up	pressed?
		beq.s	LevSel_Down	; if not, branch
		subq.w	#1,d0		; move up 1 selection
		bcc.s	LevSel_Down
		moveq	#$14,d0		; if selection moves below 0, jump to selection	$14

LevSel_Down:				; ...
		btst	#1,d1		; is down pressed?
		beq.s	LevSel_Refresh	; if not, branch
		addq.w	#1,d0		; move down 1 selection
		cmpi.w	#$15,d0
		bcs.s	LevSel_Refresh
		moveq	#0,d0		; if selection moves above $14,	jump to	selection 0

LevSel_Refresh:				; ...
		move.w	d0,($FFFFFF82).w ; set new selection
		bsr.w	LevSelTextLoad	; refresh text
		rts	

LevSel_SndTest:				; ...
		cmpi.w	#$14,($FFFFFF82).w ; is	item $14 selected?
		bne.s	LevSel_NoMove	; if not, branch
		move.b	($FFFFF605).w,d1
		andi.b	#$C,d1		; is left/right	pressed?
		beq.s	LevSel_NoMove	; if not, branch
		move.w	($FFFFFF84).w,d0
		btst	#2,d1		; is left pressed?
		beq.s	LevSel_Right	; if not, branch
		subq.w	#1,d0		; subtract 1 from sound	test
		bcc.s	LevSel_Right
		moveq	#$4F,d0		; if sound test	moves below 0, set to $4F

LevSel_Right:				; ...
		btst	#3,d1		; is right pressed?
		beq.s	LevSel_Refresh2	; if not, branch
		addq.w	#1,d0		; add 1	to sound test
		cmpi.w	#$50,d0
		bcs.s	LevSel_Refresh2
		moveq	#0,d0		; if sound test	moves above $4F, set to	0

LevSel_Refresh2:			; ...
		move.w	d0,($FFFFFF84).w ; set sound test number
		bsr.w	LevSelTextLoad	; refresh text

LevSel_NoMove:				; ...
		rts	
; End of function LevSelControls

; ---------------------------------------------------------------------------
; Subroutine to	load level select text
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevSelTextLoad:				; ...
		lea	(LevelMenuText)(pc),a1
		lea	($C00000).l,a6
		move.l	#$62100003,d4	; screen position (text)
		move.w	#$E680,d3	; VRAM setting
		moveq	#$14,d1		; number of lines of text

loc_34FE:				; ...
		move.l	d4,4(a6)
		bsr.w	LevSel_ChgLine
		addi.l	#$800000,d4
		dbf	d1,loc_34FE
		moveq	#0,d0
		move.w	($FFFFFF82).w,d0
		move.w	d0,d1
		move.l	#$62100003,d4
		lsl.w	#7,d0
		swap	d0
		add.l	d0,d4
		lea	(LevelMenuText)(pc),a1
		lsl.w	#3,d1
		move.w	d1,d0
		add.w	d1,d1
		add.w	d0,d1
		adda.w	d1,a1
		move.w	#$C680,d3
		move.l	d4,4(a6)
		bsr.w	LevSel_ChgLine
		move.w	#$E680,d3
		cmpi.w	#$14,($FFFFFF82).w
		bne.s	loc_3550
		move.w	#$C680,d3

loc_3550:				; ...
		move.l	#$6C300003,($C00004).l ; screen	position (sound	test)
		move.w	($FFFFFF84).w,d0
		addi.w	#$80,d0
		move.b	d0,d2
		lsr.b	#4,d0
		bsr.w	LevSel_ChgSnd
		move.b	d2,d0
		bsr.w	LevSel_ChgSnd
		rts	
; End of function LevSelTextLoad


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevSel_ChgSnd:				; ...
		andi.w	#$F,d0
		cmpi.b	#$A,d0
		bcs.s	loc_3580
		addi.b	#7,d0

loc_3580:				; ...
		add.w	d3,d0
		move.w	d0,(a6)
		rts	
; End of function LevSel_ChgSnd


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevSel_ChgLine:				; ...
		moveq	#$17,d2		; number of characters per line

loc_3588:				; ...
		moveq	#0,d0
		move.b	(a1)+,d0
		bpl.s	loc_3598
		move.w	#0,(a6)
		dbf	d2,loc_3588
		rts	

loc_3598:				; ...
		add.w	d3,d0
		move.w	d0,(a6)
		dbf	d2,loc_3588
		rts	
; End of function LevSel_ChgLine

; ---------------------------------------------------------------------------
; Level	select menu text
; ---------------------------------------------------------------------------
LevelMenuText:	dc.b $17, $22, $15, $15, $1E, $FF, $18,	$19, $1C, $1C, $FF, $10, $1F, $1E, $15,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	1, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF ; ...
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	2, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $23, $24, $11, $17, $15, $FF,	3, $1C,	$11, $12, $F, $22, $19,	$1E, $24, $18, $FF, $10, $1F, $1E, $15,	$FF, $FF, $FF, $23, $24, $11, $17, $15,	$FF, 1
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	2, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	3, $1D,	$11, $22, $12, $1C, $15, $FF, $10, $1F,	$1E, $15, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $23, $24, $11, $17, $15, $FF,	1, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$23, $24, $11, $17, $15, $FF, 2
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	3, $23,	$24, $11, $22, $FF, $1C, $19, $17
		dc.b $18, $24, $FF, $10, $1F, $1E, $15,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	1, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $23, $24, $11, $17, $15, $FF,	2, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$23, $24, $11, $17, $15, $FF, 3
		dc.b $23, $20, $22, $19, $1E, $17, $FF,	$F, $11, $22, $14, $FF,	$10, $1F, $1E, $15, $FF, $23, $24, $11,	$17, $15, $FF, 1, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	2, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $23, $24, $11, $17, $15, $FF,	3, $23,	$13, $22, $11, $20, $FF, $12, $22, $11,	$19, $1E, $FF, $10, $1F, $1E, $15, $FF,	$23, $24, $11, $17, $15, $FF, 1
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	2, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $FF, $23, $24, $11, $17, $15, $FF,	3, $16,	$19, $1E, $11, $1C, $FF, $10, $1F, $1E,	$15, $FF, $FF, $FF, $FF, $FF, $FF
		dc.b $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF, $23, $20, $15, $13, $19, $11, $1C,	$FF, $23, $24, $11, $17, $15, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF
		dc.b $23, $1F, $25, $1E, $14, $FF, $23,	$15, $1C, $15, $13, $24, $FF, $FF, $FF,	$FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF,	$FF

		even
Art_Text:	dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60 ; ...
		dc.b $66, $60, $66, $60, $66, $66, 6, $60, $66,	0, $66,	0, 6, $66, $60,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	6, $66,	0, 0, $60, $66,	0
		dc.b 0,	0, $66,	0, 0, 6, $60, 0, 0, 6, $60, 0, 6, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $60, 0, 6,	0, $66,	0
		dc.b 0,	0, $66,	0, 0, 6, $60, 0, 0, $66, 0, 0, 6, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$66, $66, 0, 0,	0, $66,	0
		dc.b 0,	6, $60,	0, 0, 0, $66, 0, 6, 0, $66, 0, 6, $66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	6, $66,	0, 0, $60, $66,	0
		dc.b 6,	0, $60,	0, $66,	$66, $66, $60, 0, 6, $60, 0, 0,	$66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 0,	$60, 0,	0
		dc.b 0,	$66, $66, 0, 0,	0, 6, $60, 6, 0, $66, $60, 0, $66, $66,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	6, $66,	0, 0, $66, 0, 0
		dc.b 6,	$66, $60, 0, $66, 0, $66, 0, $66, 0, $66, 0, $66, $66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$66, $66, 0, 6,	0, $66,	0
		dc.b 0,	6, $60,	0, 0, $66, 0, 0, 6, $60, 0, 0, $66, $60, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60
		dc.b 0,	$66, $66, 0, 6,	$66, $60, 0, $66, 0, $66, 0, 6,	$66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60
		dc.b 6,	$60, 6,	$60, 0,	$66, $66, 0, 0,	0, $66,	0, 6, $66, $60,	0
		dc.b 0,	0, 0, 0, 0, 6, 0, 0, 0,	$66, $66, 0, 6,	6, 0, 0
		dc.b 0,	$66, $60, 0, 0,	6, 6, 0, 6, $66, $60, 0, 0, 6, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 6,	$66, $66, $60, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 6, $66, $66, $60
		dc.b 0,	0, 0, 0, 6, $66, $66, $60, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, $60, 0, 0, 0, $66, 0, 6,	$66, $66, $60
		dc.b 6,	$66, $66, $60, 0, 0, $66, 0, 0,	0, $60,	0, 0, 0, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, $60, 0, 0, 0, $66, 0, 6,	$66, $66, $60
		dc.b 6,	$66, $66, $60, 0, 0, $66, 0, 0,	0, $60,	0, 0, 0, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$60, 6,	$60, 6,	$60, 6,	$60
		dc.b 0,	$60, $66, 0, 0,	$66, $60, 0, 6,	$66, 0,	0, $66,	$60, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$66, $66, $60, 0, 0, $66, 0
		dc.b 0,	6, $60,	0, 0, $66, 0, 0, 6, $60, 0, 0, $66, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, $66,	$60, 0,	6, 6, $60
		dc.b 0,	$60, 6,	$60, 0,	$66, $66, $60, 6, $60, 6, $60, $66, 0, 6, $60
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 0,	$60, 6,	$60
		dc.b 6,	$66, $66, 0, 6,	$66, $60, 0, $66, 0, $66, 0, $66, $66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60
		dc.b 6,	$60, 0,	0, $66,	0, 0, 0, $66, 0, $66, 0, $66, $66, $60,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 0,	$66, 6,	$60
		dc.b 6,	$60, 6,	$60, 6,	$60, 6,	$60, $66, 0, $66, 0, $66, $66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, $60, 0, $66, 0, 0
		dc.b 6,	$60, 0,	0, 6, $66, $60,	0, $66,	0, 0, 0, $66, $66, $66,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, $60, 6, $66, 0, 0
		dc.b 6,	$60, 0,	0, 6, $66, $66,	0, $66,	$60, 0,	0, $66,	$60, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$66, 0,	$60
		dc.b 6,	$60, 0,	0, $66,	0, $66,	$60, $66, 0, $66, 0, $66, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, 0,	$60, 0,	$66, 6,	$60
		dc.b 6,	$60, 6,	$60, 6,	$66, $66, 0, $66, 0, $66, 0, $66, 0, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	6, $60,	0, 0, 6, $60, 0
		dc.b 0,	$66, 0,	0, 0, $66, 0, 0, 6, $60, 0, 0, 6, $60, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 6, $60, 0, 0, 6, $60
		dc.b 6,	0, $66,	0, $66,	0, $66,	0, $66,	$66, $60, 0, 6,	$66, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, 0,	$60, 0,	$66, 6,	$60
		dc.b 6,	$60, $66, 0, 6,	$66, $60, 0, $66, 0, $66, 0, $66, 0, 6,	$60
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	6, $60,	0, 0, $66, 0, 0
		dc.b 6,	$60, 0,	0, 6, $60, 0, 0, $66, 0, 0, 0, $66, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, 0,	$60, 0,	$66, 6,	$60
		dc.b 0,	$66, $66, $60, 6, 6, 6,	$60, 6,	0, 6, $60, $66,	0, 6, $60
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, 0,	$60, 0,	$66, 0,	$60
		dc.b 0,	$66, $60, $60, 6, 6, $66, 0, 6,	0, $66,	0, $66,	0, $66,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60
		dc.b $66, $60, $66, $60, $66, $60, $66,	$60, $66, 0, $66, 0, 6,	$66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 0,	$66, 0,	$60
		dc.b 6,	$60, 6,	$60, 6,	$66, $66, 0, $66, $60, 0, 0, $66, 0, 0,	0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 6,	$60, 6,	$60
		dc.b $66, 0, 6,	$60, $66, $66, $66, $60, $66, 0, $66, 0, $66, $66, $66,	$60
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, 0, 0,	$66, 0,	$60
		dc.b 6,	$60, 6,	$60, 6,	$66, $66, 0, $66, 0, $66, 0, $66, 0, $66, $60
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, $66, $60, 6, $60, 6, $60
		dc.b 6,	$66, 0,	0, 0, $66, $66,	0, $66,	0, $66,	$60, $66, $66, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$66, $66, $60, 0, 6, $60, 0
		dc.b 0,	6, $60,	0, 0, $66, 0, 0, 0, $66, 0, 0, 0, $66, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	$66, 0,	$60, 0,	$66, 0,	$60
		dc.b 6,	$60, 6,	$60, 6,	$60, 6,	0, $66,	$66, $66, 0, $66, $66, $60, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$60, 0,	$60, 6,	$60, 0,	$60
		dc.b 6,	$60, 6,	$60, 6,	$60, $66, 0, 6,	$66, $60, 0, $66, $66, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, $66, 0, 0,	$60, $66, 0, 0,	$60
		dc.b $66, 6, 6,	$60, $66, $66, $66, 0, $66, 0, $66, 0, $66, 0, $66, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 6,	$60, 0,	$60, 6,	$66, 6,	0
		dc.b 0,	$66, $60, 0, 0,	6, $60,	0, 0, $66, $66,	0, $66,	0, $66,	$60
		even



; ---------------------------------------------------------------------------
; Music	playlist
; ---------------------------------------------------------------------------
MusicList:	dc.b $81, $82, $83, $84, $85, $86, $8D,	0 ; ...
; ---------------------------------------------------------------------------
; Level
; ---------------------------------------------------------------------------

Level:					; ...
		bset	#7,($FFFFF600).w ; add $80 to screen mode (for pre level sequence)
		tst.w	($FFFFFFF0).w
		bmi.s	loc_37B6
		move.b	#$E0,d0
		bsr.w	PlaySound_Special ; fade out music

loc_37B6:				; ...
		bsr.w	ClearPLC
		bsr.w	Pal_FadeFrom
		tst.w	($FFFFFFF0).w
		bmi.s	Level_ClrRam
		move	#$2700,sr
		move.l	#$70000002,($C00004).l
		lea	$900000+(Nem_TitleCard).l,a0 ; load title card patterns
		bsr.w	NemDec
		move	#$2300,sr
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#4,d0
		lea	(MainLoadBlocks)(pc),a2
		lea	(a2,d0.w),a2
		moveq	#0,d0
		move.b	(a2),d0
		beq.s	loc_37FC
		bsr.w	LoadPLC		; load level patterns

loc_37FC:				; ...
		moveq	#1,d0
		bsr.w	LoadPLC		; load standard	patterns

Level_ClrRam:				; ...
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

Level_ClrObjRam:			; ...
		move.l	d0,(a1)+
		dbf	d1,Level_ClrObjRam ; clear object RAM
		lea	($FFFFF628).w,a1
		moveq	#0,d0
		move.w	#$15,d1

Level_ClrVars:				; ...
		move.l	d0,(a1)+
		dbf	d1,Level_ClrVars ; clear misc variables
		lea	($FFFFF700).w,a1
		moveq	#0,d0
		move.w	#$3F,d1

Level_ClrVars2:				; ...
		move.l	d0,(a1)+
		dbf	d1,Level_ClrVars2 ; clear misc variables
		lea	($FFFFFE60).w,a1
		moveq	#0,d0
		move.w	#$47,d1

Level_ClrVars3:				; ...
		move.l	d0,(a1)+
		dbf	d1,Level_ClrVars3 ; clear object variables
		move	#$2700,sr
		bsr.w	ClearScreen
		lea	($C00004).l,a6
		move.w	#$8B03,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$857C,(a6)
		move.w	#$9001,(a6)
		move.w	#$8004,(a6)
		move.w	#$8720,(a6)
		move.w	#$8ADF,($FFFFF624).w
		move.w	($FFFFF624).w,(a6)
		cmpi.b	#1,($FFFFFE10).w ; is level LZ?
		bne.s	Level_LoadPal	; if not, branch
		move.w	#$8014,(a6)
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		lea	(WaterHeight)(pc),a1 ; load water	height array
		move.w	(a1,d0.w),d0
		move.w	d0,($FFFFF646).w ; set water heights
		move.w	d0,($FFFFF648).w
		move.w	d0,($FFFFF64A).w
		clr.b	($FFFFF64D).w	; clear	water routine counter
		clr.b	($FFFFF64E).w	; clear	water movement
		move.b	#1,($FFFFF64C).w ; enable water

Level_LoadPal:				; ...
		move.w	#$1E,($FFFFFE14).w
		move	#$2300,sr
		moveq	#3,d0
		bsr.w	PalLoad2	; load Sonic's pallet line
		cmpi.b	#1,($FFFFFE10).w ; is level LZ?
		bne.s	Level_GetBgm	; if not, branch
		moveq	#$F,d0		; pallet number	$0F (LZ)
		cmpi.b	#3,($FFFFFE11).w ; is act number 3?
		bne.s	Level_WaterPal	; if not, branch
		moveq	#$10,d0		; pallet number	$10 (SBZ3)

Level_WaterPal:				; ...
		bsr.w	PalLoad3_Water	; load underwater pallet (see d0)
		tst.b	($FFFFFE30).w
		beq.s	Level_GetBgm
		move.b	($FFFFFE53).w,($FFFFF64E).w

Level_GetBgm:				; ...
		tst.w	($FFFFFFF0).w
		bmi.s	loc_3946
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		cmpi.w	#$103,($FFFFFE10).w ; is level SBZ3?
		bne.s	Level_BgmNotLZ4	; if not, branch
		moveq	#5,d0		; move 5 to d0

Level_BgmNotLZ4:			; ...
		cmpi.w	#$502,($FFFFFE10).w ; is level FZ?
		bne.s	Level_PlayBgm	; if not, branch
		moveq	#6,d0		; move 6 to d0

Level_PlayBgm:				; ...
		lea	(MusicList)(pc),a1 ; load	music playlist
		move.b	(a1,d0.w),d0	; add d0 to a1
		bsr.w	PlaySound	; play music
		move.b	#$34,($FFFFD080).w ; load title	card object

Level_TtlCard:				; ...
		move.b	#$C,($FFFFF62A).w
		bsr.w	DelayProgram
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		bsr.w	RunPLC_RAM
		move.w	($FFFFD108).w,d0
		cmp.w	($FFFFD130).w,d0 ; has title card sequence finished?
		bne.s	Level_TtlCard	; if not, branch
		tst.l	($FFFFF680).w	; are there any	items in the pattern load cue?
		bne.s	Level_TtlCard	; if yes, branch
		jsr	$880000+Hud_Base

loc_3946:				; ...
		moveq	#3,d0
		bsr.w	PalLoad1	; load Sonic's pallet line
		bsr.w	LevelSizeLoad
		bsr.w	DeformBgLayer
		bset	#2,($FFFFF754).w
		bsr.w	MainLoadBlockLoad ; load block mappings	and pallets
		bsr.w	LoadTilesFromStart
;		jsr	$880000+FloorLog_Unk
		bsr.w	ColIndexLoad
		bsr.w	LZWaterEffects
		move.b	#1,($FFFFD000).w ; load	Sonic object
		tst.w	($FFFFFFF0).w
		bmi.s	Level_ChkDebug
		move.b	#$21,($FFFFD040).w ; load HUD object

Level_ChkDebug:				; ...
		tst.b	($FFFFFFE2).w	; has debug cheat been entered?
		beq.s	Level_ChkWater	; if not, branch
		btst	#6,($FFFFF604).w ; is A	button pressed?
		beq.s	Level_ChkWater	; if not, branch
		move.b	#1,($FFFFFFFA).w ; enable debug	mode

Level_ChkWater:				; ...
		move.w	#0,($FFFFF602).w
		move.w	#0,($FFFFF604).w
		cmpi.b	#1,($FFFFFE10).w ; is level LZ?
		bne.s	Level_LoadObj	; if not, branch
		move.b	#$1B,($FFFFD780).w ; load water	surface	object
		move.w	#$60,($FFFFD788).w
		move.b	#$1B,($FFFFD7C0).w
		move.w	#$120,($FFFFD7C8).w

Level_LoadObj:				; ...
		jsr	$880000+ObjPosLoad
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		moveq	#0,d0
		tst.b	($FFFFFE30).w	; are you starting from	a lamppost?
		bne.s	loc_39E8	; if yes, branch
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.b	d0,($FFFFFE1B).w ; clear lives counter

loc_39E8:				; ...
		move.b	d0,($FFFFFE1A).w
		move.b	d0,($FFFFFE2C).w ; clear shield
		move.b	d0,($FFFFFE2D).w ; clear invincibility
		move.b	d0,($FFFFFE2E).w ; clear speed shoes
		move.b	d0,($FFFFFE2F).w
		move.w	d0,($FFFFFE08).w
		move.w	d0,($FFFFFE02).w
		move.w	d0,($FFFFFE04).w
		bsr.w	OscillateNumInit
		move.b	#1,($FFFFFE1F).w ; update score	counter
		move.b	#1,($FFFFFE1D).w ; update rings	counter
		move.b	#1,($FFFFFE1E).w ; update time counter
		move.w	#0,($FFFFF790).w
		lea	(Demo_Index).l,a1 ; load demo data
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#2,d0
		movea.l	(a1,d0.w),a1
		tst.w	($FFFFFFF0).w	; is demo mode on?
		bpl.s	Level_Demo	; if yes, branch
		lea	(Demo_EndIndex)(pc),a1 ; load ending demo	data
		move.w	($FFFFFFF4).w,d0
		subq.w	#1,d0
		lsl.w	#2,d0
		movea.l	(a1,d0.w),a1

Level_Demo:				; ...
		move.b	1(a1),($FFFFF792).w ; load key press duration
		subq.b	#1,($FFFFF792).w ; subtract 1 from duration
		move.w	#1800,($FFFFF614).w
		tst.w	($FFFFFFF0).w
		bpl.s	Level_ChkWaterPal
		move.w	#540,($FFFFF614).w
		cmpi.w	#4,($FFFFFFF4).w
		bne.s	Level_ChkWaterPal
		move.w	#510,($FFFFF614).w

Level_ChkWaterPal:			; ...
		cmpi.b	#1,($FFFFFE10).w ; is level LZ/SBZ3?
		bne.s	Level_Delay	; if not, branch
		moveq	#$B,d0		; pallet $0B (LZ underwater)
		cmpi.b	#3,($FFFFFE11).w ; is level SBZ3?
		bne.s	Level_WaterPal2	; if not, branch
		moveq	#$D,d0		; pallet $0D (SBZ3 underwater)

Level_WaterPal2:			; ...
		bsr.w	PalLoad4_Water

Level_Delay:				; ...
		move.w	#3,d1

Level_DelayLoop:			; ...
		move.b	#8,($FFFFF62A).w
		bsr.w	DelayProgram
		dbf	d1,Level_DelayLoop
		move.w	#$202F,($FFFFF626).w
		bsr.w	Pal_FadeTo2
		tst.w	($FFFFFFF0).w
		bmi.s	Level_ClrCardArt
		addq.b	#2,($FFFFD0A4).w ; make	title card move
		addq.b	#4,($FFFFD0E4).w
		addq.b	#4,($FFFFD124).w
		addq.b	#4,($FFFFD164).w
		bra.s	Level_StartGame

Level_ClrCardArt:			; ...
		moveq	#2,d0
		jsr	$880000+(LoadPLC).l	; load explosion patterns
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		addi.w	#$15,d0
		jsr	$880000+(LoadPLC).l	; load animal patterns (level no. + $15)

Level_StartGame:			; ...
		bclr	#7,($FFFFF600).w ; subtract 80 from screen mode

; ---------------------------------------------------------------------------
; Main level loop (when	all title card and loading sequences are finished)
; ---------------------------------------------------------------------------

Level_MainLoop:				; ...
		bsr.w	PauseGame
		move.b	#8,($FFFFF62A).w
		bsr.w	DelayProgram
		
;		bsr.w	vdptest
		
		addq.w	#1,($FFFFFE04).w ; add 1 to level timer
		bsr.w	MoveSonicInDemo
		bsr.w	LZWaterEffects
		jsr	$880000+ObjectsLoad
		tst.w	($FFFFFE08).w
		bne.s	loc_3B10
		cmpi.b	#6,($FFFFD024).w
		bcc.s	loc_3B14

loc_3B10:				; ...
		bsr.w	DeformBgLayer

loc_3B14:				; ...
		jsr	$880000+BuildSprites
		jsr	$880000+ObjPosLoad
		bsr.w	PalCycle_Load
		bsr.w	RunPLC_RAM
		bsr.w	OscillateNumDo
		bsr.w	ChangeRingFrame
		bsr.w	SignpostArtLoad
		cmpi.b	#8,($FFFFF600).w
		beq.s	Level_ChkDemo	; if screen mode is 08 (demo), branch
		tst.w	($FFFFFE02).w	; is the level set to restart?
		bne.w	Level		; if yes, branch
		cmpi.b	#$C,($FFFFF600).w
		beq.w	Level_MainLoop	; if screen mode is $0C	(level), branch
		rts	

Level_ChkDemo:				; ...
		tst.w	($FFFFFE02).w	; is level set to restart?
		bne.s	Level_EndDemo	; if yes, branch
		tst.w	($FFFFF614).w	; is there time	left on	the demo?
		beq.s	Level_EndDemo	; if not, branch
		cmpi.b	#8,($FFFFF600).w
		beq.w	Level_MainLoop	; if screen mode is 08 (demo), branch
		move.b	#0,($FFFFF600).w ; go to Sega screen
		rts	

Level_EndDemo:				; ...
		cmpi.b	#8,($FFFFF600).w ; is screen mode 08 (demo)?
		bne.s	loc_3B88	; if not, branch
		move.b	#0,($FFFFF600).w ; go to Sega screen
		tst.w	($FFFFFFF0).w	; is demo mode on?
		bpl.s	loc_3B88	; if yes, branch
		move.b	#$1C,($FFFFF600).w ; go	to credits

loc_3B88:				; ...
		move.w	#$3C,($FFFFF614).w
		move.w	#$3F,($FFFFF626).w
		clr.w	($FFFFF794).w

loc_3B98:				; ...
		move.b	#8,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	MoveSonicInDemo
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		jsr	$880000+ObjPosLoad
		subq.w	#1,($FFFFF794).w
		bpl.s	loc_3BC8
		move.w	#2,($FFFFF794).w
		bsr.w	Pal_FadeOut

loc_3BC8:				; ...
		tst.w	($FFFFF614).w
		bne.s	loc_3B98
		rts	
;		HI
;vdptest:
;		cmp.w	#$1337,($fffffffe).w
;		beq	@no
;		move.w	($a1518a).l,d0
;		bpl	@no
;		btst	#13,d0
;		bne	@no
;		
;		;dc.w	$60fe
;		
;;not needed	move.w	#$2,($a15180).l
;		move.w	#$0,($a1518a).l
;		
;		lea	($860000).l,a0
;@l1
;		move.w	#$e0,(a0)+
;		cmp.l	#$8601c0,a0
;		bne	@l1
;		
;@l2
;		move.w	#$7fff,(a0)+
;		cmp.l	#$860440,a0
;		bne	@l2
;		
;		move.w	#1,($a1518a).l
;		move.w	#$2,($a15180).l
;		move.w	#$1337,($fffffffe).w
;		
;		;dc.w	$60fe
;@no
;		rts
		
; ---------------------------------------------------------------------------
; Subroutine to	do special water effects in Labyrinth Zone
; ---------------------------------------------------------------------------

LZWaterEffects:				; ...
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	locret_3C28	; if not, branch
		cmpi.b	#6,($FFFFD024).w
		bcc.s	LZMoveWater
		bsr.w	LZWindTunnels
		bsr.w	LZWaterSlides
		bsr.w	LZDynamicWater

LZMoveWater:				; ...
		clr.b	($FFFFF64E).w
		moveq	#0,d0
		move.b	($FFFFFE60).w,d0
		lsr.w	#1,d0
		add.w	($FFFFF648).w,d0
		move.w	d0,($FFFFF646).w
		move.w	($FFFFF646).w,d0
		sub.w	($FFFFF704).w,d0
		bcc.s	loc_3C1A
		tst.w	d0
		bpl.s	loc_3C1A
		move.b	#-$21,($FFFFF625).w
		move.b	#1,($FFFFF64E).w

loc_3C1A:				; ...
		cmpi.w	#$DF,d0
		bcs.s	loc_3C24
		move.w	#$DF,d0

loc_3C24:				; ...
		move.b	d0,($FFFFF625).w

locret_3C28:				; ...
		rts	
; ---------------------------------------------------------------------------
; Labyrinth default water heights
; ---------------------------------------------------------------------------
WaterHeight:	dc.w $B8, $328,	$900, $228 ; ...
; ---------------------------------------------------------------------------
; Labyrinth dynamic water routines
; ---------------------------------------------------------------------------

LZDynamicWater:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	DynWater_Index(pc,d0.w),d0
		jsr	DynWater_Index(pc,d0.w)
		moveq	#0,d1
		move.b	($FFFFF64C).w,d1
		move.w	($FFFFF64A).w,d0
		sub.w	($FFFFF648).w,d0
		beq.s	locret_3C5A
		bcc.s	loc_3C56
		neg.w	d1

loc_3C56:				; ...
		add.w	d1,($FFFFF648).w

locret_3C5A:				; ...
		rts	
DynWater_Index:	dc.w DynWater_LZ1-DynWater_Index ; ...
		dc.w DynWater_LZ2-DynWater_Index
		dc.w DynWater_LZ3-DynWater_Index
		dc.w DynWater_SBZ3-DynWater_Index

DynWater_LZ1:				; ...
		move.w	($FFFFF700).w,d0
		move.b	($FFFFF64D).w,d2
		bne.s	loc_3CD0
		move.w	#$B8,d1
		cmpi.w	#$600,d0
		bcs.s	loc_3CB4
		move.w	#$108,d1
		cmpi.w	#$200,($FFFFD00C).w
		bcs.s	loc_3CBA
		cmpi.w	#$C00,d0
		bcs.s	loc_3CB4
		move.w	#$318,d1
		cmpi.w	#$1080,d0
		bcs.s	loc_3CB4
		move.b	#-$80,($FFFFF7E5).w
		move.w	#$5C8,d1
		cmpi.w	#$1380,d0
		bcs.s	loc_3CB4
		move.w	#$3A8,d1
		cmp.w	($FFFFF648).w,d1
		bne.s	loc_3CB4
		move.b	#1,($FFFFF64D).w

loc_3CB4:				; ...
		move.w	d1,($FFFFF64A).w
		rts	

loc_3CBA:				; ...
		cmpi.w	#$C80,d0
		bcs.s	loc_3CB4
		move.w	#$E8,d1
		cmpi.w	#$1500,d0
		bcs.s	loc_3CB4
		move.w	#$108,d1
		bra.s	loc_3CB4

loc_3CD0:				; ...
		subq.b	#1,d2
		bne.s	locret_3CF4
		cmpi.w	#$2E0,($FFFFD00C).w
		bcc.s	locret_3CF4
		move.w	#$3A8,d1
		cmpi.w	#$1300,d0
		bcs.s	loc_3CF0
		move.w	#$108,d1
		move.b	#2,($FFFFF64D).w

loc_3CF0:				; ...
		move.w	d1,($FFFFF64A).w

locret_3CF4:				; ...
		rts	

DynWater_LZ2:				; ...
		move.w	($FFFFF700).w,d0
		move.w	#$328,d1
		cmpi.w	#$500,d0
		bcs.s	loc_3D12
		move.w	#$3C8,d1
		cmpi.w	#$B00,d0
		bcs.s	loc_3D12
		move.w	#$428,d1

loc_3D12:				; ...
		move.w	d1,($FFFFF64A).w
		rts	

DynWater_LZ3:				; ...
		move.w	($FFFFF700).w,d0
		move.b	($FFFFF64D).w,d2
		bne.s	loc_3D5E
		move.w	#$900,d1
		cmpi.w	#$600,d0
		bcs.s	loc_3D54
		cmpi.w	#$3C0,($FFFFD00C).w
		bcs.s	loc_3D54
		cmpi.w	#$600,($FFFFD00C).w
		bcc.s	loc_3D54
		move.w	#$4C8,d1
		move.b	#$4B,($FFFFA506).w ; change level layout
		move.b	#1,($FFFFF64D).w
		move.w	#$B7,d0
		bsr.w	PlaySound_Special ; play sound $B7 (rumbling)

loc_3D54:				; ...
		move.w	d1,($FFFFF64A).w
		move.w	d1,($FFFFF648).w
		rts	

loc_3D5E:				; ...
		subq.b	#1,d2
		bne.s	loc_3DA8
		move.w	#$4C8,d1
		cmpi.w	#$770,d0
		bcs.s	loc_3DA2
		move.w	#$308,d1
		cmpi.w	#$1400,d0
		bcs.s	loc_3DA2
		cmpi.w	#$508,($FFFFF64A).w
		beq.s	loc_3D8E
		cmpi.w	#$600,($FFFFD00C).w
		bcc.s	loc_3D8E
		cmpi.w	#$280,($FFFFD00C).w
		bcc.s	loc_3DA2

loc_3D8E:				; ...
		move.w	#$508,d1
		move.w	d1,($FFFFF648).w
		cmpi.w	#$1770,d0
		bcs.s	loc_3DA2
		move.b	#2,($FFFFF64D).w

loc_3DA2:				; ...
		move.w	d1,($FFFFF64A).w
		rts	

loc_3DA8:				; ...
		subq.b	#1,d2
		bne.s	loc_3DD2
		move.w	#$508,d1
		cmpi.w	#$1860,d0
		bcs.s	loc_3DCC
		move.w	#$188,d1
		cmpi.w	#$1AF0,d0
		bcc.s	loc_3DC6
		cmp.w	($FFFFF648).w,d1
		bne.s	loc_3DCC

loc_3DC6:				; ...
		move.b	#3,($FFFFF64D).w

loc_3DCC:				; ...
		move.w	d1,($FFFFF64A).w
		rts	

loc_3DD2:				; ...
		subq.b	#1,d2
		bne.s	loc_3E0E
		move.w	#$188,d1
		cmpi.w	#$1AF0,d0
		bcs.s	loc_3E04
		move.w	#$900,d1
		cmpi.w	#$1BC0,d0
		bcs.s	loc_3E04
		move.b	#4,($FFFFF64D).w
		move.w	#$608,($FFFFF64A).w
		move.w	#$7C0,($FFFFF648).w
		move.b	#1,($FFFFF7E8).w
		rts	

loc_3E04:				; ...
		move.w	d1,($FFFFF64A).w
		move.w	d1,($FFFFF648).w
		rts	

loc_3E0E:				; ...
		cmpi.w	#$1E00,d0
		bcs.s	locret_3E1A
		move.w	#$128,($FFFFF64A).w

locret_3E1A:				; ...
		rts	

DynWater_SBZ3:				; ...
		move.w	#$228,d1
		cmpi.w	#$F00,($FFFFF700).w
		bcs.s	loc_3E2C
		move.w	#$4C8,d1

loc_3E2C:				; ...
		move.w	d1,($FFFFF64A).w
		rts	
; ---------------------------------------------------------------------------
; Labyrinth Zone "wind tunnels"	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LZWindTunnels:				; ...
		tst.w	($FFFFFE08).w	; is debug mode	being used?
		bne.w	locret_3F0A	; if yes, branch
		lea	(LZWind_Data)(pc),a2
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		lsl.w	#3,d0
		adda.w	d0,a2
		moveq	#0,d1
		tst.b	($FFFFFE11).w
		bne.s	loc_3E56
		moveq	#1,d1
		subq.w	#8,a2

loc_3E56:				; ...
		lea	($FFFFD000).w,a1

LZWind_Loop:				; ...
		move.w	8(a1),d0
		cmp.w	(a2),d0
		bcs.w	loc_3EF4
		cmp.w	4(a2),d0
		bcc.w	loc_3EF4
		move.w	$C(a1),d2
		cmp.w	2(a2),d2
		bcs.s	loc_3EF4
		cmp.w	6(a2),d2
		bcc.s	loc_3EF4
		move.b	($FFFFFE0F).w,d0
		andi.b	#$3F,d0
		bne.s	loc_3E90
		move.w	#$D0,d0
		jsr	$880000+(PlaySound_Special).l ;	play rushing water sound

loc_3E90:				; ...
		tst.b	($FFFFF7C9).w
		bne.w	locret_3F0A
		cmpi.b	#4,$24(a1)
		bcc.s	loc_3F06
		move.b	#1,($FFFFF7C7).w
		subi.w	#$80,d0
		cmp.w	(a2),d0
		bcc.s	LZWind_Move
		moveq	#2,d0
		cmpi.b	#1,($FFFFFE11).w
		bne.s	loc_3EBA
		neg.w	d0

loc_3EBA:				; ...
		add.w	d0,$C(a1)

LZWind_Move:				; ...
		addq.w	#4,8(a1)
		move.w	#$400,$10(a1)	; move Sonic horizontally
		move.w	#0,$12(a1)
		move.b	#$F,$1C(a1)	; use floating animation
		bset	#1,$22(a1)
		btst	#0,($FFFFF602).w ; is up pressed?
		beq.s	LZWind_MoveDown	; if not, branch
		subq.w	#1,$C(a1)	; move Sonic up

LZWind_MoveDown:			; ...
		btst	#1,($FFFFF602).w ; is down being pressed?
		beq.s	locret_3EF2	; if not, branch
		addq.w	#1,$C(a1)	; move Sonic down

locret_3EF2:				; ...
		rts	

loc_3EF4:				; ...
		addq.w	#8,a2
		dbf	d1,LZWind_Loop
		tst.b	($FFFFF7C7).w
		beq.s	locret_3F0A
		move.b	#0,$1C(a1)

loc_3F06:				; ...
		clr.b	($FFFFF7C7).w

locret_3F0A:				; ...
		rts	
; End of function LZWindTunnels

		dc.w $A80, $300, $C10, $380
LZWind_Data:	dc.w $F80, $100, $1410,	$180, $460, $400, $710,	$480, $A20 ; ...
		dc.w $600, $1610, $6E0,	$C80, $600, $13D0, $680
; ---------------------------------------------------------------------------
; Labyrinth Zone water slide subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LZWaterSlides:				; ...
		lea	($FFFFD000).w,a1
		btst	#1,$22(a1)
		bne.s	loc_3F6A
		move.w	$C(a1),d0
		lsr.w	#1,d0
		andi.w	#$380,d0
		move.b	8(a1),d1
		andi.w	#$7F,d1
		add.w	d1,d0
		lea	($FFFFA400).w,a2
		move.b	(a2,d0.w),d0
		lea	byte_3FCF(pc),a2
		moveq	#6,d1

loc_3F62:				; ...
		cmp.b	-(a2),d0
		dbeq	d1,loc_3F62
		beq.s	LZSlide_Move

loc_3F6A:				; ...
		tst.b	($FFFFF7CA).w
		beq.s	locret_3F7A
		move.w	#5,$3E(a1)
		clr.b	($FFFFF7CA).w

locret_3F7A:				; ...
		rts	

LZSlide_Move:				; ...
		cmpi.w	#3,d1
		bcc.s	loc_3F84
		nop	

loc_3F84:				; ...
		bclr	#0,$22(a1)
		move.b	byte_3FC0(pc,d1.w),d0
		move.b	d0,$14(a1)
		bpl.s	loc_3F9A
		bset	#0,$22(a1)

loc_3F9A:				; ...
		clr.b	$15(a1)
		move.b	#$1B,$1C(a1)	; use Sonic's "sliding" animation
		move.b	#1,($FFFFF7CA).w ; lock	controls (except jumping)
		move.b	($FFFFFE0F).w,d0
		andi.b	#$1F,d0
		bne.s	locret_3FBE
		move.w	#$D0,d0
		jsr	$880000+(PlaySound_Special) ;	play water sound

locret_3FBE:				; ...
		rts	
; End of function LZWaterSlides

byte_3FC0:	dc.b $A, $F5, $A, $F6, $F5, $F4, $B, 0,	2, 7, 3, $4C, $4B, 8, 4
byte_3FCF:	dc.b 0			; ...
; ---------------------------------------------------------------------------
; Subroutine to	move Sonic in demo mode
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


MoveSonicInDemo:			; ...
		tst.w	($FFFFFFF0).w	; is demo mode on?
		bne.s	MoveDemo_On	; if yes, branch
		rts	

; This is an unused subroutine for recording a demo

MoveDemo_Record:
		lea	($80000).l,a1
		move.w	($FFFFF790).w,d0
		adda.w	d0,a1
		move.b	($FFFFF604).w,d0
		cmp.b	(a1),d0
		bne.s	loc_3FFA
		addq.b	#1,1(a1)
		cmpi.b	#$FF,1(a1)
		beq.s	loc_3FFA
		rts	

loc_3FFA:				; ...
		move.b	d0,2(a1)
		move.b	#0,3(a1)
		addq.w	#2,($FFFFF790).w
		andi.w	#$3FF,($FFFFF790).w
		rts	

MoveDemo_On:				; ...
		tst.b	($FFFFF604).w
		bpl.s	loc_4022
		tst.w	($FFFFFFF0).w
		bmi.s	loc_4022
		move.b	#4,($FFFFF600).w

loc_4022:				; ...
		lea	(Demo_Index)(pc),a1
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		cmpi.b	#$10,($FFFFF600).w
		bne.s	loc_4038
		moveq	#6,d0

loc_4038:				; ...
		lsl.w	#2,d0
		movea.l	(a1,d0.w),a1
		tst.w	($FFFFFFF0).w
		bpl.s	loc_4056
		lea	(Demo_EndIndex)(pc),a1
		move.w	($FFFFFFF4).w,d0
		subq.w	#1,d0
		lsl.w	#2,d0
		movea.l	(a1,d0.w),a1

loc_4056:				; ...
		move.w	($FFFFF790).w,d0
		adda.w	d0,a1
		move.b	(a1),d0
		lea	($FFFFF604).w,a0
		move.b	d0,d1
		move.b	(a0),d2
		eor.b	d2,d0
		move.b	d1,(a0)+
		and.b	d1,d0
		move.b	d0,(a0)+
		subq.b	#1,($FFFFF792).w
		bcc.s	locret_407E
		move.b	3(a1),($FFFFF792).w
		addq.w	#2,($FFFFF790).w

locret_407E:				; ...
		rts	
; End of function MoveSonicInDemo

; ---------------------------------------------------------------------------
; Demo sequence	pointers
; ---------------------------------------------------------------------------
Demo_Index:	dc.l $880000+Demo_GHZ, $880000+Demo_GHZ	; ...
		dc.l $880000+Demo_MZ, $880000+Demo_MZ
		dc.l $880000+Demo_SYZ, $880000+Demo_SYZ
		dc.l $880000+Demo_SS, $880000+Demo_SS

Demo_EndIndex:	dc.l $880000+Demo_EndGHZ1, $880000+Demo_EndMZ ;	...
		dc.l $880000+Demo_EndSYZ, $880000+Demo_EndLZ
		dc.l $880000+Demo_EndSLZ, $880000+Demo_EndSBZ1
		dc.l $880000+Demo_EndSBZ2, $880000+Demo_EndGHZ2

		dc.b 0,	$8B, 8,	$37, 0,	$42, 8,	$5C, 0,	$6A, 8,	$5F, 0,	$2F, 8,	$2C
		dc.b 0,	$21, 8,	3, $28,	$30, 8,	8, 0, $2E, 8, $15, 0, $F, 8, $46
		dc.b 0,	$1A, 8,	$FF, 8,	$CA, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0

; ---------------------------------------------------------------------------
; Collision index loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ColIndexLoad:				; ...
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#2,d0
		move.l	ColPointers(pc,d0.w),($FFFFF796).w
		rts	
; End of function ColIndexLoad

; ---------------------------------------------------------------------------
; Collision index pointers
; ---------------------------------------------------------------------------
ColPointers:	dc.l $900000+Col_GHZ, $900000+Col_LZ
		dc.l $900000+Col_MZ, $900000+Col_SLZ
		dc.l $900000+Col_SYZ, $900000+Col_SBZ
; ---------------------------------------------------------------------------
; Oscillating number subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


OscillateNumInit:			; ...
		lea	($FFFFFE5E).w,a1
		lea	(Osc_Data)(pc),a2
		moveq	#$20,d1

Osc_Loop:				; ...
		move.w	(a2)+,(a1)+
		dbf	d1,Osc_Loop
		rts	
; End of function OscillateNumInit

Osc_Data:	dc.w $7C, $80		; ...
		dc.w 0,	$80		; baseline values
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$80
		dc.w 0,	$50F0
		dc.w $11E, $2080
		dc.w $B4, $3080
		dc.w $10E, $5080
		dc.w $1C2, $7080
		dc.w $276, $80
		dc.w 0,	$80
		dc.w 0

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


OscillateNumDo:				; ...
		cmpi.b	#6,($FFFFD024).w
		bcc.s	locret_41C4
		lea	($FFFFFE5E).w,a1
		lea	(Osc_Data2)(pc),a2
		move.w	(a1)+,d3
		moveq	#$F,d1

loc_4184:				; ...
		move.w	(a2)+,d2
		move.w	(a2)+,d4
		btst	d1,d3
		bne.s	loc_41A4
		move.w	2(a1),d0
		add.w	d2,d0
		move.w	d0,2(a1)
		add.w	d0,0(a1)
		cmp.b	0(a1),d4
		bhi.s	loc_41BA
		bset	d1,d3
		bra.s	loc_41BA

loc_41A4:				; ...
		move.w	2(a1),d0
		sub.w	d2,d0
		move.w	d0,2(a1)
		add.w	d0,0(a1)
		cmp.b	0(a1),d4
		bls.s	loc_41BA
		bclr	d1,d3

loc_41BA:				; ...
		addq.w	#4,a1
		dbf	d1,loc_4184
		move.w	d3,($FFFFFE5E).w

locret_41C4:				; ...
		rts	
; End of function OscillateNumDo

Osc_Data2:	dc.w 2,	$10		; ...
		dc.w 2,	$18
		dc.w 2,	$20
		dc.w 2,	$30
		dc.w 4,	$20
		dc.w 8,	8
		dc.w 8,	$40
		dc.w 4,	$40
		dc.w 2,	$50
		dc.w 2,	$50
		dc.w 2,	$20
		dc.w 3,	$30
		dc.w 5,	$50
		dc.w 7,	$70
		dc.w 2,	$10
		dc.w 2,	$10
; ---------------------------------------------------------------------------
; Subroutine to	change object animation	variables (rings, giant	rings)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ChangeRingFrame:			; ...
		subq.b	#1,($FFFFFEC0).w
		bpl.s	loc_421C
		move.b	#$B,($FFFFFEC0).w
		subq.b	#1,($FFFFFEC1).w
		andi.b	#7,($FFFFFEC1).w

loc_421C:				; ...
		subq.b	#1,($FFFFFEC2).w
		bpl.s	loc_4232
		move.b	#7,($FFFFFEC2).w
		addq.b	#1,($FFFFFEC3).w
		andi.b	#3,($FFFFFEC3).w

loc_4232:				; ...
		subq.b	#1,($FFFFFEC4).w
		bpl.s	loc_4250
		move.b	#7,($FFFFFEC4).w
		addq.b	#1,($FFFFFEC5).w
		cmpi.b	#6,($FFFFFEC5).w
		bcs.s	loc_4250
		move.b	#0,($FFFFFEC5).w

loc_4250:				; ...
		tst.b	($FFFFFEC6).w
		beq.s	locret_4272
		moveq	#0,d0
		move.b	($FFFFFEC6).w,d0
		add.w	($FFFFFEC8).w,d0
		move.w	d0,($FFFFFEC8).w
		rol.w	#7,d0
		andi.w	#3,d0
		move.b	d0,($FFFFFEC7).w
		subq.b	#1,($FFFFFEC6).w

locret_4272:				; ...
		rts	
; End of function ChangeRingFrame

; ---------------------------------------------------------------------------
; End-of-act signpost pattern loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SignpostArtLoad:			; ...
		tst.w	($FFFFFE08).w	; is debug mode	being used?
		bne.w	Signpost_Exit	; if yes, branch
		cmpi.b	#2,($FFFFFE11).w ; is act number 02 (act 3)?
		beq.s	Signpost_Exit	; if yes, branch
		move.w	($FFFFF700).w,d0
		move.w	($FFFFF72A).w,d1
		subi.w	#$100,d1
		cmp.w	d1,d0		; has Sonic reached the	edge of	the level?
		blt.s	Signpost_Exit	; if not, branch
		tst.b	($FFFFFE1E).w
		beq.s	Signpost_Exit
		cmp.w	($FFFFF728).w,d1
		beq.s	Signpost_Exit
		move.w	d1,($FFFFF728).w ; move	left boundary to current screen	position
		moveq	#$12,d0
		bra.w	LoadPLC2	; load signpost	patterns

Signpost_Exit:				; ...
		rts	
; End of function SignpostArtLoad

Demo_GHZ:	dc.b 0,	$4A, 8,	$61, $28, $B, 8, $47, $28, 7, 8, $3B, $28, 8, 8, $D1, $28, $10,	8, $A, 0, $E, $20, $12,	$28, 4,	8, $1F,	0, $B, 6, 5 ; ...
		dc.b 4,	5, 0, 4, $20, $B, $28, $E, 8, $20, 0, 5, $20, 2, $28, $12, 8, $F, 0, $F, 8, $B,	0, 0, $20, $E, $28, 4, 8, $B, 0, $1A
		dc.b 8,	$C, 0, 6, $20, $12, $28, 7, 8, $77, $28, 0, $20, $C, $24, 4, $20, 7, $28, 6, 8,	4, 0, $F, 8, $39, 0, $11, 8, $D, $28, $A
		dc.b 8,	$50, $28, $F, 8, 5, 0, $14, 8, $FF, 8, $56, 0, $FF, 0, $3F, 8, 0, $28, $E, 8, $17, 0, $17, 8, 5, 0, 0, 0, 0, 0,	0
Demo_MZ:	dc.b 0,	9, 8, $78, 0, 6, 8, 6, 0, 3, $20, 5, $28, $11, 8, $D, 0, $2B, 8, 2, $29, 7, 9, 2, 0, 7,	5, $F, 0, 8, 8,	$D ; ...
		dc.b $28, 7, 8,	$B, 0, $28, 8, 0, 9, 2,	$29, 2,	$28, 4,	8, $12,	0, 9, 8, 0, $29, 2, $28, 4, 8, 9, 0, $F, 8, $C,	0, $E
		dc.b 9,	0, $29,	8, 9, 2, 8, $18, 0, 9, $28, 0, $29, $A,	9, $12,	8, 0, 0, $18, $29, $10,	9, $10,	8, 3, 0, $2F, 5, 6, 0, 9
		dc.b 8,	0, 9, 1, $29, $12, 9, 0, 8, 5, 0, $24, 8, 0, 9,	0, $29,	9, $28,	6, 8, $A, 0, $2A, 8, $1B, 0, $17, 4, 5,	0, $C
		dc.b 8,	$20, 0,	4, $20,	3, 0, $E, 9, 4,	1, 0, 0, $1E, 8, 5, 0, 1, $20, 6, $29, 1, 5, 7,	0, $13,	8, 5, 0, $15, $20, 1
		dc.b $28, 2, $29, 4, 9,	1, 8, 0, 0, 7, 8, $B, 0, $19, 8, $B, $28, 6, 8,	5, 0, $12, 8, $11, 0, $C, $20, 2, $28, 4, 8, 4
		dc.b 0,	$15, 8,	$C, 0, $14, $20, 4, $28, 0, 8, 2, 0, $18, 8, 3,	0, $2C,	$20, 2,	$28, 7,	8, 4, 0, $24, 6, $48, 4, $47, 0, $A
		dc.b 4,	7, 0, $14, 4, $44, 5, 0, 4, 0, 0, $15, 8, $15, $A, 1, 0, 8, 4, 2, 5, $14, 0, 1,	5, 1, $25, $D, 5, $1B, 0, 7
		dc.b 8,	$23, 9,	0, 0, 7, 5, $22, $25, $B, 5, $52, 0, 6,	8, $26,	9, 1, 1, 0, 0, 0, 1, 0,	5, $17,	$25, 8,	5, $1A,	0, $C
		dc.b 8,	6, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
Demo_SYZ:	dc.b 0,	$11, 8,	$37, $28, 4, 8,	$A, 0, $12, 8, $B, 0, $1F, 8, $1B, 0, 9, 8, $20, 0, $14, 4, $16, $24, 0, $20, $F, 0, $13, 4, $17 ; ...
		dc.b 6,	4, 2, 0, 0, $24, 8, $D,	0, $46,	8, $77,	0, $60,	8, $17,	0, $16,	4, 3, 0, $22, 8, $19, $28, 2, $20, 1, 0, $26, $20, 9
		dc.b 0,	$3A, $20, $23, 0, 3, 8,	1, 0, $29, 4, $13, 0, $19, 4, $1B, 0, $91, 8, $21, 0, $19, 4, 4, 0, $67, 4, $23, 0, $A,	8, 5
		dc.b 0,	$87, 8,	$21, 0,	$2C, 8,	$27, 0,	$F, 8, $35, $28, 8, 8, $45, $28, 9, 8, $31, 0, $99, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
Demo_SS:	dc.b 0,	$26, 4,	5, 0, $2A, 8, $1B, 0, 6, 4, 9, 0, 6, $20, 1, $28, 1, $29, 2, 9,	0, 8, 8, 0, 6, 8, 7, 0,	$49, 8,	$B ; ...
		dc.b 0,	2, $20,	3, 0, $D, 8, $1D, 0, $13, 8, 6,	0, $21,	8, $21,	0, 6, 8, $36, 0, $1E, 8, $1A, 0, 6, $20, 0, $28, 4, 8, $19
		dc.b 0,	4, 4, $11, 0, $1F, 4, $D, 0, $C, 4, $1E, 5, 1, 4, 0, 0,	9, 8, $C, 0, 6,	4, 5, 5, 1, 4, $87, $24, 7, 4, 4
		dc.b 0,	4, 8, $D, 9, $14, 8, 4,	0, 3, 4, $17, $24, $13,	4, $A, 0, 4, 9,	9, 8, 2, 0, 6, 4, $18, $24, $B,	$20, 4,	0, 2
		dc.b 4,	$2E, 5,	1, 4, 0, 0, $13, $20, $14, 0, 4, 8, $19, 0, $10, $20, $1D, $24,	7, 4, $E, 0, $B, $20, $1B, $24,	5, 4, $17, $24,	0
		dc.b $20, $18, $24, 5, 4, $B, 0, 8, $20, $1F, $24, 1, 4, 8, 0, $B, $20,	$12, $28, 7, $29, $C, $20, 0, 4, $18, 0, $1A, 8, 0, 9, 7
		dc.b 8,	9, 9, $31, 8, 0, 0, 7, $20, 8, $24, $15, 4, 8, 0, $27, $20, 9, $24, $12, 4, $E,	$24, $E, 4, $A,	0, 9, 8, $16, $28, 0
		dc.b $20, $F, $28, 4, $29, $1B,	9, 5, $29, $C, 9, 0, 8,	7, 0, $A0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0

; ---------------------------------------------------------------------------
; Ending sequence demos
; ---------------------------------------------------------------------------
Demo_EndGHZ1:	dc.b 8,	$64, $28, 9, 8,	$4F, $28, $28, 8, $13, $28, 9, 8, $83, $28, $10	; ...
		dc.b 8,	$43, $28, $16, 8, $13, $28, $15, 8, $19, $28, 6, 8, $32, $28, $1B
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
Demo_EndMZ:	dc.b 0,	8, 4, $1F, 0, $A, 8, $15, $28, $1F, $29, 2, $28, 4, $20, 1 ; ...
		dc.b 0,	4, 4, $22, 0, $14, 4, $19, 0, 8, 4, 0, $24, 7, 4, 3
		dc.b 0,	$1D, 4,	$53, 0,	7, 8, 7, 0, $68, 4, 7, 0, $7C, 4, 8
		dc.b $24, $E, 4, $A, 0,	$1C, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
Demo_EndSYZ:	dc.b 0,	$17, 8,	$2F, 0,	$1A, 8,	$1C, $A, 2, 2, 9, 0, 7,	4, $1B ; ...
		dc.b 0,	$29, 2,	$4B, 0,	$62, 2,	$4A, 0,	$4A, $20, 8, $28, 7, $29, $22
		dc.b $28, 2, $20, 1, 0,	$37, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
Demo_EndLZ:	dc.b 0,	4, 8, $83, 0, $92, 2, 9, 0, 5, 2, 8, 0,	4, 2, 2	; ...
		dc.b 0,	$F, $20, 6, 0, $5E, $20, 6, 0, $25, 2, $A, 0, 6, 2, 8
		dc.b 0,	7, 2, 5, 0, $10, $20, 6, 0, $6F, 0, 0, 0, 0, 0,	0
Demo_EndSLZ:	dc.b 0,	8, 8, $ED, 0, $C, 2, $21, 0, $A4, 4, $26, $24, 6, 4, $42 ; ...
		dc.b $24, 1, 4,	$52, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
Demo_EndSBZ1:	dc.b 0,	$25, 4,	$52, 0,	$25, 4,	$23, 0,	$E7, 4,	$68, 0,	$D, 8, $6E ; ...
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
Demo_EndSBZ2:	dc.b 0,	6, 8, $10, 0, $74, 8, $2F, $28,	$1B, 8,	$54, $A, 6, 2, $20 ; ...
		dc.b 0,	$60, $20, $1D, $28, $14, 8, $11, 0, 9, 8, $1F, 0, 3, 8,	6
		dc.b $A, 7, 2, $26, 0, $30, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0
Demo_EndGHZ2:	dc.b 0,	7, 8, $FF, 8, $47, 0, $C2, 4, $3E, 0, $12, 8, $1A, 9, 0	; ...
		dc.b 8,	$E, 0, 1, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0



;-
; ---------------------------------------------------------------------------
; Special Stage
; ---------------------------------------------------------------------------

SpecialStage:				; ...
		move.w	#$CA,d0
		bsr.w	PlaySound_Special ; play special stage entry sound
		bsr.w	Pal_MakeFlash
		move	#$2700,sr
		lea	($C00004).l,a6
		move.w	#$8B03,(a6)
		move.w	#$8004,(a6)
		move.w	#$8AAF,($FFFFF624).w
		move.w	#$9011,(a6)
		move.w	($FFFFF60C).w,d0
		andi.b	#$BF,d0
		move.w	d0,($C00004).l
		bsr.w	ClearScreen
		move	#$2300,sr
		lea	($C00004).l,a5
		move.w	#$8F01,(a5)
		move.l	#$946F93FF,(a5)
		move.w	#$9780,(a5)
		move.l	#$50000081,(a5)

		move.w	#0,($C00000).l

loc_463C:				; ...
		move.w	(a5),d1
		btst	#1,d1
		bne.s	loc_463C
		move.w	#$8F02,(a5)
		bsr.w	SS_BGLoad
		moveq	#$14,d0
		bsr.w	RunPLC_ROM	; load special stage patterns
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

SS_ClrObjRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,SS_ClrObjRam	; clear	the object RAM
		lea	($FFFFF700).w,a1
		moveq	#0,d0
		move.w	#$3F,d1

SS_ClrRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,SS_ClrRam	; clear	variables
		lea	($FFFFFE60).w,a1
		moveq	#0,d0
		move.w	#$27,d1

SS_ClrRam2:				; ...
		move.l	d0,(a1)+
		dbf	d1,SS_ClrRam2	; clear	variables
		lea	($FFFFAA00).w,a1
		moveq	#0,d0
		move.w	#$7F,d1

SS_ClrNemRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,SS_ClrNemRam	; clear	Nemesis	buffer
		clr.b	($FFFFF64E).w
		clr.w	($FFFFFE02).w
		moveq	#$A,d0
		bsr.w	PalLoad1	; load special stage pallet
		jsr	$880000+SS_Load
		move.l	#0,($FFFFF700).w
		move.l	#0,($FFFFF704).w
		move.b	#9,($FFFFD000).w ; load	special	stage Sonic object
		bsr.w	PalCycle_SS
		clr.w	($FFFFF780).w	; set stage angle to "upright"
		move.w	#$40,($FFFFF782).w ; set stage rotation	speed
		move.w	#$89,d0
		bsr.w	PlaySound	; play special stage BG	music
		move.w	#0,($FFFFF790).w
		lea	$880000+(Demo_Index).l,a1
		moveq	#6,d0
		lsl.w	#2,d0
		movea.l	(a1,d0.w),a1
		move.b	1(a1),($FFFFF792).w
		subq.b	#1,($FFFFF792).w
		clr.w	($FFFFFE20).w
		clr.b	($FFFFFE1B).w
		move.w	#0,($FFFFFE08).w
		move.w	#1800,($FFFFF614).w
		tst.b	($FFFFFFE2).w	; has debug cheat been entered?
		beq.s	SS_NoDebug	; if not, branch
		btst	#6,($FFFFF604).w ; is A	button pressed?
		beq.s	SS_NoDebug	; if not, branch
		move.b	#1,($FFFFFFFA).w ; enable debug	mode

SS_NoDebug:				; ...
		move.w	($FFFFF60C).w,d0
		ori.b	#$40,d0
		move.w	d0,($C00004).l
		bsr.w	Pal_MakeWhite

; ---------------------------------------------------------------------------
; Main Special Stage loop
; ---------------------------------------------------------------------------

SS_MainLoop:				; ...
		bsr.w	PauseGame
		move.b	#$A,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	MoveSonicInDemo
		move.w	($FFFFF604).w,($FFFFF602).w
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		jsr	$880000+SS_ShowLayout
		bsr.w	SS_BGAnimate
		tst.w	($FFFFFFF0).w	; is demo mode on?
		beq.s	SS_ChkEnd	; if not, branch
		tst.w	($FFFFF614).w	; is there time	left on	the demo?
		beq.w	SS_ToSegaScreen	; if not, branch

SS_ChkEnd:				; ...
		cmpi.b	#$10,($FFFFF600).w ; is	game mode $10 (special stage)?
		beq.w	SS_MainLoop	; if yes, branch

		tst.w	($FFFFFFF0).w	; is demo mode on?
		bne.w	SS_ToSegaScreen	; if yes, branch
		move.b	#$C,($FFFFF600).w ; set	screen mode to $0C (level)
		cmpi.w	#$503,($FFFFFE10).w ; is level number higher than FZ?
		bcs.s	SS_End		; if not, branch
		clr.w	($FFFFFE10).w	; set to GHZ1

SS_End:					; ...
		move.w	#60,($FFFFF614).w ; set	delay time to 1	second
		move.w	#$3F,($FFFFF626).w
		clr.w	($FFFFF794).w

SS_EndLoop:				; ...
		move.b	#$16,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	MoveSonicInDemo
		move.w	($FFFFF604).w,($FFFFF602).w
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		jsr	$880000+SS_ShowLayout
		bsr.w	SS_BGAnimate
		subq.w	#1,($FFFFF794).w
		bpl.s	loc_47D4
		move.w	#2,($FFFFF794).w
		bsr.w	Pal_ToWhite

loc_47D4:				; ...
		tst.w	($FFFFF614).w
		bne.s	SS_EndLoop

		move	#$2700,sr
		lea	($C00004).l,a6
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$9001,(a6)
		bsr.w	ClearScreen
		move.l	#$70000002,($C00004).l
		lea	$900000+(Nem_TitleCard).l,a0 ; load title card patterns
		bsr.w	NemDec
		jsr	$880000+Hud_Base
		move	#$2300,sr
		moveq	#$11,d0
		bsr.w	PalLoad2	; load results screen pallet
		moveq	#0,d0
		bsr.w	LoadPLC2
		moveq	#$1B,d0
		bsr.w	LoadPLC		; load results screen patterns
		move.b	#1,($FFFFFE1F).w ; update score	counter
		move.b	#1,($FFFFF7D6).w ; update ring bonus counter
		move.w	($FFFFFE20).w,d0
		mulu.w	#10,d0		; multiply rings by 10
		move.w	d0,($FFFFF7D4).w ; set rings bonus
		move.w	#$8E,d0
		jsr	$880000+(PlaySound_Special).l ;	play end-of-level music
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

SS_EndClrObjRam:			; ...
		move.l	d0,(a1)+
		dbf	d1,SS_EndClrObjRam ; clear object RAM
		move.b	#$7E,($FFFFD5C0).w ; load results screen object

SS_NormalExit:				; ...
		bsr.w	PauseGame
		move.b	#$C,($FFFFF62A).w
		bsr.w	DelayProgram
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		bsr.w	RunPLC_RAM
		tst.w	($FFFFFE02).w
		beq.s	SS_NormalExit
		tst.l	($FFFFF680).w
		bne.s	SS_NormalExit
		move.w	#$CA,d0
		bsr.w	PlaySound_Special ; play special stage exit sound
		bsr.w	Pal_MakeFlash
		rts	

SS_ToSegaScreen:			; ...
		move.b	#0,($FFFFF600).w ; set screen mode to 00 (Sega screen)
		rts	
; ---------------------------------------------------------------------------
; Special stage	background loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_BGLoad:				; ...
		lea	($FF0000).l,a1
		lea	$900000+(Eni_SSBg1).l,a0 ; load	mappings for the birds and fish
		move.w	#$4051,d0
		bsr.w	EniDec
		move.l	#$50000001,d3
		lea	($FF0080).l,a2
		moveq	#6,d7

loc_48BE:				; ...
		move.l	d3,d0
		moveq	#3,d6
		moveq	#0,d4
		cmpi.w	#3,d7
		bcc.s	loc_48CC
		moveq	#1,d4

loc_48CC:				; ...
		moveq	#7,d5

loc_48CE:				; ...
		movea.l	a2,a1
		eori.b	#1,d4
		bne.s	loc_48E2
		cmpi.w	#6,d7
		bne.s	loc_48F2
		lea	($FF0000).l,a1

loc_48E2:				; ...
		movem.l	d0-d4,-(sp)
		moveq	#7,d1
		moveq	#7,d2
		bsr.w	ShowVDPGraphics
		movem.l	(sp)+,d0-d4

loc_48F2:				; ...
		addi.l	#$100000,d0
		dbf	d5,loc_48CE
		addi.l	#$3800000,d0
		eori.b	#1,d4
		dbf	d6,loc_48CC
		addi.l	#$10000000,d3
		bpl.s	loc_491C
		swap	d3
		addi.l	#$C000,d3
		swap	d3

loc_491C:				; ...
		adda.w	#$80,a2
		dbf	d7,loc_48BE
		lea	($FF0000).l,a1
		lea	$900000+(Eni_SSBg2).l,a0 ; load	mappings for the clouds
		move.w	#$4000,d0
		bsr.w	EniDec
		lea	($FF0000).l,a1
		move.l	#$40000003,d0
		moveq	#$3F,d1
		moveq	#$1F,d2
		bsr.w	ShowVDPGraphics
		lea	($FF0000).l,a1
		move.l	#$50000003,d0
		moveq	#$3F,d1
		moveq	#$3F,d2
		bsr.w	ShowVDPGraphics
		rts	
; End of function SS_BGLoad

; ---------------------------------------------------------------------------
; Pallet cycling routine - special stage
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_SS:				; ...
		tst.w	($FFFFF63A).w
		bne.s	locret_49E6
		subq.w	#1,($FFFFF79C).w
		bpl.s	locret_49E6
		lea	($C00004).l,a6
		move.w	($FFFFF79A).w,d0
		addq.w	#1,($FFFFF79A).w
		andi.w	#$1F,d0
		lsl.w	#2,d0
		lea	(byte_4A3C)(pc),a0
		adda.w	d0,a0
		move.b	(a0)+,d0
		bpl.s	loc_4992
		move.w	#$1FF,d0

loc_4992:				; ...
		move.w	d0,($FFFFF79C).w
		moveq	#0,d0
		move.b	(a0)+,d0
		move.w	d0,($FFFFF7A0).w
		lea	(byte_4ABC)(pc),a1
		lea	(a1,d0.w),a1
		move.w	#-$7E00,d0
		move.b	(a1)+,d0
		move.w	d0,(a6)
		move.b	(a1),($FFFFF616).w
		move.w	#-$7C00,d0
		move.b	(a0)+,d0
		move.w	d0,(a6)
		move.l	#$40000010,($C00004).l
		move.l	($FFFFF616).w,($C00000).l
		moveq	#0,d0
		move.b	(a0)+,d0
		bmi.s	loc_49E8
		lea	$880000+(Pal_SSCyc1).l,a1
		adda.w	d0,a1
		lea	($FFFFFB4E).w,a2
		move.l	(a1)+,(a2)+
		move.l	(a1)+,(a2)+
		move.l	(a1)+,(a2)+

locret_49E6:				; ...
		rts	

loc_49E8:				; ...
		move.w	($FFFFF79E).w,d1
		cmpi.w	#$8A,d0
		bcs.s	loc_49F4
		addq.w	#1,d1

loc_49F4:				; ...
		mulu.w	#$2A,d1
		lea	$880000+(Pal_SSCyc2).l,a1
		adda.w	d1,a1
		andi.w	#$7F,d0
		bclr	#0,d0
		beq.s	loc_4A18
		lea	($FFFFFB6E).w,a2
		move.l	(a1),(a2)+
		move.l	4(a1),(a2)+
		move.l	8(a1),(a2)+

loc_4A18:				; ...
		adda.w	#$C,a1
		lea	($FFFFFB5A).w,a2
		cmpi.w	#$A,d0
		bcs.s	loc_4A2E
		subi.w	#$A,d0
		lea	($FFFFFB7A).w,a2

loc_4A2E:				; ...
		move.w	d0,d1
		add.w	d0,d0
		add.w	d1,d0
		adda.w	d0,a1
		move.l	(a1)+,(a2)+
		move.w	(a1)+,(a2)+
		rts	
; End of function PalCycle_SS

byte_4A3C:	dc.b 3,	0, 7, $92, 3, 0, 7, $90, 3, 0, 7, $8E, 3, 0, 7,	$8C ; ...
		dc.b 3,	0, 7, $8B, 3, 0, 7, $80, 3, 0, 7, $82, 3, 0, 7,	$84
		dc.b 3,	0, 7, $86, 3, 0, 7, $88, 7, 8, 7, 0, 7,	$A, 7, $C
		dc.b $FF, $C, 7, $18, $FF, $C, 7, $18, 7, $A, 7, $C, 7,	8, 7, 0
		dc.b 3,	0, 6, $88, 3, 0, 6, $86, 3, 0, 6, $84, 3, 0, 6,	$82
		dc.b 3,	0, 6, $81, 3, 0, 6, $8A, 3, 0, 6, $8C, 3, 0, 6,	$8E
		dc.b 3,	0, 6, $90, 3, 0, 6, $92, 7, 2, 6, $24, 7, 4, 6,	$30
		dc.b $FF, 6, 6,	$3C, $FF, 6, 6,	$3C, 7,	4, 6, $30, 7, 2, 6, $24
byte_4ABC:	dc.b $10, 1, $18, 0, $18, 1, $20, 0, $20, 1, $28, 0, $28, 1 ; ...
Pal_SSCyc1:	dc.b 4,	0, 6, 0, 6, $20, 6, $24, 6, $64, 6, $66, 6, 0, 8, $20 ;	...
		dc.b $A, $64, $A, $68, $A, $A6,	$A, $AA, 8, 0, $C, $42,	$E, $86, $E, $CA
		dc.b $E, $EC, $E, $EE, 4, 0, 4,	$20, 6,	$20, 6,	$20, 8,	$64, 6,	$66
		dc.b 4,	$20, 6,	$20, 8,	$42, 8,	$42, $A, $86, $A, $AA, 6, $20, 8, $42
		dc.b $A, $64, $C, $86, $E, $A8,	$E, $EE
Pal_SSCyc2:	dc.b $E, $EA, $E, $E0, $A, $A0,	8, $80,	6, $60,	4, $40,	$E, $E0, $A, $A0 ; ...
		dc.b 4,	$40, $A, $A0, $A, $A0, $A, $A0,	8, $60,	8, $60,	8, $60,	6, $40
		dc.b 6,	$40, 6,	$40, 4,	0, 4, 0, 4, 0, $A, $EC,	6, $EA,	4, $C6
		dc.b 2,	$A4, 0,	$82, 0,	$60, 6,	$EA, 4,	$C6, 0,	$60, 4,	$C6, 4,	$C6
		dc.b 4,	$C6, 4,	$84, 4,	$84, 4,	$84, 4,	$42, 4,	$42, 4,	$42, 4,	0
		dc.b 4,	0, 4, 0, $E, $CC, $E, $8A, $C, $68, $A,	$46, 8,	$24, 6,	2
		dc.b $E, $8A, $C, $68, 6, 2, $C, $68, $C, $68, $C, $68,	8, $46,	8, $46
		dc.b 8,	$46, 6,	$24, 6,	$24, 6,	$24, 4,	0, 4, 0, 4, 0, $A, $EC
		dc.b 8,	$CA, 6,	$A8, 4,	$86, 2,	$64, 0,	$42, 8,	$CA, 6,	$A8, 0,	$42
		dc.b 6,	$A8, 6,	$A8, 6,	$A8, 6,	$84, 6,	$84, 6,	$84, 4,	$42, 4,	$42
		dc.b 4,	$42, 4,	0, 4, 0, 4, 0, $E, $EC,	$C, $CA, $A, $A8, 8, $86
		dc.b 6,	$64, 4,	$42, $C, $CA, $A, $A8, 4, $42, $A, $A8,	$A, $A8, $A, $A8
		dc.b 8,	$64, 8,	$64, 8,	$64, 6,	$42, 6,	$42, 6,	$42, 4,	0, 4, 0
		dc.b 4,	0
; ---------------------------------------------------------------------------
; Subroutine to	make the special stage background animated
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_BGAnimate:				; ...
		move.w	($FFFFF7A0).w,d0
		bne.s	loc_4BF6
		move.w	#0,($FFFFF70C).w
		move.w	($FFFFF70C).w,($FFFFF618).w

loc_4BF6:				; ...
		cmpi.w	#8,d0
		bcc.s	loc_4C4E
		cmpi.w	#6,d0
		bne.s	loc_4C10
		addq.w	#1,($FFFFF718).w
		addq.w	#1,($FFFFF70C).w
		move.w	($FFFFF70C).w,($FFFFF618).w

loc_4C10:				; ...
		moveq	#0,d0
		move.w	($FFFFF708).w,d0
		neg.w	d0
		swap	d0
		lea	(byte_4CCC)(pc),a1
		lea	($FFFFAA00).w,a3
		moveq	#9,d3

loc_4C26:				; ...
		move.w	2(a3),d0
		bsr.w	CalcSine
		moveq	#0,d2
		move.b	(a1)+,d2
		muls.w	d2,d0
		asr.l	#8,d0
		move.w	d0,(a3)+
		move.b	(a1)+,d2
		ext.w	d2
		add.w	d2,(a3)+
		dbf	d3,loc_4C26
		lea	($FFFFAA00).w,a3
		lea	(byte_4CB8)(pc),a2
		bra.s	loc_4C7E

loc_4C4E:				; ...
		cmpi.w	#$C,d0
		bne.s	loc_4C74
		subq.w	#1,($FFFFF718).w
		lea	($FFFFAB00).w,a3
		move.l	#$18000,d2
		moveq	#6,d1

loc_4C64:				; ...
		move.l	(a3),d0
		sub.l	d2,d0
		move.l	d0,(a3)+
		subi.l	#$2000,d2
		dbf	d1,loc_4C64

loc_4C74:				; ...
		lea	($FFFFAB00).w,a3
		lea	(byte_4CC4)(pc),a2

loc_4C7E:				; ...
		lea	($FFFFCC00).w,a1
		move.w	($FFFFF718).w,d0
		neg.w	d0
		swap	d0
		moveq	#0,d3
		move.b	(a2)+,d3
		move.w	($FFFFF70C).w,d2
		neg.w	d2
		andi.w	#$FF,d2
		lsl.w	#2,d2

loc_4C9A:				; ...
		move.w	(a3)+,d0
		addq.w	#2,a3
		moveq	#0,d1
		move.b	(a2)+,d1
		subq.w	#1,d1

loc_4CA4:				; ...
		move.l	d0,(a1,d2.w)
		addq.w	#4,d2
		andi.w	#$3FC,d2
		dbf	d1,loc_4CA4
		dbf	d3,loc_4C9A
		rts	
; End of function SS_BGAnimate

byte_4CB8:	dc.b 9,	$28, $18, $10, $28, $18, $10, $30, $18,	8, $10,	0 ; ...
byte_4CC4:	dc.b 6,	$30, $30, $30, $28, $18, $18, $18 ; ...
byte_4CCC:	dc.b 8,	2, 4, $FF, 2, 3, 8, $FF, 4, 2, 2, 3, 8,	$FD, 4,	2, 2, 3, 2, $FF	; ...
; ---------------------------------------------------------------------------
; Continue screen
; ---------------------------------------------------------------------------

ContinueScreen:				; ...
		bsr.w	Pal_FadeFrom
		move	#$2700,sr
		move.w	($FFFFF60C).w,d0
		andi.b	#$BF,d0
		move.w	d0,($C00004).l
		lea	($C00004).l,a6
		move.w	#$8004,(a6)
		move.w	#$8700,(a6)
		bsr.w	ClearScreen
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

Cont_ClrObjRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,Cont_ClrObjRam ; clear object RAM
		move.l	#$70000002,($C00004).l
		lea	$900000+(Nem_TitleCard).l,a0 ; load title card patterns
		bsr.w	NemDec
		move.l	#$60000002,($C00004).l
		lea	$900000+(Nem_ContSonic).l,a0 ; load Sonic patterns
		bsr.w	NemDec
		move.l	#$6A200002,($C00004).l
		lea	$900000+(Nem_MiniSonic).l,a0 ; load continue screen patterns
		bsr.w	NemDec
		moveq	#10,d1
		jsr	$880000+ContScrCounter	; run countdown	(start from 10)
		moveq	#$12,d0
		bsr.w	PalLoad1	; load continue	screen pallet
		move.b	#$90,d0
		bsr.w	PlaySound	; play continue	music
		move.w	#659,($FFFFF614).w ; set time delay to 11 seconds
		clr.l	($FFFFF700).w
		move.l	#$1000000,($FFFFF704).w
		move.b	#$81,($FFFFD000).w ; load Sonic	object
		move.b	#$80,($FFFFD040).w ; load continue screen objects
		move.b	#$80,($FFFFD080).w
		move.b	#3,($FFFFD098).w
		move.b	#4,($FFFFD09A).w
		move.b	#$80,($FFFFD0C0).w
		move.b	#4,($FFFFD0E4).w
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		move.w	($FFFFF60C).w,d0
		ori.b	#$40,d0
		move.w	d0,($C00004).l
		bsr.w	Pal_FadeTo

Cont_MainLoop:				; ...
		move.b	#$16,($FFFFF62A).w
		bsr.w	DelayProgram
		cmpi.b	#6,($FFFFD024).w
		bcc.s	loc_4DF2
		move	#$2700,sr
		move.w	($FFFFF614).w,d1
		divu.w	#$3C,d1
		andi.l	#$F,d1
		jsr	$880000+ContScrCounter
		move	#$2300,sr

loc_4DF2:				; ...
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		cmpi.w	#$180,($FFFFD008).w ; has Sonic	run off	screen?
		bcc.s	Cont_GotoLevel	; if yes, branch
		cmpi.b	#6,($FFFFD024).w
		bcc.s	Cont_MainLoop
		tst.w	($FFFFF614).w
		bne.w	Cont_MainLoop
		move.b	#0,($FFFFF600).w ; go to Sega screen
		rts	

Cont_GotoLevel:				; ...
		move.b	#$C,($FFFFF600).w ; set	screen mode to $0C (level)
		move.b	#3,($FFFFFE12).w ; set lives to	3
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.l	d0,($FFFFFE26).w ; clear score
		move.b	d0,($FFFFFE30).w ; clear lamppost count
		subq.b	#1,($FFFFFE18).w ; subtract 1 from continues
		rts	
; ---------------------------------------------------------------------------
; Object 80 - Continue screen elements
; ---------------------------------------------------------------------------

Obj80:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj80_Index(pc,d0.w),d1
		jmp	Obj80_Index(pc,d1.w)
Obj80_Index:	dc.w Obj80_Main-Obj80_Index ; ...
		dc.w Obj80_Display-Obj80_Index
		dc.w Obj80_MakeMiniSonic-Obj80_Index
		dc.w Obj80_ChkType-Obj80_Index

Obj80_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj80,4(a0)
		move.w	#$8500,2(a0)
		move.b	#0,1(a0)
		move.b	#$3C,$19(a0)
		move.w	#$120,8(a0)
		move.w	#$C0,$A(a0)
		move.w	#0,($FFFFFE20).w ; clear rings

Obj80_Display:				; ...
		jmp	$880000+DisplaySprite
Obj80_MiniSonicPos:dc.w	$116, $12A, $102, $13E,	$EE, $152, $DA,	$166, $C6 ; ...
		dc.w $17A, $B2,	$18E, $9E, $1A2, $8A

Obj80_MakeMiniSonic:			; ...
		movea.l	a0,a1
		lea	(Obj80_MiniSonicPos)(pc),a2
		moveq	#0,d1
		move.b	($FFFFFE18).w,d1
		subq.b	#2,d1
		bcc.s	loc_4EC4
		jmp	$880000+DeleteObject

loc_4EC4:				; ...
		moveq	#1,d3
		cmpi.b	#$E,d1
		bcs.s	loc_4ED0
		moveq	#0,d3
		moveq	#$E,d1

loc_4ED0:				; ...
		move.b	d1,d2
		andi.b	#1,d2

Obj80_MiniSonLoop:			; ...
		move.b	#$80,0(a1)	; load mini Sonic object
		move.w	(a2)+,8(a1)
		tst.b	d2
		beq.s	loc_4EEA
		subi.w	#$A,8(a1)

loc_4EEA:				; ...
		move.w	#$D0,$A(a1)
		move.b	#6,$1A(a1)
		move.b	#6,$24(a1)
		move.l	#$880000+Map_obj80,4(a1)
		move.w	#$8551,2(a1)
		move.b	#0,1(a1)
		lea	$40(a1),a1
		dbf	d1,Obj80_MiniSonLoop ; repeat for number of continues
		lea	-$40(a1),a1
		move.b	d3,$28(a1)

Obj80_ChkType:				; ...
		tst.b	$28(a0)
		beq.s	loc_4F40
		cmpi.b	#6,($FFFFD024).w
		bcs.s	loc_4F40
		move.b	($FFFFFE0F).w,d0
		andi.b	#1,d0
		bne.s	loc_4F40
		tst.w	($FFFFD010).w
		bne.s	Obj80_Delete
		rts	

loc_4F40:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#$F,d0
		bne.s	Obj80_Display2
		bchg	#0,$1A(a0)

Obj80_Display2:				; ...
		jmp	$880000+DisplaySprite

Obj80_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 81 - Sonic on the continue screen
; ---------------------------------------------------------------------------

Obj81:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj81_Index(pc,d0.w),d1
		jsr	Obj81_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj81_Index:	dc.w Obj81_Main-Obj81_Index ; ...
		dc.w Obj81_ChkLand-Obj81_Index
		dc.w Obj81_Animate-Obj81_Index
		dc.w Obj81_Run-Obj81_Index

Obj81_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$A0,8(a0)
		move.w	#$C0,$C(a0)
		move.l	#$900000+Map_Sonic,4(a0)
		move.w	#$780,2(a0)
		move.b	#4,1(a0)
		move.b	#2,$18(a0)
		move.b	#$1D,$1C(a0)	; use "floating" animation
		move.w	#$400,$12(a0)	; make Sonic fall from above

Obj81_ChkLand:				; ...
		cmpi.w	#$1A0,$C(a0)	; has Sonic landed yet?
		bne.s	Obj81_ShowFall	; if not, branch
		addq.b	#2,$24(a0)
		clr.w	$12(a0)		; stop Sonic falling
		move.l	#$880000+Map_obj80,4(a0)
		move.w	#$8500,2(a0)
		move.b	#0,$1C(a0)
		bra.s	Obj81_Animate

Obj81_ShowFall:				; ...
		jsr	$880000+SpeedToPos
		jsr	$880000+Sonic_Animate
		jmp	$880000+LoadSonicDynPLC

Obj81_Animate:				; ...
		tst.b	($FFFFF605).w	; is any button	pressed?
		bmi.s	Obj81_GetUp	; if yes, branch
		lea	(Ani_obj81)(pc),a1
		jmp	$880000+AnimateSprite

Obj81_GetUp:				; ...
		addq.b	#2,$24(a0)
		move.l	#$900000+Map_Sonic,4(a0)
		move.w	#$780,2(a0)
		move.b	#$1E,$1C(a0)	; use "getting up" animation
		clr.w	$14(a0)
		subq.w	#8,$C(a0)
		move.b	#$E0,d0
		bsr.w	PlaySound_Special ; fade out music

Obj81_Run:				; ...
		cmpi.w	#$800,$14(a0)	; check	Sonic's "run speed" (not moving)
		bne.s	Obj81_AddSpeed	; if too low, branch
		move.w	#$1000,$10(a0)	; move Sonic to	the right
		bra.s	Obj81_ShowRun

Obj81_AddSpeed:				; ...
		addi.w	#$20,$14(a0)	; increase "run	speed"

Obj81_ShowRun:				; ...
		jsr	$880000+SpeedToPos
		jsr	$880000+Sonic_Animate
		jmp	$880000+LoadSonicDynPLC
Ani_obj81:	dc.w byte_504A-Ani_obj81 ; ...
byte_504A:	dc.b 4,	1, 1, 1, 1, 2, 2, 2, 3,	3, $FF,	0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Continue screen
; ---------------------------------------------------------------------------
Map_obj80:	dc.w byte_5066-Map_obj80, byte_509E-Map_obj80 ;	...
		dc.w byte_50AE-Map_obj80, byte_50BE-Map_obj80
		dc.w byte_50CE-Map_obj80, byte_50D9-Map_obj80
		dc.w byte_50D9-Map_obj80, byte_50DF-Map_obj80
byte_5066:	dc.b $B			; ...
		dc.b $F8, 5, 0,	$88, $C4 ; "CONTINUE", stars and countdown
		dc.b $F8, 5, 0,	$B2, $D4
		dc.b $F8, 5, 0,	$AE, $E4
		dc.b $F8, 5, 0,	$C2, $F4
		dc.b $F8, 1, 0,	$A0, 4
		dc.b $F8, 5, 0,	$AE, $C
		dc.b $F8, 5, 0,	$C6, $1C
		dc.b $F8, 5, 0,	$90, $2C
		dc.b $38, 5, $20, $21, $E8
		dc.b $38, 5, $20, $21, 8
		dc.b $36, 5, 1,	$FC, $F8
byte_509E:	dc.b 3			; ...
		dc.b 4,	5, 0, $15, $FC	; Sonic	on floor
		dc.b $F4, $A, 0, 6, $EC
		dc.b $F4, 6, 0,	$F, 4
byte_50AE:	dc.b 3			; ...
		dc.b 4,	5, 0, $19, $FC	; Sonic	on floor #2
		dc.b $F4, $A, 0, 6, $EC
		dc.b $F4, 6, 0,	$F, 4
byte_50BE:	dc.b 3			; ...
		dc.b 4,	5, 0, $1D, $FC	; Sonic	on floor #3
		dc.b $F4, $A, 0, 6, $EC
		dc.b $F4, 6, 0,	$F, 4
byte_50CE:	dc.b 2			; ...
		dc.b $60, 9, $20, 0, $E8 ; circle on the floor
		dc.b $60, 9, $28, 0, 0
byte_50D9:	dc.b 1			; ...
		dc.b 0,	6, 0, $12, 0	; mini Sonic
byte_50DF:	dc.b 1			; ...
		dc.b 0,	6, 0, $18, 0	; mini Sonic #2
		dc.b 0
; ---------------------------------------------------------------------------
; Ending sequence in Green Hill	Zone
; ---------------------------------------------------------------------------

EndingSequence:				; ...
		move.b	#$E4,d0
		bsr.w	PlaySound_Special ; stop music
		bsr.w	Pal_FadeFrom
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

End_ClrObjRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,End_ClrObjRam ; clear object	RAM
		lea	($FFFFF628).w,a1
		moveq	#0,d0
		move.w	#$15,d1

End_ClrRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,End_ClrRam	; clear	variables
		lea	($FFFFF700).w,a1
		moveq	#0,d0
		move.w	#$3F,d1

End_ClrRam2:				; ...
		move.l	d0,(a1)+
		dbf	d1,End_ClrRam2	; clear	variables
		lea	($FFFFFE60).w,a1
		moveq	#0,d0
		move.w	#$47,d1

End_ClrRam3:				; ...
		move.l	d0,(a1)+
		dbf	d1,End_ClrRam3	; clear	variables
		move	#$2700,sr
		move.w	($FFFFF60C).w,d0
		andi.b	#$BF,d0
		move.w	d0,($C00004).l
		bsr.w	ClearScreen
		lea	($C00004).l,a6
		move.w	#$8B03,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$857C,(a6)
		move.w	#$9001,(a6)
		move.w	#$8004,(a6)
		move.w	#$8720,(a6)
		move.w	#$8ADF,($FFFFF624).w
		move.w	($FFFFF624).w,(a6)
		move.w	#$1E,($FFFFFE14).w
		move.w	#$600,($FFFFFE10).w ; set level	number to 0600 (extra flowers)
		cmpi.b	#6,($FFFFFE57).w ; do you have all 6 emeralds?
		beq.s	End_LoadData	; if yes, branch
		move.w	#$601,($FFFFFE10).w ; set level	number to 0601 (no flowers)

End_LoadData:				; ...
		moveq	#$1C,d0
		bsr.w	RunPLC_ROM	; load ending sequence patterns
		jsr	$880000+Hud_Base
		bsr.w	LevelSizeLoad
		bsr.w	DeformBgLayer
		bset	#2,($FFFFF754).w
		bsr.w	MainLoadBlockLoad
		bsr.w	LoadTilesFromStart
		move.l	#$900000+Col_GHZ,($FFFFF796).w ; load collision	index
		move	#$2300,sr
		lea	$900000+(Kos_EndFlowers).l,a0 ;	load extra flower patterns
		lea	($FFFF9400).w,a1 ; RAM address to buffer the patterns
		bsr.w	KosDec
		moveq	#3,d0
		bsr.w	PalLoad1	; load Sonic's pallet
		move.w	#$8B,d0
		bsr.w	PlaySound	; play ending sequence music
		btst	#6,($FFFFF604).w ; is button A pressed?
		beq.s	End_LoadSonic	; if not, branch
		move.b	#1,($FFFFFFFA).w ; enable debug	mode

End_LoadSonic:				; ...
		move.b	#1,($FFFFD000).w ; load	Sonic object
		bset	#0,($FFFFD022).w ; make	Sonic face left
		move.b	#1,($FFFFF7CC).w ; lock	controls
		move.w	#$400,($FFFFF602).w ; move Sonic to the	left
		move.w	#$F800,($FFFFD014).w ; set Sonic's speed
		move.b	#$21,($FFFFD040).w ; load HUD object
		jsr	$880000+ObjPosLoad
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w
		move.l	d0,($FFFFFE22).w
		move.b	d0,($FFFFFE1B).w
		move.b	d0,($FFFFFE2C).w
		move.b	d0,($FFFFFE2D).w
		move.b	d0,($FFFFFE2E).w
		move.b	d0,($FFFFFE2F).w
		move.w	d0,($FFFFFE08).w
		move.w	d0,($FFFFFE02).w
		move.w	d0,($FFFFFE04).w
		bsr.w	OscillateNumInit
		move.b	#1,($FFFFFE1F).w
		move.b	#1,($FFFFFE1D).w
		move.b	#0,($FFFFFE1E).w
		move.w	#1800,($FFFFF614).w
		move.b	#$18,($FFFFF62A).w
		bsr.w	DelayProgram
		move.w	($FFFFF60C).w,d0
		ori.b	#$40,d0
		move.w	d0,($C00004).l
		move.w	#$3F,($FFFFF626).w
		bsr.w	Pal_FadeTo

; ---------------------------------------------------------------------------
; Main ending sequence loop
; ---------------------------------------------------------------------------

End_MainLoop:				; ...
		bsr.w	PauseGame
		move.b	#$18,($FFFFF62A).w
		bsr.w	DelayProgram
		addq.w	#1,($FFFFFE04).w
		bsr.w	End_MoveSonic
		jsr	$880000+ObjectsLoad
		bsr.w	DeformBgLayer
		jsr	$880000+BuildSprites
		jsr	$880000+ObjPosLoad
		bsr.w	PalCycle_Load
		bsr.w	OscillateNumDo
		bsr.w	ChangeRingFrame
		cmpi.b	#$18,($FFFFF600).w ; is	scene number $18 (ending)?
		beq.s	loc_52DA	; if yes, branch
		move.b	#$1C,($FFFFF600).w ; set scene to $1C (credits)
		move.b	#$91,d0
		bsr.w	PlaySound_Special ; play credits music
		move.w	#0,($FFFFFFF4).w ; set credits index number to 0
		rts	

loc_52DA:				; ...
		tst.w	($FFFFFE02).w	; is level set to restart?
		beq.w	End_MainLoop	; if not, branch

		clr.w	($FFFFFE02).w
		move.w	#$3F,($FFFFF626).w
		clr.w	($FFFFF794).w

End_AllEmlds:				; ...
		bsr.w	PauseGame
		move.b	#$18,($FFFFF62A).w
		bsr.w	DelayProgram
		addq.w	#1,($FFFFFE04).w
		bsr.w	End_MoveSonic
		jsr	$880000+ObjectsLoad
		bsr.w	DeformBgLayer
		jsr	$880000+BuildSprites
		jsr	$880000+ObjPosLoad
		bsr.w	OscillateNumDo
		bsr.w	ChangeRingFrame
		subq.w	#1,($FFFFF794).w
		bpl.s	loc_5334
		move.w	#2,($FFFFF794).w
		bsr.w	Pal_ToWhite

loc_5334:				; ...
		tst.w	($FFFFFE02).w
		beq.w	End_AllEmlds
		clr.w	($FFFFFE02).w
		move.w	#$2E2F,($FFFFA480).w ; modify level layout
		lea	($C00004).l,a5
		lea	($C00000).l,a6
		lea	($FFFFF700).w,a3
		lea	($FFFFA400).w,a4
		move.w	#$4000,d2
		bsr.w	LoadTilesFromStart2
		moveq	#$13,d0
		bsr.w	PalLoad1	; load ending pallet
		bsr.w	Pal_MakeWhite
		bra.w	End_MainLoop
; ---------------------------------------------------------------------------
; Subroutine controlling Sonic on the ending sequence
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


End_MoveSonic:				; ...
		move.b	($FFFFF7D7).w,d0
		bne.s	End_MoveSonic2
		cmpi.w	#$90,($FFFFD008).w ; has Sonic passed $90 on y-axis?
		bcc.s	End_MoveSonExit	; if not, branch
		addq.b	#2,($FFFFF7D7).w
		move.b	#1,($FFFFF7CC).w ; lock	player's controls
		move.w	#$800,($FFFFF602).w ; move Sonic to the	right
		rts	

End_MoveSonic2:				; ...
		subq.b	#2,d0
		bne.s	End_MoveSonic3
		cmpi.w	#$A0,($FFFFD008).w ; has Sonic passed $A0 on y-axis?
		bcs.s	End_MoveSonExit	; if not, branch
		addq.b	#2,($FFFFF7D7).w
		moveq	#0,d0
		move.b	d0,($FFFFF7CC).w
		move.w	d0,($FFFFF602).w ; stop	Sonic moving
		move.w	d0,($FFFFD014).w
		move.b	#$81,($FFFFF7C8).w
		move.b	#3,($FFFFD01A).w
		move.w	#$505,($FFFFD01C).w ; use "standing" animation
		move.b	#3,($FFFFD01E).w
		rts	

End_MoveSonic3:				; ...
		subq.b	#2,d0
		bne.s	End_MoveSonExit
		addq.b	#2,($FFFFF7D7).w
		move.w	#$A0,($FFFFD008).w
		move.b	#$87,($FFFFD000).w ; load Sonic	ending sequence	object
		clr.w	($FFFFD024).w

End_MoveSonExit:			; ...
		rts	
; End of function End_MoveSonic

; ---------------------------------------------------------------------------
; Object 87 - Sonic on ending sequence
; ---------------------------------------------------------------------------

Obj87:					; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj87_Index(pc,d0.w),d1
		jsr	Obj87_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj87_Index:	dc.w Obj87_Main-Obj87_Index, Obj87_MakeEmlds-Obj87_Index ; ...
		dc.w Obj87_Animate-Obj87_Index,	Obj87_LookUp-Obj87_Index
		dc.w Obj87_ClrObjRam-Obj87_Index, Obj87_Animate-Obj87_Index
		dc.w Obj87_MakeLogo-Obj87_Index, Obj87_Animate-Obj87_Index
		dc.w Obj87_Leap-Obj87_Index, Obj87_Animate-Obj87_Index

Obj87_Main:				; ...
		cmpi.b	#6,($FFFFFE57).w ; do you have all 6 emeralds?
		beq.s	Obj87_Main2	; if yes, branch
		addi.b	#$10,$25(a0)	; else,	skip emerald sequence
		move.w	#$D8,$30(a0)
		rts	

Obj87_Main2:				; ...
		addq.b	#2,$25(a0)
		move.l	#$880000+Map_obj87,4(a0)
		move.w	#$3E1,2(a0)
		move.b	#4,1(a0)
		clr.b	$22(a0)
		move.b	#2,$18(a0)
		move.b	#0,$1A(a0)
		move.w	#$50,$30(a0)	; set duration for Sonic to pause

Obj87_MakeEmlds:			; ...
		subq.w	#1,$30(a0)	; subtract 1 from duration
		bne.s	Obj87_Wait
		addq.b	#2,$25(a0)
		move.w	#1,$1C(a0)
		move.b	#$88,($FFFFD400).w ; load chaos	emeralds objects

Obj87_Wait:				; ...
		rts	

Obj87_LookUp:				; ...
		cmpi.w	#$2000,($FFD43C).l
		bne.s	locret_5480
		move.w	#1,($FFFFFE02).w ; set level to	restart	(causes	flash)
		move.w	#$5A,$30(a0)
		addq.b	#2,$25(a0)

locret_5480:				; ...
		rts	

Obj87_ClrObjRam:			; ...
		subq.w	#1,$30(a0)
		bne.s	Obj87_Wait2
		lea	($FFFFD400).w,a1
		move.w	#$FF,d1

Obj87_ClrLoop:				; ...
		clr.l	(a1)+
		dbf	d1,Obj87_ClrLoop ; clear the object RAM
		move.w	#1,($FFFFFE02).w
		addq.b	#2,$25(a0)
		move.b	#1,$1C(a0)
		move.w	#$3C,$30(a0)

Obj87_Wait2:				; ...
		rts	

Obj87_MakeLogo:				; ...
		subq.w	#1,$30(a0)
		bne.s	Obj87_Wait3
		addq.b	#2,$25(a0)
		move.w	#$B4,$30(a0)
		move.b	#2,$1C(a0)
		move.b	#$89,($FFFFD400).w ; load "SONIC THE HEDGEHOG" object

Obj87_Wait3:				; ...
		rts	

Obj87_Animate:				; ...
		lea	(Ani_obj87)(pc),a1
		jmp	$880000+AnimateSprite

Obj87_Leap:				; ...
		subq.w	#1,$30(a0)
		bne.s	Obj87_Wait4
		addq.b	#2,$25(a0)
		move.l	#$880000+Map_obj87,4(a0)
		move.w	#$3E1,2(a0)
		move.b	#4,1(a0)
		clr.b	$22(a0)
		move.b	#2,$18(a0)
		move.b	#5,$1A(a0)
		move.b	#2,$1C(a0)	; use "leaping"	animation
		move.b	#$89,($FFFFD400).w ; load "SONIC THE HEDGEHOG" object
		bra.s	Obj87_Animate

Obj87_Wait4:				; ...
		rts	
Ani_obj87:	dc.w byte_551C-Ani_obj87, byte_552A-Ani_obj87, byte_5534-Ani_obj87 ; ...
byte_551C:	dc.b 3,	1, 0, 1, 0, 1, 0, 1, 0,	1, 0, 1, 2, $FA	; ...
byte_552A:	dc.b 5,	3, 4, 3, 4, 3, 4, 3, $FA, 0 ; ...
byte_5534:	dc.b 3,	5, 5, 5, 6, 7, $FE, 1 ;	...
; ---------------------------------------------------------------------------
; Object 88 - chaos emeralds on	the ending sequence
; ---------------------------------------------------------------------------

Obj88:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj88_Index(pc,d0.w),d1
		jsr	Obj88_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj88_Index:	dc.w Obj88_Main-Obj88_Index ; ...
		dc.w Obj88_Move-Obj88_Index

Obj88_Main:				; ...
		cmpi.b	#2,($FFFFD01A).w
		beq.s	Obj88_Main2
		addq.l	#4,sp
		rts	

Obj88_Main2:				; ...
		move.w	($FFFFD008).w,8(a0) ; match X position with Sonic
		move.w	($FFFFD00C).w,$C(a0) ; match Y position	with Sonic
		movea.l	a0,a1
		moveq	#0,d3
		moveq	#1,d2
		moveq	#5,d1

Obj88_MainLoop:				; ...
		move.b	#$88,(a1)	; load chaos emerald object
		addq.b	#2,$24(a1)
		move.l	#$880000+Map_obj88,4(a1)
		move.w	#$3C5,2(a1)
		move.b	#4,1(a1)
		move.b	#1,$18(a1)
		move.w	8(a0),$38(a1)
		move.w	$C(a0),$3A(a1)
		move.b	d2,$1C(a1)
		move.b	d2,$1A(a1)
		addq.b	#1,d2
		move.b	d3,$26(a1)
		addi.b	#$2A,d3
		lea	$40(a1),a1
		dbf	d1,Obj88_MainLoop ; repeat 5 more times

Obj88_Move:				; ...
		move.w	$3E(a0),d0
		add.w	d0,$26(a0)
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		moveq	#0,d4
		move.b	$3C(a0),d4
		muls.w	d4,d1
		asr.l	#8,d1
		muls.w	d4,d0
		asr.l	#8,d0
		add.w	$38(a0),d1
		add.w	$3A(a0),d0
		move.w	d1,8(a0)
		move.w	d0,$C(a0)
		cmpi.w	#$2000,$3C(a0)
		beq.s	loc_55FA
		addi.w	#$20,$3C(a0)

loc_55FA:				; ...
		cmpi.w	#$2000,$3E(a0)
		beq.s	loc_5608
		addi.w	#$20,$3E(a0)

loc_5608:				; ...
		cmpi.w	#$140,$3A(a0)
		beq.s	locret_5614
		subq.w	#1,$3A(a0)

locret_5614:				; ...
		rts	
; ---------------------------------------------------------------------------
; Object 89 - "SONIC THE HEDGEHOG" text	on the ending sequence
; ---------------------------------------------------------------------------

Obj89:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj89_Index(pc,d0.w),d1
		jmp	Obj89_Index(pc,d1.w)
Obj89_Index:	dc.w Obj89_Main-Obj89_Index ; ...
		dc.w Obj89_Move-Obj89_Index
		dc.w Obj89_GotoCredits-Obj89_Index

Obj89_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#-$20,8(a0)	; object starts	outside	the level boundary
		move.w	#$D8,$A(a0)
		move.l	#$880000+Map_obj89,4(a0)
		move.w	#$5C5,2(a0)
		move.b	#0,1(a0)
		move.b	#0,$18(a0)

Obj89_Move:				; ...
		cmpi.w	#$C0,8(a0)	; has object reached $C0?
		beq.s	Obj89_Delay	; if yes, branch
		addi.w	#$10,8(a0)	; move object to the right
		jsr	$880000+DisplaySprite

Obj89_Delay:				; ...
		addq.b	#2,$24(a0)
		move.w	#120,$30(a0)	; set duration for delay (2 seconds)

Obj89_GotoCredits:			; ...
		subq.w	#1,$30(a0)	; subtract 1 from duration
		bpl.s	Obj89_Display
		move.b	#$1C,($FFFFF600).w ; exit to credits

Obj89_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - Sonic on the ending	sequence
; ---------------------------------------------------------------------------
Map_obj87:	dc.w byte_5690-Map_obj87, byte_569B-Map_obj87 ;	...
		dc.w byte_56AB-Map_obj87, byte_56B6-Map_obj87
		dc.w byte_56C1-Map_obj87, byte_56CC-Map_obj87
		dc.w byte_56DC-Map_obj87, byte_5700-Map_obj87
byte_5690:	dc.b 2			; ...
		dc.b $EC, $B, 0, 0, $F8	; holding emeralds
		dc.b $C, $C, 0,	$C, $F0
byte_569B:	dc.b 3			; ...
		dc.b $FC, $D, 0, $10, $F0 ; holding emeralds (glowing)
		dc.b $EC, $B, 0, 0, $F8
		dc.b $C, $C, 0,	$C, $F0
byte_56AB:	dc.b 2			; ...
		dc.b $EC, 9, 0,	$18, $F8 ; looking up
		dc.b $FC, $E, 0, $1E, $F0
byte_56B6:	dc.b 2			; ...
		dc.b $EC, 9, 0,	$2A, $F8 ; confused
		dc.b $FC, $E, 0, $30, $F0
byte_56C1:	dc.b 2			; ...
		dc.b $EC, 9, 8,	$2A, $F0 ; confused #2
		dc.b $FC, $E, 8, $30, $F0
byte_56CC:	dc.b 3			; ...
		dc.b $EC, 6, 0,	$3C, $F0 ; leaping
		dc.b $EC, 6, 8,	$3C, 0
		dc.b 4,	$D, 0, $42, $F0
byte_56DC:	dc.b 7			; ...
		dc.b $B2, $C, 0, $4A, $F8 ; leaping #2
		dc.b $BA, $F, 0, $4E, $F0
		dc.b $BA, 5, 0,	$5E, $10
		dc.b $CA, 2, 0,	$62, $10
		dc.b $DA, $C, 0, $65, $F0
		dc.b $E2, 8, 0,	$69, $F8
		dc.b $EA, 5, 0,	$6C, $F8
byte_5700:	dc.b $18		; ...
		dc.b $80, $F, 0, $70, $F8 ; leaping #3
		dc.b $90, $B, 0, $80, $E0
		dc.b $90, $B, 0, $8C, $18
		dc.b $98, $B, 0, $98, $30
		dc.b $A0, $F, 0, $A4, $58
		dc.b $88, 0, 0,	$B4, $F0
		dc.b $80, 5, 0,	$B5, $18
		dc.b $A0, $F, 0, $B9, $F8
		dc.b $B0, $B, 0, $C9, $E0
		dc.b $B8, $F, 0, $D5, $38
		dc.b $A8, 5, 0,	$E5, $48
		dc.b $C0, 2, 0,	$E9, $58
		dc.b $C0, $F, 0, $EC, $F8
		dc.b $B8, $F, 0, $FC, $18
		dc.b $B0, 8, 1,	$C, $18
		dc.b $D8, $D, 1, $F, $30
		dc.b $D8, 8, 1,	$17, $18
		dc.b $D8, $F, 1, $1A, $D8
		dc.b $E0, $D, 1, $2A, $F8
		dc.b $E0, 0, 1,	$32, $28
		dc.b $D0, 4, 1,	$33, $E0
		dc.b $E8, 5, 1,	$35, $C8
		dc.b $F8, $C, 1, $39, $C8
		dc.b $F0, 6, 1,	$3D, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - chaos emeralds on the ending sequence
; ---------------------------------------------------------------------------
Map_obj88:	dc.w byte_5788-Map_obj88, byte_578E-Map_obj88 ;	...
		dc.w byte_5794-Map_obj88, byte_579A-Map_obj88
		dc.w byte_57A0-Map_obj88, byte_57A6-Map_obj88
		dc.w byte_57AC-Map_obj88
byte_5788:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_578E:	dc.b 1			; ...
		dc.b $F8, 5, 0,	4, $F8
byte_5794:	dc.b 1			; ...
		dc.b $F8, 5, $40, $10, $F8
byte_579A:	dc.b 1			; ...
		dc.b $F8, 5, $20, $18, $F8
byte_57A0:	dc.b 1			; ...
		dc.b $F8, 5, $40, $14, $F8
byte_57A6:	dc.b 1			; ...
		dc.b $F8, 5, 0,	8, $F8
byte_57AC:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$C, $F8
; ---------------------------------------------------------------------------
; Sprite mappings - "SONIC THE HEDGEHOG" text on the ending sequence
; ---------------------------------------------------------------------------
Map_obj89:	dc.w byte_57B4-Map_obj89 ; ...
byte_57B4:	dc.b 3			; ...
		dc.b $F0, $F, 0, 0, $D0
		dc.b $F0, $F, 0, $10, $F0
		dc.b $F0, $F, 0, $20, $10
; ---------------------------------------------------------------------------
; Credits ending sequence
; ---------------------------------------------------------------------------

Credits:				; ...
		bsr.w	ClearPLC
		bsr.w	Pal_FadeFrom
		lea	($C00004).l,a6
		move.w	#$8004,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$9001,(a6)
		move.w	#$9200,(a6)
		move.w	#$8B03,(a6)
		move.w	#$8720,(a6)
		clr.b	($FFFFF64E).w
		bsr.w	ClearScreen
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

Cred_ClrObjRam:				; ...
		move.l	d0,(a1)+
		dbf	d1,Cred_ClrObjRam ; clear object RAM
		move.l	#$74000002,($C00004).l
		lea	$900000+(Nem_CreditText).l,a0 ;	load credits alphabet patterns
		bsr.w	NemDec
		lea	($FFFFFB80).w,a1
		moveq	#0,d0
		move.w	#$1F,d1

Cred_ClrPallet:				; ...
		move.l	d0,(a1)+
		dbf	d1,Cred_ClrPallet ; fill pallet	with black ($0000)
		moveq	#3,d0
		bsr.w	PalLoad1	; load Sonic's pallet
		move.b	#$8A,($FFFFD080).w ; load credits object
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		bsr.w	EndingDemoLoad
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#4,d0
		lea	$880000+(MainLoadBlocks).l,a2 ;	load block mappings etc
		lea	(a2,d0.w),a2
		moveq	#0,d0
		move.b	(a2),d0
		beq.s	loc_5862
		bsr.w	LoadPLC		; load level patterns

loc_5862:				; ...
		moveq	#1,d0
		bsr.w	LoadPLC		; load standard	level patterns
		move.w	#120,($FFFFF614).w ; display a credit for 2 seconds
		bsr.w	Pal_FadeTo

Cred_WaitLoop:				; ...
		move.b	#4,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.w	RunPLC_RAM
		tst.w	($FFFFF614).w	; have 2 seconds elapsed?
		bne.s	Cred_WaitLoop	; if not, branch
		tst.l	($FFFFF680).w	; have level gfx finished decompressing?
		bne.s	Cred_WaitLoop	; if not, branch
		cmpi.w	#9,($FFFFFFF4).w ; have	the credits finished?
		beq.w	TryAgainEnd	; if yes, branch
		rts	
; ---------------------------------------------------------------------------
; Ending sequence demo loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


EndingDemoLoad:				; ...
		move.w	($FFFFFFF4).w,d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	EndDemo_Levels(pc,d0.w),d0 ; load level	array
		move.w	d0,($FFFFFE10).w ; set level from level	array
		addq.w	#1,($FFFFFFF4).w
		cmpi.w	#9,($FFFFFFF4).w ; have	credits	finished?
		bcc.s	EndDemo_Exit	; if yes, branch
		move.w	#$8001,($FFFFFFF0).w ; force demo mode
		move.b	#8,($FFFFF600).w ; set game mode to 08 (demo)
		move.b	#3,($FFFFFE12).w ; set lives to	3
		moveq	#0,d0
		move.w	d0,($FFFFFE20).w ; clear rings
		move.l	d0,($FFFFFE22).w ; clear time
		move.l	d0,($FFFFFE26).w ; clear score
		move.b	d0,($FFFFFE30).w ; clear lamppost counter
		cmpi.w	#4,($FFFFFFF4).w ; is SLZ demo running?
		bne.s	EndDemo_Exit	; if not, branch
		lea	(EndDemo_LampVar)(pc),a1 ; load lamppost variables
		lea	($FFFFFE30).w,a2
		move.w	#8,d0

EndDemo_LampLoad:			; ...
		move.l	(a1)+,(a2)+
		dbf	d0,EndDemo_LampLoad

EndDemo_Exit:				; ...
		rts	
; End of function EndingDemoLoad

; ---------------------------------------------------------------------------
; Levels used in the end sequence demos
; ---------------------------------------------------------------------------
EndDemo_Levels:	dc.w 0			; Green	Hill
		dc.w $201		; Marble
		dc.w $402		; Spring Yard
		dc.w $102		; Labyrinth
		dc.w $302		; Star Light
		dc.w $500		; Scrap	Brain
		dc.w $501		; Scrap	Brain
		dc.w 0			; Green	Hill
EndDemo_LampVar:dc.b 1,	1		; ...
		dc.w $A00, $62C, $D
		dc.l 0
		dc.b 0,	0
		dc.w $800, $957, $5CC, $4AB, $3A6, 0, $28C, 0, 0, $308
		dc.b 1,	1
; ---------------------------------------------------------------------------
; "TRY AGAIN" and "END"	screens
; ---------------------------------------------------------------------------

TryAgainEnd:				; ...
		bsr.w	ClearPLC
		bsr.w	Pal_FadeFrom
		lea	($C00004).l,a6
		move.w	#$8004,(a6)
		move.w	#$8230,(a6)
		move.w	#$8407,(a6)
		move.w	#$9001,(a6)
		move.w	#$9200,(a6)
		move.w	#$8B03,(a6)
		move.w	#$8720,(a6)
		clr.b	($FFFFF64E).w
		bsr.w	ClearScreen
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.w	#$7FF,d1

TryAg_ClrObjRam:			; ...
		move.l	d0,(a1)+
		dbf	d1,TryAg_ClrObjRam ; clear object RAM
		moveq	#$1D,d0
		bsr.w	RunPLC_ROM	; load "TRY AGAIN" or "END" patterns
		lea	($FFFFFB80).w,a1
		moveq	#0,d0
		move.w	#$1F,d1

TryAg_ClrPallet:			; ...
		move.l	d0,(a1)+
		dbf	d1,TryAg_ClrPallet ; fill pallet with black (0000)
		moveq	#$13,d0
		bsr.w	PalLoad1	; load ending pallet
		clr.w	($FFFFFBC0).w
		move.b	#$8B,($FFFFD080).w ; load Robotnik object
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		move.w	#1800,($FFFFF614).w ; show screen for 30 seconds
		bsr.w	Pal_FadeTo

TryAg_MainLoop:				; ...
		bsr.w	PauseGame
		move.b	#4,($FFFFF62A).w
		bsr.w	DelayProgram
		jsr	$880000+ObjectsLoad
		jsr	$880000+BuildSprites
		andi.b	#$80,($FFFFF605).w ; is	Start button pressed?
		bne.s	TryAg_Exit	; if yes, branch
		tst.w	($FFFFF614).w	; has 30 seconds elapsed?
		beq.s	TryAg_Exit	; if yes, branch
		cmpi.b	#$1C,($FFFFF600).w
		beq.s	TryAg_MainLoop

TryAg_Exit:				; ...
		move.b	#0,($FFFFF600).w ; go to Sega screen
		rts	
; ---------------------------------------------------------------------------
; Object 8B - Robotnik on "TRY AGAIN" and "END"	screens
; ---------------------------------------------------------------------------

Obj8B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj8B_Index(pc,d0.w),d1
		jsr	Obj8B_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj8B_Index:	dc.w Obj8B_Main-Obj8B_Index ; ...
		dc.w Obj8B_Animate-Obj8B_Index
		dc.w Obj8B_Juggle-Obj8B_Index
		dc.w loc_5A8E-Obj8B_Index

Obj8B_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$120,8(a0)
		move.w	#$F4,$A(a0)
		move.l	#$880000+Map_obj8B,4(a0)
		move.w	#$3E1,2(a0)
		move.b	#0,1(a0)
		move.b	#2,$18(a0)
		move.b	#2,$1C(a0)	; use "END" animation
		cmpi.b	#6,($FFFFFE57).w ; do you have all 6 emeralds?
		beq.s	Obj8B_Animate	; if yes, branch
		move.b	#$8A,($FFFFD0C0).w ; load credits object
		move.w	#9,($FFFFFFF4).w ; use "TRY AGAIN" text
		move.b	#$8C,($FFFFD800).w ; load emeralds object on "TRY AGAIN" screen
		move.b	#0,$1C(a0)	; use "TRY AGAIN" animation

Obj8B_Animate:				; ...
		lea	(Ani_obj8B)(pc),a1
		jmp	$880000+AnimateSprite

Obj8B_Juggle:				; ...
		addq.b	#2,$24(a0)
		moveq	#2,d0
		btst	#0,$1C(a0)
		beq.s	loc_5A6A
		neg.w	d0

loc_5A6A:				; ...
		lea	($FFFFD800).w,a1
		moveq	#5,d1

loc_5A70:				; ...
		move.b	d0,$3E(a1)
		move.w	d0,d2
		asl.w	#3,d2
		add.b	d2,$26(a1)
		lea	$40(a1),a1
		dbf	d1,loc_5A70
		addq.b	#1,$1A(a0)
		move.w	#112,$30(a0)

loc_5A8E:				; ...
		subq.w	#1,$30(a0)
		bpl.s	locret_5AA0
		bchg	#0,$1C(a0)
		move.b	#2,$24(a0)

locret_5AA0:				; ...
		rts	
Ani_obj8B:	dc.w byte_5AA8-Ani_obj8B, byte_5AAC-Ani_obj8B, byte_5AB0-Ani_obj8B ; ...
byte_5AA8:	dc.b 5,	0, $FC,	1	; ...
byte_5AAC:	dc.b 5,	2, $FC,	3	; ...
byte_5AB0:	dc.b 7,	4, 5, 6, 5, 4, 5, 6, 5,	4, 5, 6, 5, 7, 5, 6, 5,	$FF ; ...
; ---------------------------------------------------------------------------
; Object 8C - chaos emeralds on	the "TRY AGAIN"	screen
; ---------------------------------------------------------------------------

Obj8C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj8C_Index(pc,d0.w),d1
		jsr	Obj8C_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj8C_Index:	dc.w Obj8C_Main-Obj8C_Index ; ...
		dc.w Obj8C_Move-Obj8C_Index

Obj8C_Main:				; ...
		movea.l	a0,a1
		moveq	#0,d2
		moveq	#0,d3
		moveq	#5,d1
		sub.b	($FFFFFE57).w,d1

Obj8C_MakeEms:				; ...
		move.b	#$8C,(a1)	; load emerald object
		addq.b	#2,$24(a1)
		move.l	#$880000+Map_obj88,4(a1)
		move.w	#$3C5,2(a1)
		move.b	#0,1(a1)
		move.b	#1,$18(a1)
		move.w	#$104,8(a1)
		move.w	#$120,$38(a1)
		move.w	#$EC,$A(a1)
		move.w	$A(a1),$3A(a1)
		move.b	#$1C,$3C(a1)
		lea	($FFFFFE58).w,a3

Obj8C_ChkEms:				; ...
		moveq	#0,d0
		move.b	($FFFFFE57).w,d0
		subq.w	#1,d0
		bcs.s	loc_5B42

Obj8C_ChkEmLoop:			; ...
		cmp.b	(a3,d0.w),d2
		bne.s	loc_5B3E
		addq.b	#1,d2
		bra.s	Obj8C_ChkEms

loc_5B3E:				; ...
		dbf	d0,Obj8C_ChkEmLoop ; checks which emeralds you have

loc_5B42:				; ...
		move.b	d2,$1A(a1)
		addq.b	#1,$1A(a1)
		addq.b	#1,d2
		move.b	#$80,$26(a1)
		move.b	d3,$1E(a1)
		move.b	d3,$1F(a1)
		addi.w	#$A,d3
		lea	$40(a1),a1
		dbf	d1,Obj8C_MakeEms

Obj8C_Move:				; ...
		tst.w	$3E(a0)
		beq.s	locret_5BBA
		tst.b	$1E(a0)
		beq.s	loc_5B78
		subq.b	#1,$1E(a0)
		bne.s	loc_5B80

loc_5B78:				; ...
		move.w	$3E(a0),d0
		add.w	d0,$26(a0)

loc_5B80:				; ...
		move.b	$26(a0),d0
		beq.s	loc_5B8C
		cmpi.b	#$80,d0
		bne.s	loc_5B96

loc_5B8C:				; ...
		clr.w	$3E(a0)
		move.b	$1F(a0),$1E(a0)

loc_5B96:				; ...
		jsr	$880000+(CalcSine).l
		moveq	#0,d4
		move.b	$3C(a0),d4
		muls.w	d4,d1
		asr.l	#8,d1
		muls.w	d4,d0
		asr.l	#8,d0
		add.w	$38(a0),d1
		add.w	$3A(a0),d0
		move.w	d1,8(a0)
		move.w	d0,$A(a0)

locret_5BBA:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - Robotnik on	the "TRY AGAIN"	and "END" screens
; ---------------------------------------------------------------------------
Map_obj8B:	dc.w byte_5BCC-Map_obj8B, byte_5BF5-Map_obj8B ;	...
		dc.w byte_5C1E-Map_obj8B, byte_5C47-Map_obj8B
		dc.w byte_5C70-Map_obj8B, byte_5CAD-Map_obj8B
		dc.w byte_5CE0-Map_obj8B, byte_5D13-Map_obj8B
byte_5BCC:	dc.b 8			; ...
		dc.b $E9, 5, 0,	0, $F0
		dc.b $F9, $C, 0, 4, $E0
		dc.b $E9, 4, 0,	8, 0
		dc.b $F1, $D, 0, $A, 0
		dc.b 1,	6, 0, $23, $F0
		dc.b 1,	6, 8, $23, 0
		dc.b $18, 4, 0,	$29, $EC
		dc.b $18, 4, 8,	$29, 4
byte_5BF5:	dc.b 8			; ...
		dc.b $E8, $D, 0, $12, $E0
		dc.b $F8, 8, 0,	$1A, $E8
		dc.b $E8, 5, 8,	0, 0
		dc.b $F8, $C, 8, 4, 0
		dc.b 0,	6, 0, $1D, $F0
		dc.b 0,	6, 8, $1D, 0
		dc.b $18, 4, 0,	$29, $EC
		dc.b $18, 4, 8,	$29, 4
byte_5C1E:	dc.b 8			; ...
		dc.b $E9, 4, 8,	8, $F0
		dc.b $F1, $D, 8, $A, $E0
		dc.b $E9, 5, 8,	0, 0
		dc.b $F9, $C, 8, 4, 0
		dc.b 1,	6, 0, $23, $F0
		dc.b 1,	6, 8, $23, 0
		dc.b $18, 4, 0,	$29, $EC
		dc.b $18, 4, 8,	$29, 4
byte_5C47:	dc.b 8			; ...
		dc.b $E8, 5, 0,	0, $F0
		dc.b $F8, $C, 0, 4, $E0
		dc.b $E8, $D, 8, $12, 0
		dc.b $F8, 8, 8,	$1A, 0
		dc.b 0,	6, 0, $1D, $F0
		dc.b 0,	6, 8, $1D, 0
		dc.b $18, 4, 0,	$29, $EC
		dc.b $18, 4, 8,	$29, 4
byte_5C70:	dc.b $C			; ...
		dc.b $ED, $A, 0, $2B, $E8
		dc.b $F5, 0, 0,	$34, $E0
		dc.b 5,	4, 0, $35, $F0
		dc.b $D, 8, 0, $37, $E8
		dc.b $ED, $A, 8, $2B, 0
		dc.b $F5, 0, 8,	$34, $18
		dc.b 5,	4, 8, $35, 0
		dc.b $D, 8, 8, $37, 0
		dc.b $10, $D, 0, $73, $E0
		dc.b $10, $D, 0, $7B, 0
		dc.b $1C, $C, 0, $5B, $E0
		dc.b $1C, $C, 8, $5B, 0
byte_5CAD:	dc.b $A			; ...
		dc.b $D2, 7, 0,	$3A, $F0
		dc.b $DA, 0, 0,	$42, $E8
		dc.b $F2, 7, 0,	$43, $F0
		dc.b $D2, 7, 8,	$3A, 0
		dc.b $DA, 0, 8,	$42, $10
		dc.b $F2, 7, 8,	$43, 0
		dc.b $10, $D, 0, $67, $E8
		dc.b $10, 5, 0,	$6F, 8
		dc.b $1C, $C, 0, $5F, $E0
		dc.b $1C, $C, 8, $5F, 0
byte_5CE0:	dc.b $A			; ...
		dc.b $C4, $B, 0, $4B, $E8
		dc.b $E4, 8, 0,	$57, $E8
		dc.b $EC, 0, 0,	$5A, $F0
		dc.b $C4, $B, 8, $4B, 0
		dc.b $E4, 8, 8,	$57, 0
		dc.b $EC, 0, 8,	$5A, 8
		dc.b $10, $D, 0, $67, $E8
		dc.b $10, 5, 0,	$6F, 8
		dc.b $1C, $C, 0, $63, $E0
		dc.b $1C, $C, 8, $63, 0
byte_5D13:	dc.b $C			; ...
		dc.b $F4, $A, 0, $2B, $E8
		dc.b $FC, 0, 0,	$34, $E0
		dc.b $C, 4, 0, $35, $F0
		dc.b $14, 8, 0,	$37, $E8
		dc.b $F4, $A, 8, $2B, 0
		dc.b $FC, 0, 8,	$34, $18
		dc.b $C, 4, 8, $35, 0
		dc.b $14, 8, 8,	$37, 0
		dc.b $18, $C, 0, $83, $E0
		dc.b $18, $C, 0, $87, 0
		dc.b $1C, $C, 0, $5B, $E0
		dc.b $1C, $C, 8, $5B, 0



CheckSumError:				; ...
		bsr.w	VDPSetupGame
Check2:		move.l	#$C0000000,($C00004).l ; set VDP to CRAM write
		moveq	#$3F,d7

CheckSum_Red:				; ...
		move.w	#$E,($C00000).l	; fill screen with colour red
		dbf	d7,CheckSum_Red	; repeat $3F more times

;		move	#$2700,sr

CheckSum_Loop:				; ...
		bra.s	CheckSum_Loop
;---------------------
; VDP registers array
;---------------------

VDPSetupArrayI:
		dc.w	$8004	;9-bit palette = 1 (otherwise would be 3-bit), HBlank = 0
		dc.w	$8134	;Genesis display = 1, DMA = 1, VBlank = 1, display = 0
		dc.w	$8230	;Scroll A - $C000
		dc.w	$8338	;Window   - $E000
		dc.w	$8407	;Scroll B - $E000
		dc.w	$857c	;Sprites  - $F800
		dc.w	$8600	;Unused
		dc.w	$8700	;Backdrop color - $00
		dc.w	$8800	;Unused
		dc.w	$8900	;Unused
		dc.w	$8A00	;H Interrupt register
		dc.w	$8B00	;Full screen scroll, no external interrupts
		dc.w	$8C81	;40 cells display
		dc.w	$8D3F	;H Scroll - $FC00
		dc.w	$8E00	;Unused
		dc.w	$8F02	;VDP auto increment
		dc.w	$9001	;64 cells scroll
		dc.w	$9100	;Window H position
		dc.w	$9200	;Window V position
		dc.w	$93FF	;DMA stuff (off)
		dc.w	$94FF	;DMA stuff (off)
		dc.w	$9500	;DMA stuff (off)
		dc.w	$9600	;DMA stuff (off)
		dc.w	$9780	;DMA stuff (off)
VDPSetupArrayIEnd:


;---------------------
; Z80 init code
;---------------------

Z80Init:
	dc.w	$af01, $d91f, $1127, $0021, $2600, $f977 
	dc.w    $edb0, $dde1, $fde1, $ed47, $ed4f, $d1e1                                   
	dc.w    $f108, $d9c1, $d1e1, $f1f9, $f3ed, $5636
	dc.w	$e9e9 
Z80InitEnd:

;---------------------
; Music driver (z80)
;---------------------		

Z80Driver:
		dc.b	$c3,$46,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
		dc.b	$00,$00,$00,$00,$00,$f3,$ed,$56,$31,$00,$20,$3a,$39,$00,$b7,$ca,$4c,$00,$21,$3a,$00,$11,$40,$00,$01,$06,$00,$ed,$b0,$3e,$00,$32,$39,$00,$3e,$b4,$32,$02,$40,$3e,$c0,$32,$03,$40,$3e,$2b,$32,$00,$40,$3e,$80,$32,$01,$40,$3a,$43,$00,$4f,$3a,$44,$00,$47,$3e,$06,$3d
		dc.b	$c2,$81,$00,$21,$00,$60,$3a,$41,$00,$07,$77,$3a,$42,$00,$77,$0f,$77,$0f,$77,$0f,$77,$0f,$77,$0f,$77,$0f,$77,$0f,$77,$3a,$40,$00,$6f,$3a,$41,$00,$f6,$80,$67,$3e,$2a,$32,$00,$40,$7e,$32,$01,$40,$21,$40,$00,$7e,$c6,$01,$77,$23,$7e,$ce,$00,$77,$23,$7e,$ce,$00,$77
		dc.b	$3a,$39,$00,$b7,$c2,$4c,$00,$0b,$78,$b1,$c2,$7f,$00,$3a,$45,$00,$b7,$ca,$4c,$00,$3d,$3a,$45,$00,$06,$ff,$0e,$ff,$c3,$7f,$00
Z80DriverEnd:	


		align 4

;-----------------------------------------------
;
; VBlank
;
;-----------------------------------------------

__VBlank:
		
		movem.l	d0-a6,-(sp)
		tst.b	($FFFFF62A).w
		beq.s	loc_B88
		move.w	($C00004).l,d0
		move.l	#$40000010,($C00004).l
		move.l	($FFFFF616).w,($C00000).l
		btst	#6,($FFFFFFF8).w
		beq.s	loc_B42
		move.w	#$700,d0

loc_B3E:				; ...
		dbf	d0,loc_B3E

loc_B42:				; ...
		move.b	($FFFFF62A).w,d0
		move.b	#0,($FFFFF62A).w
		move.w	#1,($FFFFF644).w
		andi.w	#$3E,d0
		move.w	off_B6E(pc,d0.w),d0
		jsr	off_B6E(pc,d0.w)

loc_B5E:				; ...
		jsr	$880000+sub_71B4C

loc_B64:				; ...
		addq.l	#1,($FFFFFE0C).w
		movem.l	(sp)+,d0-a6
		rte	


off_B6E:	dc.w loc_B88-off_B6E, loc_C32-off_B6E ;	...
		dc.w loc_C44-off_B6E, loc_C5E-off_B6E
		dc.w loc_C6E-off_B6E, loc_DA6-off_B6E
		dc.w loc_E72-off_B6E, loc_F8A-off_B6E
		dc.w loc_C64-off_B6E, loc_F9A-off_B6E
		dc.w loc_C36-off_B6E, loc_FA6-off_B6E
		dc.w loc_E72-off_B6E


loc_B88:				; ...
		cmpi.b	#$8C,($FFFFF600).w
		beq.s	loc_B9A
		cmpi.b	#$C,($FFFFF600).w
		bne.w	loc_B5E

loc_B9A:				; ...
		cmpi.b	#1,($FFFFFE10).w ; is level LZ ?
		bne.w	loc_B5E		; if not, branch
		move.w	($C00004).l,d0
		btst	#6,($FFFFFFF8).w
		beq.s	loc_BBA
		move.w	#$700,d0

loc_BB6:				; ...
		dbf	d0,loc_BB6

loc_BBA:				; ...
		move.w	#1,($FFFFF644).w
		move.w	#$100,($A11100).l

loc_BC8:				; ...
		btst	#0,($A11100).l
		bne.s	loc_BC8
		tst.b	($FFFFF64E).w
		bne.s	loc_BFE
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		bra.s	loc_C22

loc_BFE:				; ...
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9540,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)

loc_C22:				; ...
		move.w	($FFFFF624).w,(a5)
		move.w	#0,($A11100).l
		bra.w	loc_B5E

loc_C32:				; ...
		bsr.w	sub_106E

loc_C36:				; ...
		tst.w	($FFFFF614).w
		beq.w	locret_C42
		subq.w	#1,($FFFFF614).w

locret_C42:				; ...
		rts	

loc_C44:				; ...
		bsr.w	sub_106E
		bsr.w	sub_6886
		bsr.w	sub_1642
		tst.w	($FFFFF614).w
		beq.w	locret_C5C
		subq.w	#1,($FFFFF614).w

locret_C5C:				; ...
		rts	

loc_C5E:				; ...
		bsr.w	sub_106E
		rts	

loc_C64:				; ...
		cmpi.b	#$10,($FFFFF600).w ; is	game mode = $10	(special stage)	?
		beq.w	loc_DA6		; if yes, branch

loc_C6E:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

loc_C76:				; ...
		btst	#0,($A11100).l	; has Z80 stopped?
		bne.s	loc_C76		; if not, branch
		bsr.w	ReadJoypads
		tst.b	($FFFFF64E).w
		bne.s	loc_CB0
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		bra.s	loc_CD4

loc_CB0:				; ...
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9540,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)

loc_CD4:				; ...
		move.w	($FFFFF624).w,(a5)
		lea	($C00004).l,a5
		move.l	#$940193C0,(a5)
		move.l	#$96E69500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7C00,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$94019340,(a5)
		move.l	#$96FC9500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7800,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		tst.b	($FFFFF767).w
		beq.s	loc_D50
		lea	($C00004).l,a5
		move.l	#$94019370,(a5)
		move.l	#$96E49500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7000,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.b	#0,($FFFFF767).w

loc_D50:				; ...
		move.w	#0,($A11100).l
		movem.l	($FFFFF700).w,d0-d7
		movem.l	d0-d7,($FFFFFF10).w
		movem.l	($FFFFF754).w,d0-d1
		movem.l	d0-d1,($FFFFFF30).w
		cmpi.b	#$60,($FFFFF625).w
		bcc.s	Demo_Time
		move.b	#1,($FFFFF64F).w
		addq.l	#4,sp
		bra.w	loc_B64

; ---------------------------------------------------------------------------
; Subroutine to	run a demo for an amount of time
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Demo_Time:				; ...
		bsr.w	LoadTilesAsYouMove
		jsr	$880000+AniArt_Load
		jsr	$880000+HudUpdate
		bsr.w	sub_165E
		tst.w	($FFFFF614).w	; is there time	left on	the demo?
		beq.w	Demo_TimeEnd	; if not, branch
		subq.w	#1,($FFFFF614).w ; subtract 1 from time	left

Demo_TimeEnd:				; ...
		rts	

loc_DA6:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

loc_DAE:				; ...
		btst	#0,($A11100).l	; has Z80 stopped?
		bne.s	loc_DAE		; if not, branch
		bsr.w	ReadJoypads
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$94019340,(a5)
		move.l	#$96FC9500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7800,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$940193C0,(a5)
		move.l	#$96E69500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7C00,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.w	#0,($A11100).l
		bsr.w	PalCycle_SS
		tst.b	($FFFFF767).w
		beq.s	loc_E64
		lea	($C00004).l,a5
		move.l	#$94019370,(a5)
		move.l	#$96E49500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7000,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.b	#0,($FFFFF767).w

loc_E64:				; ...
		tst.w	($FFFFF614).w
		beq.w	locret_E70
		subq.w	#1,($FFFFF614).w

locret_E70:				; ...
		rts	

loc_E72:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

loc_E7A:				; ...
		btst	#0,($A11100).l	; has Z80 stopped?
		bne.s	loc_E7A		; if not, branch
		bsr.w	ReadJoypads
		tst.b	($FFFFF64E).w
		bne.s	loc_EB4
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		bra.s	loc_ED8

loc_EB4:				; ...
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9540,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)

loc_ED8:				; ...
		move.w	($FFFFF624).w,(a5)
		lea	($C00004).l,a5
		move.l	#$940193C0,(a5)
		move.l	#$96E69500,(a5)

loc_EEE:
		move.w	#$977F,(a5)
		move.w	#$7C00,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$94019340,(a5)
		move.l	#$96FC9500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7800,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		tst.b	($FFFFF767).w
		beq.s	loc_F54
		lea	($C00004).l,a5
		move.l	#$94019370,(a5)
		move.l	#$96E49500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7000,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.b	#0,($FFFFF767).w

loc_F54:				; ...
		move.w	#0,($A11100).l	; start	the Z80
		movem.l	($FFFFF700).w,d0-d7
		movem.l	d0-d7,($FFFFFF10).w
		movem.l	($FFFFF754).w,d0-d1
		movem.l	d0-d1,($FFFFFF30).w
		bsr.w	LoadTilesAsYouMove
		jsr	$880000+AniArt_Load
		jsr	$880000+HudUpdate
		bsr.w	sub_1642
		rts	

loc_F8A:				; ...
		bsr.w	sub_106E
		addq.b	#1,($FFFFF628).w
		move.b	#$E,($FFFFF62A).w
		rts	

loc_F9A:				; ...
		bsr.w	sub_106E
		move.w	($FFFFF624).w,(a5)
		bra.w	sub_1642

loc_FA6:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

loc_FAE:				; ...
		btst	#0,($A11100).l	; has Z80 stopped?
		bne.s	loc_FAE		; if not, branch
		bsr.w	ReadJoypads
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$94019340,(a5)
		move.l	#$96FC9500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7800,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$940193C0,(a5)
		move.l	#$96E69500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7C00,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.w	#0,($A11100).l	; start	the Z80
		tst.b	($FFFFF767).w
		beq.s	loc_1060
		lea	($C00004).l,a5
		move.l	#$94019370,(a5)
		move.l	#$96E49500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7000,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.b	#0,($FFFFF767).w

loc_1060:				; ...
		tst.w	($FFFFF614).w
		beq.w	locret_106C
		subq.w	#1,($FFFFF614).w

locret_106C:				; ...
		rts

		rte

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_106E:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

loc_1076:				; ...
		btst	#0,($A11100).l	; has Z80 stopped?
		bne.s	loc_1076	; if not, branch
		bsr.w	ReadJoypads
		tst.b	($FFFFF64E).w
		bne.s	loc_10B0
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9580,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		bra.s	loc_10D4

loc_10B0:				; ...
		lea	($C00004).l,a5
		move.l	#$94009340,(a5)
		move.l	#$96FD9540,(a5)
		move.w	#$977F,(a5)
		move.w	#$C000,(a5)
		move.w	#$80,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)

loc_10D4:				; ...
		lea	($C00004).l,a5
		move.l	#$94019340,(a5)
		move.l	#$96FC9500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7800,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		lea	($C00004).l,a5
		move.l	#$940193C0,(a5)
		move.l	#$96E69500,(a5)
		move.w	#$977F,(a5)
		move.w	#$7C00,(a5)
		move.w	#$83,($FFFFF640).w
		move.w	($FFFFF640).w,(a5)
		move.w	#0,($A11100).l	; start	the Z80
		rts	
; End of function sub_106E

;-----------------------------------------------
;
; HBlank
;
;-----------------------------------------------

__HBlank:				; ...
		move	#$2700,sr
		tst.w	($FFFFF644).w
		beq.s	locret_119C
		move.w	#0,($FFFFF644).w
		movem.l	a0-a1,-(sp)
		lea	($C00000).l,a1
		lea	($FFFFFA80).w,a0 ; load	pallet from RAM
		move.l	#$C0000000,4(a1) ; set VDP to CRAM write
		move.l	(a0)+,(a1)	; move pallet to CRAM
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.l	(a0)+,(a1)
		move.w	#$8ADF,4(a1)
		movem.l	(sp)+,a0-a1
		tst.b	($FFFFF64F).w
		bne.s	loc_119E

locret_119C:				; ...
		rte	

loc_119E:				; ...
		clr.b	($FFFFF64F).w
		movem.l	d0-a6,-(sp)
		bsr.w	Demo_Time
		jsr	$880000+sub_71B4C
		movem.l	(sp)+,d0-a6
		rte	


;-----------------------------------------------
;
; Subroutines etc
;
;-----------------------------------------------

; ---------------------------------------------------------------------------
; Subroutine to	initialise joypads
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


JoypadInit:				; ...
		move.w	#$100,($A11100).l ; stop the Z80

Joypad_WaitZ80:				; ...
		btst	#0,($A11100).l	; has the Z80 stopped?
		bne.s	Joypad_WaitZ80	; if not, branch
		moveq	#$40,d0
		move.b	d0,($A10009).l	; init port 1 (joypad 1)
		move.b	d0,($A1000B).l	; init port 2 (joypad 2)
		move.b	d0,($A1000D).l	; init port 3 (extra)
		move.w	#0,($A11100).l	; start	the Z80
		rts	
; End of function JoypadInit

; ---------------------------------------------------------------------------
; Subroutine to	read joypad input, and send it to the RAM
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ReadJoypads:	
		lea	($FFFFF604).w,a0 ; address where joypad	states are written
		lea	($A10003).l,a1	; first	joypad port
		bsr.s	Joypad_Read	; do the first joypad
		addq.w	#2,a1		; do the second	joypad

Joypad_Read:				; ...
		move.b	#0,(a1)
		nop	
		nop	
		move.b	(a1),d0
		lsl.b	#2,d0
		andi.b	#$C0,d0
		move.b	#$40,(a1)
		nop	
		nop	
		move.b	(a1),d1
		andi.b	#$3F,d1
		or.b	d1,d0
		not.b	d0
		move.b	(a0),d1
		eor.b	d0,d1
		move.b	d0,(a0)+
		and.b	d0,d1
		move.b	d1,(a0)+
		rts	
; End of function ReadJoypads




; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


VDPSetupGame:				; ...

		lea	($C00004).l,a0
		lea	($C00000).l,a1
		lea	$880000+(VDPSetupArray),a2
		moveq	#$12,d7

VDP_Loop:				; ...
		move.w	(a2)+,d0
		move.w	d0,(a0)
		dbf	d7,VDP_Loop	; set the VDP registers

		move.w	$880000+(VDPSetupArray+2).l,d0
		move.w	d0,($FFFFF60C).w
		move.w	#$8ADF,($FFFFF624).w
		moveq	#0,d0
		move.l	#$C0000000,($C00004).l ; set VDP to CRAM write
		move.w	#$3F,d7

VDP_ClrCRAM:				; ...
		move.w	d0,(a1)
		dbf	d7,VDP_ClrCRAM	; clear	the CRAM
		clr.l	($FFFFF616).w
		clr.l	($FFFFF61A).w
		move.l	d1,-(sp)
		lea	($C00004).l,a5
		move.w	#$8F01,(a5)	; set the auto increment to 1
		move.l	#$94FF93FF,(a5)
		move.w	#$9780,(a5)
		move.l	#$40000080,(a5)
		move.w	#0,($C00000).l	; clear	the screen

loc_128E:				; ...
		move.w	(a5),d1
		btst	#1,d1
		bne.s	loc_128E
		move.w	#$8F02,(a5)	; set the auto increment back to 2
		move.l	(sp)+,d1

;		move.b	#$0,($A15181).l
		rts	
; End of function VDPSetupGame

VDPSetupArray3:	dc.w $8004, $8134, $8004, $8004	; ...
		dc.w $8004, $8004, $8004, $8004	; ...
		dc.w $8004, $8004, $8004, $8004	; ...
		dc.w $8004, $8004, $8004, $8004	; ...
		dc.w $8004, $8004, $8004, $8004	; ...

VDPSetupArray:	dc.w $8004, $8004, $8230, $8328	; ...
		dc.w $8407, $857C, $8600, $8700
		dc.w $8800, $8900, $8A00, $8B00
		dc.w $8C81, $8D3F, $8E00, $8F02
		dc.w $9001, $9100, $9200

; ---------------------------------------------------------------------------
; Subroutine to	clear the screen
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ClearScreen:				; ...
		lea	($C00004).l,a5
		move.w	#$8F01,(a5)
		move.l	#$940F93FF,(a5)
		move.w	#$9780,(a5)
		move.l	#$40000083,(a5)
		move.w	#0,($C00000).l

loc_12E6:				; ...
		move.w	(a5),d1
		btst	#1,d1
		bne.s	loc_12E6
		move.w	#$8F02,(a5)
		lea	($C00004).l,a5
		move.w	#$8F01,(a5)
		move.l	#$940F93FF,(a5)
		move.w	#$9780,(a5)
		move.l	#$60000083,(a5)
		move.w	#0,($C00000).l

loc_1314:				; ...
		move.w	(a5),d1
		btst	#1,d1
		bne.s	loc_1314
		move.w	#$8F02,(a5)
		move.l	#0,($FFFFF616).w
		move.l	#0,($FFFFF61A).w
		lea	($FFFFF800).w,a1
		moveq	#0,d0
		move.w	#$A0,d1

loc_133A:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_133A
		lea	($FFFFCC00).w,a1
		moveq	#0,d0
		move.w	#$100,d1

loc_134A:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_134A
		rts	
; End of function ClearScreen

; ---------------------------------------------------------------------------
; Subroutine to	load the sound driver
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SoundDriverLoad:			; ...
		nop	
		move.w	#$100,($A11100).l ; stop the Z80
		move.w	#$100,($A11200).l ; reset the Z80
		lea	$900000+(Kos_Z80).l,a0	; load sound driver
		lea	($A00000).l,a1
		bsr.w	KosDec		; decompress
		move.w	#0,($A11200).l
		nop	
		nop	
		nop	
		nop	
		move.w	#$100,($A11200).l ; reset the Z80
		move.w	#0,($A11100).l	; start	the Z80
		rts	
; End of function SoundDriverLoad

; ---------------------------------------------------------------------------
; Subroutine to	play a sound or	music track
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PlaySound:				; ...
		move.b	d0,($FFFFF00A).w
		rts	
; End of function PlaySound

; ---------------------------------------------------------------------------
; Subroutine to	play a special sound/music (E0-E4)
;
; E0 - Fade out
; E1 - Sega
; E2 - Speed up
; E3 - Normal speed
; E4 - Stop
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PlaySound_Special:			; ...
		move.b	d0,($FFFFF00B).w
		rts	
; End of function PlaySound_Special

; ---------------------------------------------------------------------------
; Unused sound/music subroutine
; ---------------------------------------------------------------------------

PlaySound_Unk:
		move.b	d0,($FFFFF00C).w
		rts	

; ---------------------------------------------------------------------------
; Subroutine to	pause the game
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PauseGame:				; ...
		nop	
		tst.b	($FFFFFE12).w	; do you have any lives	left?
		beq.s	Unpause		; if not, branch
		tst.w	($FFFFF63A).w	; is game already paused?
		bne.s	loc_13BE	; if yes, branch
		btst	#7,($FFFFF605).w ; is Start button pressed?
		beq.s	Pause_DoNothing	; if not, branch

loc_13BE:				; ...
		move.w	#1,($FFFFF63A).w ; freeze time
		move.b	#1,($FFFFF003).w ; pause music

loc_13CA:				; ...
		move.b	#$10,($FFFFF62A).w
		bsr.w	DelayProgram
		tst.b	($FFFFFFE1).w	; is slow-motion cheat on?
		beq.s	Pause_ChkStart	; if not, branch
		btst	#6,($FFFFF605).w ; is button A pressed?
		beq.s	Pause_ChkBC	; if not, branch
		move.b	#4,($FFFFF600).w ; set game mode to 4 (title screen)
		nop	
		bra.s	loc_1404

Pause_ChkBC:				; ...
		btst	#4,($FFFFF604).w ; is button B pressed?
		bne.s	Pause_SlowMo	; if yes, branch
		btst	#5,($FFFFF605).w ; is button C pressed?
		bne.s	Pause_SlowMo	; if yes, branch

Pause_ChkStart:				; ...
		btst	#7,($FFFFF605).w ; is Start button pressed?
		beq.s	loc_13CA	; if not, branch

loc_1404:				; ...
		move.b	#$80,($FFFFF003).w

Unpause:				; ...
		move.w	#0,($FFFFF63A).w ; unpause the game

Pause_DoNothing:			; ...
		rts	

Pause_SlowMo:				; ...
		move.w	#1,($FFFFF63A).w
		move.b	#$80,($FFFFF003).w
		rts	
; End of function PauseGame

; ---------------------------------------------------------------------------
; Subroutine to	display	patterns via the VDP
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ShowVDPGraphics:			; ...
		lea	($C00000).l,a6
		move.l	#$800000,d4

loc_142C:				; ...
		move.l	d0,4(a6)
		move.w	d1,d3

loc_1432:				; ...
		move.w	(a1)+,(a6)
		dbf	d3,loc_1432
		add.l	d4,d0
		dbf	d2,loc_142C
		rts	
; End of function ShowVDPGraphics


; ---------------------------------------------------------------------------
; Nemesis decompression	algorithm
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


NemDec:					; ...
		movem.l	d0-a1/a3-a5,-(sp)
		lea	(loc_1502)(pc),a3
		lea	($C00000).l,a4
		bra.s	loc_145C
		movem.l	d0-a1/a3-a5,-(sp)
		lea	(loc_1518)(pc),a3

loc_145C:				; ...
		lea	($FFFFAA00).w,a1
		move.w	(a0)+,d2
		lsl.w	#1,d2
		bcc.s	loc_146A
		adda.w	#$A,a3

loc_146A:				; ...
		lsl.w	#2,d2
		movea.w	d2,a5
		moveq	#8,d3
		moveq	#0,d2
		moveq	#0,d4
		bsr.w	NemDec4
		move.b	(a0)+,d5
		asl.w	#8,d5
		move.b	(a0)+,d5
		move.w	#$10,d6
		bsr.s	NemDec2
		movem.l	(sp)+,d0-a1/a3-a5
		rts	
; End of function NemDec


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


NemDec2:				; ...
		move.w	d6,d7
		subq.w	#8,d7
		move.w	d5,d1
		lsr.w	d7,d1
		cmpi.b	#-4,d1
		bcc.s	loc_14D6
		andi.w	#$FF,d1
		add.w	d1,d1
		move.b	(a1,d1.w),d0
		ext.w	d0
		sub.w	d0,d6
		cmpi.w	#9,d6
		bcc.s	loc_14B2
		addq.w	#8,d6
		asl.w	#8,d5
		move.b	(a0)+,d5

loc_14B2:				; ...
		move.b	1(a1,d1.w),d1
		move.w	d1,d0
		andi.w	#$F,d1
		andi.w	#$F0,d0

loc_14C0:				; ...
		lsr.w	#4,d0

loc_14C2:				; ...
		lsl.l	#4,d4
		or.b	d1,d4
		subq.w	#1,d3
		bne.s	loc_14D0
		jmp	(a3)
; End of function NemDec2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


NemDec3:				; ...
		moveq	#0,d4
		moveq	#8,d3

loc_14D0:				; ...
		dbf	d0,loc_14C2
		bra.s	NemDec2

loc_14D6:				; ...
		subq.w	#6,d6
		cmpi.w	#9,d6
		bcc.s	loc_14E4
		addq.w	#8,d6
		asl.w	#8,d5
		move.b	(a0)+,d5

loc_14E4:				; ...
		subq.w	#7,d6
		move.w	d5,d1
		lsr.w	d6,d1
		move.w	d1,d0
		andi.w	#$F,d1
		andi.w	#$70,d0
		cmpi.w	#9,d6
		bcc.s	loc_14C0
		addq.w	#8,d6
		asl.w	#8,d5
		move.b	(a0)+,d5
		bra.s	loc_14C0
; End of function NemDec3


loc_1502:				; ...
		move.l	d4,(a4)
		subq.w	#1,a5
		move.w	a5,d4
		bne.s	NemDec3
		rts	
		eor.l	d4,d2
		move.l	d2,(a4)
		subq.w	#1,a5
		move.w	a5,d4
		bne.s	NemDec3
		rts	

loc_1518:				; ...
		move.l	d4,(a4)+
		subq.w	#1,a5
		move.w	a5,d4
		bne.s	NemDec3
		rts	
		eor.l	d4,d2
		move.l	d2,(a4)+
		subq.w	#1,a5
		move.w	a5,d4
		bne.s	NemDec3
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


NemDec4:				; ...
		move.b	(a0)+,d0

loc_1530:				; ...
		cmpi.b	#-1,d0
		bne.s	loc_1538
		rts	

loc_1538:				; ...
		move.w	d0,d7

loc_153A:				; ...
		move.b	(a0)+,d0
		cmpi.b	#$80,d0
		bcc.s	loc_1530
		move.b	d0,d1
		andi.w	#$F,d7
		andi.w	#$70,d1
		or.w	d1,d7
		andi.w	#$F,d0
		move.b	d0,d1
		lsl.w	#8,d1
		or.w	d1,d7
		moveq	#8,d1
		sub.w	d0,d1
		bne.s	loc_1568
		move.b	(a0)+,d0
		add.w	d0,d0
		move.w	d7,(a1,d0.w)
		bra.s	loc_153A

loc_1568:				; ...
		move.b	(a0)+,d0
		lsl.w	d1,d0
		add.w	d0,d0
		moveq	#1,d5
		lsl.w	d1,d5
		subq.w	#1,d5

loc_1574:				; ...
		move.w	d7,(a1,d0.w)
		addq.w	#2,d0
		dbf	d5,loc_1574
		bra.s	loc_153A
; End of function NemDec4

		even

; ---------------------------------------------------------------------------
; Add points subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


AddPoints:				; ...
		move.b	#1,($FFFFFE1F).w ; set score counter to	update
		lea	($FFFFFFC0).w,a2
		lea	($FFFFFE26).w,a3
		add.l	d0,(a3)		; add d0*10 to the score
		move.l	#999999,d1
		cmp.l	(a3),d1		; is #999999 higher than the score?
		bhi.w	loc_1C6AC	; if yes, branch
		move.l	d1,(a3)		; reset	score to #999999
		move.l	d1,(a2)

loc_1C6AC:				; ...
		move.l	(a3),d0
		cmp.l	(a2),d0
		bcs.w	locret_1C6B6
		move.l	d0,(a2)

locret_1C6B6:				; ...
		rts	
; End of function AddPoints

; ---------------------------------------------------------------------------
; Subroutine to	update the HUD
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


HudUpdate:				; ...
		tst.w	($FFFFFFFA).w	; is debug mode	on?
		bne.w	HudDebug	; if yes, branch
		tst.b	($FFFFFE1F).w	; does the score need updating?
		beq.s	Hud_ChkRings	; if not, branch
		clr.b	($FFFFFE1F).w
		move.l	#$5C800003,d0	; set VRAM address
		move.l	($FFFFFE26).w,d1 ; load	score
		bsr.w	Hud_Score

Hud_ChkRings:				; ...
		tst.b	($FFFFFE1D).w	; does the ring	counter	need updating?
		beq.s	Hud_ChkTime	; if not, branch
		bpl.s	loc_1C6E4
		bsr.w	Hud_LoadZero

loc_1C6E4:				; ...
		clr.b	($FFFFFE1D).w
		move.l	#$5F400003,d0	; set VRAM address
		moveq	#0,d1
		move.w	($FFFFFE20).w,d1 ; load	number of rings
		bsr.w	Hud_Rings

Hud_ChkTime:				; ...
		tst.b	($FFFFFE1E).w	; does the time	need updating?
		beq.s	Hud_ChkLives	; if not, branch
		tst.w	($FFFFF63A).w	; is the game paused?
		bne.s	Hud_ChkLives	; if yes, branch
		lea	($FFFFFE22).w,a1
		cmpi.l	#$93B3B,(a1)+	; is the time 9.59?
		beq.s	TimeOver	; if yes, branch
		addq.b	#1,-(a1)
		cmpi.b	#60,(a1)
		bcs.s	Hud_ChkLives
		move.b	#0,(a1)
		addq.b	#1,-(a1)
		cmpi.b	#60,(a1)
		bcs.s	loc_1C734
		move.b	#0,(a1)
		addq.b	#1,-(a1)
		cmpi.b	#9,(a1)
		bcs.s	loc_1C734
		move.b	#9,(a1)

loc_1C734:				; ...
		move.l	#$5E400003,d0
		moveq	#0,d1
		move.b	($FFFFFE23).w,d1 ; load	minutes
		bsr.w	Hud_Mins
		move.l	#$5EC00003,d0
		moveq	#0,d1
		move.b	($FFFFFE24).w,d1 ; load	seconds
		bsr.w	Hud_Secs

Hud_ChkLives:				; ...
		tst.b	($FFFFFE1C).w	; does the lives counter need updating?
		beq.s	Hud_ChkBonus	; if not, branch
		clr.b	($FFFFFE1C).w
		bsr.w	Hud_Lives

Hud_ChkBonus:				; ...
		tst.b	($FFFFF7D6).w	; do time/ring bonus counters need updating?
		beq.s	Hud_End		; if not, branch
		clr.b	($FFFFF7D6).w
		move.l	#$6E000002,($C00004).l
		moveq	#0,d1
		move.w	($FFFFF7D2).w,d1 ; load	time bonus
		bsr.w	Hud_TimeRingBonus
		moveq	#0,d1
		move.w	($FFFFF7D4).w,d1 ; load	ring bonus
		bsr.w	Hud_TimeRingBonus

Hud_End:				; ...
		rts	

TimeOver:				; ...
		clr.b	($FFFFFE1E).w
		lea	($FFFFD000).w,a0
		movea.l	a0,a2
		bsr.w	KillSonic
		move.b	#1,($FFFFFE1A).w
		rts	

HudDebug:				; ...
		bsr.w	HudDb_XY
		tst.b	($FFFFFE1D).w	; does the ring	counter	need updating?
		beq.s	HudDb_ObjCount	; if not, branch
		bpl.s	HudDb_Rings
		bsr.w	Hud_LoadZero

HudDb_Rings:				; ...
		clr.b	($FFFFFE1D).w
		move.l	#$5F400003,d0	; set VRAM address
		moveq	#0,d1
		move.w	($FFFFFE20).w,d1 ; load	number of rings
		bsr.w	Hud_Rings

HudDb_ObjCount:				; ...
		move.l	#$5EC00003,d0	; set VRAM address
		moveq	#0,d1
		move.b	($FFFFF62C).w,d1 ; load	"number	of objects" counter
		bsr.w	Hud_Secs
		tst.b	($FFFFFE1C).w	; does the lives counter need updating?
		beq.s	HudDb_ChkBonus	; if not, branch
		clr.b	($FFFFFE1C).w
		bsr.w	Hud_Lives

HudDb_ChkBonus:				; ...
		tst.b	($FFFFF7D6).w	; does the ring/time bonus counter need	updating?
		beq.s	HudDb_End	; if not, branch
		clr.b	($FFFFF7D6).w
		move.l	#$6E000002,($C00004).l ; set VRAM address
		moveq	#0,d1
		move.w	($FFFFF7D2).w,d1 ; load	time bonus
		bsr.w	Hud_TimeRingBonus
		moveq	#0,d1
		move.w	($FFFFF7D4).w,d1 ; load	ring bonus
		bsr.w	Hud_TimeRingBonus

HudDb_End:				; ...
		rts	
; End of function HudUpdate

; ---------------------------------------------------------------------------
; Subroutine to	load "0" on the	HUD
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_LoadZero:				; ...
		move.l	#$5F400003,($C00004).l
		lea	Hud_TilesZero(pc),a2
		move.w	#2,d2
		bra.s	loc_1C83E
; End of function Hud_LoadZero

; ---------------------------------------------------------------------------
; Subroutine to	load uncompressed HUD patterns ("E", "0", colon)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Base:				; ...
		lea	($C00000).l,a6
		bsr.w	Hud_Lives
		move.l	#$5C400003,($C00004).l
		lea	Hud_TilesBase(pc),a2
		move.w	#$E,d2

loc_1C83E:				; ...
		lea	Art_Hud(pc),a1

loc_1C842:				; ...
		move.w	#$F,d1
		move.b	(a2)+,d0
		bmi.s	loc_1C85E
		ext.w	d0
		lsl.w	#5,d0
		lea	(a1,d0.w),a3

loc_1C852:				; ...
		move.l	(a3)+,(a6)
		dbf	d1,loc_1C852

loc_1C858:				; ...
		dbf	d2,loc_1C842
		rts	

loc_1C85E:				; ...
		move.l	#0,(a6)
		dbf	d1,loc_1C85E
		bra.s	loc_1C858
; End of function Hud_Base

Hud_TilesBase:	dc.b $16, $FF, $FF, $FF, $FF, $FF, $FF,	0, 0, $14, 0, 0	; ...
Hud_TilesZero:	dc.b $FF, $FF, 0, 0	; ...
; ---------------------------------------------------------------------------
; Subroutine to	load debug mode	numbers	patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


HudDb_XY:				; ...
		move.l	#$5C400003,($C00004).l ; set VRAM address
		move.w	($FFFFF700).w,d1 ; load	camera x-position
		swap	d1
		move.w	($FFFFD008).w,d1 ; load	Sonic's x-position
		bsr.s	HudDb_XY2
		move.w	($FFFFF704).w,d1 ; load	camera y-position
		swap	d1
		move.w	($FFFFD00C).w,d1 ; load	Sonic's y-position
; End of function HudDb_XY


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


HudDb_XY2:				; ...
		moveq	#7,d6
		lea	(Art_Text)(pc),a1

HudDb_XYLoop:				; ...
		rol.w	#4,d1
		move.w	d1,d2
		andi.w	#$F,d2
		cmpi.w	#$A,d2
		bcs.s	loc_1C8B2
		addq.w	#7,d2

loc_1C8B2:				; ...
		lsl.w	#5,d2
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		swap	d1
		dbf	d6,HudDb_XYLoop	; repeat 7 more	times
		rts	
; End of function HudDb_XY2

; ---------------------------------------------------------------------------
; Subroutine to	load rings numbers patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Rings:				; ...
		lea	(Hud_100)(pc),a2
		moveq	#2,d6
		bra.s	Hud_LoadArt
; End of function Hud_Rings

; ---------------------------------------------------------------------------
; Subroutine to	load score numbers patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Score:				; ...
		lea	(Hud_100000)(pc),a2
		moveq	#5,d6

Hud_LoadArt:				; ...
		moveq	#0,d4
		lea	Art_Hud(pc),a1

Hud_ScoreLoop:				; ...
		moveq	#0,d2
		move.l	(a2)+,d3

loc_1C8EC:				; ...
		sub.l	d3,d1
		bcs.s	loc_1C8F4
		addq.w	#1,d2
		bra.s	loc_1C8EC

loc_1C8F4:				; ...
		add.l	d3,d1
		tst.w	d2
		beq.s	loc_1C8FE
		move.w	#1,d4

loc_1C8FE:				; ...
		tst.w	d4
		beq.s	loc_1C92C
		lsl.w	#6,d2
		move.l	d0,4(a6)
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)

loc_1C92C:				; ...
		addi.l	#$400000,d0
		dbf	d6,Hud_ScoreLoop
		rts	
; End of function Hud_Score

; ---------------------------------------------------------------------------
; Subroutine to	load countdown numbers on the continue screen
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ContScrCounter:				; ...
		move.l	#$5F800003,($C00004).l ; set VRAM address
		lea	($C00000).l,a6
		lea	(Hud_10)(pc),a2
		moveq	#1,d6
		moveq	#0,d4
		lea	Art_Hud(pc),a1	; load numbers patterns

ContScr_Loop:				; ...
		moveq	#0,d2
		move.l	(a2)+,d3

loc_1C95A:				; ...
		sub.l	d3,d1
		bcs.s	loc_1C962
		addq.w	#1,d2
		bra.s	loc_1C95A

loc_1C962:				; ...
		add.l	d3,d1
		lsl.w	#6,d2
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		dbf	d6,ContScr_Loop	; repeat 1 more	time
		rts	
; End of function ContScrCounter

; ---------------------------------------------------------------------------
; HUD counter sizes
; ---------------------------------------------------------------------------
Hud_100000:	dc.l 100000		; ...
Hud_10000:	dc.l 10000
Hud_1000:	dc.l 1000		; ...
Hud_100:	dc.l 100		; ...
Hud_10:		dc.l 10			; ...
Hud_1:		dc.l 1			; ...
; ---------------------------------------------------------------------------
; Subroutine to	load time numbers patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Mins:				; ...
		lea	(Hud_1)(pc),a2
		moveq	#0,d6
		bra.s	loc_1C9BA
; End of function Hud_Mins


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Secs:				; ...
		lea	(Hud_10)(pc),a2
		moveq	#1,d6

loc_1C9BA:				; ...
		moveq	#0,d4
		lea	Art_Hud(pc),a1

Hud_TimeLoop:				; ...
		moveq	#0,d2
		move.l	(a2)+,d3

loc_1C9C4:				; ...
		sub.l	d3,d1
		bcs.s	loc_1C9CC
		addq.w	#1,d2
		bra.s	loc_1C9C4

loc_1C9CC:				; ...
		add.l	d3,d1
		tst.w	d2
		beq.s	loc_1C9D6
		move.w	#1,d4

loc_1C9D6:				; ...
		lsl.w	#6,d2
		move.l	d0,4(a6)
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		addi.l	#$400000,d0
		dbf	d6,Hud_TimeLoop
		rts	
; End of function Hud_Secs

; ---------------------------------------------------------------------------
; Subroutine to	load time/ring bonus numbers patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_TimeRingBonus:			; ...
		lea	(Hud_1000)(pc),a2
		moveq	#3,d6
		moveq	#0,d4
		lea	Art_Hud(pc),a1

Hud_BonusLoop:				; ...
		moveq	#0,d2
		move.l	(a2)+,d3

loc_1CA1E:				; ...
		sub.l	d3,d1
		bcs.s	loc_1CA26
		addq.w	#1,d2
		bra.s	loc_1CA1E

loc_1CA26:				; ...
		add.l	d3,d1
		tst.w	d2
		beq.s	loc_1CA30
		move.w	#1,d4

loc_1CA30:				; ...
		tst.w	d4
		beq.s	Hud_ClrBonus
		lsl.w	#6,d2
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)

loc_1CA5A:				; ...
		dbf	d6,Hud_BonusLoop ; repeat 3 more times
		rts	

Hud_ClrBonus:				; ...
		moveq	#$F,d5

Hud_ClrBonusLoop:			; ...
		move.l	#0,(a6)
		dbf	d5,Hud_ClrBonusLoop
		bra.s	loc_1CA5A
; End of function Hud_TimeRingBonus

; ---------------------------------------------------------------------------
; Subroutine to	load uncompressed lives	counter	patterns
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Hud_Lives:				; ...
		move.l	#$7BA00003,d0	; set VRAM address
		moveq	#0,d1
		move.b	($FFFFFE12).w,d1 ; load	number of lives
		lea	(Hud_10)(pc),a2
		moveq	#1,d6
		moveq	#0,d4
		lea	Art_LivesNums(pc),a1

Hud_LivesLoop:				; ...
		move.l	d0,4(a6)
		moveq	#0,d2
		move.l	(a2)+,d3

loc_1CA90:				; ...
		sub.l	d3,d1
		bcs.s	loc_1CA98
		addq.w	#1,d2
		bra.s	loc_1CA90

loc_1CA98:				; ...
		add.l	d3,d1
		tst.w	d2
		beq.s	loc_1CAA2
		move.w	#1,d4

loc_1CAA2:				; ...
		tst.w	d4
		beq.s	Hud_ClrLives

loc_1CAA6:				; ...
		lsl.w	#5,d2
		lea	(a1,d2.w),a3
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)
		move.l	(a3)+,(a6)

loc_1CABC:				; ...
		addi.l	#$400000,d0
		dbf	d6,Hud_LivesLoop ; repeat 1 more time
		rts	

Hud_ClrLives:				; ...
		tst.w	d6
		beq.s	loc_1CAA6
		moveq	#7,d5

Hud_ClrLivesLoop:			; ...
		move.l	#0,(a6)
		dbf	d5,Hud_ClrLivesLoop
		bra.s	loc_1CABC
; End of function Hud_Lives

Art_Hud:	dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 6, $61, 6, $61, 6, $61, 6, $61, 6, $61, 6, $61, 6, $61, 6, $61 ;	...
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 0, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 0, 6, $61, 0, 0, $66, $61, 0, 0, 6, $61, 0, 0,	6, $61,	0, 0, 6, $61, 0, 0, 6, $61, 0, 0, 6, $61, 0
		dc.b 0,	6, $61,	0, 0, 6, $61, 0, 0, 6, $61, 0, 0, 1, $11, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 1, $11, $66, $61, 0, 6, $66, $10, 0, $66, $61, 0, 0, $66, $10, 0
		dc.b 6,	$66, $10, 0, 6,	$66, $66, $61, 6, $66, $66, $61, 1, $11, $11, $11, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 1, $11, 6, $61, 0, 6, $66, $10, 0, 6, $66, $10, 0, 1, $16, $61
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 0, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, $66, $10, 0, 6, $66, $10, 0, 6, $66, $10, 0, $66, $66, $10, 0, $61, $66,	$10, 6,	$61, $66, $10, 6, $66, $66, $61
		dc.b 6,	$66, $66, $61, 1, $11, $66, $11, 0, 0, $66, $10, 0, 0, $11, $10, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 6, $66, $66, $61, 6, $66, $66,	$61, 6,	$61, $11, $11, 6, $61, 0, 0, 6,	$66, $66, $10, 6, $66, $66, $61, 1, $11, $16, $61
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 1, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 6, $61, 1, $11, 6, $66, $66, $10, 6, $66, $66, $61, 6, $61, $16,	$61
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 0, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 6, $66, $66, $61, 6, $66, $66,	$61, 1,	$11, $16, $61, 0, 0, $66, $10, 0, 0, $66, $10, 0, 0, $66, $10, 0, 6, $61, 0
		dc.b 0,	6, $61,	0, 0, 6, $61, 0, 0, 6, $61, 0, 0, 1, $11, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 6, $61, 6, $61, 0, $66, $66, $10, 0, $66, $66, $10, 6, $61, $16,	$61
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 0, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $66, $66,	$61, 6,	$61, $16, $61, 6, $61, 6, $61, 6, $66, $66, $61, 0, $66, $66, $61, 0, $11, $16,	$61
		dc.b 6,	$61, 6,	$61, 6,	$66, $66, $61, 0, $66, $66, $10, 0, $11, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 6, $61, 0, 0, 6, $61, 0, 0,	1, $11,	0, 0, 0, 0, 0, 0, 6, $61, 0
		dc.b 0,	6, $61,	0, 0, 1, $11, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, 0, 0, $F, $FF, $FF, $F1, $F,	$FF, $FF, $F1, $F, $F1,	$11, $11, $F, $F1, 0, 0, $F, $FF, $FF, $10, $F,	$FF, $FF, $10, $F, $F1,	$11, $10
		dc.b $F, $F1, 0, 0, $F,	$FF, $FF, $F1, $F, $FF,	$FF, $F1, 1, $11, $11, $11, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0
Art_LivesNums:	dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $61, $16,	$61, 6,	$61, 6,	$61, 6,	$61, 6,	$61, 6,	$61, 6,	$61, 0,	$66, $66, $10, 0, $11, $11, 0 ;	...
		dc.b 0,	0, 0, 0, 0, 6, $61, 0, 0, $66, $61, 0, 0, $16, $61, 0, 0, 6, $61, 0, 0,	6, $61,	0, 0, 6, $61, 0, 0, 1, $11, 0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 0, $11, $16,	$61, 0,	0, $66,	$11, 0,	6, $61,	$10, 0,	$66, $11, $10, 6, $66, $66, $61, 1, $11, $11, $11
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 0, $11, $16,	$61, 0,	6, $66,	$10, 0,	1, $16,	$61, 6,	$61, 6,	$61, 0,	$66, $66, $10, 0, $11, $11, 0
		dc.b 0,	0, 0, 0, 0, 0, $66, $10, 0, 6, $66, $10, 0, $61, $66, $10, 6, $61, $66,	$10, 6,	$66, $66, $61, 1, $11, $66, $11, 0, 0, $11, $10
		dc.b 0,	0, 0, 0, 6, $66, $66, $61, 6, $61, $11,	$11, 6,	$66, $66, $10, 1, $11, $16, $61, 6, $61, 6, $61, 0, $66, $66, $10, 0, $11, $11,	0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $61, $11,	$10, 6,	$66, $66, $10, 6, $61, $16, $61, 6, $61, 6, $61, 0, $66, $66, $10, 0, $11, $11,	0
		dc.b 0,	0, 0, 0, 6, $66, $66, $61, 1, $11, $16,	$61, 0,	0, $66,	$10, 0,	6, $61,	0, 0, $66, $10,	0, 0, $66, $10,	0, 0, $11, $10,	0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $61, $16,	$61, 0,	$66, $66, $10, 6, $61, $16, $61, 6, $61, 6, $61, 0, $66, $66, $10, 0, $11, $11,	0
		dc.b 0,	0, 0, 0, 0, $66, $66, $10, 6, $61, $16,	$61, 6,	$61, 6,	$61, 0,	$66, $66, $61, 0, $11, $16, $61, 0, $66, $66, $10, 0, $11, $11,	0

		even
		
; ---------------------------------------------------------------------------
; Debug	list pointers
; ---------------------------------------------------------------------------
DebugList:	dc.w Debug_GHZ-DebugList, Debug_LZ-DebugList ; ...
		dc.w Debug_MZ-DebugList, Debug_SLZ-DebugList
		dc.w Debug_SYZ-DebugList, Debug_SBZ-DebugList
		dc.w Debug_Ending-DebugList
; ---------------------------------------------------------------------------
; Debug	list - Green Hill
; ---------------------------------------------------------------------------
Debug_GHZ:	dc.w $10		; ...
		dc.l $880000+Map_obj25+$25000000 ; mappings pointer, object type * 10^6
		dc.b 0,	0, $27,	$B2	; subtype, frame, VRAM setting (2 bytes)
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj1F+$1F000000
		dc.b 0,	0, 4, 0
		dc.l $880000+Map_obj22+$22000000
		dc.b 0,	0, 4, $44
		dc.l $880000+Map_obj2B+$2B000000
		dc.b 0,	0, 4, $7B
		dc.l $880000+Map_obj36+$36000000
		dc.b 0,	0, 5, $1B
		dc.l $880000+Map_obj18+$18000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj3B+$3B000000
		dc.b 0,	0, $63,	$D0
		dc.l $880000+Map_obj40+$40000000
		dc.b 0,	0, 4, $F0
		dc.l $880000+Map_obj41+$41000000
		dc.b 0,	0, 5, $23
		dc.l $880000+Map_obj42+$42000000
		dc.b 0,	0, $24,	$9B
		dc.l $880000+Map_obj44+$44000000
		dc.b 0,	0, $43,	$4C
		dc.l $880000+Map_obj48+$19000000
		dc.b 0,	0, $43,	$AA
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
		dc.l $880000+Map_obj4B+$4B000000
		dc.b 0,	0, $24,	0
		dc.l $880000+Map_obj7D+$7D000000
		dc.b 1,	1, $84,	$B6
; ---------------------------------------------------------------------------
; Debug	list - Labyrinth
; ---------------------------------------------------------------------------
Debug_LZ:	dc.w $19		; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj41+$41000000
		dc.b 0,	0, 5, $23
		dc.l $880000+Map_obj2C+$2C000000
		dc.b 8,	0, $24,	$86
		dc.l $880000+Map_obj2D+$2D000000
		dc.b 0,	2, $84,	$A6
		dc.l $880000+Map_obj16+$16000000
		dc.b 0,	0, 3, $CC
		dc.l $880000+Map_obj16+$16000000
		dc.b 2,	3, 3, $CC
		dc.l $880000+Map_obj33+$33000000
		dc.b 0,	0, $43,	$DE
		dc.l $880000+Map_obj32+$32000000
		dc.b 0,	0, 5, $13
		dc.l $880000+Map_obj36+$36000000
		dc.b 0,	0, 5, $1B
		dc.l $880000+Map_obj52a+$52000000
		dc.b 4,	0, $43,	$BC
		dc.l $880000+Map_obj61+$61000000
		dc.b 1,	0, $43,	$E6
		dc.l $880000+Map_obj61+$61000000
		dc.b $13, 1, $43, $E6
		dc.l $880000+Map_obj61+$61000000
		dc.b 5,	0, $43,	$E6
		dc.l $880000+Map_obj62+$62000000
		dc.b 0,	0, $44,	$3E
		dc.l $880000+Map_obj61+$61000000
		dc.b $27, 2, $43, $E6
		dc.l $880000+Map_obj61+$61000000
		dc.b $30, 3, $43, $E6
		dc.l $880000+Map_obj63+$63000000
		dc.b $7F, 0, 3,	$F6
		dc.l $880000+Map_obj60+$60000000
		dc.b 0,	0, 4, $67
		dc.l $880000+Map_obj64+$64000000
		dc.b $84, $13, $83, $48
		dc.l $880000+Map_obj65+$65000000
		dc.b 2,	2, $C2,	$59
		dc.l $880000+Map_obj65+$65000000
		dc.b 9,	9, $C2,	$59
		dc.l $880000+Map_obj0B+$B000000
		dc.b 0,	0, $43,	$DE
		dc.l $880000+Map_obj0C+$C000000
		dc.b 2,	0, $43,	$28
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
; ---------------------------------------------------------------------------
; Debug	list - Marble
; ---------------------------------------------------------------------------
Debug_MZ:	dc.w $12		; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj22+$22000000
		dc.b 0,	0, 4, $44
		dc.l $880000+Map_obj36+$36000000
		dc.b 0,	0, 5, $1B
		dc.l $880000+Map_obj41+$41000000
		dc.b 0,	0, 5, $23
		dc.l $880000+Map_obj14+$13000000
		dc.b 0,	0, 3, $45
		dc.l $880000+Map_obj46+$46000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj4C+$4C000000
		dc.b 0,	0, $63,	$A8
		dc.l $880000+Map_obj4E+$4E000000
		dc.b 0,	0, $63,	$A8
		dc.l $880000+Map_obj33+$33000000
		dc.b 0,	0, $42,	$B8
		dc.l $880000+Map_obj50+$50000000
		dc.b 0,	0, $24,	$7B
		dc.l $880000+Map_obj51+$51000000
		dc.b 0,	0, $42,	$B8
		dc.l $880000+Map_obj52+$52000000
		dc.b 0,	0, 2, $B8
		dc.l $880000+Map_obj53+$53000000
		dc.b 0,	0, $62,	$B8
		dc.l $880000+Map_obj54+$54000000
		dc.b 0,	0, $86,	$80
		dc.l $880000+Map_obj55+$55000000
		dc.b 0,	0, 4, $B8
		dc.l $880000+Map_obj78+$78000000
		dc.b 0,	0, $24,	$FF
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
; ---------------------------------------------------------------------------
; Debug	list - Star Light
; ---------------------------------------------------------------------------
Debug_SLZ:	dc.w $F			; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj59+$59000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj53+$53000000
		dc.b 0,	2, $44,	$E0
		dc.l $880000+Map_obj18b+$18000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj5A+$5A000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj5B+$5B000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj5D+$5D000000
		dc.b 0,	0, $43,	$A0
		dc.l $880000+Map_obj5E+$5E000000
		dc.b 0,	0, 3, $74
		dc.l $880000+Map_obj41+$41000000
		dc.b 0,	0, 5, $23
		dc.l $880000+Map_obj14+$13000000
		dc.b 0,	0, 4, $80
		dc.l $880000+Map_obj1C+$1C000000
		dc.b 0,	0, $44,	$D8
		dc.l $880000+Map_obj5F+$5F000000
		dc.b 0,	0, 4, 0
		dc.l $880000+Map_obj60+$60000000
		dc.b 0,	0, $24,	$29
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
; ---------------------------------------------------------------------------
; Debug	list - Spring Yard
; ---------------------------------------------------------------------------
Debug_SYZ:	dc.w $F			; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj36+$36000000
		dc.b 0,	0, 5, $1B
		dc.l $880000+Map_obj41+$41000000
		dc.b 0,	0, 5, $23
		dc.l $880000+Map_obj43+$43000000
		dc.b 0,	0, 4, $B8
		dc.l $880000+Map_obj12+$12000000
		dc.b 0,	0, 0, 0
		dc.l $880000+Map_obj47+$47000000
		dc.b 0,	0, 3, $80
		dc.l $880000+Map_obj1F+$1F000000
		dc.b 0,	0, 4, 0
		dc.l $880000+Map_obj22+$22000000
		dc.b 0,	0, 4, $44
		dc.l $880000+Map_obj50+$50000000
		dc.b 0,	0, $24,	$7B
		dc.l $880000+Map_obj18a+$18000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj56+$56000000
		dc.b 0,	0, $40,	0
		dc.l $880000+Map_obj32+$32000000
		dc.b 0,	0, 5, $13
		dc.l $880000+Map_obj78+$78000000
		dc.b 0,	0, $24,	$FF
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
; ---------------------------------------------------------------------------
; Debug	list - Scrap Brain
; ---------------------------------------------------------------------------
Debug_SBZ:	dc.w $1D		; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj26+$26000000
		dc.b 0,	0, 6, $80
		dc.l $880000+Map_obj5F+$5F000000
		dc.b 0,	0, 4, 0
		dc.l $880000+Map_obj60+$60000000
		dc.b 0,	0, 4, $29
		dc.l $880000+Map_obj78+$78000000
		dc.b 0,	0, $22,	$B0
		dc.l $880000+Map_obj15b+$15000000
		dc.b 7,	2, $43,	$91
		dc.l $880000+Map_obj67+$67000000
		dc.b $E0, 0, $C3, $44
		dc.l $880000+Map_obj52+$52000000
		dc.b $28, 2, $22, $C0
		dc.l $880000+Map_obj32+$32000000
		dc.b 0,	0, 5, $13
		dc.l $880000+Map_obj69+$69000000
		dc.b 3,	0, $44,	$92
		dc.l $880000+Map_obj69a+$69000000
		dc.b $83, 0, 4,	$DF
		dc.l $880000+Map_obj6A+$6A000000
		dc.b 2,	0, $43,	$B5
		dc.l $880000+Map_obj53+$53000000
		dc.b 0,	0, $43,	$F5
		dc.l $880000+Map_obj52+$52000000
		dc.b $39, 3, $44, $60
		dc.l $880000+Map_obj6B+$6B000000
		dc.b 0,	0, $22,	$C0
		dc.l $880000+Map_obj2A+$2A000000
		dc.b 0,	0, $42,	$E8
		dc.l $880000+Map_obj6B+$6B000000
		dc.b $13, 1, $22, $C0
		dc.l $880000+Map_obj6A+$6A000000
		dc.b 1,	0, $43,	$B5
		dc.l $880000+Map_obj6B+$6B000000
		dc.b $24, 1, $22, $C0
		dc.l $880000+Map_obj6A+$6A000000
		dc.b 4,	2, $43,	$B5
		dc.l $880000+Map_obj6B+$6B000000
		dc.b $34, 1, $22, $C0
		dc.l $880000+Map_obj6C+$6C000000
		dc.b 0,	0, $44,	$C3
		dc.l $880000+Map_obj6D+$6D000000
		dc.b $64, 0, $83, $D9
		dc.l $880000+Map_obj6D+$6D000000
		dc.b $64, $B, $83, $D9
		dc.l $880000+Map_obj6E+$6E000000
		dc.b 4,	0, 4, $7E
		dc.l $880000+Map_obj70+$70000000
		dc.b 0,	0, $42,	$F0
		dc.l $880000+Map_obj71+$71000000
		dc.b $11, 0, $86, $80
		dc.l $880000+Map_obj1E+$1E000000
		dc.b 4,	0, $23,	2
		dc.l $880000+Map_obj79+$79000000
		dc.b 1,	0, 7, $A0
; ---------------------------------------------------------------------------
; Debug	list - ending sequence / special stage
; ---------------------------------------------------------------------------
Debug_Ending:	dc.w $D			; ...
		dc.l $880000+Map_obj25+$25000000
		dc.b 0,	0, $27,	$B2
		dc.l $880000+Map_obj47+$47000000
		dc.b 0,	0, 3, $80
		dc.l $880000+Map_obj28a+$28000000
		dc.b $A, 0, 5, $A0
		dc.l $880000+Map_obj28a+$28000000
		dc.b $B, 0, 5, $A0
		dc.l $880000+Map_obj28a+$28000000
		dc.b $C, 0, 5, $A0
		dc.l $880000+Map_obj28+$28000000
		dc.b $D, 0, 5, $53
		dc.l $880000+Map_obj28+$28000000
		dc.b $E, 0, 5, $53
		dc.l $880000+Map_obj28+$28000000
		dc.b $F, 0, 5, $73
		dc.l $880000+Map_obj28+$28000000
		dc.b $10, 0, 5,	$73
		dc.l $880000+Map_obj28a+$28000000
		dc.b $11, 0, 5,	$85
		dc.l $880000+Map_obj28b+$28000000
		dc.b $12, 0, 5,	$93
		dc.l $880000+Map_obj28a+$28000000
		dc.b $13, 0, 5,	$65
		dc.l $880000+Map_obj28b+$28000000
		dc.b $14, 0, 5,	$B3

; ---------------------------------------------------------------------------
; Main level load blocks
;
; ===FORMAT===
; level	patterns + (1st	PLC num	* 10^6)
; 16x16	mappings + (2nd	PLC num	* 10^6)
; 256x256 mappings
; blank, music (unused), pal index (unused), pal index
; ---------------------------------------------------------------------------
MainLoadBlocks:	dc.l $900000+Nem_GHZ_2nd+$4000000 ; ...
		dc.l $900000+Blk16_GHZ+$5000000
		dc.l $900000+Blk256_GHZ
		dc.b 0,	$81, 4,	4
		dc.l $900000+Nem_LZ+$6000000
		dc.l $900000+Blk16_LZ+$7000000
		dc.l $900000+Blk256_LZ
		dc.b 0,	$82, 5,	5
		dc.l $900000+Nem_MZ+$8000000
		dc.l $900000+Blk16_MZ+$9000000
		dc.l $900000+Blk256_MZ
		dc.b 0,	$83, 6,	6
		dc.l $900000+Nem_SLZ+$A000000
		dc.l $900000+Blk16_SLZ+$B000000
		dc.l $900000+Blk256_SLZ
		dc.b 0,	$84, 7,	7
		dc.l $900000+Nem_SYZ+$C000000
		dc.l $900000+Blk16_SYZ+$D000000
		dc.l $900000+Blk256_SYZ
		dc.b 0,	$85, 8,	8
		dc.l $900000+Nem_SBZ+$E000000
		dc.l $900000+Blk16_SBZ+$F000000
		dc.l $900000+Blk256_SBZ
		dc.b 0,	$86, 9,	9
		dc.l $900000+Nem_GHZ_2nd	; main load block for ending
		dc.l $900000+Blk16_GHZ
		dc.l $900000+Blk256_GHZ
		dc.b 0,	$86, $13, $13
; ---------------------------------------------------------------------------
; Pattern load cues - index
; ---------------------------------------------------------------------------
ArtLoadCues:	dc.w PLC_Main-ArtLoadCues, PLC_Main2-ArtLoadCues ; ...
		dc.w PLC_Explode-ArtLoadCues, PLC_GameOver-ArtLoadCues
		dc.w PLC_GHZ-ArtLoadCues, PLC_GHZ2-ArtLoadCues
		dc.w PLC_LZ-ArtLoadCues, PLC_LZ2-ArtLoadCues
		dc.w PLC_MZ-ArtLoadCues, PLC_MZ2-ArtLoadCues
		dc.w PLC_SLZ-ArtLoadCues, PLC_SLZ2-ArtLoadCues
		dc.w PLC_SYZ-ArtLoadCues, PLC_SYZ2-ArtLoadCues
		dc.w PLC_SBZ-ArtLoadCues, PLC_SBZ2-ArtLoadCues
		dc.w PLC_TitleCard-ArtLoadCues,	PLC_Boss-ArtLoadCues
		dc.w PLC_Signpost-ArtLoadCues, PLC_Warp-ArtLoadCues
		dc.w PLC_SpeStage-ArtLoadCues, PLC_GHZAnimals-ArtLoadCues
		dc.w PLC_LZAnimals-ArtLoadCues,	PLC_MZAnimals-ArtLoadCues
		dc.w PLC_SLZAnimals-ArtLoadCues, PLC_SYZAnimals-ArtLoadCues
		dc.w PLC_SBZAnimals-ArtLoadCues, PLC_SpeStResult-ArtLoadCues
		dc.w PLC_Ending-ArtLoadCues, PLC_TryAgain-ArtLoadCues
		dc.w PLC_EggmanSBZ2-ArtLoadCues, PLC_FZBoss-ArtLoadCues
; ---------------------------------------------------------------------------
; Pattern load cues - standard block 1
; ---------------------------------------------------------------------------
PLC_Main:	dc.w 4			; ...
		dc.l $900000+Nem_Lamp		; lamppost
		dc.w $F400
		dc.l $900000+Nem_Hud		; HUD
		dc.w $D940
		dc.l $900000+Nem_Lives		; lives	counter
		dc.w $FA80
		dc.l $900000+Nem_Ring		; rings
		dc.w $F640
		dc.l $900000+Nem_Points		; points from enemy
		dc.w $F2E0
; ---------------------------------------------------------------------------
; Pattern load cues - standard block 2
; ---------------------------------------------------------------------------
PLC_Main2:	dc.w 2			; ...
		dc.l $900000+Nem_Monitors	; monitors
		dc.w $D000
		dc.l $900000+Nem_Shield		; shield
		dc.w $A820
		dc.l $900000+Nem_Stars		; invincibility	stars
		dc.w $AB80
; ---------------------------------------------------------------------------
; Pattern load cues - explosion
; ---------------------------------------------------------------------------
PLC_Explode:	dc.w 0			; ...
		dc.l $900000+Nem_Explode	; explosion
		dc.w $B400
; ---------------------------------------------------------------------------
; Pattern load cues - game/time	over
; ---------------------------------------------------------------------------
PLC_GameOver:	dc.w 0			; ...
		dc.l $900000+Nem_GameOver	; game/time over
		dc.w $ABC0
; ---------------------------------------------------------------------------
; Pattern load cues - Green Hill
; ---------------------------------------------------------------------------
PLC_GHZ:	dc.w $B			; ...
		dc.l $900000+Nem_GHZ_1st	; GHZ main patterns
		dc.w 0
		dc.l $900000+Nem_GHZ_2nd	; GHZ secondary	patterns
		dc.w $39A0
		dc.l $900000+Nem_Stalk		; flower stalk
		dc.w $6B00
		dc.l $900000+Nem_PplRock	; purple rock
		dc.w $7A00
		dc.l $900000+Nem_Crabmeat	; crabmeat enemy
		dc.w $8000
		dc.l $900000+Nem_Buzz		; buzz bomber enemy
		dc.w $8880
		dc.l $900000+Nem_Chopper	; chopper enemy
		dc.w $8F60
		dc.l $900000+Nem_Newtron	; newtron enemy
		dc.w $9360
		dc.l $900000+Nem_Motobug	; motobug enemy
		dc.w $9E00
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
PLC_GHZ2:	dc.w 5			; ...
		dc.l $900000+Nem_Swing		; swinging platform
		dc.w $7000
		dc.l $900000+Nem_Bridge		; bridge
		dc.w $71C0
		dc.l $900000+Nem_SpikePole	; spiked pole
		dc.w $7300
		dc.l $900000+Nem_Ball		; giant	ball
		dc.w $7540
		dc.l $900000+Nem_GhzWall1	; breakable wall
		dc.w $A1E0
		dc.l $900000+Nem_GhzWall2	; normal wall
		dc.w $6980
; ---------------------------------------------------------------------------
; Pattern load cues - Labyrinth
; ---------------------------------------------------------------------------
PLC_LZ:		dc.w $B			; ...
		dc.l $900000+Nem_LZ		; LZ main patterns
		dc.w 0
		dc.l $900000+Nem_LzBlock1	; block
		dc.w $3C00
		dc.l $900000+Nem_LzBlock2	; blocks
		dc.w $3E00
		dc.l $900000+Nem_Splash		; waterfalls and splash
		dc.w $4B20
		dc.l $900000+Nem_Water		; water	surface
		dc.w $6000
		dc.l $900000+Nem_LzSpikeBall	; spiked ball
		dc.w $6200
		dc.l $900000+Nem_FlapDoor	; flapping door
		dc.w $6500
		dc.l $900000+Nem_Bubbles	; bubbles and numbers
		dc.w $6900
		dc.l $900000+Nem_LzBlock3	; block
		dc.w $7780
		dc.l $900000+Nem_LzDoor1	; vertical door
		dc.w $7880
		dc.l $900000+Nem_Harpoon	; harpoon
		dc.w $7980
		dc.l $900000+Nem_Burrobot	; burrobot enemy
		dc.w $94C0
PLC_LZ2:	dc.w $C			; ...
		dc.l $900000+Nem_LzPole		; pole that breaks
		dc.w $7BC0
		dc.l $900000+Nem_LzDoor2	; large	horizontal door
		dc.w $7CC0
		dc.l $900000+Nem_LzWheel	; wheel
		dc.w $7EC0
		dc.l $900000+Nem_Gargoyle	; gargoyle head
		dc.w $5D20
		dc.l $900000+Nem_LzSonic	; Sonic	holding	his breath
		dc.w $8800
		dc.l $900000+Nem_LzPlatfm	; rising platform
		dc.w $89E0
		dc.l $900000+Nem_Orbinaut	; orbinaut enemy
		dc.w $8CE0
		dc.l $900000+Nem_Jaws		; jaws enemy
		dc.w $90C0
		dc.l $900000+Nem_LzSwitch	; switch
		dc.w $A1E0
		dc.l $900000+Nem_Cork		; cork block
		dc.w $A000
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
; ---------------------------------------------------------------------------
; Pattern load cues - Marble
; ---------------------------------------------------------------------------
PLC_MZ:		dc.w 9			; ...
		dc.l $900000+Nem_MZ		; MZ main patterns
		dc.w 0
		dc.l $900000+Nem_MzMetal	; metal	blocks
		dc.w $6000
		dc.l $900000+Nem_MzFire		; fireballs
		dc.w $68A0
		dc.l $900000+Nem_Swing		; swinging platform
		dc.w $7000
		dc.l $900000+Nem_MzGlass	; green	glassy block
		dc.w $71C0
		dc.l $900000+Nem_Lava		; lava
		dc.w $7500
		dc.l $900000+Nem_Buzz		; buzz bomber enemy
		dc.w $8880
		dc.l $900000+Nem_Yadrin		; yadrin enemy
		dc.w $8F60
		dc.l $900000+Nem_Basaran	; basaran enemy
		dc.w $9700
		dc.l $900000+Nem_Cater		; caterkiller enemy
		dc.w $9FE0
PLC_MZ2:	dc.w 4			; ...
		dc.l $900000+Nem_MzSwitch	; switch
		dc.w $A260
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
		dc.l $900000+Nem_MzBlock	; green	stone block
		dc.w $5700
; ---------------------------------------------------------------------------
; Pattern load cues - Star Light
; ---------------------------------------------------------------------------
PLC_SLZ:	dc.w 8			; ...
		dc.l $900000+Nem_SLZ		; SLZ main patterns
		dc.w 0
		dc.l $900000+Nem_Bomb		; bomb enemy
		dc.w $8000
		dc.l $900000+Nem_Orbinaut	; orbinaut enemy
		dc.w $8520
		dc.l $900000+Nem_MzFire		; fireballs
		dc.w $9000
		dc.l $900000+Nem_SlzBlock	; block
		dc.w $9C00
		dc.l $900000+Nem_SlzWall	; breakable wall
		dc.w $A260
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
PLC_SLZ2:	dc.w 5			; ...
		dc.l $900000+Nem_Seesaw		; seesaw
		dc.w $6E80
		dc.l $900000+Nem_Fan		; fan
		dc.w $7400
		dc.l $900000+Nem_Pylon		; foreground pylon
		dc.w $7980
		dc.l $900000+Nem_SlzSwing	; swinging platform
		dc.w $7B80
		dc.l $900000+Nem_SlzCannon	; fireball launcher
		dc.w $9B00
		dc.l $900000+Nem_SlzSpike	; spikeball
		dc.w $9E00
; ---------------------------------------------------------------------------
; Pattern load cues - Spring Yard
; ---------------------------------------------------------------------------
PLC_SYZ:	dc.w 4			; ...
		dc.l $900000+Nem_SYZ		; SYZ main patterns
		dc.w 0
		dc.l $900000+Nem_Crabmeat	; crabmeat enemy
		dc.w $8000
		dc.l $900000+Nem_Buzz		; buzz bomber enemy
		dc.w $8880
		dc.l $900000+Nem_Yadrin		; yadrin enemy
		dc.w $8F60
		dc.l $900000+Nem_Roller		; roller enemy
		dc.w $9700
PLC_SYZ2:	dc.w 7			; ...
		dc.l $900000+Nem_Bumper		; bumper
		dc.w $7000
		dc.l $900000+Nem_SyzSpike1	; large	spikeball
		dc.w $72C0
		dc.l $900000+Nem_SyzSpike2	; small	spikeball
		dc.w $7740
		dc.l $900000+Nem_Cater		; caterkiller enemy
		dc.w $9FE0
		dc.l $900000+Nem_LzSwitch	; switch
		dc.w $A1E0
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
; ---------------------------------------------------------------------------
; Pattern load cues - Scrap Brain
; ---------------------------------------------------------------------------
PLC_SBZ:	dc.w $B			; ...
		dc.l $900000+Nem_SBZ		; SBZ main patterns
		dc.w 0
		dc.l $900000+Nem_Stomper	; moving platform and stomper
		dc.w $5800
		dc.l $900000+Nem_SbzDoor1	; door
		dc.w $5D00
		dc.l $900000+Nem_Girder		; girder
		dc.w $5E00
		dc.l $900000+Nem_BallHog	; ball hog enemy
		dc.w $6040
		dc.l $900000+Nem_SbzWheel1	; spot on large	wheel
		dc.w $6880
		dc.l $900000+Nem_SbzWheel2	; wheel	that grabs Sonic
		dc.w $6900
		dc.l $900000+Nem_SyzSpike1	; large	spikeball
		dc.w $7220
		dc.l $900000+Nem_Cutter		; pizza	cutter
		dc.w $76A0
		dc.l $900000+Nem_FlamePipe	; flaming pipe
		dc.w $7B20
		dc.l $900000+Nem_SbzFloor	; collapsing floor
		dc.w $7EA0
		dc.l $900000+Nem_SbzBlock	; vanishing block
		dc.w $9860
PLC_SBZ2:	dc.w $C			; ...
		dc.l $900000+Nem_Cater		; caterkiller enemy
		dc.w $5600
		dc.l $900000+Nem_Bomb		; bomb enemy
		dc.w $8000
		dc.l $900000+Nem_Orbinaut	; orbinaut enemy
		dc.w $8520
		dc.l $900000+Nem_SlideFloor	; floor	that slides away
		dc.w $8C00
		dc.l $900000+Nem_SbzDoor2	; horizontal door
		dc.w $8DE0
		dc.l $900000+Nem_Electric	; electric orb
		dc.w $8FC0
		dc.l $900000+Nem_TrapDoor	; trapdoor
		dc.w $9240
		dc.l $900000+Nem_SbzFloor	; collapsing floor
		dc.w $7F20
		dc.l $900000+Nem_SpinPform	; small	spinning platform
		dc.w $9BE0
		dc.l $900000+Nem_LzSwitch	; switch
		dc.w $A1E0
		dc.l $900000+Nem_Spikes		; spikes
		dc.w $A360
		dc.l $900000+Nem_HSpring	; horizontal spring
		dc.w $A460
		dc.l $900000+Nem_VSpring	; vertical spring
		dc.w $A660
; ---------------------------------------------------------------------------
; Pattern load cues - title card
; ---------------------------------------------------------------------------
PLC_TitleCard:	dc.w 0			; ...
		dc.l $900000+Nem_TitleCard
		dc.w $B000
; ---------------------------------------------------------------------------
; Pattern load cues - act 3 boss
; ---------------------------------------------------------------------------
PLC_Boss:	dc.w 5			; ...
		dc.l $900000+Nem_Eggman		; Eggman main patterns
		dc.w $8000
		dc.l $900000+Nem_Weapons	; Eggman's weapons
		dc.w $8D80
		dc.l $900000+Nem_Prison		; prison capsule
		dc.w $93A0
		dc.l $900000+Nem_Bomb		; bomb enemy (gets overwritten)
		dc.w $A300
		dc.l $900000+Nem_SlzSpike	; spikeball (SLZ boss)
		dc.w $A300
		dc.l $900000+Nem_Exhaust	; exhaust flame
		dc.w $A540
; ---------------------------------------------------------------------------
; Pattern load cues - act 1/2 signpost
; ---------------------------------------------------------------------------
PLC_Signpost:	dc.w 2			; ...
		dc.l $900000+Nem_SignPost	; signpost
		dc.w $D000
		dc.l $900000+Nem_Bonus		; hidden bonus points
		dc.w $96C0
		dc.l $900000+Nem_BigFlash	; giant	ring flash effect
		dc.w $8C40
; ---------------------------------------------------------------------------
; Pattern load cues - beta special stage warp effect
; ---------------------------------------------------------------------------
PLC_Warp:	dc.w 0			; ...
		dc.l $900000+Nem_Warp
		dc.w $A820
; ---------------------------------------------------------------------------
; Pattern load cues - special stage
; ---------------------------------------------------------------------------
PLC_SpeStage:	dc.w $10		; ...
		dc.l $900000+Nem_SSBgCloud	; bubble and cloud background
		dc.w 0
		dc.l $900000+Nem_SSBgFish	; bird and fish	background
		dc.w $A20
		dc.l $900000+Nem_SSWalls	; walls
		dc.w $2840
		dc.l $900000+Nem_Bumper		; bumper
		dc.w $4760
		dc.l $900000+Nem_SSGOAL		; GOAL block
		dc.w $4A20
		dc.l $900000+Nem_SSUpDown	; UP and DOWN blocks
		dc.w $4C60
		dc.l $900000+Nem_SSRBlock	; R block
		dc.w $5E00
		dc.l $900000+Nem_SS1UpBlock	; 1UP block
		dc.w $6E00
		dc.l $900000+Nem_SSEmStars	; emerald collection stars
		dc.w $7E00
		dc.l $900000+Nem_SSRedWhite	; red and white	block
		dc.w $8E00
		dc.l $900000+Nem_SSGhost	; ghost	block
		dc.w $9E00
		dc.l $900000+Nem_SSWBlock	; W block
		dc.w $AE00
		dc.l $900000+Nem_SSGlass	; glass	block
		dc.w $BE00
		dc.l $900000+Nem_SSEmerald	; emeralds
		dc.w $EE00
		dc.l $900000+Nem_SSZone1	; ZONE 1 block
		dc.w $F2E0
		dc.l $900000+Nem_SSZone2	; ZONE 2 block
		dc.w $F400
		dc.l $900000+Nem_SSZone3	; ZONE 3 block
		dc.w $F520
		dc.l $900000+Nem_SSZone4	; ZONE 4 block
		dc.w $F2E0
		dc.l $900000+Nem_SSZone5	; ZONE 5 block
		dc.w $F400
		dc.l $900000+Nem_SSZone6	; ZONE 6 block
		dc.w $F520
; ---------------------------------------------------------------------------
; Pattern load cues - GHZ animals
; ---------------------------------------------------------------------------
PLC_GHZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_Rabbit		; rabbit
		dc.w $B000
		dc.l $900000+Nem_Flicky		; flicky
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - LZ animals
; ---------------------------------------------------------------------------
PLC_LZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_BlackBird	; blackbird
		dc.w $B000
		dc.l $900000+Nem_Seal		; seal
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - MZ animals
; ---------------------------------------------------------------------------
PLC_MZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_Squirrel	; squirrel
		dc.w $B000
		dc.l $900000+Nem_Seal		; seal
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - SLZ animals
; ---------------------------------------------------------------------------
PLC_SLZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_Pig		; pig
		dc.w $B000
		dc.l $900000+Nem_Flicky		; flicky
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - SYZ animals
; ---------------------------------------------------------------------------
PLC_SYZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_Pig		; pig
		dc.w $B000
		dc.l $900000+Nem_Chicken	; chicken
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - SBZ animals
; ---------------------------------------------------------------------------
PLC_SBZAnimals:	dc.w 1			; ...
		dc.l $900000+Nem_Rabbit		; rabbit
		dc.w $B000
		dc.l $900000+Nem_Chicken	; chicken
		dc.w $B240
; ---------------------------------------------------------------------------
; Pattern load cues - special stage results screen
; ---------------------------------------------------------------------------
PLC_SpeStResult:dc.w 1			; ...
		dc.l $900000+Nem_ResultEm	; emeralds
		dc.w $A820
		dc.l $900000+Nem_MiniSonic	; mini Sonic
		dc.w $AA20
; ---------------------------------------------------------------------------
; Pattern load cues - ending sequence
; ---------------------------------------------------------------------------
PLC_Ending:	dc.w $E			; ...
		dc.l $900000+Nem_GHZ_1st	; GHZ main patterns
		dc.w 0
		dc.l $900000+Nem_GHZ_2nd	; GHZ secondary	patterns
		dc.w $39A0
		dc.l $900000+Nem_Stalk		; flower stalk
		dc.w $6B00
		dc.l $900000+Nem_EndFlower	; flowers
		dc.w $7400
		dc.l $900000+Nem_EndEm		; emeralds
		dc.w $78A0
		dc.l $900000+Nem_EndSonic	; Sonic
		dc.w $7C20
		dc.l $900000+Nem_EndEggman	; Eggman's death (unused)
		dc.w $A480
		dc.l $900000+Nem_Rabbit		; rabbit
		dc.w $AA60
		dc.l $900000+Nem_Chicken	; chicken
		dc.w $ACA0
		dc.l $900000+Nem_BlackBird	; blackbird
		dc.w $AE60
		dc.l $900000+Nem_Seal		; seal
		dc.w $B0A0
		dc.l $900000+Nem_Pig		; pig
		dc.w $B260
		dc.l $900000+Nem_Flicky		; flicky
		dc.w $B4A0
		dc.l $900000+Nem_Squirrel	; squirrel
		dc.w $B660
		dc.l $900000+Nem_EndStH		; "SONIC THE HEDGEHOG"
		dc.w $B8A0
; ---------------------------------------------------------------------------
; Pattern load cues - "TRY AGAIN" and "END" screens
; ---------------------------------------------------------------------------
PLC_TryAgain:	dc.w 2			; ...
		dc.l $900000+Nem_EndEm		; emeralds
		dc.w $78A0
		dc.l $900000+Nem_TryAgain	; Eggman
		dc.w $7C20
		dc.l $900000+Nem_CreditText	; credits alphabet
		dc.w $B400
; ---------------------------------------------------------------------------
; Pattern load cues - Robotnik on SBZ 2
; ---------------------------------------------------------------------------
PLC_EggmanSBZ2:	dc.w 2			; ...
		dc.l $900000+Nem_SbzBlock	; block
		dc.w $A300
		dc.l $900000+Nem_Sbz2Eggman	; Eggman
		dc.w $8000
		dc.l $900000+Nem_LzSwitch	; switch
		dc.w $9400
; ---------------------------------------------------------------------------
; Pattern load cues - final boss
; ---------------------------------------------------------------------------
PLC_FZBoss:	dc.w 4			; ...
		dc.l $900000+Nem_FzEggman	; Eggman after boss
		dc.w $7400
		dc.l $900000+Nem_FzBoss		; FZ boss
		dc.w $6000
		dc.l $900000+Nem_Eggman		; Eggman main patterns
		dc.w $8000
		dc.l $900000+Nem_Sbz2Eggman	; Eggman without ship
		dc.w $8E00
		dc.l $900000+Nem_Exhaust	; exhaust flame
		dc.w $A540

		even

; ---------------------------------------------------------------------------
; Subroutine to	load pattern load cues
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadPLC:				; ...
		movem.l	a1-a2,-(sp)
		lea	(ArtLoadCues)(pc),a1
		add.w	d0,d0
		move.w	(a1,d0.w),d0
		lea	(a1,d0.w),a1
		lea	($FFFFF680).w,a2

loc_1598:				; ...
		tst.l	(a2)
		beq.s	loc_15A0
		addq.w	#6,a2
		bra.s	loc_1598

loc_15A0:				; ...
		move.w	(a1)+,d0
		bmi.s	loc_15AC

loc_15A4:				; ...
		move.l	(a1)+,(a2)+
		move.w	(a1)+,(a2)+
		dbf	d0,loc_15A4

loc_15AC:				; ...
		movem.l	(sp)+,a1-a2
		rts	
; End of function LoadPLC


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadPLC2:				; ...
		movem.l	a1-a2,-(sp)
		lea	(ArtLoadCues)(pc),a1
		add.w	d0,d0
		move.w	(a1,d0.w),d0
		lea	(a1,d0.w),a1
		bsr.s	ClearPLC
		lea	($FFFFF680).w,a2
		move.w	(a1)+,d0
		bmi.s	loc_15D8

loc_15D0:				; ...
		move.l	(a1)+,(a2)+
		move.w	(a1)+,(a2)+
		dbf	d0,loc_15D0

loc_15D8:				; ...
		movem.l	(sp)+,a1-a2
		rts	
; End of function LoadPLC2

; ---------------------------------------------------------------------------
; Subroutine to	clear the pattern load cues
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ClearPLC:				; ...
		lea	($FFFFF680).w,a2
		moveq	#$1F,d0

ClearPLC_Loop:				; ...
		clr.l	(a2)+
		dbf	d0,ClearPLC_Loop
		rts	
; End of function ClearPLC

; ---------------------------------------------------------------------------
; Subroutine to	use graphics listed in a pattern load cue
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


RunPLC_RAM:				; ...
		tst.l	($FFFFF680).w
		beq.s	locret_1640
		tst.w	($FFFFF6F8).w
		bne.s	locret_1640
		movea.l	($FFFFF680).w,a0
		lea	(loc_1502)(pc),a3
		lea	($FFFFAA00).w,a1
		move.w	(a0)+,d2
		bpl.s	loc_160E
		adda.w	#$A,a3

loc_160E:				; ...
		andi.w	#$7FFF,d2
		move.w	d2,($FFFFF6F8).w
		bsr.w	NemDec4
		move.b	(a0)+,d5
		asl.w	#8,d5
		move.b	(a0)+,d5
		moveq	#$10,d6
		moveq	#0,d0
		move.l	a0,($FFFFF680).w
		move.l	a3,($FFFFF6E0).w
		move.l	d0,($FFFFF6E4).w
		move.l	d0,($FFFFF6E8).w
		move.l	d0,($FFFFF6EC).w
		move.l	d5,($FFFFF6F0).w
		move.l	d6,($FFFFF6F4).w

locret_1640:				; ...
		rts	
; End of function RunPLC_RAM

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_1642:				; ...
		tst.w	($FFFFF6F8).w
		beq.w	locret_16DA
		move.w	#9,($FFFFF6FA).w
		moveq	#0,d0
		move.w	($FFFFF684).w,d0
		addi.w	#$120,($FFFFF684).w
		bra.s	loc_1676
; End of function sub_1642


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_165E:				; ...
		tst.w	($FFFFF6F8).w
		beq.s	locret_16DA
		move.w	#3,($FFFFF6FA).w
		moveq	#0,d0
		move.w	($FFFFF684).w,d0
		addi.w	#$60,($FFFFF684).w

loc_1676:				; ...
		lea	($C00004).l,a4
		lsl.l	#2,d0
		lsr.w	#2,d0
		ori.w	#$4000,d0
		swap	d0
		move.l	d0,(a4)
		subq.w	#4,a4
		movea.l	($FFFFF680).w,a0
		movea.l	($FFFFF6E0).w,a3
		move.l	($FFFFF6E4).w,d0
		move.l	($FFFFF6E8).w,d1
		move.l	($FFFFF6EC).w,d2
		move.l	($FFFFF6F0).w,d5
		move.l	($FFFFF6F4).w,d6
		lea	($FFFFAA00).w,a1

loc_16AA:				; ...
		movea.w	#8,a5
		bsr.w	NemDec3
		subq.w	#1,($FFFFF6F8).w
		beq.s	loc_16DC
		subq.w	#1,($FFFFF6FA).w
		bne.s	loc_16AA
		move.l	a0,($FFFFF680).w
		move.l	a3,($FFFFF6E0).w
		move.l	d0,($FFFFF6E4).w
		move.l	d1,($FFFFF6E8).w
		move.l	d2,($FFFFF6EC).w
		move.l	d5,($FFFFF6F0).w
		move.l	d6,($FFFFF6F4).w

locret_16DA:				; ...
		rts	

loc_16DC:				; ...
		lea	($FFFFF680).w,a0
		moveq	#$15,d0

loc_16E2:				; ...
		move.l	6(a0),(a0)+
		dbf	d0,loc_16E2
		rts	
; End of function sub_165E

; ---------------------------------------------------------------------------
; Subroutine to	execute	the pattern load cue
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


RunPLC_ROM:				; ...
		lea	(ArtLoadCues)(pc),a1 ; load the PLC index
		add.w	d0,d0
		move.w	(a1,d0.w),d0
		lea	(a1,d0.w),a1
		move.w	(a1)+,d1	; load number of entries in the	PLC

RunPLC_Loop:				; ...
		movea.l	(a1)+,a0	; get art pointer
		moveq	#0,d0
		move.w	(a1)+,d0	; get VRAM address
		lsl.l	#2,d0		; divide address by $20
		lsr.w	#2,d0
		ori.w	#$4000,d0
		swap	d0
		move.l	d0,($C00004).l	; put the VRAM address into VDP
		bsr.w	NemDec		; decompress
		dbf	d1,RunPLC_Loop	; loop for number of entries
		rts	
; End of function RunPLC_ROM


; ---------------------------------------------------------------------------
; Enigma decompression algorithm
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


EniDec:					; ...
		movem.l	d0-d7/a1-a5,-(sp)
		movea.w	d0,a3
		move.b	(a0)+,d0
		ext.w	d0
		movea.w	d0,a5
		move.b	(a0)+,d4
		lsl.b	#3,d4
		movea.w	(a0)+,a2
		adda.w	a3,a2
		movea.w	(a0)+,a4
		adda.w	a3,a4
		move.b	(a0)+,d5
		asl.w	#8,d5
		move.b	(a0)+,d5
		moveq	#$10,d6

loc_173E:				; ...
		moveq	#7,d0
		move.w	d6,d7
		sub.w	d0,d7
		move.w	d5,d1
		lsr.w	d7,d1
		andi.w	#$7F,d1
		move.w	d1,d2
		cmpi.w	#$40,d1
		bcc.s	loc_1758
		moveq	#6,d0
		lsr.w	#1,d2

loc_1758:				; ...
		bsr.w	sub_188C
		andi.w	#$F,d2
		lsr.w	#4,d1
		add.w	d1,d1
		jmp	loc_17B4(pc,d1.w)
; End of function EniDec


loc_1768:				; ...
		move.w	a2,(a1)+
		addq.w	#1,a2
		dbf	d2,loc_1768
		bra.s	loc_173E

loc_1772:				; ...
		move.w	a4,(a1)+
		dbf	d2,loc_1772
		bra.s	loc_173E

loc_177A:				; ...
		bsr.w	loc_17DC

loc_177E:				; ...
		move.w	d1,(a1)+
		dbf	d2,loc_177E
		bra.s	loc_173E

loc_1786:				; ...
		bsr.w	loc_17DC

loc_178A:				; ...
		move.w	d1,(a1)+
		addq.w	#1,d1
		dbf	d2,loc_178A
		bra.s	loc_173E

loc_1794:				; ...
		bsr.w	loc_17DC

loc_1798:				; ...
		move.w	d1,(a1)+
		subq.w	#1,d1
		dbf	d2,loc_1798
		bra.s	loc_173E

loc_17A2:				; ...
		cmpi.w	#$F,d2
		beq.s	loc_17C4

loc_17A8:				; ...
		bsr.w	loc_17DC
		move.w	d1,(a1)+
		dbf	d2,loc_17A8
		bra.s	loc_173E

loc_17B4:
		bra.s	loc_1768
		bra.s	loc_1768
		bra.s	loc_1772
		bra.s	loc_1772
		bra.s	loc_177A
		bra.s	loc_1786
		bra.s	loc_1794
		bra.s	loc_17A2

loc_17C4:				; ...
		subq.w	#1,a0
		cmpi.w	#$10,d6
		bne.s	loc_17CE
		subq.w	#1,a0

loc_17CE:				; ...
		move.w	a0,d0
		lsr.w	#1,d0
		bcc.s	loc_17D6
		addq.w	#1,a0

loc_17D6:				; ...
		movem.l	(sp)+,d0-d7/a1-a5
		rts	

loc_17DC:				; ...
		move.w	a3,d3
		move.b	d4,d1
		add.b	d1,d1
		bcc.s	loc_17EE
		subq.w	#1,d6
		btst	d6,d5
		beq.s	loc_17EE
		ori.w	#-$8000,d3

loc_17EE:				; ...
		add.b	d1,d1
		bcc.s	loc_17FC
		subq.w	#1,d6
		btst	d6,d5
		beq.s	loc_17FC
		addi.w	#$4000,d3

loc_17FC:				; ...
		add.b	d1,d1
		bcc.s	loc_180A
		subq.w	#1,d6
		btst	d6,d5
		beq.s	loc_180A
		addi.w	#$2000,d3

loc_180A:				; ...
		add.b	d1,d1
		bcc.s	loc_1818
		subq.w	#1,d6
		btst	d6,d5
		beq.s	loc_1818
		ori.w	#$1000,d3

loc_1818:				; ...
		add.b	d1,d1
		bcc.s	loc_1826
		subq.w	#1,d6
		btst	d6,d5
		beq.s	loc_1826
		ori.w	#$800,d3

loc_1826:				; ...
		move.w	d5,d1
		move.w	d6,d7
		sub.w	a5,d7
		bcc.s	loc_1856
		move.w	d7,d6
		addi.w	#$10,d6
		neg.w	d7
		lsl.w	d7,d1
		move.b	(a0),d5
		rol.b	d7,d5
		add.w	d7,d7
		and.w	word_186C-2(pc,d7.w),d5
		add.w	d5,d1

loc_1844:				; ...
		move.w	a5,d0
		add.w	d0,d0
		and.w	word_186C-2(pc,d0.w),d1
		add.w	d3,d1
		move.b	(a0)+,d5
		lsl.w	#8,d5
		move.b	(a0)+,d5
		rts	

loc_1856:				; ...
		beq.s	loc_1868
		lsr.w	d7,d1
		move.w	a5,d0
		add.w	d0,d0
		and.w	word_186C-2(pc,d0.w),d1
		add.w	d3,d1
		move.w	a5,d0
		bra.s	sub_188C

loc_1868:				; ...
		moveq	#$10,d6

loc_186A:
		bra.s	loc_1844
word_186C:	dc.w 1,	3, 7, $F, $1F, $3F, $7F, $FF, $1FF, $3FF, $7FF ; ...
		dc.w $FFF, $1FFF, $3FFF, $7FFF,	$FFFF

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_188C:				; ...
		sub.w	d0,d6
		cmpi.w	#9,d6
		bcc.s	locret_189A
		addq.w	#8,d6
		asl.w	#8,d5
		move.b	(a0)+,d5

locret_189A:				; ...
		rts	
; End of function sub_188C


; ---------------------------------------------------------------------------
; Kosinski decompression algorithm
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


KosDec:					; ...

var_2		= -2
var_1		= -1

		subq.l	#2,sp
		move.b	(a0)+,2+var_1(sp)
		move.b	(a0)+,(sp)
		move.w	(sp),d5
		moveq	#$F,d4

loc_18A8:				; ...
		lsr.w	#1,d5
		move	sr,d6
		dbf	d4,loc_18BA
		move.b	(a0)+,2+var_1(sp)
		move.b	(a0)+,(sp)
		move.w	(sp),d5
		moveq	#$F,d4

loc_18BA:				; ...
		move	d6,ccr
		bcc.s	loc_18C2
		move.b	(a0)+,(a1)+
		bra.s	loc_18A8

loc_18C2:				; ...
		moveq	#0,d3
		lsr.w	#1,d5
		move	sr,d6
		dbf	d4,loc_18D6
		move.b	(a0)+,2+var_1(sp)
		move.b	(a0)+,(sp)
		move.w	(sp),d5
		moveq	#$F,d4

loc_18D6:				; ...
		move	d6,ccr
		bcs.s	loc_1906
		lsr.w	#1,d5
		dbf	d4,loc_18EA
		move.b	(a0)+,2+var_1(sp)
		move.b	(a0)+,(sp)
		move.w	(sp),d5
		moveq	#$F,d4

loc_18EA:				; ...
		roxl.w	#1,d3
		lsr.w	#1,d5
		dbf	d4,loc_18FC
		move.b	(a0)+,2+var_1(sp)
		move.b	(a0)+,(sp)
		move.w	(sp),d5
		moveq	#$F,d4

loc_18FC:				; ...
		roxl.w	#1,d3
		addq.w	#1,d3
		moveq	#-1,d2
		move.b	(a0)+,d2
		bra.s	loc_191C

loc_1906:				; ...
		move.b	(a0)+,d0
		move.b	(a0)+,d1
		moveq	#-1,d2
		move.b	d1,d2
		lsl.w	#5,d2
		move.b	d0,d2
		andi.w	#7,d1
		beq.s	loc_1928
		move.b	d1,d3
		addq.w	#1,d3

loc_191C:				; ...
		move.b	(a1,d2.w),d0
		move.b	d0,(a1)+
		dbf	d3,loc_191C
		bra.s	loc_18A8

loc_1928:				; ...
		move.b	(a0)+,d1
		beq.s	loc_1938
		cmpi.b	#1,d1
		beq.w	loc_18A8
		move.b	d1,d3
		bra.s	loc_191C

loc_1938:				; ...
		addq.l	#2,sp
		rts	
; End of function KosDec

; ---------------------------------------------------------------------------
; Pallet cycling routine loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_Load:				; ...
		moveq	#0,d2
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0 ; get level number
		add.w	d0,d0		; multiply by 2
		move.w	PalCycle(pc,d0.w),d0 ; load animated pallets offset index into d0
		jmp	PalCycle(pc,d0.w) ; jump to PalCycle + offset index
; End of function PalCycle_Load

; ---------------------------------------------------------------------------
; Pallet cycling routines
; ---------------------------------------------------------------------------
PalCycle:	dc.w PalCycle_GHZ-PalCycle ; ...
		dc.w PalCycle_LZ-PalCycle
		dc.w PalCycle_MZ-PalCycle
		dc.w PalCycle_SLZ-PalCycle
		dc.w PalCycle_SYZ-PalCycle
		dc.w PalCycle_SBZ-PalCycle
		dc.w PalCycle_GHZ-PalCycle

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_Title:				; ...
		lea	(Pal_TitleCyc)(pc),a0
		bra.s	loc_196A

PalCycle_GHZ:				; ...
		lea	(Pal_GHZCyc)(pc),a0

loc_196A:				; ...
		subq.w	#1,($FFFFF634).w
		bpl.s	locret_1990
		move.w	#5,($FFFFF634).w
		move.w	($FFFFF632).w,d0
		addq.w	#1,($FFFFF632).w
		andi.w	#3,d0
		lsl.w	#3,d0
		lea	($FFFFFB50).w,a1
		move.l	(a0,d0.w),(a1)+
		move.l	4(a0,d0.w),(a1)

locret_1990:				; ...
		rts	
; End of function PalCycle_Title


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_LZ:				; ...
		subq.w	#1,($FFFFF634).w
		bpl.s	loc_19D8
		move.w	#2,($FFFFF634).w
		move.w	($FFFFF632).w,d0
		addq.w	#1,($FFFFF632).w
		andi.w	#3,d0
		lsl.w	#3,d0
		lea	(Pal_LZCyc1)(pc),a0
		cmpi.b	#3,($FFFFFE11).w ; check if level is SBZ3
		bne.s	loc_19C0
		lea	(Pal_SBZ3Cyc1)(pc),a0 ; load SBZ3	pallet instead

loc_19C0:				; ...
		lea	($FFFFFB56).w,a1
		move.l	(a0,d0.w),(a1)+
		move.l	4(a0,d0.w),(a1)
		lea	($FFFFFAD6).w,a1
		move.l	(a0,d0.w),(a1)+
		move.l	4(a0,d0.w),(a1)

loc_19D8:				; ...
		move.w	($FFFFFE04).w,d0
		andi.w	#7,d0
		move.b	byte_1A3C(pc,d0.w),d0
		beq.s	locret_1A3A
		moveq	#1,d1
		tst.b	($FFFFF7C0).w
		beq.s	loc_19F0
		neg.w	d1

loc_19F0:				; ...
		move.w	($FFFFF650).w,d0
		andi.w	#3,d0
		add.w	d1,d0
		cmpi.w	#3,d0
		bcs.s	loc_1A0A
		move.w	d0,d1
		moveq	#0,d0
		tst.w	d1
		bpl.s	loc_1A0A
		moveq	#2,d0

loc_1A0A:				; ...
		move.w	d0,($FFFFF650).w
		add.w	d0,d0
		move.w	d0,d1
		add.w	d0,d0
		add.w	d1,d0
		lea	(Pal_LZCyc2)(pc),a0
		lea	($FFFFFB76).w,a1
		move.l	(a0,d0.w),(a1)+
		move.w	4(a0,d0.w),(a1)
		lea	(Pal_LZCyc3)(pc),a0
		lea	($FFFFFAF6).w,a1
		move.l	(a0,d0.w),(a1)+
		move.w	4(a0,d0.w),(a1)

locret_1A3A:				; ...
		rts	
; End of function PalCycle_LZ

byte_1A3C:	dc.b 1,	0, 0, 1, 0, 0, 1, 0

PalCycle_MZ:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_SLZ:				; ...
		subq.w	#1,($FFFFF634).w
		bpl.s	locret_1A80
		move.w	#7,($FFFFF634).w
		move.w	($FFFFF632).w,d0
		addq.w	#1,d0
		cmpi.w	#6,d0
		bcs.s	loc_1A60
		moveq	#0,d0

loc_1A60:				; ...
		move.w	d0,($FFFFF632).w
		move.w	d0,d1
		add.w	d1,d1
		add.w	d1,d0
		add.w	d0,d0
		lea	(Pal_SLZCyc)(pc),a0
		lea	($FFFFFB56).w,a1
		move.w	(a0,d0.w),(a1)
		move.l	2(a0,d0.w),4(a1)

locret_1A80:				; ...
		rts	
; End of function PalCycle_SLZ


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_SYZ:				; ...
		subq.w	#1,($FFFFF634).w
		bpl.s	locret_1AC6
		move.w	#5,($FFFFF634).w
		move.w	($FFFFF632).w,d0
		addq.w	#1,($FFFFF632).w
		andi.w	#3,d0
		lsl.w	#2,d0
		move.w	d0,d1
		add.w	d0,d0
		lea	(Pal_SYZCyc1)(pc),a0
		lea	($FFFFFB6E).w,a1
		move.l	(a0,d0.w),(a1)+
		move.l	4(a0,d0.w),(a1)
		lea	(Pal_SYZCyc2)(pc),a0
		lea	($FFFFFB76).w,a1
		move.w	(a0,d1.w),(a1)
		move.w	2(a0,d1.w),4(a1)

locret_1AC6:				; ...
		rts	
; End of function PalCycle_SYZ


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_SBZ:				; ...
		lea	(Pal_SBZCycList)(pc),a2
		tst.b	($FFFFFE11).w
		beq.s	loc_1ADA
		lea	(Pal_SBZCycList2)(pc),a2

loc_1ADA:				; ...
		lea	($FFFFF650).w,a1
		move.w	(a2)+,d1

loc_1AE0:				; ...
		subq.b	#1,(a1)
		bmi.s	loc_1AEA
		addq.l	#2,a1
		addq.l	#8,a2
		bra.s	loc_1B06

loc_1AEA:				; ...
		move.b	(a2)+,(a1)+
		move.b	(a1),d0
		addq.b	#1,d0
		cmp.b	(a2)+,d0
		bcs.s	loc_1AF6
		moveq	#0,d0

loc_1AF6:				; ...
		move.b	d0,(a1)+
		andi.w	#$F,d0
		add.w	d0,d0
		movea.l	(a2)+,a0
		movea.w	(a2)+,a3
		move.w	(a0,d0.w),(a3)

loc_1B06:				; ...
		dbf	d1,loc_1AE0
		subq.w	#1,($FFFFF634).w
		bpl.s	locret_1B64
		lea	(Pal_SBZCyc4)(pc),a0
		move.w	#1,($FFFFF634).w
		tst.b	($FFFFFE11).w
		beq.s	loc_1B2E
		lea	(Pal_SBZCyc10)(pc),a0
		move.w	#0,($FFFFF634).w

loc_1B2E:				; ...
		moveq	#-1,d1
		tst.b	($FFFFF7C0).w
		beq.s	loc_1B38
		neg.w	d1

loc_1B38:				; ...
		move.w	($FFFFF632).w,d0
		andi.w	#3,d0
		add.w	d1,d0
		cmpi.w	#3,d0
		bcs.s	loc_1B52
		move.w	d0,d1
		moveq	#0,d0
		tst.w	d1
		bpl.s	loc_1B52
		moveq	#2,d0

loc_1B52:				; ...
		move.w	d0,($FFFFF632).w
		add.w	d0,d0
		lea	($FFFFFB58).w,a1
		move.l	(a0,d0.w),(a1)+
		move.w	4(a0,d0.w),(a1)

locret_1B64:				; ...
		rts	
; End of function PalCycle_SBZ

Pal_TitleCyc:	dc.b $C, $42, $E, $86, $E, $CA,	$E, $EC, $E, $EC, $C, $42, $E, $86, $E,	$CA, $E, $CA, $E, $EC, $C, $42,	$E, $86, $E, $86, $E, $CA, $E, $EC, $C,	$42 ; ...
Pal_GHZCyc:	dc.b $A, $86, $E, $86, $E, $A8,	$E, $CA, $E, $CA, $A, $86, $E, $86, $E,	$A8, $E, $A8, $E, $CA, $A, $86,	$E, $86, $E, $86, $E, $A8, $E, $CA, $A,	$86 ; ...
Pal_LZCyc1:	dc.b 6,	$80, $C, $E6, $A, $C4, 8, $A2, $C, $E6,	$A, $C4, 8, $A2, 6, $80, $A, $C4, 8, $A2, 6, $80, $C, $E6, 8, $A2, 6, $80, $C, $E6, $A,	$C4 ; ...
Pal_LZCyc2:	dc.b $A, $AA, 6, $66, 2, $22, 6, $66, 2, $22, $A, $AA, 2, $22, $A, $AA,	6, $66 ; ...
Pal_LZCyc3:	dc.b 8,	$A8, 4,	$64, 0,	$20, 4,	$64, 0,	$20, 8,	$A8, 0,	$20, 8,	$A8, 4,	$64 ; ...
Pal_SBZ3Cyc1:	dc.b $E, $CE, $E, $8C, $A, $48,	8, $26,	$E, $8C, $A, $48, 8, $26, $E, $CE, $A, $48, 8, $26, $E,	$CE, $E, $8C, 8, $26, $E, $CE, $E, $8C,	$A, $48, $E, $EE, 0, 8,	0, $E, 0, $4E, 0, $8E, 0, $EE, 0, $EE, $E, $EE,	0, 8, 0, $E, 0,	$4E, 0,	$8E, 0,	$8E, 0,	$EE, $E, $EE, 0, 8, 0, $E, 0, $4E, 0, $4E, 0, $8E, 0, $EE, $E, $EE, 0, 8, 0, $E, 0, $E,	0, $4E,	0, $8E,	0, $EE,	$E, $EE, 0, 8, 0, 8, 0,	$E, 0, $4E, 0, $8E, 0, $EE, $E,	$EE ; ...
Pal_SLZCyc:	dc.b $E, $E0, 0, 6, 0, $66, $A,	$A0, 0,	$A, 0, $22, 6, $60, 0, $E, 0, $66, 2, $20, 0, $A, 0, $AA, 6, $60, 0, 6,	0, $EE,	$A, $A0, 0, 2, 0, $AA ;	...
Pal_SYZCyc1:	dc.b 0,	$EE, 0,	$AA, 0,	$66, 0,	$22, 0,	$AA, 0,	$66, 0,	$22, 0,	$EE, 0,	$66, 0,	$22, 0,	$EE, 0,	$AA, 0,	$22, 0,	$EE, 0,	$AA, 0,	$66 ; ...
Pal_SYZCyc2:	dc.b 0,	$E, $E,	$EE, 6,	$6E, $E, $88, $E, $EE, $C, 0, 6, $6E, $E, $88 ;	...
Pal_SBZCycList:	dc.w 8			; ...
		dc.b 7,	8		; duration in frames, number of	colours
		dc.l $880000+Pal_SBZCyc1	; pallet pointer
		dc.w $FB50		; RAM address
		dc.b $D, 8
		dc.l $880000+Pal_SBZCyc2
		dc.w $FB52
		dc.b $E, 8
		dc.l $880000+Pal_SBZCyc3
		dc.w $FB6E
		dc.b $B, 8
		dc.l $880000+Pal_SBZCyc5
		dc.w $FB70
		dc.b 7,	8
		dc.l $880000+Pal_SBZCyc6
		dc.w $FB72
		dc.b $1C, $10
		dc.l $880000+Pal_SBZCyc7
		dc.w $FB7E
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8
		dc.w $FB78
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8+2
		dc.w $FB7A
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8+4
		dc.w $FB7C
Pal_SBZCycList2:dc.w 6			; ...
		dc.b 7,	8
		dc.l $880000+Pal_SBZCyc1
		dc.w $FB50
		dc.b $D, 8
		dc.l $880000+Pal_SBZCyc2
		dc.w $FB52
		dc.b 9,	8
		dc.l $880000+Pal_SBZCyc9
		dc.w $FB70
		dc.b 7,	8
		dc.l $880000+Pal_SBZCyc6
		dc.w $FB72
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8
		dc.w $FB78
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8+2
		dc.w $FB7A
		dc.b 3,	3
		dc.l $880000+Pal_SBZCyc8+4
		dc.w $FB7C
Pal_SBZCyc1:	dc.b 0,	$44, $E, $A0, 0, $44, $E, $A0, 0, $E8, 0, $E8, 0, $44, $E, $4E ; ...
Pal_SBZCyc2:	dc.b 0,	$EE, 0,	$8E, 0,	$E, 0, 8, 0, 8,	0, $E, 0, $8E, 0, $EE ;	...
Pal_SBZCyc3:	dc.b 0,	$A, 0, $A, 0, 8, 0, 6, 0, 4, 0,	4, 0, 6, 0, 8 ;	...
Pal_SBZCyc4:	dc.b $C, $AA, 8, $66, 4, $22, $C, $AA, 8, $66, 4, $22 ;	...
Pal_SBZCyc5:	dc.b 0,	$E, 0, $E, 0, $A, 0, 8,	0, 6, 0, 6, 0, 8, 0, $A	; ...
Pal_SBZCyc6:	dc.b $C, $E6, $C, $E6, $A, $C4,	8, $A2,	6, $80,	6, $80,	8, $A2,	$A, $C4	; ...
Pal_SBZCyc7:	dc.b $E, $A0, $E, $86, $E, $6A,	$E, $4E, 8, $8E, 4, $AE, 2, $CE, 0, $EE, 0, $EE, 2, $CE, 4, $AE, 8, $8E, $E, $4E, $E, $6A, $E, $86, $E,	$A0 ; ...
Pal_SBZCyc8:	dc.b $E, $AE, $E, $4E, 8, 8, $E, $AE, $E, $4E ;	...
Pal_SBZCyc9:	dc.b $E, $A0, $E, $A0, $A, $64,	6, $4A,	0, $E, 0, $E, 6, $4A, $A, $64 ;	...
Pal_SBZCyc10:	dc.b $E, $EC, $A, $A6, 6, $60, $E, $EC,	$A, $A6, 6, $60	; ...

; ---------------------------------------------------------------------------
; Subroutine to	fade out and fade in
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_FadeTo:				; ...
		move.w	#$3F,($FFFFF626).w

Pal_FadeTo2:				; ...
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		moveq	#0,d1
		move.b	($FFFFF627).w,d0

Pal_ToBlack:				; ...
		move.w	d1,(a0)+
		dbf	d0,Pal_ToBlack	; fill pallet with $000	(black)
		move.w	#$15,d4

loc_1DCE:				; ...
		move.b	#$12,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.s	Pal_FadeIn
		bsr.w	RunPLC_RAM
		dbf	d4,loc_1DCE
		rts	
; End of function Pal_FadeTo

; ---------------------------------------------------------------------------
; Pallet fade-in subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_FadeIn:				; ...
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		lea	($FFFFFB80).w,a1
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		adda.w	d0,a1
		move.b	($FFFFF627).w,d0

loc_1DFA:				; ...
		bsr.s	Pal_AddColor
		dbf	d0,loc_1DFA
		cmpi.b	#1,($FFFFFE10).w
		bne.s	locret_1E24
		moveq	#0,d0
		lea	($FFFFFA80).w,a0
		lea	($FFFFFA00).w,a1
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		adda.w	d0,a1
		move.b	($FFFFF627).w,d0

loc_1E1E:				; ...
		bsr.s	Pal_AddColor
		dbf	d0,loc_1E1E

locret_1E24:				; ...
		rts	
; End of function Pal_FadeIn


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_AddColor:				; ...
		move.w	(a1)+,d2
		move.w	(a0),d3
		cmp.w	d2,d3
		beq.s	Pal_NoAdd
		move.w	d3,d1
		addi.w	#$200,d1	; increase blue	value
		cmp.w	d2,d1		; has blue reached threshold level?
		bhi.s	Pal_AddGreen	; if yes, branch
		move.w	d1,(a0)+	; update pallet
		rts	

Pal_AddGreen:				; ...
		move.w	d3,d1
		addi.w	#$20,d1		; increase green value
		cmp.w	d2,d1
		bhi.s	Pal_AddRed
		move.w	d1,(a0)+	; update pallet
		rts	

Pal_AddRed:				; ...
		addq.w	#2,(a0)+	; increase red value
		rts	

Pal_NoAdd:				; ...
		addq.w	#2,a0
		rts	
; End of function Pal_AddColor


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_FadeFrom:				; ...
		move.w	#$3F,($FFFFF626).w
		move.w	#$15,d4

loc_1E5C:				; ...
		move.b	#$12,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.s	Pal_FadeOut
		bsr.w	RunPLC_RAM
		dbf	d4,loc_1E5C
		rts	
; End of function Pal_FadeFrom

; ---------------------------------------------------------------------------
; Pallet fade-out subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_FadeOut:				; ...
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		move.b	($FFFFF627).w,d0

loc_1E82:				; ...
		bsr.s	Pal_DecColor
		dbf	d0,loc_1E82
		moveq	#0,d0
		lea	($FFFFFA80).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		move.b	($FFFFF627).w,d0

loc_1E98:				; ...
		bsr.s	Pal_DecColor
		dbf	d0,loc_1E98
		rts	
; End of function Pal_FadeOut


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_DecColor:				; ...
		move.w	(a0),d2
		beq.s	Pal_NoDec
		move.w	d2,d1
		andi.w	#$E,d1
		beq.s	Pal_DecGreen
		subq.w	#2,(a0)+	; decrease red value
		rts	

Pal_DecGreen:				; ...
		move.w	d2,d1
		andi.w	#$E0,d1
		beq.s	Pal_DecBlue
		subi.w	#$20,(a0)+	; decrease green value
		rts	

Pal_DecBlue:				; ...
		move.w	d2,d1
		andi.w	#$E00,d1
		beq.s	Pal_NoDec
		subi.w	#$200,(a0)+	; decrease blue	value
		rts	

Pal_NoDec:				; ...
		addq.w	#2,a0
		rts	
; End of function Pal_DecColor

; ---------------------------------------------------------------------------
; Subroutine to	fill the pallet	with white (special stage)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_MakeWhite:				; ...
		move.w	#$3F,($FFFFF626).w
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		move.w	#$EEE,d1
		move.b	($FFFFF627).w,d0

PalWhite_Loop:				; ...
		move.w	d1,(a0)+
		dbf	d0,PalWhite_Loop
		move.w	#$15,d4

loc_1EF4:				; ...
		move.b	#$12,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.s	Pal_WhiteToBlack
		bsr.w	RunPLC_RAM
		dbf	d4,loc_1EF4
		rts	
; End of function Pal_MakeWhite


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_WhiteToBlack:			; ...
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		lea	($FFFFFB80).w,a1
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		adda.w	d0,a1
		move.b	($FFFFF627).w,d0

loc_1F20:				; ...
		bsr.s	Pal_DecColor2
		dbf	d0,loc_1F20
		cmpi.b	#1,($FFFFFE10).w
		bne.s	locret_1F4A
		moveq	#0,d0
		lea	($FFFFFA80).w,a0
		lea	($FFFFFA00).w,a1
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		adda.w	d0,a1
		move.b	($FFFFF627).w,d0

loc_1F44:				; ...
		bsr.s	Pal_DecColor2
		dbf	d0,loc_1F44

locret_1F4A:				; ...
		rts	
; End of function Pal_WhiteToBlack


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_DecColor2:				; ...
		move.w	(a1)+,d2
		move.w	(a0),d3
		cmp.w	d2,d3
		beq.s	loc_1F78
		move.w	d3,d1
		subi.w	#$200,d1	; decrease blue	value
		bcs.s	loc_1F64
		cmp.w	d2,d1
		bcs.s	loc_1F64
		move.w	d1,(a0)+
		rts	

loc_1F64:				; ...
		move.w	d3,d1
		subi.w	#$20,d1		; decrease green value
		bcs.s	loc_1F74
		cmp.w	d2,d1
		bcs.s	loc_1F74
		move.w	d1,(a0)+
		rts	

loc_1F74:				; ...
		subq.w	#2,(a0)+	; decrease red value
		rts	

loc_1F78:				; ...
		addq.w	#2,a0
		rts	
; End of function Pal_DecColor2

; ---------------------------------------------------------------------------
; Subroutine to	make a white flash when	you enter a special stage
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_MakeFlash:				; ...
		move.w	#$3F,($FFFFF626).w
		move.w	#$15,d4

loc_1F86:				; ...
		move.b	#$12,($FFFFF62A).w
		bsr.w	DelayProgram
		bsr.s	Pal_ToWhite
		bsr.w	RunPLC_RAM
		dbf	d4,loc_1F86
		rts	
; End of function Pal_MakeFlash


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_ToWhite:				; ...
		moveq	#0,d0
		lea	($FFFFFB00).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		move.b	($FFFFF627).w,d0

loc_1FAC:				; ...
		bsr.s	Pal_AddColor2
		dbf	d0,loc_1FAC
		moveq	#0,d0
		lea	($FFFFFA80).w,a0
		move.b	($FFFFF626).w,d0
		adda.w	d0,a0
		move.b	($FFFFF627).w,d0

loc_1FC2:				; ...
		bsr.s	Pal_AddColor2
		dbf	d0,loc_1FC2
		rts	
; End of function Pal_ToWhite


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Pal_AddColor2:				; ...
		move.w	(a0),d2
		cmpi.w	#$EEE,d2
		beq.s	loc_2006
		move.w	d2,d1
		andi.w	#$E,d1
		cmpi.w	#$E,d1
		beq.s	loc_1FE2
		addq.w	#2,(a0)+	; increase red value
		rts	

loc_1FE2:				; ...
		move.w	d2,d1
		andi.w	#$E0,d1
		cmpi.w	#$E0,d1
		beq.s	loc_1FF4
		addi.w	#$20,(a0)+	; increase green value
		rts	

loc_1FF4:				; ...
		move.w	d2,d1
		andi.w	#$E00,d1
		cmpi.w	#$E00,d1
		beq.s	loc_2006
		addi.w	#$200,(a0)+	; increase blue	value
		rts	

loc_2006:				; ...
		addq.w	#2,a0
		rts	
; End of function Pal_AddColor2
; ---------------------------------------------------------------------------
; Pallet cycling routine - Sega	logo
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalCycle_Sega:				; ...
		tst.b	($FFFFF635).w
		bne.s	loc_206A
		lea	($FFFFFB20).w,a1
		lea	(Pal_Sega1)(pc),a0
		moveq	#5,d1
		move.w	($FFFFF632).w,d0

loc_2020:				; ...
		bpl.s	loc_202A
		addq.w	#2,a0
		subq.w	#1,d1
		addq.w	#2,d0
		bra.s	loc_2020

loc_202A:				; ...
		move.w	d0,d2
		andi.w	#$1E,d2
		bne.s	loc_2034
		addq.w	#2,d0

loc_2034:				; ...
		cmpi.w	#$60,d0
		bcc.s	loc_203E
		move.w	(a0)+,(a1,d0.w)

loc_203E:				; ...
		addq.w	#2,d0
		dbf	d1,loc_202A
		move.w	($FFFFF632).w,d0
		addq.w	#2,d0
		move.w	d0,d2
		andi.w	#$1E,d2
		bne.s	loc_2054
		addq.w	#2,d0

loc_2054:				; ...
		cmpi.w	#$64,d0
		blt.s	loc_2062
		move.w	#$401,($FFFFF634).w
		moveq	#-$C,d0

loc_2062:				; ...
		move.w	d0,($FFFFF632).w
		moveq	#1,d0
		rts	

loc_206A:				; ...
		subq.b	#1,($FFFFF634).w
		bpl.s	loc_20BC
		move.b	#4,($FFFFF634).w
		move.w	($FFFFF632).w,d0
		addi.w	#$C,d0
		cmpi.w	#$30,d0
		bcs.s	loc_2088
		moveq	#0,d0
		rts	

loc_2088:				; ...
		move.w	d0,($FFFFF632).w
		lea	(Pal_Sega2)(pc),a0
		lea	(a0,d0.w),a0
		lea	($FFFFFB04).w,a1
		move.l	(a0)+,(a1)+
		move.l	(a0)+,(a1)+
		move.w	(a0)+,(a1)
		lea	($FFFFFB20).w,a1
		moveq	#0,d0
		moveq	#$2C,d1

loc_20A8:				; ...
		move.w	d0,d2
		andi.w	#$1E,d2
		bne.s	loc_20B2
		addq.w	#2,d0

loc_20B2:				; ...
		move.w	(a0),(a1,d0.w)
		addq.w	#2,d0
		dbf	d1,loc_20A8

loc_20BC:				; ...
		moveq	#1,d0
		rts	
; End of function PalCycle_Sega

Pal_Sega1:	dc.b $E, $EE, $E, $EA, $E, $E4,	$E, $C0, $E, $E4, $E, $EA ; ...
Pal_Sega2:	dc.b $E, $EC, $E, $EA, $E, $EA,	$E, $EA, $E, $EA, $E, $EA, $E, $EC, $E,	$EA, $E, $E4, $E, $C0, $E, $C0,	$E, $C0, $E, $EC, $E, $EA, $E, $E4, $E,	$C0, $E, $A0, $E, $60, $E, $EA,	$E, $E4, $E, $C0, $E, $A0, $E, $80, $E,	0 ; ...

; ---------------------------------------------------------------------------
; Subroutines to load pallets
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalLoad1:				; ...
		lea	(PalPointers)(pc),a1
		lsl.w	#3,d0
		adda.w	d0,a1
		movea.l	(a1)+,a2
		movea.w	(a1)+,a3
		adda.w	#$80,a3
		move.w	(a1)+,d7

loc_2110:				; ...
		move.l	(a2)+,(a3)+
		dbf	d7,loc_2110
		rts	
; End of function PalLoad1


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalLoad2:				; ...
		lea	(PalPointers)(pc),a1
		lsl.w	#3,d0
		adda.w	d0,a1
		movea.l	(a1)+,a2
		movea.w	(a1)+,a3
		move.w	(a1)+,d7

loc_2128:				; ...
		move.l	(a2)+,(a3)+
		dbf	d7,loc_2128
		rts	
; End of function PalLoad2

; ---------------------------------------------------------------------------
; Underwater pallet loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalLoad3_Water:				; ...
		lea	(PalPointers)(pc),a1
		lsl.w	#3,d0
		adda.w	d0,a1
		movea.l	(a1)+,a2
		movea.w	(a1)+,a3
		suba.w	#$80,a3
		move.w	(a1)+,d7

loc_2144:				; ...
		move.l	(a2)+,(a3)+
		dbf	d7,loc_2144
		rts	
; End of function PalLoad3_Water


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PalLoad4_Water:				; ...
		lea	(PalPointers)(pc),a1
		lsl.w	#3,d0
		adda.w	d0,a1
		movea.l	(a1)+,a2
		movea.w	(a1)+,a3
		suba.w	#$100,a3
		move.w	(a1)+,d7

loc_2160:				; ...
		move.l	(a2)+,(a3)+
		dbf	d7,loc_2160
		rts	
; End of function PalLoad4_Water

; ---------------------------------------------------------------------------
; Pallet Pointers
; (pallet address, RAM address,	pallet length)
; ---------------------------------------------------------------------------
PalPointers:	dc.l $880000+Pal_SegaBG		; ...
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_Title
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_LevelSel
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_Sonic
		dc.w $FB00
		dc.w 7
		dc.l $880000+Pal_GHZ
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_LZ
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_MZ
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_SLZ
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_SYZ
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_SBZ1
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_Special
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_LZWater
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_SBZ3
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_SBZ3Water
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_SBZ2
		dc.w $FB20
		dc.w $17
		dc.l $880000+Pal_LZSonWater
		dc.w $FB00
		dc.w 7
		dc.l $880000+Pal_SBZ3SonWat
		dc.w $FB00
		dc.w 7
		dc.l $880000+Pal_SpeResult
		dc.w $FB00
		dc.w $1F
		dc.l $880000+Pal_SpeContinue
		dc.w $FB00
		dc.w $F
		dc.l $880000+Pal_Ending
		dc.w $FB00
		dc.w $1F
Pal_SegaBG:	dc.b $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE, $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE ; ...
		dc.b $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE, $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE
		dc.b $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE, $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE
		dc.b $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE, $E, $EE, $E, $EE, $E, $EE,	$E, $EE, $E, $EE, $E, $EE, $E, $EE, $E,	$EE
Pal_Title:	dc.b $A, $20, 6, 0, $C,	0, $E, $44, $E,	$66, $E, $88, $E, $EE, 0, $AE, 0, $6A, 0, $26, 0, $EE, $E, $AA,	0, $C, 0, 6, 0,	2, 0, 0	; ...
		dc.b 0,	0, $C, 0, $E, $22, $E, $44, $E,	$66, $E, $88, $E, $EE, $A, $AA,	8, $88,	6, $66,	4, $44,	2, $48,	8, $AE,	6, $8C,	0, 0, 0, $E
		dc.b 8,	0, 0, 2, $E, $EE, 0, $26, 0, $48, 0, $6C, 0, $8E, 0, $CE, $C, $42, $E, $86, $E,	$CA, $E, $EC, 0, $40, 0, $60, 0, $A4, 0, $E8
		dc.b $C, $82, $A, 2, $C, $42, $E, $86, $E, $CA,	$E, $EC, $E, $EE, $E, $AC, $E, $8A, $E,	$68, 0,	$E8, 0,	$A4, 0,	2, 0, $26, 0, $6C, 0, $CE
Pal_LevelSel:	dc.b 0,	0, 0, 0, 0, 2, 0, 2, 2,	$24, 2,	$24, 4,	$46, 4,	$46, 2,	$24, 2,	$24, 4,	$46, 6,	$68, 2,	$24, 0,	2, 0, 0, 0, 0 ;	...
		dc.b 0,	0, 0, 0, 0, 2, 2, $24, 2, $24, 4, $46, 6, $68, 2, $24, 4, $46, 2, $24, 0, 2, 2,	$24, 4,	$46, 2,	$24, 0,	0, 2, $24
		dc.b 0,	0, 0, $EE, 0, 0, 0, 0, 0, 0, 0,	0, 0, $EE, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b 0,	0, $E, $EC, 0, 0, 0, 0,	0, 0, 0, 0, $E,	$EC, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
Pal_Sonic:	dc.b 0,	0, 0, 0, 8, $22, $A, $44, $C, $66, $E, $88, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $AE, 4, $6A, 0, $E, 0,	8, 0, 4, 0, $EE	; ...
Pal_GHZ:	dc.b 8,	0, 0, 0, 2, $42, 4, $64, 6, $86, 8, $C8, $E, $EE, $A, $AA, 8, $88, 4, $44, 8, $EA, 4, $6A, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b $E, $80, 0, 2, $E,	$EE, 0,	$26, 0,	$48, 0,	$6C, 0,	$8E, 0,	$CE, $A, $86, $E, $86, $E, $A8,	$E, $CA, 0, $40, 0, $60, 0, $A4, 0, $E8
		dc.b $C, $82, $A, 2, $C, $42, $E, $86, $E, $CA,	$E, $EC, $E, $EE, $E, $AC, $E, $8A, $E,	$68, 0,	$E8, 0,	$A4, 0,	2, 0, $26, 0, $6C, 0, $CE
Pal_LZ:		dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $E0, 2, $60, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 0,	0, 0, $26, 0, $48, 0, $6A, 2, $8C, 4, $CE, 6, $EE, 0, 0, 4, $86, 0, $80, 0, $40, 6, $80, $C, $E6, $A, $C4, 8, $A2, $E, $EE
		dc.b 0,	0, 0, 0, 0, 2, 0, $24, 0, $46, 8, $22, $A, $66,	$E, $AA, 4, $28, 6, $4A, $A, $8E, $A, $AA, 6, $66, 2, $22, 0, $68, $E, $EE
Pal_LZWater:	dc.b 0,	0, 0, 0, 2, $20, 4, $42, 6, $62, 8, $84, $E, $EE, $A, $AA, 8, $88, 4, $44, 6, $AA, 2, $66, 0, $48, 0, $24, 0, 2, 0, $EE	; ...
		dc.b 8,	0, 0, 0, 2, $26, 2, $2A, 4, $4C, 8, $8E, $E, $EE, $A, $AA, 8, $88, 4, $44, 6, $C0, 2, $40, 0, $EA, 0, $84, 0, $40, 0, $E
		dc.b 0,	0, 0, 0, 0, $20, 0, $42, 0, $64, 2, $86, 4, $A8, 0, 0, 2, $64, 0, $40, 0, $20, 6, $80, $C, $E6,	$A, $C4, 8, $A2, $E, $EE
		dc.b 0,	0, 0, 0, 0, 0, 0, $20, 2, $42, 2, $40, 4, $62, 6, $84, 2, $24, 4, $46, 6, $68, 0, $26, 0, $48, 0, $6A, 4, $64, 8, $88
Pal_MZ:		dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $EA, 4, $6A, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b $A, 0, 2, 2, $E, $EE, 6, $24, 8, $46, $A, $68, $C,	$8A, $E, $AC, 0, $40, 6, $86, 8, $A8, $A, $CA, 4, $64, 0, $62, 0, $A4, 0, $E8
		dc.b $A, 0, 4, 2, $E, $EE, 0, 4, 0, 8, 0, $E, 0, $8E, 0, $EE, 8, $20, $A, $60, $C, $80,	$E, $A0, 0, $A4, 0, $E8, $E, $C0, 6, $24
Pal_SLZ:	dc.b 8,	0, 0, 0, 2, $60, 6, $A0, 8, $C0, $A, $E0, $E, $EE, $A, $AA, 8, $88, 4, $44, 8, $EA, 4, $6A, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 0,	0, 2, $22, 4, $44, 6, $66, 8, $88, $A, $AA, $C,	$CC, 6,	$A8, 4,	$86, 2,	$64, 0,	$42, $E, $E0, 0, $20, 0, $E, 0,	$EE, $E, $EE
		dc.b 0,	0, 0, 2, 2, $24, 4, $46, 0, 0, 0, 0, 0,	$22, 6,	2, 4, 0, $A, $22, $A, $44, $A, $66, 0, 0, 0, $24, 0, $44, 0, 0
Pal_SYZ:	dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $EA, 4, $6A, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 6,	$26, 0,	0, $E, $EE, 8, $AE, 4, $8C, 2, $4A, 0, $28, 0, 6, 0, 4,	6, $C6,	2, $82,	0, $40,	$A, $C8, 6, $84, 2, $40, 0, 0
		dc.b 6,	$26, 0,	0, 6, $48, 6, $6C, 8, $AE, $A, $EE, $E,	$EE, 0,	$EE, 0,	$AA, 0,	$66, 0,	$22, 0,	$E, 4, 4, $E, $EE, $E, $48, 2, 2
Pal_SBZ1:	dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $E0, 2, $60, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 0,	$46, 0,	0, $E, $EE, 2, $20, 4, $42, 6, $64, 8, $86, $C,	$CA, 0,	$44, 0,	$EE, 0,	$E, 0, $A, $C, $AA, 8, $66, 4, $22, 0, 6
		dc.b 0,	$46, 0,	0, $E, $EE, 0, 2, 0, $24, 0, $68, 2, $8A, 0, $A, 0, $E,	$C, $E6, 0, $8A, 0, $CE, $E, $AE, $E, $4E, 8, 8, $E, $A0
Pal_SBZ2:	dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $E0, 2, $60, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 0,	$46, 0,	0, $E, $EE, 2, $20, 4, $42, 6, $64, 8, $86, $C,	$CA, 0,	$44, 0,	$EE, 0,	$E, 0, $A, $C, $AA, 8, $66, 4, $22, 0, 6
		dc.b 0,	$46, 0,	0, 8, $A8, 0, 0, 0, 0, 0, $20, 2, $42, 4, $64, $E, $A0,	0, $48,	0, $A, 0, 6, $E, $AE, $E, $4E, 8, 8, 0,	2
Pal_Special:	dc.b 4,	0, 0, 0, 8, $22, $A, $44, $C, $66, $E, $88, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $AE, 4, $6A, 0, $E, 0,	8, 0, 4, 0, $EE	; ...
		dc.b 4,	0, 0, 0, 0, $24, 0, $68, 0, $AC, 2, $EE, $E, $EE, $A, $AA, 8, $88, 4, $44, $A, $E4, 6, $A2, 0, $EE, 0, $88, 0, $44, 0, 0
		dc.b 4,	0, 0, 0, 2, 4, 6, $28, $A, $4C,	$C, $6E, $E, $CE, 8, 0,	$C, $42, $E, $86, $E, $CA, $E, $EC, 0, 0, $E, $E0, $A, $A0, 4, $40
		dc.b 4,	0, 0, 0, 0, $60, 0, $A0, 0, $C6, 0, $EA, $A, $EC, $E, $EA, $E, $E0, $A,	$A0, 8,	$80, 6,	$60, 4,	$40, $E, $E0, $A, $A0, 4, $40
Pal_SBZ3:	dc.b 8,	0, 0, 0, 6, $26, $A, $2A, $C, $4C, $E, $8E, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $E0, 2, $60, 0, $EE, 0, $88, 0, $44, 0, $E ; ...
		dc.b 0,	0, 4, $44, 6, $66, 8, $88, $A, $AA, $C,	$CC, $E, $EE, 0, 0, $C,	$8C, $A, $6A, 8, $48, $E, $CE, $E, $8C,	$A, $48, 8, $26, $E, $EE
		dc.b 0,	0, 0, 0, 0, $20, 2, $40, 4, $62, 8, $82, $C, $C6, $E, $EA, 2, $82, 4, $A4, 8, $E8, $A, $AA, 6, $66, 2, $22, 6, $84, $E,	$EE
Pal_SBZ3Water:	dc.b 0,	0, 0, 0, $A, $26, $C, $48, $E, $6A, $E,	$8C, $E, $CE, $C, $AC, 8, $68, 6, $46, $C, $AE,	8, $6C,	6, $C, 4, $26, 0, 4, 0,	$EE ; ...
		dc.b 8,	0, 0, 0, 2, $26, 2, $2A, 4, $4C, 8, $8E, $E, $EE, $A, $AA, 8, $88, 4, $44, 6, $C0, 2, $40, 0, $EA, 0, $84, 0, $40, 0, $E
		dc.b 0,	0, 2, 2, 4, 4, 6, $26, 8, $48, $A, $6A,	$C, $8C, 0, 0, 8, $48, 6, $26, 4, 4, $E, $CE, $E, $8C, $A, $48,	8, $26,	$E, $EE
		dc.b 0,	0, 0, 0, 0, 0, 2, 0, 4,	2, 6, $44, 8, $66, $A, $88, 2, $64, 4, $86, 6, $A8, 0, $26, 0, $48, 0, $6A, 6, 4, $A, $AA
Pal_LZSonWater:	dc.b 0,	0, 0, 0, 2, $20, 4, $42, 6, $62, 8, $84, $E, $EE, $A, $AA, 8, $88, 4, $44, 6, $AA, 2, $66, 0, $48, 0, $24, 0, 2, 0, $EE	; ...
Pal_SBZ3SonWat:	dc.b 0,	0, 0, 0, $A, $26, $C, $48, $E, $6A, $E,	$8C, $E, $CE, $C, $AC, 8, $68, 6, $46, $C, $AE,	8, $6C,	6, $C, 4, $26, 0, 4, 0,	$EE ; ...
Pal_SpeResult:	dc.b $E, $EE, $E, $AA, $E, $AA,	0, $EE,	0, $EE,	0, $EE,	8, $A0,	$A, $C0, $C, $E0, $E, $AA, 0, $24, 0, $68, 0, $AC, 2, $EE, $E, $EE, 4, $C0 ; ...
		dc.b $E, $EE, 0, 0, 8, $22, $A,	$44, $C, $66, $E, $88, $E, $EE,	$A, $AA, 8, $88, 4, $44, 8, $AE, 4, $6A, 0, $E,	0, 8, 0, 4, 0, 0
		dc.b $E, $EE, 0, 0, 2, 4, 6, $28, $A, $4C, $C, $6E, $E,	$CE, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b $E, $EE, 0, 0, 0, $60, 0, $A0, 0, $C6, 0, $EA, $A,	$EC, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
Pal_SpeContinue:dc.b 0,	0, 0, 0, 8, $22, $A, $44, $C, $66, $E, $88, $E,	$EE, $A, $AA, 8, $88, 4, $44, 8, $AE, 4, $6A, 0, $E, 0,	8, 0, 4, 0, $EE	; ...
		dc.b 0,	0, 0, 0, 4, $24, 8, $48, $A, $6A, $E, $8E, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, $EE, 0, $88, 0, $44, 0, 0
Pal_Ending:	dc.b $E, $80, 0, 0, 8, $22, $A,	$44, $C, $66, $E, $88, $E, $EE,	$A, $AA, 8, $88, 4, $44, 8, $AE, 4, $6A, 0, $E,	0, 8, 0, 4, 0, $EE ; ...
		dc.b $E, $80, 0, 0, 6, 8, 8, $2A, $A, $4C, $C, $6E, $E,	$EE, $A, $AE, 6, $6C, 2, $2A, 8, $EA, 4, $6A, 0, $EE, 0, $88, 0, $44, 0, $E
		dc.b $E, $80, 0, 2, $E,	$EE, 0,	$26, 0,	$48, 0,	$6C, 0,	$8E, 0,	$CE, $A, $86, $E, $86, $E, $A8,	$E, $CA, 0, $40, 0, $60, 0, $A4, 0, $E8
		dc.b $C, $82, $A, 2, $C, $42, $E, $86, $E, $CA,	$E, $EC, $E, $EE, $E, $AC, $E, $8A, $E,	$68, 0,	$E8, 0,	$A4, 0,	2, 0, $26, 0, $6C, 0, $CE



; ---------------------------------------------------------------------------
; Subroutine to	delay the program by ($FFFFF62A) frames
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DelayProgram:				; ...
		move	#$2300,sr

loc_29AC:				; ...
		tst.b	($FFFFF62A).w
		bne.s	loc_29AC
		rts	
; End of function DelayProgram

; ---------------------------------------------------------------------------
; Subroutine to	generate a pseudo-random number	in d0
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


RandomNumber:				; ...
		move.l	($FFFFF636).w,d1
		bne.s	loc_29C0
		move.l	#$2A6D365A,d1

loc_29C0:				; ...
		move.l	d1,d0
		asl.l	#2,d1
		add.l	d0,d1
		asl.l	#3,d1
		add.l	d0,d1
		move.w	d1,d0
		swap	d1
		add.w	d1,d0
		move.w	d0,d1
		swap	d1
		move.l	d1,($FFFFF636).w
		rts	
; End of function RandomNumber


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


CalcSine:				; ...
		andi.w	#$FF,d0
		add.w	d0,d0
		addi.w	#$80,d0
		move.w	Sine_Data(pc,d0.w),d1
		subi.w	#$80,d0
		move.w	Sine_Data(pc,d0.w),d0
		rts	
; End of function CalcSine

Sine_Data:	dc.w 0,	6, $C, $12, $19, $1F, $25, $2B,	$31, $38, $3E
		dc.w $44, $4A, $50, $56, $5C, $61, $67,	$6D, $73, $78
		dc.w $7E, $83, $88, $8E, $93, $98, $9D,	$A2, $A7, $AB
		dc.w $B0, $B5, $B9, $BD, $C1, $C5, $C9,	$CD, $D1, $D4
		dc.w $D8, $DB, $DE, $E1, $E4, $E7, $EA,	$EC, $EE, $F1
		dc.w $F3, $F4, $F6, $F8, $F9, $FB, $FC,	$FD, $FE, $FE
		dc.w $FF, $FF, $FF, $100, $FF, $FF, $FF, $FE, $FE, $FD
		dc.w $FC, $FB, $F9, $F8, $F6, $F4, $F3,	$F1, $EE, $EC
		dc.w $EA, $E7, $E4, $E1, $DE, $DB, $D8,	$D4, $D1, $CD
		dc.w $C9, $C5, $C1, $BD, $B9, $B5, $B0,	$AB, $A7, $A2
		dc.w $9D, $98, $93, $8E, $88, $83, $7E,	$78, $73, $6D
		dc.w $67, $61, $5C, $56, $50, $4A, $44,	$3E, $38, $31
		dc.w $2B, $25, $1F, $19, $12, $C, 6, 0,	-6, -$C, -$12
		dc.w -$19, -$1F, -$25, -$2B, -$31, -$38, -$3E, -$44, -$4A
		dc.w -$50, -$56, -$5C, -$61, -$67, -$6D, -$75, -$78, -$7E
		dc.w -$83, -$88, -$8E, -$93, -$98, -$9D, -$A2, -$A7, -$AB
		dc.w -$B0, -$B5, -$B9, -$BD, -$C1, -$C5, -$C9, -$CD, -$D1
		dc.w -$D4, -$D8, -$DB, -$DE, -$E1, -$E4, -$E7, -$EA, -$EC
		dc.w -$EE, -$F1, -$F3, -$F4, -$F6, -$F8, -$F9, -$FB, -$FC
		dc.w -$FD, -$FE, -$FE, -$FF, -$FF, -$FF, -$100,	-$FF, -$FF
		dc.w -$FF, -$FE, -$FE, -$FD, -$FC, -$FB, -$F9, -$F8, -$F6
		dc.w -$F4, -$F3, -$F1, -$EE, -$EC, -$EA, -$E7, -$E4, -$E1
		dc.w -$DE, -$DB, -$D8, -$D4, -$D1, -$CD, -$C9, -$C5, -$C1
		dc.w -$BD, -$B9, -$B5, -$B0, -$AB, -$A7, -$A2, -$9D, -$98
		dc.w -$93, -$8E, -$88, -$83, -$7E, -$78, -$75, -$6D, -$67
		dc.w -$61, -$5C, -$56, -$50, -$4A, -$44, -$3E, -$38, -$31
		dc.w -$2B, -$25, -$1F, -$19, -$12, -$C,	-6, 0, 6, $C, $12
		dc.w $19, $1F, $25, $2B, $31, $38, $3E,	$44, $4A, $50
		dc.w $56, $5C, $61, $67, $6D, $73, $78,	$7E, $83, $88
		dc.w $8E, $93, $98, $9D, $A2, $A7, $AB,	$B0, $B5, $B9
		dc.w $BD, $C1, $C5, $C9, $CD, $D1, $D4,	$D8, $DB, $DE
		dc.w $E1, $E4, $E7, $EA, $EC, $EE, $F1,	$F3, $F4, $F6
		dc.w $F8, $F9, $FB, $FC, $FD, $FE, $FE,	$FF, $FF, $FF
		movem.l	d1-d2,-(sp)
		move.w	d0,d1
		swap	d1
		moveq	#0,d0
		move.w	d0,d1
		moveq	#7,d2

loc_2C80:				; ...
		rol.l	#2,d1
		add.w	d0,d0
		addq.w	#1,d0
		sub.w	d0,d1
		bcc.s	loc_2C9A
		add.w	d0,d1
		subq.w	#1,d0
		dbf	d2,loc_2C80
		lsr.w	#1,d0
		movem.l	(sp)+,d1-d2
		rts	

loc_2C9A:				; ...
		addq.w	#1,d0
		dbf	d2,loc_2C80
		lsr.w	#1,d0
		movem.l	(sp)+,d1-d2
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


CalcAngle:				; ...
		movem.l	d3-d4,-(sp)
		moveq	#0,d3
		moveq	#0,d4
		move.w	d1,d3
		move.w	d2,d4
		or.w	d3,d4
		beq.s	loc_2D04
		move.w	d2,d4
		tst.w	d3
		bpl.w	loc_2CC2
		neg.w	d3

loc_2CC2:				; ...
		tst.w	d4
		bpl.w	loc_2CCA
		neg.w	d4

loc_2CCA:				; ...
		cmp.w	d3,d4
		bcc.w	loc_2CDC
		lsl.l	#8,d4
		divu.w	d3,d4
		moveq	#0,d0
		move.b	Angle_Data(pc,d4.w),d0
		bra.s	loc_2CE6

loc_2CDC:				; ...
		lsl.l	#8,d3
		divu.w	d4,d3
		moveq	#$40,d0
		sub.b	Angle_Data(pc,d3.w),d0

loc_2CE6:				; ...
		tst.w	d1
		bpl.w	loc_2CF2
		neg.w	d0
		addi.w	#$80,d0

loc_2CF2:				; ...
		tst.w	d2
		bpl.w	loc_2CFE
		neg.w	d0
		addi.w	#$100,d0

loc_2CFE:				; ...
		movem.l	(sp)+,d3-d4
		rts	

loc_2D04:				; ...
		move.w	#$40,d0
		movem.l	(sp)+,d3-d4
		rts	
; End of function CalcAngle

Angle_Data:	dc.b 0,	0, 0, 0, 1, 1, 1, 1, 1,	1, 2, 2, 2, 2, 2, 2, 3
		dc.b 3,	3, 3, 3, 3, 3, 4, 4, 4,	4, 4, 4, 5, 5, 5, 5, 5
		dc.b 5,	6, 6, 6, 6, 6, 6, 6, 7,	7, 7, 7, 7, 7, 8, 8, 8
		dc.b 8,	8, 8, 8, 9, 9, 9, 9, 9,	9, $A, $A, $A, $A, $A
		dc.b $A, $A, $B, $B, $B, $B, $B, $B, $B, $C, $C, $C, $C
		dc.b $C, $C, $C, $D, $D, $D, $D, $D, $D, $D, $E, $E, $E
		dc.b $E, $E, $E, $E, $F, $F, $F, $F, $F, $F, $F, $10, $10
		dc.b $10, $10, $10, $10, $10, $11, $11,	$11, $11, $11
		dc.b $11, $11, $11, $12, $12, $12, $12,	$12, $12, $12
		dc.b $13, $13, $13, $13, $13, $13, $13,	$13, $14, $14
		dc.b $14, $14, $14, $14, $14, $14, $15,	$15, $15, $15
		dc.b $15, $15, $15, $15, $15, $16, $16,	$16, $16, $16
		dc.b $16, $16, $16, $17, $17, $17, $17,	$17, $17, $17
		dc.b $17, $17, $18, $18, $18, $18, $18,	$18, $18, $18
		dc.b $18, $19, $19, $19, $19, $19, $19,	$19, $19, $19
		dc.b $19, $1A, $1A, $1A, $1A, $1A, $1A,	$1A, $1A, $1A
		dc.b $1B, $1B, $1B, $1B, $1B, $1B, $1B,	$1B, $1B, $1B
		dc.b $1C, $1C, $1C, $1C, $1C, $1C, $1C,	$1C, $1C, $1C
		dc.b $1C, $1D, $1D, $1D, $1D, $1D, $1D,	$1D, $1D, $1D
		dc.b $1D, $1D, $1E, $1E, $1E, $1E, $1E,	$1E, $1E, $1E
		dc.b $1E, $1E, $1E, $1F, $1F, $1F, $1F,	$1F, $1F, $1F
		dc.b $1F, $1F, $1F, $1F, $1F, $20, $20,	$20, $20, $20
		dc.b $20, $20, 0


;-----------------------------------------------------------------
;
; Level stuff
;
;-----------------------------------------------------------------

; ---------------------------------------------------------------------------
; Subroutine to	load level boundaries and start	locations
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevelSizeLoad:				; ...
		moveq	#0,d0
		move.b	d0,($FFFFF740).w
		move.b	d0,($FFFFF741).w
		move.b	d0,($FFFFF746).w
		move.b	d0,($FFFFF748).w
		move.b	d0,($FFFFF742).w
		move.w	($FFFFFE10).w,d0
		lsl.b	#6,d0
		lsr.w	#4,d0
		move.w	d0,d1
		add.w	d0,d0
		add.w	d1,d0
		lea	LevelSizeArray(pc,d0.w),a0 ; load level	boundaries
		move.w	(a0)+,d0
		move.w	d0,($FFFFF730).w
		move.l	(a0)+,d0
		move.l	d0,($FFFFF728).w
		move.l	d0,($FFFFF720).w
		move.l	(a0)+,d0
		move.l	d0,($FFFFF72C).w
		move.l	d0,($FFFFF724).w
		move.w	($FFFFF728).w,d0
		addi.w	#$240,d0
		move.w	d0,($FFFFF732).w
		move.w	#$1010,($FFFFF74A).w
		move.w	(a0)+,d0
		move.w	d0,($FFFFF73E).w
		bra.w	LevSz_ChkLamp
LevelSizeArray:	dc.w 4,	0, $24BF, 0, $300, $60
		dc.w 4,	0, $1EBF, 0, $300, $60
		dc.w 4,	0, $2960, 0, $300, $60
		dc.w 4,	0, $2ABF, 0, $300, $60
		dc.w 4,	0, $19BF, 0, $530, $60
		dc.w 4,	0, $10AF, 0, $720, $60
		dc.w 4,	0, $202F, $FF00, $800, $60
		dc.w 4,	0, $20BF, 0, $720, $60
		dc.w 4,	0, $17BF, 0, $1D0, $60
		dc.w 4,	0, $17BF, 0, $520, $60
		dc.w 4,	0, $1800, 0, $720, $60
		dc.w 4,	0, $16BF, 0, $720, $60
		dc.w 4,	0, $1FBF, 0, $640, $60
		dc.w 4,	0, $1FBF, 0, $640, $60
		dc.w 4,	0, $2000, 0, $6C0, $60
		dc.w 4,	0, $3EC0, 0, $720, $60
		dc.w 4,	0, $22C0, 0, $420, $60
		dc.w 4,	0, $28C0, 0, $520, $60
		dc.w 4,	0, $2C00, 0, $620, $60
		dc.w 4,	0, $2EC0, 0, $620, $60
		dc.w 4,	0, $21C0, 0, $720, $60
		dc.w 4,	0, $1E40, $FF00, $800, $60
		dc.w 4,	$2080, $2460, $510, $510, $60
		dc.w 4,	0, $3EC0, 0, $720, $60
		dc.w 4,	0, $500, $110, $110, $60
		dc.w 4,	0, $DC0, $110, $110, $60
		dc.w 4,	0, $2FFF, 0, $320, $60
		dc.w 4,	0, $2FFF, 0, $320, $60
EndingStLocArray:dc.w $50, $3B0, $EA0, $46C, $1750, $BD, $A00, $62C, $BB0
		dc.w $4C, $1570, $16C, $1B0, $72C, $1400, $2AC

LevSz_ChkLamp:				; ...
		tst.b	($FFFFFE30).w	; have any lampposts been hit?
		beq.s	LevSz_StartLoc	; if not, branch
		jsr	$880000+Obj79_LoadInfo
		move.w	($FFFFD008).w,d1
		move.w	($FFFFD00C).w,d0
		bra.s	loc_60D0

LevSz_StartLoc:				; ...
		move.w	($FFFFFE10).w,d0
		lsl.b	#6,d0
		lsr.w	#4,d0
		lea	StartLocArray(pc,d0.w),a1 ; load Sonic's start location
		tst.w	($FFFFFFF0).w	; is demo mode on?
		bpl.s	LevSz_SonicPos	; if not, branch
		move.w	($FFFFFFF4).w,d0
		subq.w	#1,d0
		lsl.w	#2,d0
		lea	EndingStLocArray(pc,d0.w),a1 ; load Sonic's start location

LevSz_SonicPos:				; ...
		moveq	#0,d1
		move.w	(a1)+,d1
		move.w	d1,($FFFFD008).w ; set Sonic's position on x-axis
		moveq	#0,d0
		move.w	(a1),d0
		move.w	d0,($FFFFD00C).w ; set Sonic's position on y-axis

loc_60D0:				; ...
		subi.w	#$A0,d1
		bcc.s	loc_60D8
		moveq	#0,d1

loc_60D8:				; ...
		move.w	($FFFFF72A).w,d2
		cmp.w	d2,d1
		bcs.s	loc_60E2
		move.w	d2,d1

loc_60E2:				; ...
		move.w	d1,($FFFFF700).w
		subi.w	#$60,d0
		bcc.s	loc_60EE
		moveq	#0,d0

loc_60EE:				; ...
		cmp.w	($FFFFF72E).w,d0
		blt.s	loc_60F8
		move.w	($FFFFF72E).w,d0

loc_60F8:				; ...
		move.w	d0,($FFFFF704).w
		bsr.w	BgScrollSpeed
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.b	#2,d0
		move.l	LoopTileNums(pc,d0.w),($FFFFF7AC).w
		bra.w	LevSz_Unk
; ---------------------------------------------------------------------------
; Sonic	start location array
; ---------------------------------------------------------------------------
StartLocArray:	dc.b 0,	$50, 3,	$B0, 0,	$50, 0,	$FC, 0,	$50, 3,	$B0, 0,	$80, 0,	$A8
		dc.b 0,	$60, 0,	$6C, 0,	$50, 0,	$EC, 0,	$50, 2,	$EC, $B, $80, 0, 0
		dc.b 0,	$30, 2,	$66, 0,	$30, 2,	$66, 0,	$30, 1,	$66, 0,	$80, 0,	$A8
		dc.b 0,	$40, 2,	$CC, 0,	$40, 1,	$4C, 0,	$40, 1,	$4C, 0,	$80, 0,	$A8
		dc.b 0,	$30, 3,	$BD, 0,	$30, 1,	$BD, 0,	$30, 0,	$EC, 0,	$80, 0,	$A8
		dc.b 0,	$30, 4,	$8C, 0,	$30, 7,	$4C, $21, $40, 5, $AC, 0, $80, 0, $A8
		dc.b 6,	$20, 1,	$6B, $E, $E0, 1, $6C, 0, $80, 0, $A8, 0, $80, 0, $A8
; ---------------------------------------------------------------------------
; Which	256x256	tiles contain loops or roll-tunnels
; ---------------------------------------------------------------------------
LoopTileNums:	dc.b $B5, $7F, $1F, $20	; loop,	loop, tunnel, tunnel
		dc.b $7F, $7F, $7F, $7F
		dc.b $7F, $7F, $7F, $7F
		dc.b $AA, $B4, $7F, $7F
		dc.b $7F, $7F, $7F, $7F
		dc.b $7F, $7F, $7F, $7F
		dc.b $7F, $7F, $7F, $7F

LevSz_Unk:				; ...
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#3,d0
		lea	dword_61B4(pc,d0.w),a1
		lea	($FFFFF7F0).w,a2
		move.l	(a1)+,(a2)+
		move.l	(a1)+,(a2)+
		rts	
; End of function LevelSizeLoad

dword_61B4:	dc.l $700100, $1000100
		dc.l $8000100, $1000000
		dc.l $8000100, $1000000
		dc.l $8000100, $1000000
		dc.l $8000100, $1000000
		dc.l $8000100, $1000000
		dc.l $700100, $1000100
; ---------------------------------------------------------------------------
; Subroutine to	set scroll speed of some backgrounds
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


BgScrollSpeed:				; ...
		tst.b	($FFFFFE30).w
		bne.s	loc_6206
		move.w	d0,($FFFFF70C).w
		move.w	d0,($FFFFF714).w
		move.w	d1,($FFFFF708).w
		move.w	d1,($FFFFF710).w
		move.w	d1,($FFFFF718).w

loc_6206:				; ...
		moveq	#0,d2
		move.b	($FFFFFE10).w,d2
		add.w	d2,d2
		move.w	BgScroll_Index(pc,d2.w),d2
		jmp	BgScroll_Index(pc,d2.w)
; End of function BgScrollSpeed

BgScroll_Index:	dc.w BgScroll_GHZ-BgScroll_Index, BgScroll_LZ-BgScroll_Index ; ...
		dc.w BgScroll_MZ-BgScroll_Index, BgScroll_SLZ-BgScroll_Index
		dc.w BgScroll_SYZ-BgScroll_Index, BgScroll_SBZ-BgScroll_Index
		dc.w BgScroll_End-BgScroll_Index

BgScroll_GHZ:				; ...
		bra.w	Deform_GHZ

BgScroll_LZ:				; ...
		asr.l	#1,d0
		move.w	d0,($FFFFF70C).w
		rts	

BgScroll_MZ:				; ...
		rts	

BgScroll_SLZ:				; ...
		asr.l	#1,d0
		addi.w	#$C0,d0
		move.w	d0,($FFFFF70C).w
		rts	

BgScroll_SYZ:				; ...
		asl.l	#4,d0
		move.l	d0,d2
		asl.l	#1,d0
		add.l	d2,d0
		asr.l	#8,d0
		move.w	d0,($FFFFF70C).w
		move.w	d0,($FFFFF714).w
		rts	

BgScroll_SBZ:				; ...
		asl.l	#4,d0
		asl.l	#1,d0
		asr.l	#8,d0
		move.w	d0,($FFFFF70C).w
		rts	

BgScroll_End:				; ...
		move.w	#$1E,($FFFFF70C).w
		move.w	#$1E,($FFFFF714).w
		rts	
		move.w	#$A8,($FFFFF708).w
		move.w	#$1E,($FFFFF70C).w
		move.w	#-$40,($FFFFF710).w
		move.w	#$1E,($FFFFF714).w
		rts	

; ---------------------------------------------------------------------------
; Background layer deformation subroutines
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DeformBgLayer:				; ...
		tst.b	($FFFFF744).w
		beq.s	loc_628E
		rts	

loc_628E:				; ...
		clr.w	($FFFFF754).w
		clr.w	($FFFFF756).w
		clr.w	($FFFFF758).w
		clr.w	($FFFFF75A).w
		bsr.w	ScrollHoriz
		bsr.w	ScrollVertical
		bsr.w	DynScrResizeLoad
		move.w	($FFFFF700).w,($FFFFF61A).w
		move.w	($FFFFF704).w,($FFFFF616).w
		move.w	($FFFFF708).w,($FFFFF61C).w
		move.w	($FFFFF70C).w,($FFFFF618).w
		move.w	($FFFFF718).w,($FFFFF620).w
		move.w	($FFFFF71C).w,($FFFFF61E).w
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		add.w	d0,d0
		move.w	Deform_Index(pc,d0.w),d0
		jmp	Deform_Index(pc,d0.w)
; End of function DeformBgLayer

; ---------------------------------------------------------------------------
; Offset index for background layer deformation	code
; ---------------------------------------------------------------------------
Deform_Index:	dc.w Deform_GHZ-Deform_Index, Deform_LZ-Deform_Index ; ...
		dc.w Deform_MZ-Deform_Index, Deform_SLZ-Deform_Index
		dc.w Deform_SYZ-Deform_Index, Deform_SBZ-Deform_Index
		dc.w Deform_GHZ-Deform_Index
; ---------------------------------------------------------------------------
; Green	Hill Zone background layer deformation code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_GHZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#5,d4
		move.l	d4,d1
		asl.l	#1,d4
		add.l	d1,d4
		moveq	#0,d5
		bsr.w	ScrollBlock1
		bsr.w	ScrollBlock4
		lea	($FFFFCC00).w,a1
		move.w	($FFFFF704).w,d0
		andi.w	#$7FF,d0
		lsr.w	#5,d0
		neg.w	d0
		addi.w	#$26,d0
		move.w	d0,($FFFFF714).w
		move.w	d0,d4
		bsr.w	ScrollBlock3
		move.w	($FFFFF70C).w,($FFFFF618).w
		move.w	#$6F,d1
		sub.w	d4,d1
		move.w	($FFFFF700).w,d0
		cmpi.b	#4,($FFFFF600).w
		bne.s	loc_633C
		moveq	#0,d0

loc_633C:				; ...
		neg.w	d0
		swap	d0
		move.w	($FFFFF708).w,d0
		neg.w	d0

loc_6346:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_6346
		move.w	#$27,d1
		move.w	($FFFFF710).w,d0
		neg.w	d0

loc_6356:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_6356
		move.w	($FFFFF710).w,d0
		addi.w	#0,d0
		move.w	($FFFFF700).w,d2
		addi.w	#-$200,d2
		sub.w	d0,d2
		ext.l	d2
		asl.l	#8,d2
		divs.w	#$68,d2
		ext.l	d2
		asl.l	#8,d2
		moveq	#0,d3
		move.w	d0,d3
		move.w	#$47,d1
		add.w	d4,d1

loc_6384:				; ...
		move.w	d3,d0
		neg.w	d0
		move.l	d0,(a1)+
		swap	d3
		add.l	d2,d3
		swap	d3
		dbf	d1,loc_6384
		rts	
; End of function Deform_GHZ

; ---------------------------------------------------------------------------
; Labyrinth Zone background layer deformation code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_LZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#7,d4
		move.w	($FFFFF73C).w,d5
		ext.l	d5
		asl.l	#7,d5
		bsr.w	ScrollBlock1
		move.w	($FFFFF70C).w,($FFFFF618).w
		lea	($FFFFCC00).w,a1
		move.w	#$DF,d1
		move.w	($FFFFF700).w,d0
		neg.w	d0
		swap	d0
		move.w	($FFFFF708).w,d0
		neg.w	d0

loc_63C6:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_63C6
		move.w	($FFFFF646).w,d0
		sub.w	($FFFFF704).w,d0
		rts	
; End of function Deform_LZ

; ---------------------------------------------------------------------------
; Marble Zone background layer deformation code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_MZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#6,d4
		move.l	d4,d1
		asl.l	#1,d4
		add.l	d1,d4
		moveq	#0,d5
		bsr.w	ScrollBlock1
		move.w	#$200,d0
		move.w	($FFFFF704).w,d1
		subi.w	#$1C8,d1
		bcs.s	loc_6402
		move.w	d1,d2
		add.w	d1,d1
		add.w	d2,d1
		asr.w	#2,d1
		add.w	d1,d0

loc_6402:				; ...
		move.w	d0,($FFFFF714).w
		bsr.w	ScrollBlock3
		move.w	($FFFFF70C).w,($FFFFF618).w
		lea	($FFFFCC00).w,a1
		move.w	#$DF,d1
		move.w	($FFFFF700).w,d0
		neg.w	d0
		swap	d0
		move.w	($FFFFF708).w,d0
		neg.w	d0

loc_6426:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_6426
		rts	
; End of function Deform_MZ

; ---------------------------------------------------------------------------
; Star Light Zone background layer deformation code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_SLZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#7,d4
		move.w	($FFFFF73C).w,d5
		ext.l	d5
		asl.l	#7,d5
		bsr.w	ScrollBlock2
		move.w	($FFFFF70C).w,($FFFFF618).w
		bsr.w	Deform_SLZ_2
		lea	($FFFFA800).w,a2
		move.w	($FFFFF70C).w,d0
		move.w	d0,d2
		subi.w	#$C0,d0
		andi.w	#$3F0,d0
		lsr.w	#3,d0
		lea	(a2,d0.w),a2
		lea	($FFFFCC00).w,a1
		move.w	#$E,d1
		move.w	($FFFFF700).w,d0
		neg.w	d0
		swap	d0
		andi.w	#$F,d2
		add.w	d2,d2
		move.w	(a2)+,d0
		jmp	loc_6482(pc,d2.w)

loc_6480:				; ...
		move.w	(a2)+,d0

loc_6482:
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		move.l	d0,(a1)+
		dbf	d1,loc_6480
		rts	
; End of function Deform_SLZ


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_SLZ_2:				; ...
		lea	($FFFFA800).w,a1
		move.w	($FFFFF700).w,d2
		neg.w	d2
		move.w	d2,d0
		asr.w	#3,d0
		sub.w	d2,d0
		ext.l	d0
		asl.l	#4,d0
		divs.w	#$1C,d0
		ext.l	d0
		asl.l	#4,d0
		asl.l	#8,d0
		moveq	#0,d3
		move.w	d2,d3
		move.w	#$1B,d1

loc_64CE:				; ...
		move.w	d3,(a1)+
		swap	d3
		add.l	d0,d3
		swap	d3
		dbf	d1,loc_64CE
		move.w	d2,d0
		asr.w	#3,d0
		move.w	#4,d1

loc_64E2:				; ...
		move.w	d0,(a1)+
		dbf	d1,loc_64E2
		move.w	d2,d0
		asr.w	#2,d0
		move.w	#4,d1

loc_64F0:				; ...
		move.w	d0,(a1)+
		dbf	d1,loc_64F0
		move.w	d2,d0
		asr.w	#1,d0
		move.w	#$1D,d1

loc_64FE:				; ...
		move.w	d0,(a1)+
		dbf	d1,loc_64FE
		rts	
; End of function Deform_SLZ_2

; ---------------------------------------------------------------------------
; Spring Yard Zone background layer deformation	code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_SYZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#6,d4
		move.w	($FFFFF73C).w,d5
		ext.l	d5
		asl.l	#4,d5
		move.l	d5,d1
		asl.l	#1,d5
		add.l	d1,d5
		bsr.w	ScrollBlock1
		move.w	($FFFFF70C).w,($FFFFF618).w
		lea	($FFFFCC00).w,a1
		move.w	#$DF,d1
		move.w	($FFFFF700).w,d0
		neg.w	d0
		swap	d0
		move.w	($FFFFF708).w,d0
		neg.w	d0

loc_653C:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_653C
		rts	
; End of function Deform_SYZ

; ---------------------------------------------------------------------------
; Scrap	Brain Zone background layer deformation	code
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Deform_SBZ:				; ...
		move.w	($FFFFF73A).w,d4
		ext.l	d4
		asl.l	#6,d4
		move.w	($FFFFF73C).w,d5
		ext.l	d5
		asl.l	#4,d5
		asl.l	#1,d5
		bsr.w	ScrollBlock1
		move.w	($FFFFF70C).w,($FFFFF618).w
		lea	($FFFFCC00).w,a1
		move.w	#$DF,d1
		move.w	($FFFFF700).w,d0
		neg.w	d0
		swap	d0
		move.w	($FFFFF708).w,d0
		neg.w	d0

loc_6576:				; ...
		move.l	d0,(a1)+
		dbf	d1,loc_6576
		rts	
; End of function Deform_SBZ

; ---------------------------------------------------------------------------
; Subroutine to	scroll the level horizontally as Sonic moves
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollHoriz:				; ...
		move.w	($FFFFF700).w,d4
		bsr.s	ScrollHoriz2
		move.w	($FFFFF700).w,d0
		andi.w	#$10,d0
		move.b	($FFFFF74A).w,d1
		eor.b	d1,d0
		bne.s	locret_65B0
		eori.b	#$10,($FFFFF74A).w
		move.w	($FFFFF700).w,d0
		sub.w	d4,d0
		bpl.s	loc_65AA
		bset	#2,($FFFFF754).w
		rts	

loc_65AA:				; ...
		bset	#3,($FFFFF754).w

locret_65B0:				; ...
		rts	
; End of function ScrollHoriz


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollHoriz2:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	($FFFFF700).w,d0
		subi.w	#$90,d0
		bcs.s	loc_65F6
		subi.w	#$10,d0
		bcc.s	loc_65CC
		clr.w	($FFFFF73A).w
		rts	

loc_65CC:				; ...
		cmpi.w	#$10,d0
		bcs.s	loc_65D6
		move.w	#$10,d0

loc_65D6:				; ...
		add.w	($FFFFF700).w,d0
		cmp.w	($FFFFF72A).w,d0
		blt.s	loc_65E4
		move.w	($FFFFF72A).w,d0

loc_65E4:				; ...
		move.w	d0,d1
		sub.w	($FFFFF700).w,d1
		asl.w	#8,d1
		move.w	d0,($FFFFF700).w
		move.w	d1,($FFFFF73A).w
		rts	

loc_65F6:				; ...
		add.w	($FFFFF700).w,d0
		cmp.w	($FFFFF728).w,d0
		bgt.s	loc_65E4
		move.w	($FFFFF728).w,d0
		bra.s	loc_65E4
; End of function ScrollHoriz2

		tst.w	d0
		bpl.s	loc_6610
		move.w	#-2,d0
		bra.s	loc_65F6

loc_6610:				; ...
		move.w	#2,d0
		bra.s	loc_65CC
; ---------------------------------------------------------------------------
; Subroutine to	scroll the level vertically as Sonic moves
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollVertical:				; ...
		moveq	#0,d1
		move.w	($FFFFD00C).w,d0
		sub.w	($FFFFF704).w,d0
		btst	#2,($FFFFD022).w
		beq.s	loc_662A
		subq.w	#5,d0

loc_662A:				; ...
		btst	#1,($FFFFD022).w
		beq.s	loc_664A
		addi.w	#$20,d0
		sub.w	($FFFFF73E).w,d0
		bcs.s	loc_6696
		subi.w	#$40,d0
		bcc.s	loc_6696
		tst.b	($FFFFF75C).w
		bne.s	loc_66A8
		bra.s	loc_6656

loc_664A:				; ...
		sub.w	($FFFFF73E).w,d0
		bne.s	loc_665C
		tst.b	($FFFFF75C).w
		bne.s	loc_66A8

loc_6656:				; ...
		clr.w	($FFFFF73C).w
		rts	

loc_665C:				; ...
		cmpi.w	#$60,($FFFFF73E).w
		bne.s	loc_6684
		move.w	($FFFFD014).w,d1
		bpl.s	loc_666C
		neg.w	d1

loc_666C:				; ...
		cmpi.w	#$800,d1
		bcc.s	loc_6696
		move.w	#$600,d1
		cmpi.w	#6,d0
		bgt.s	loc_66F6
		cmpi.w	#-6,d0
		blt.s	loc_66C0
		bra.s	loc_66AE

loc_6684:				; ...
		move.w	#$200,d1
		cmpi.w	#2,d0
		bgt.s	loc_66F6
		cmpi.w	#-2,d0
		blt.s	loc_66C0
		bra.s	loc_66AE

loc_6696:				; ...
		move.w	#$1000,d1
		cmpi.w	#$10,d0
		bgt.s	loc_66F6
		cmpi.w	#-$10,d0
		blt.s	loc_66C0
		bra.s	loc_66AE

loc_66A8:				; ...
		moveq	#0,d0
		move.b	d0,($FFFFF75C).w

loc_66AE:				; ...
		moveq	#0,d1
		move.w	d0,d1
		add.w	($FFFFF704).w,d1
		tst.w	d0
		bpl.w	loc_6700
		bra.w	loc_66CC

loc_66C0:				; ...
		neg.w	d1
		ext.l	d1
		asl.l	#8,d1
		add.l	($FFFFF704).w,d1
		swap	d1

loc_66CC:				; ...
		cmp.w	($FFFFF72C).w,d1
		bgt.s	loc_6724
		cmpi.w	#-$100,d1
		bgt.s	loc_66F0
		andi.w	#$7FF,d1
		andi.w	#$7FF,($FFFFD00C).w
		andi.w	#$7FF,($FFFFF704).w
		andi.w	#$3FF,($FFFFF70C).w
		bra.s	loc_6724

loc_66F0:				; ...
		move.w	($FFFFF72C).w,d1
		bra.s	loc_6724

loc_66F6:				; ...
		ext.l	d1
		asl.l	#8,d1
		add.l	($FFFFF704).w,d1
		swap	d1

loc_6700:				; ...
		cmp.w	($FFFFF72E).w,d1
		blt.s	loc_6724
		subi.w	#$800,d1
		bcs.s	loc_6720
		andi.w	#$7FF,($FFFFD00C).w
		subi.w	#$800,($FFFFF704).w
		andi.w	#$3FF,($FFFFF70C).w
		bra.s	loc_6724

loc_6720:				; ...
		move.w	($FFFFF72E).w,d1

loc_6724:				; ...
		move.w	($FFFFF704).w,d4
		swap	d1
		move.l	d1,d3
		sub.l	($FFFFF704).w,d3
		ror.l	#8,d3
		move.w	d3,($FFFFF73C).w
		move.l	d1,($FFFFF704).w
		move.w	($FFFFF704).w,d0
		andi.w	#$10,d0
		move.b	($FFFFF74B).w,d1
		eor.b	d1,d0
		bne.s	locret_6766
		eori.b	#$10,($FFFFF74B).w
		move.w	($FFFFF704).w,d0
		sub.w	d4,d0
		bpl.s	loc_6760
		bset	#0,($FFFFF754).w
		rts	

loc_6760:				; ...
		bset	#1,($FFFFF754).w

locret_6766:				; ...
		rts	
; End of function ScrollVertical


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollBlock1:				; ...
		move.l	($FFFFF708).w,d2
		move.l	d2,d0
		add.l	d4,d0
		move.l	d0,($FFFFF708).w
		move.l	d0,d1
		swap	d1
		andi.w	#$10,d1
		move.b	($FFFFF74C).w,d3
		eor.b	d3,d1
		bne.s	loc_679C
		eori.b	#$10,($FFFFF74C).w
		sub.l	d2,d0
		bpl.s	loc_6796
		bset	#2,($FFFFF756).w
		bra.s	loc_679C

loc_6796:				; ...
		bset	#3,($FFFFF756).w

loc_679C:				; ...
		move.l	($FFFFF70C).w,d3
		move.l	d3,d0
		add.l	d5,d0
		move.l	d0,($FFFFF70C).w
		move.l	d0,d1
		swap	d1
		andi.w	#$10,d1
		move.b	($FFFFF74D).w,d2
		eor.b	d2,d1
		bne.s	locret_67D0
		eori.b	#$10,($FFFFF74D).w
		sub.l	d3,d0
		bpl.s	loc_67CA
		bset	#0,($FFFFF756).w
		rts	

loc_67CA:				; ...
		bset	#1,($FFFFF756).w

locret_67D0:				; ...
		rts	
; End of function ScrollBlock1


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollBlock2:				; ...
		move.l	($FFFFF708).w,d2
		move.l	d2,d0
		add.l	d4,d0
		move.l	d0,($FFFFF708).w
		move.l	($FFFFF70C).w,d3
		move.l	d3,d0
		add.l	d5,d0
		move.l	d0,($FFFFF70C).w
		move.l	d0,d1
		swap	d1
		andi.w	#$10,d1
		move.b	($FFFFF74D).w,d2
		eor.b	d2,d1
		bne.s	locret_6812
		eori.b	#$10,($FFFFF74D).w
		sub.l	d3,d0
		bpl.s	loc_680C
		bset	#0,($FFFFF756).w
		rts	

loc_680C:				; ...
		bset	#1,($FFFFF756).w

locret_6812:				; ...
		rts	
; End of function ScrollBlock2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollBlock3:				; ...
		move.w	($FFFFF70C).w,d3
		move.w	d0,($FFFFF70C).w
		move.w	d0,d1
		andi.w	#$10,d1
		move.b	($FFFFF74D).w,d2
		eor.b	d2,d1
		bne.s	locret_6842
		eori.b	#$10,($FFFFF74D).w
		sub.w	d3,d0
		bpl.s	loc_683C
		bset	#0,($FFFFF756).w
		rts	

loc_683C:				; ...
		bset	#1,($FFFFF756).w

locret_6842:				; ...
		rts	
; End of function ScrollBlock3


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ScrollBlock4:				; ...
		move.w	($FFFFF710).w,d2
		move.w	($FFFFF714).w,d3
		move.w	($FFFFF73A).w,d0
		ext.l	d0
		asl.l	#7,d0
		add.l	d0,($FFFFF710).w
		move.w	($FFFFF710).w,d0
		andi.w	#$10,d0
		move.b	($FFFFF74E).w,d1
		eor.b	d1,d0
		bne.s	locret_6884
		eori.b	#$10,($FFFFF74E).w
		move.w	($FFFFF710).w,d0
		sub.w	d2,d0
		bpl.s	loc_687E
		bset	#2,($FFFFF758).w
		bra.s	locret_6884

loc_687E:				; ...
		bset	#3,($FFFFF758).w

locret_6884:				; ...
		rts	
; End of function ScrollBlock4

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6886:				; ...
		lea	($C00004).l,a5
		lea	($C00000).l,a6
		lea	($FFFFF756).w,a2
		lea	($FFFFF708).w,a3
		lea	($FFFFA440).w,a4
		move.w	#$6000,d2
		bsr.w	sub_6954
		lea	($FFFFF758).w,a2
		lea	($FFFFF710).w,a3
		bra.w	sub_69F4
; End of function sub_6886

; ---------------------------------------------------------------------------
; Subroutine to	display	correct	tiles as you move
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadTilesAsYouMove:			; ...
		lea	($C00004).l,a5
		lea	($C00000).l,a6
		lea	($FFFFFF32).w,a2
		lea	($FFFFFF18).w,a3
		lea	($FFFFA440).w,a4
		move.w	#$6000,d2
		bsr.w	sub_6954
		lea	($FFFFFF34).w,a2
		lea	($FFFFFF20).w,a3
		bsr.w	sub_69F4
		lea	($FFFFFF30).w,a2
		lea	($FFFFFF10).w,a3
		lea	($FFFFA400).w,a4
		move.w	#$4000,d2
		tst.b	(a2)
		beq.s	locret_6952
		bclr	#0,(a2)
		beq.s	loc_6908
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6AD8

loc_6908:				; ...
		bclr	#1,(a2)
		beq.s	loc_6922
		move.w	#$E0,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		move.w	#$E0,d4
		moveq	#-$10,d5
		bsr.w	sub_6AD8

loc_6922:				; ...
		bclr	#2,(a2)
		beq.s	loc_6938
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6B04

loc_6938:				; ...
		bclr	#3,(a2)
		beq.s	locret_6952
		moveq	#-$10,d4
		move.w	#$140,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		move.w	#$140,d5
		bsr.w	sub_6B04

locret_6952:				; ...
		rts	
; End of function LoadTilesAsYouMove


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6954:				; ...
		tst.b	(a2)
		beq.w	locret_69F2
		bclr	#0,(a2)
		beq.s	loc_6972
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		moveq	#-$10,d5
		moveq	#$1F,d6
		bsr.w	sub_6ADA

loc_6972:				; ...
		bclr	#1,(a2)
		beq.s	loc_698E
		move.w	#$E0,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		move.w	#$E0,d4
		moveq	#-$10,d5
		moveq	#$1F,d6
		bsr.w	sub_6ADA

loc_698E:				; ...
		bclr	#2,(a2)
		beq.s	loc_69BE
		moveq	#-$10,d4
		moveq	#-$10,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		moveq	#-$10,d5
		move.w	($FFFFF7F0).w,d6
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d6
		blt.s	loc_69BE
		lsr.w	#4,d6
		cmpi.w	#$F,d6
		bcs.s	loc_69BA
		moveq	#$F,d6

loc_69BA:				; ...
		bsr.w	sub_6B06

loc_69BE:				; ...
		bclr	#3,(a2)
		beq.s	locret_69F2
		moveq	#-$10,d4
		move.w	#$140,d5
		bsr.w	sub_6C20
		moveq	#-$10,d4
		move.w	#$140,d5
		move.w	($FFFFF7F0).w,d6
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d6
		blt.s	locret_69F2
		lsr.w	#4,d6
		cmpi.w	#$F,d6
		bcs.s	loc_69EE
		moveq	#$F,d6

loc_69EE:				; ...
		bsr.w	sub_6B06

locret_69F2:				; ...
		rts	
; End of function sub_6954


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_69F4:				; ...
		tst.b	(a2)
		beq.w	locret_6A80
		bclr	#2,(a2)
		beq.s	loc_6A3E
		cmpi.w	#$10,(a3)
		bcs.s	loc_6A3E
		move.w	($FFFFF7F0).w,d4
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d4
		move.w	d4,-(sp)
		moveq	#-$10,d5
		bsr.w	sub_6C20
		move.w	(sp)+,d4
		moveq	#-$10,d5
		move.w	($FFFFF7F0).w,d6
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d6
		blt.s	loc_6A3E
		lsr.w	#4,d6
		subi.w	#$E,d6
		bcc.s	loc_6A3E
		neg.w	d6
		bsr.w	sub_6B06

loc_6A3E:				; ...
		bclr	#3,(a2)
		beq.s	locret_6A80
		move.w	($FFFFF7F0).w,d4
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d4
		move.w	d4,-(sp)
		move.w	#$140,d5
		bsr.w	sub_6C20
		move.w	(sp)+,d4
		move.w	#$140,d5
		move.w	($FFFFF7F0).w,d6
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d6
		blt.s	locret_6A80
		lsr.w	#4,d6
		subi.w	#$E,d6
		bcc.s	locret_6A80
		neg.w	d6
		bsr.w	sub_6B06

locret_6A80:				; ...
		rts	
; End of function sub_69F4

		tst.b	(a2)
		beq.s	locret_6AD6
		bclr	#2,(a2)
		beq.s	loc_6AAC
		move.w	#$D0,d4
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d4
		move.w	d4,-(sp)
		moveq	#-$10,d5
		bsr.w	sub_6C3C
		move.w	(sp)+,d4
		moveq	#-$10,d5
		moveq	#2,d6
		bsr.w	sub_6B06

loc_6AAC:				; ...
		bclr	#3,(a2)
		beq.s	locret_6AD6
		move.w	#$D0,d4
		move.w	4(a3),d1
		andi.w	#-$10,d1
		sub.w	d1,d4
		move.w	d4,-(sp)
		move.w	#$140,d5
		bsr.w	sub_6C3C
		move.w	(sp)+,d4
		move.w	#$140,d5
		moveq	#2,d6
		bsr.w	sub_6B06

locret_6AD6:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6AD8:				; ...
		moveq	#$15,d6
; End of function sub_6AD8


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6ADA:				; ...
		move.l	#$800000,d7
		move.l	d0,d1

loc_6AE2:				; ...
		movem.l	d4-d5,-(sp)
		bsr.w	sub_6BD6
		move.l	d1,d0
		bsr.w	sub_6B32
		addq.b	#4,d1
		andi.b	#$7F,d1
		movem.l	(sp)+,d4-d5
		addi.w	#$10,d5
		dbf	d6,loc_6AE2
		rts	
; End of function sub_6ADA


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6B04:				; ...
		moveq	#$F,d6
; End of function sub_6B04


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6B06:				; ...
		move.l	#$800000,d7
		move.l	d0,d1

loc_6B0E:				; ...
		movem.l	d4-d5,-(sp)
		bsr.w	sub_6BD6
		move.l	d1,d0
		bsr.w	sub_6B32
		addi.w	#$100,d1
		andi.w	#$FFF,d1
		movem.l	(sp)+,d4-d5
		addi.w	#$10,d4
		dbf	d6,loc_6B0E
		rts	
; End of function sub_6B06


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6B32:				; ...
		or.w	d2,d0
		swap	d0
		btst	#4,(a0)
		bne.s	loc_6B6E
		btst	#3,(a0)
		bne.s	loc_6B4E
		move.l	d0,(a5)
		move.l	(a1)+,(a6)
		add.l	d7,d0
		move.l	d0,(a5)
		move.l	(a1)+,(a6)
		rts	

loc_6B4E:				; ...
		move.l	d0,(a5)
		move.l	(a1)+,d4
		eori.l	#$8000800,d4
		swap	d4
		move.l	d4,(a6)
		add.l	d7,d0
		move.l	d0,(a5)
		move.l	(a1)+,d4
		eori.l	#$8000800,d4
		swap	d4
		move.l	d4,(a6)
		rts	

loc_6B6E:				; ...
		btst	#3,(a0)
		bne.s	loc_6B90
		move.l	d0,(a5)
		move.l	(a1)+,d5
		move.l	(a1)+,d4
		eori.l	#$10001000,d4
		move.l	d4,(a6)
		add.l	d7,d0
		move.l	d0,(a5)
		eori.l	#$10001000,d5
		move.l	d5,(a6)
		rts	

loc_6B90:				; ...
		move.l	d0,(a5)
		move.l	(a1)+,d5
		move.l	(a1)+,d4
		eori.l	#$18001800,d4
		swap	d4
		move.l	d4,(a6)
		add.l	d7,d0
		move.l	d0,(a5)
		eori.l	#$18001800,d5
		swap	d5
		move.l	d5,(a6)
		rts	
; End of function sub_6B32

		rts	
		move.l	d0,(a5)
		move.w	#$2000,d5
		move.w	(a1)+,d4
		add.w	d5,d4
		move.w	d4,(a6)
		move.w	(a1)+,d4
		add.w	d5,d4
		move.w	d4,(a6)
		add.l	d7,d0
		move.l	d0,(a5)
		move.w	(a1)+,d4
		add.w	d5,d4
		move.w	d4,(a6)
		move.w	(a1)+,d4
		add.w	d5,d4
		move.w	d4,(a6)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6BD6:				; ...
		lea	($FFFFB000).w,a1
		add.w	4(a3),d4
		add.w	(a3),d5
		move.w	d4,d3
		lsr.w	#1,d3
		andi.w	#$380,d3
		lsr.w	#3,d5
		move.w	d5,d0
		lsr.w	#5,d0
		andi.w	#$7F,d0
		add.w	d3,d0
		moveq	#-1,d3
		move.b	(a4,d0.w),d3
		beq.s	locret_6C1E
		subq.b	#1,d3
		andi.w	#$7F,d3
		ror.w	#7,d3
		add.w	d4,d4
		andi.w	#$1E0,d4
		andi.w	#$1E,d5
		add.w	d4,d3
		add.w	d5,d3
		movea.l	d3,a0
		move.w	(a0),d3
		andi.w	#$3FF,d3
		lsl.w	#3,d3
		adda.w	d3,a1

locret_6C1E:				; ...
		rts	
; End of function sub_6BD6


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6C20:				; ...
		add.w	4(a3),d4
		add.w	(a3),d5
		andi.w	#$F0,d4
		andi.w	#$1F0,d5
		lsl.w	#4,d4
		lsr.w	#2,d5
		add.w	d5,d4
		moveq	#3,d0
		swap	d0
		move.w	d4,d0
		rts	
; End of function sub_6C20


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_6C3C:				; ...
		add.w	4(a3),d4
		add.w	(a3),d5
		andi.w	#$F0,d4
		andi.w	#$1F0,d5
		lsl.w	#4,d4
		lsr.w	#2,d5
		add.w	d5,d4
		moveq	#2,d0
		swap	d0
		move.w	d4,d0
		rts	
; End of function sub_6C3C


; ---------------------------------------------------------------------------
; Subroutine to	load tiles as soon as the level	appears
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadTilesFromStart:			; ...
		lea	($C00004).l,a5
		lea	($C00000).l,a6
		lea	($FFFFF700).w,a3
		lea	($FFFFA400).w,a4
		move.w	#$4000,d2
		bsr.s	LoadTilesFromStart2
		lea	($FFFFF708).w,a3
		lea	($FFFFA440).w,a4
		move.w	#$6000,d2
; End of function LoadTilesFromStart


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadTilesFromStart2:			; ...
		moveq	#-$10,d4
		moveq	#$F,d6

loc_6C82:				; ...
		movem.l	d4-d6,-(sp)
		moveq	#0,d5
		move.w	d4,d1
		bsr.w	sub_6C20
		move.w	d1,d4
		moveq	#0,d5
		moveq	#$1F,d6
		bsr.w	sub_6ADA
		movem.l	(sp)+,d4-d6
		addi.w	#$10,d4
		dbf	d6,loc_6C82
		rts	
; End of function LoadTilesFromStart2

; ---------------------------------------------------------------------------
; Main Load Block loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


MainLoadBlockLoad:			; ...
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		lsl.w	#4,d0
		lea	(MainLoadBlocks)(pc),a2
		lea	(a2,d0.w),a2
		move.l	a2,-(sp)
		addq.l	#4,a2
		movea.l	(a2)+,a0
		lea	($FFFFB000).w,a1 ; RAM address for 16x16 mappings
		move.w	#0,d0
		bsr.w	EniDec
		movea.l	(a2)+,a0
		lea	($FF0000).l,a1	; RAM address for 256x256 mappings
		bsr.w	KosDec
		bsr.w	LevelLayoutLoad
		move.w	(a2)+,d0
		move.w	(a2),d0
		andi.w	#$FF,d0
		cmpi.w	#$103,($FFFFFE10).w ; is level SBZ3 (LZ4) ?
		bne.s	MLB_ChkSBZPal	; if not, branch
		moveq	#$C,d0		; use SB3 pallet

MLB_ChkSBZPal:				; ...
		cmpi.w	#$501,($FFFFFE10).w ; is level SBZ2?
		beq.s	MLB_UsePal0E	; if yes, branch
		cmpi.w	#$502,($FFFFFE10).w ; is level FZ?
		bne.s	MLB_NormalPal	; if not, branch

MLB_UsePal0E:				; ...
		moveq	#$E,d0		; use SBZ2/FZ pallet

MLB_NormalPal:				; ...
		bsr.w	PalLoad1	; load pallet (based on	d0)
		movea.l	(sp)+,a2
		addq.w	#4,a2
		moveq	#0,d0
		move.b	(a2),d0
		beq.s	locret_6D10
		bsr.w	LoadPLC		; load pattern load cues

locret_6D10:				; ...
		rts	
; End of function MainLoadBlockLoad

; ---------------------------------------------------------------------------
; Level	layout loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevelLayoutLoad:			; ...
		lea	($FFFFA400).w,a3
		move.w	#$1FF,d1
		moveq	#0,d0

LevLoad_ClrRam:				; ...
		move.l	d0,(a3)+
		dbf	d1,LevLoad_ClrRam ; clear the RAM ($FFFFA400-A7FF)
		lea	($FFFFA400).w,a3 ; RAM address for level layout
		moveq	#0,d1
		bsr.w	LevelLayoutLoad2 ; load	level layout into RAM
		lea	($FFFFA440).w,a3 ; RAM address for background layout
		moveq	#2,d1
; End of function LevelLayoutLoad

; "LevelLayoutLoad2" is	run twice - for	the level and the background

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LevelLayoutLoad2:			; ...
		move.w	($FFFFFE10).w,d0
		lsl.b	#6,d0
		lsr.w	#5,d0
		move.w	d0,d2
		add.w	d0,d0
		add.w	d2,d0
		add.w	d1,d0
		lea	$900000+(Level_Index),a1
		move.w	(a1,d0.w),d0
		lea	(a1,d0.w),a1
		moveq	#0,d1
		move.w	d1,d2
		move.b	(a1)+,d1	; load level width (in tiles)
		move.b	(a1)+,d2	; load level height (in	tiles)

LevLoad_NumRows:			; ...
		move.w	d1,d0
		movea.l	a3,a0

LevLoad_Row:				; ...
		move.b	(a1)+,(a0)+
		dbf	d0,LevLoad_Row	; load 1 row
		lea	$80(a3),a3	; do next row
		dbf	d2,LevLoad_NumRows ; repeat for	number of rows
		rts	
; End of function LevelLayoutLoad2

; ---------------------------------------------------------------------------
; Dynamic screen resize	loading	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DynScrResizeLoad:			; ...
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		add.w	d0,d0
		move.w	Resize_Index(pc,d0.w),d0
		jsr	Resize_Index(pc,d0.w)
		moveq	#4,d1
		move.w	($FFFFF726).w,d0
		sub.w	($FFFFF72E).w,d0
		beq.s	locret_6DAA
		bcc.s	loc_6DAC
		neg.w	d1
		move.w	($FFFFF704).w,d0
		cmp.w	($FFFFF726).w,d0
		bls.s	loc_6DA0
		move.w	d0,($FFFFF72E).w
		andi.w	#-4,($FFFFF72E).w

loc_6DA0:				; ...
		add.w	d1,($FFFFF72E).w
		move.b	#1,($FFFFF75C).w

locret_6DAA:				; ...
		rts	

loc_6DAC:				; ...
		move.w	($FFFFF704).w,d0
		addq.w	#8,d0
		cmp.w	($FFFFF72E).w,d0
		bcs.s	loc_6DC4
		btst	#1,($FFFFD022).w
		beq.s	loc_6DC4
		add.w	d1,d1
		add.w	d1,d1

loc_6DC4:				; ...
		add.w	d1,($FFFFF72E).w
		move.b	#1,($FFFFF75C).w
		rts	
; End of function DynScrResizeLoad

; ---------------------------------------------------------------------------
; Offset index for dynamic screen resizing
; ---------------------------------------------------------------------------
Resize_Index:	dc.w Resize_GHZ-Resize_Index, Resize_LZ-Resize_Index ; ...
		dc.w Resize_MZ-Resize_Index, Resize_SLZ-Resize_Index
		dc.w Resize_SYZ-Resize_Index, Resize_SBZ-Resize_Index
		dc.w Resize_Ending-Resize_Index
; ---------------------------------------------------------------------------
; Green	Hill Zone dynamic screen resizing
; ---------------------------------------------------------------------------

Resize_GHZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_GHZx(pc,d0.w),d0
		jmp	Resize_GHZx(pc,d0.w)
Resize_GHZx:	dc.w Resize_GHZ1-Resize_GHZx ; ...
		dc.w Resize_GHZ2-Resize_GHZx
		dc.w Resize_GHZ3-Resize_GHZx

Resize_GHZ1:				; ...
		move.w	#$300,($FFFFF726).w ; set lower	y-boundary
		cmpi.w	#$1780,($FFFFF700).w ; has the camera reached $1780 on x-axis?
		bcs.s	locret_6E08	; if not, branch
		move.w	#$400,($FFFFF726).w ; set lower	y-boundary

locret_6E08:				; ...
		rts	

Resize_GHZ2:				; ...
		move.w	#$300,($FFFFF726).w
		cmpi.w	#$ED0,($FFFFF700).w
		bcs.s	locret_6E3A
		move.w	#$200,($FFFFF726).w
		cmpi.w	#$1600,($FFFFF700).w
		bcs.s	locret_6E3A
		move.w	#$400,($FFFFF726).w
		cmpi.w	#$1D60,($FFFFF700).w
		bcs.s	locret_6E3A
		move.w	#$300,($FFFFF726).w

locret_6E3A:				; ...
		rts	

Resize_GHZ3:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_6E4A(pc,d0.w),d0
		jmp	off_6E4A(pc,d0.w)
off_6E4A:	dc.w Resize_GHZ3main-off_6E4A ;	...
		dc.w Resize_GHZ3boss-off_6E4A
		dc.w Resize_GHZ3end-off_6E4A

Resize_GHZ3main:			; ...
		move.w	#$300,($FFFFF726).w
		cmpi.w	#$380,($FFFFF700).w
		bcs.s	locret_6E96
		move.w	#$310,($FFFFF726).w
		cmpi.w	#$960,($FFFFF700).w
		bcs.s	locret_6E96
		cmpi.w	#$280,($FFFFF704).w
		bcs.s	loc_6E98
		move.w	#$400,($FFFFF726).w
		cmpi.w	#$1380,($FFFFF700).w
		bcc.s	loc_6E8E
		move.w	#$4C0,($FFFFF726).w
		move.w	#$4C0,($FFFFF72E).w

loc_6E8E:				; ...
		cmpi.w	#$1700,($FFFFF700).w
		bcc.s	loc_6E98

locret_6E96:				; ...
		rts	

loc_6E98:				; ...
		move.w	#$300,($FFFFF726).w
		addq.b	#2,($FFFFF742).w
		rts	

Resize_GHZ3boss:			; ...
		cmpi.w	#$960,($FFFFF700).w
		bcc.s	loc_6EB0
		subq.b	#2,($FFFFF742).w

loc_6EB0:				; ...
		cmpi.w	#$2960,($FFFFF700).w
		bcs.s	locret_6EE8
		jsr	$880000+SingleObjLoad
		bne.s	loc_6ED0
		move.b	#$3D,0(a1)	; load GHZ boss	object
		move.w	#$2A60,8(a1)
		move.w	#$280,$C(a1)

loc_6ED0:				; ...
		move.w	#$8C,d0
		bsr.w	PlaySound	; play boss music
		move.b	#1,($FFFFF7AA).w ; lock	screen
		addq.b	#2,($FFFFF742).w
		moveq	#$11,d0
		bra.w	LoadPLC		; load boss patterns

locret_6EE8:				; ...
		rts	

Resize_GHZ3end:				; ...
		move.w	($FFFFF700).w,($FFFFF728).w
		rts	
; ---------------------------------------------------------------------------
; Labyrinth Zone dynamic screen	resizing
; ---------------------------------------------------------------------------

Resize_LZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_LZx(pc,d0.w),d0
		jmp	Resize_LZx(pc,d0.w)
Resize_LZx:	dc.w Resize_LZ12-Resize_LZx ; ...
		dc.w Resize_LZ12-Resize_LZx
		dc.w Resize_LZ3-Resize_LZx
		dc.w Resize_SBZ3-Resize_LZx

Resize_LZ12:				; ...
		rts	

Resize_LZ3:				; ...
		tst.b	($FFFFF7EF).w	; has switch $F	been pressed?
		beq.s	loc_6F28	; if not, branch
		lea	($FFFFA506).w,a1
		cmpi.b	#7,(a1)
		beq.s	loc_6F28
		move.b	#7,(a1)		; modify level layout
		move.w	#$B7,d0
		bsr.w	PlaySound_Special ; play rumbling sound

loc_6F28:				; ...
		tst.b	($FFFFF742).w
		bne.s	locret_6F64
		cmpi.w	#$1CA0,($FFFFF700).w
		bcs.s	locret_6F62
		cmpi.w	#$600,($FFFFF704).w
		bcc.s	locret_6F62
		jsr	$880000+SingleObjLoad
		bne.s	loc_6F4A
		move.b	#$77,0(a1)	; load LZ boss object

loc_6F4A:				; ...
		move.w	#$8C,d0
		bsr.w	PlaySound	; play boss music
		move.b	#1,($FFFFF7AA).w ; lock	screen
		addq.b	#2,($FFFFF742).w
		moveq	#$11,d0
		bra.w	LoadPLC		; load boss patterns

locret_6F62:				; ...
		rts	

locret_6F64:				; ...
		rts	

Resize_SBZ3:				; ...
		cmpi.w	#$D00,($FFFFF700).w
		bcs.s	locret_6F8C
		cmpi.w	#$18,($FFFFD00C).w ; has Sonic reached the top of the level?
		bcc.s	locret_6F8C	; if not, branch
		clr.b	($FFFFFE30).w
		move.w	#1,($FFFFFE02).w ; restart level
		move.w	#$502,($FFFFFE10).w ; set level	number to 0502 (FZ)
		move.b	#1,($FFFFF7C8).w ; freeze Sonic

locret_6F8C:				; ...
		rts	
; ---------------------------------------------------------------------------
; Marble Zone dynamic screen resizing
; ---------------------------------------------------------------------------

Resize_MZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_MZx(pc,d0.w),d0
		jmp	Resize_MZx(pc,d0.w)
Resize_MZx:	dc.w Resize_MZ1-Resize_MZx ; ...
		dc.w Resize_MZ2-Resize_MZx
		dc.w Resize_MZ3-Resize_MZx

Resize_MZ1:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_6FB2(pc,d0.w),d0
		jmp	off_6FB2(pc,d0.w)
off_6FB2:	dc.w loc_6FBA-off_6FB2	; ...
		dc.w loc_6FEA-off_6FB2
		dc.w loc_702E-off_6FB2
		dc.w loc_7050-off_6FB2

loc_6FBA:				; ...
		move.w	#$1D0,($FFFFF726).w
		cmpi.w	#$700,($FFFFF700).w
		bcs.s	locret_6FE8
		move.w	#$220,($FFFFF726).w
		cmpi.w	#$D00,($FFFFF700).w
		bcs.s	locret_6FE8
		move.w	#$340,($FFFFF726).w
		cmpi.w	#$340,($FFFFF704).w
		bcs.s	locret_6FE8
		addq.b	#2,($FFFFF742).w

locret_6FE8:				; ...
		rts	

loc_6FEA:				; ...
		cmpi.w	#$340,($FFFFF704).w
		bcc.s	loc_6FF8
		subq.b	#2,($FFFFF742).w
		rts	

loc_6FF8:				; ...
		move.w	#0,($FFFFF72C).w
		cmpi.w	#$E00,($FFFFF700).w
		bcc.s	locret_702C
		move.w	#$340,($FFFFF72C).w
		move.w	#$340,($FFFFF726).w
		cmpi.w	#$A90,($FFFFF700).w
		bcc.s	locret_702C
		move.w	#$500,($FFFFF726).w
		cmpi.w	#$370,($FFFFF704).w
		bcs.s	locret_702C
		addq.b	#2,($FFFFF742).w

locret_702C:				; ...
		rts	

loc_702E:				; ...
		cmpi.w	#$370,($FFFFF704).w
		bcc.s	loc_703C
		subq.b	#2,($FFFFF742).w
		rts	

loc_703C:				; ...
		cmpi.w	#$500,($FFFFF704).w
		bcs.s	locret_704E
		move.w	#$500,($FFFFF72C).w
		addq.b	#2,($FFFFF742).w

locret_704E:				; ...
		rts	

loc_7050:				; ...
		cmpi.w	#$E70,($FFFFF700).w
		bcs.s	locret_7072
		move.w	#0,($FFFFF72C).w
		move.w	#$500,($FFFFF726).w
		cmpi.w	#$1430,($FFFFF700).w
		bcs.s	locret_7072
		move.w	#$210,($FFFFF726).w

locret_7072:				; ...
		rts	

Resize_MZ2:				; ...
		move.w	#$520,($FFFFF726).w
		cmpi.w	#$1700,($FFFFF700).w
		bcs.s	locret_7088
		move.w	#$200,($FFFFF726).w

locret_7088:				; ...
		rts	

Resize_MZ3:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_7098(pc,d0.w),d0
		jmp	off_7098(pc,d0.w)
off_7098:	dc.w Resize_MZ3boss-off_7098 ; ...
		dc.w Resize_MZ3end-off_7098

Resize_MZ3boss:				; ...
		move.w	#$720,($FFFFF726).w
		cmpi.w	#$1560,($FFFFF700).w
		bcs.s	locret_70E8
		move.w	#$210,($FFFFF726).w
		cmpi.w	#$17F0,($FFFFF700).w
		bcs.s	locret_70E8
		jsr	$880000+SingleObjLoad
		bne.s	loc_70D0
		move.b	#$73,0(a1)	; load MZ boss object
		move.w	#$19F0,8(a1)
		move.w	#$22C,$C(a1)

loc_70D0:				; ...
		move.w	#$8C,d0
		bsr.w	PlaySound	; play boss music
		move.b	#1,($FFFFF7AA).w ; lock	screen
		addq.b	#2,($FFFFF742).w
		moveq	#$11,d0
		bra.w	LoadPLC		; load boss patterns

locret_70E8:				; ...
		rts	

Resize_MZ3end:				; ...
		move.w	($FFFFF700).w,($FFFFF728).w
		rts	
; ---------------------------------------------------------------------------
; Star Light Zone dynamic screen resizing
; ---------------------------------------------------------------------------

Resize_SLZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_SLZx(pc,d0.w),d0
		jmp	Resize_SLZx(pc,d0.w)
Resize_SLZx:	dc.w Resize_SLZ12-Resize_SLZx ;	...
		dc.w Resize_SLZ12-Resize_SLZx
		dc.w Resize_SLZ3-Resize_SLZx

Resize_SLZ12:				; ...
		rts	

Resize_SLZ3:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_7118(pc,d0.w),d0
		jmp	off_7118(pc,d0.w)
off_7118:	dc.w Resize_SLZ3main-off_7118 ;	...
		dc.w Resize_SLZ3boss-off_7118
		dc.w Resize_SLZ3end-off_7118

Resize_SLZ3main:			; ...
		cmpi.w	#$1E70,($FFFFF700).w
		bcs.s	locret_7130
		move.w	#$210,($FFFFF726).w
		addq.b	#2,($FFFFF742).w

locret_7130:				; ...
		rts	

Resize_SLZ3boss:			; ...
		cmpi.w	#$2000,($FFFFF700).w
		bcs.s	locret_715C
		jsr	$880000+SingleObjLoad
		bne.s	loc_7144
		move.b	#$7A,(a1)	; load SLZ boss	object

loc_7144:				; ...
		move.w	#$8C,d0
		bsr.w	PlaySound	; play boss music
		move.b	#1,($FFFFF7AA).w ; lock	screen
		addq.b	#2,($FFFFF742).w
		moveq	#$11,d0
		bra.w	LoadPLC		; load boss patterns

locret_715C:				; ...
		rts	

Resize_SLZ3end:				; ...
		move.w	($FFFFF700).w,($FFFFF728).w
		rts	
		rts	
; ---------------------------------------------------------------------------
; Spring Yard Zone dynamic screen resizing
; ---------------------------------------------------------------------------

Resize_SYZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_SYZx(pc,d0.w),d0
		jmp	Resize_SYZx(pc,d0.w)
Resize_SYZx:	dc.w Resize_SYZ1-Resize_SYZx ; ...
		dc.w Resize_SYZ2-Resize_SYZx
		dc.w Resize_SYZ3-Resize_SYZx

Resize_SYZ1:				; ...
		rts	

Resize_SYZ2:				; ...
		move.w	#$520,($FFFFF726).w
		cmpi.w	#$25A0,($FFFFF700).w
		bcs.s	locret_71A2
		move.w	#$420,($FFFFF726).w
		cmpi.w	#$4D0,($FFFFD00C).w
		bcs.s	locret_71A2
		move.w	#$520,($FFFFF726).w

locret_71A2:				; ...
		rts	

Resize_SYZ3:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_71B2(pc,d0.w),d0
		jmp	off_71B2(pc,d0.w)
off_71B2:	dc.w Resize_SYZ3main-off_71B2 ;	...
		dc.w Resize_SYZ3boss-off_71B2
		dc.w Resize_SYZ3end-off_71B2

Resize_SYZ3main:			; ...
		cmpi.w	#$2AC0,($FFFFF700).w
		bcs.s	locret_71CE
		jsr	$880000+SingleObjLoad
		bne.s	locret_71CE
		move.b	#$76,(a1)	; load blocks that boss	picks up
		addq.b	#2,($FFFFF742).w

locret_71CE:				; ...
		rts	

Resize_SYZ3boss:			; ...
		cmpi.w	#$2C00,($FFFFF700).w
		bcs.s	locret_7200
		move.w	#$4CC,($FFFFF726).w
		jsr	$880000+SingleObjLoad
		bne.s	loc_71EC
		move.b	#$75,(a1)	; load SYZ boss	object
		addq.b	#2,($FFFFF742).w

loc_71EC:				; ...
		move.w	#$8C,d0
		bsr.w	PlaySound	; play boss music
		move.b	#1,($FFFFF7AA).w ; lock	screen
		moveq	#$11,d0
		bra.w	LoadPLC		; load boss patterns

locret_7200:				; ...
		rts	

Resize_SYZ3end:				; ...
		move.w	($FFFFF700).w,($FFFFF728).w
		rts	
; ---------------------------------------------------------------------------
; Scrap	Brain Zone dynamic screen resizing
; ---------------------------------------------------------------------------

Resize_SBZ:				; ...
		moveq	#0,d0
		move.b	($FFFFFE11).w,d0
		add.w	d0,d0
		move.w	Resize_SBZx(pc,d0.w),d0
		jmp	Resize_SBZx(pc,d0.w)
Resize_SBZx:	dc.w Resize_SBZ1-Resize_SBZx ; ...
		dc.w Resize_SBZ2-Resize_SBZx
		dc.w Resize_FZ-Resize_SBZx

Resize_SBZ1:				; ...
		move.w	#$720,($FFFFF726).w
		cmpi.w	#$1880,($FFFFF700).w
		bcs.s	locret_7242
		move.w	#$620,($FFFFF726).w
		cmpi.w	#$2000,($FFFFF700).w
		bcs.s	locret_7242
		move.w	#$2A0,($FFFFF726).w

locret_7242:				; ...
		rts	

Resize_SBZ2:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_7252(pc,d0.w),d0
		jmp	off_7252(pc,d0.w)
off_7252:	dc.w Resize_SBZ2main-off_7252 ;	...
		dc.w Resize_SBZ2boss-off_7252
		dc.w Resize_SBZ2boss2-off_7252
		dc.w Resize_SBZ2end-off_7252

Resize_SBZ2main:			; ...
		move.w	#$800,($FFFFF726).w
		cmpi.w	#$1800,($FFFFF700).w
		bcs.s	locret_727A
		move.w	#$510,($FFFFF726).w
		cmpi.w	#$1E00,($FFFFF700).w
		bcs.s	locret_727A
		addq.b	#2,($FFFFF742).w

locret_727A:				; ...
		rts	

Resize_SBZ2boss:			; ...
		cmpi.w	#$1EB0,($FFFFF700).w
		bcs.s	locret_7298
		jsr	$880000+SingleObjLoad
		bne.s	locret_7298
		move.b	#$83,(a1)	; load collapsing block	object
		addq.b	#2,($FFFFF742).w
		moveq	#$1E,d0
		bra.w	LoadPLC		; load SBZ2 Robotnik patterns

locret_7298:				; ...
		rts	

Resize_SBZ2boss2:			; ...
		cmpi.w	#$1F60,($FFFFF700).w
		bcs.s	loc_72B6
		jsr	$880000+SingleObjLoad
		bne.s	loc_72B0
		move.b	#$82,(a1)	; load SBZ2 Robotnik object
		addq.b	#2,($FFFFF742).w

loc_72B0:				; ...
		move.b	#1,($FFFFF7AA).w ; lock	screen

loc_72B6:				; ...
		bra.s	loc_72C2

Resize_SBZ2end:				; ...
		cmpi.w	#$2050,($FFFFF700).w
		bcs.s	loc_72C2
		rts	

loc_72C2:				; ...
		move.w	($FFFFF700).w,($FFFFF728).w
		rts	

Resize_FZ:				; ...
		moveq	#0,d0
		move.b	($FFFFF742).w,d0
		move.w	off_72D8(pc,d0.w),d0
		jmp	off_72D8(pc,d0.w)
off_72D8:	dc.w Resize_FZmain-off_72D8, Resize_FZboss-off_72D8 ; ...
		dc.w Resize_FZend-off_72D8, locret_7322-off_72D8
		dc.w Resize_FZend2-off_72D8

Resize_FZmain:				; ...
		cmpi.w	#$2148,($FFFFF700).w
		bcs.s	loc_72F4
		addq.b	#2,($FFFFF742).w
		moveq	#$1F,d0
		bsr.w	LoadPLC		; load FZ boss patterns

loc_72F4:				; ...
		bra.s	loc_72C2

Resize_FZboss:				; ...
		cmpi.w	#$2300,($FFFFF700).w
		bcs.s	loc_7312
		jsr	$880000+SingleObjLoad
		bne.s	loc_7312
		move.b	#$85,(a1)	; load FZ boss object
		addq.b	#2,($FFFFF742).w
		move.b	#1,($FFFFF7AA).w ; lock	screen

loc_7312:				; ...
		bra.s	loc_72C2

Resize_FZend:				; ...
		cmpi.w	#$2450,($FFFFF700).w
		bcs.s	loc_7320
		addq.b	#2,($FFFFF742).w

loc_7320:				; ...
		bra.s	loc_72C2

locret_7322:				; ...
		rts	

Resize_FZend2:				; ...
		bra.s	loc_72C2
; ---------------------------------------------------------------------------
; Ending sequence dynamic screen resizing (empty)
; ---------------------------------------------------------------------------

Resize_Ending:				; ...
		rts	



; ---------------------------------------------------------------------------
; Object code loading subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjectsLoad:				; ...
		lea	($FFFFD000).w,a0 ; set address for object RAM
		moveq	#$7F,d7
		moveq	#0,d0
		cmpi.b	#6,($FFFFD024).w
		bcc.s	loc_D362

loc_D348:				; ...
		move.b	(a0),d0		; load object number from RAM
		beq.s	loc_D358
		add.w	d0,d0
		add.w	d0,d0
		movea.l	Obj_Index-4(pc,d0.w),a1
		jsr	(a1)		; run the object's code
		moveq	#0,d0

loc_D358:				; ...
		lea	$40(a0),a0	; next object
		dbf	d7,loc_D348
		rts	

loc_D362:				; ...
		moveq	#$1F,d7
		bsr.s	loc_D348
		moveq	#$5F,d7

loc_D368:				; ...
		moveq	#0,d0
		move.b	(a0),d0
		beq.s	loc_D378
		tst.b	1(a0)
		bpl.s	loc_D378
		jsr	$880000+DisplaySprite

loc_D378:				; ...
		lea	$40(a0),a0

loc_D37C:
		dbf	d7,loc_D368
		rts	
; End of function ObjectsLoad

; ---------------------------------------------------------------------------
; Object pointers
; ---------------------------------------------------------------------------
Obj_Index:	dc.l $880000+Obj01, $880000+ObjectFall,	$880000+ObjectFall, $880000+ObjectFall ; ...
		dc.l $880000+ObjectFall, $880000+ObjectFall, $880000+ObjectFall, $880000+Obj08
		dc.l $880000+Obj09, $880000+Obj0A, $880000+Obj0B, $880000+Obj0C
		dc.l $880000+Obj0D, $880000+Obj0E, $880000+Obj0F, $880000+Obj10
		dc.l $880000+Obj11, $880000+Obj12, $880000+Obj13, $880000+Obj14
		dc.l $880000+Obj15, $880000+Obj16, $880000+Obj17, $880000+Obj18
		dc.l $880000+Obj19, $880000+Obj1A, $880000+Obj1B, $880000+Obj1C
		dc.l $880000+Obj1D, $880000+Obj1E, $880000+Obj1F, $880000+Obj20
		dc.l $880000+Obj21, $880000+Obj22, $880000+Obj23, $880000+Obj24
		dc.l $880000+Obj25, $880000+Obj26, $880000+Obj27, $880000+Obj28
		dc.l $880000+Obj29, $880000+Obj2A, $880000+Obj2B, $880000+Obj2C
		dc.l $880000+Obj2D, $880000+Obj2E, $880000+Obj2F, $880000+Obj30
		dc.l $880000+Obj31, $880000+Obj32, $880000+Obj33, $880000+Obj34
		dc.l $880000+Obj35, $880000+Obj36, $880000+Obj37, $880000+Obj38
		dc.l $880000+Obj39, $880000+Obj3A, $880000+Obj3B, $880000+Obj3C
		dc.l $880000+Obj3D, $880000+Obj3E, $880000+Obj3F, $880000+Obj40
		dc.l $880000+Obj41, $880000+Obj42, $880000+Obj43, $880000+Obj44
		dc.l $880000+Obj45, $880000+Obj46, $880000+Obj47, $880000+Obj48
		dc.l $880000+Obj49, $880000+Obj4A, $880000+Obj4B, $880000+Obj4C
		dc.l $880000+Obj4D, $880000+Obj4E, $880000+Obj4F, $880000+Obj50
		dc.l $880000+Obj51, $880000+Obj52, $880000+Obj53, $880000+Obj54
		dc.l $880000+Obj55, $880000+Obj56, $880000+Obj57, $880000+Obj58
		dc.l $880000+Obj59, $880000+Obj5A, $880000+Obj5B, $880000+Obj5C
		dc.l $880000+Obj5D, $880000+Obj5E, $880000+Obj5F, $880000+Obj60
		dc.l $880000+Obj61, $880000+Obj62, $880000+Obj63, $880000+Obj64
		dc.l $880000+Obj65, $880000+Obj66, $880000+Obj67, $880000+Obj68
		dc.l $880000+Obj69, $880000+Obj6A, $880000+Obj6B, $880000+Obj6C
		dc.l $880000+Obj6D, $880000+Obj6E, $880000+Obj6F, $880000+Obj70
		dc.l $880000+Obj71, $880000+Obj72, $880000+Obj73, $880000+Obj74
		dc.l $880000+Obj75, $880000+Obj76, $880000+Obj77, $880000+Obj78
		dc.l $880000+Obj79, $880000+Obj7A, $880000+Obj7B, $880000+Obj7C
		dc.l $880000+Obj7D, $880000+Obj7E, $880000+Obj7F, $880000+Obj80
		dc.l $880000+Obj81, $880000+Obj82, $880000+Obj83, $880000+Obj84
		dc.l $880000+Obj85, $880000+Obj86, $880000+Obj87, $880000+Obj88
		dc.l $880000+Obj89, $880000+Obj8A, $880000+Obj8B, $880000+Obj8C

		even

; ---------------------------------------------------------------------------
; Subroutine to	animate	a sprite using an animation script
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


AnimateSprite:				; ...
		moveq	#0,d0
		move.b	$1C(a0),d0	; move animation number	to d0
		cmp.b	$1D(a0),d0	; is animation set to restart?
		beq.s	Anim_Run	; if not, branch
		move.b	d0,$1D(a0)	; set to "no restart"
		move.b	#0,$1B(a0)	; reset	animation
		move.b	#0,$1E(a0)	; reset	frame duration

Anim_Run:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	Anim_Wait	; if time remains, branch
		add.w	d0,d0
		adda.w	(a1,d0.w),a1	; jump to appropriate animation	script
		move.b	(a1),$1E(a0)	; load frame duration
		moveq	#0,d1
		move.b	$1B(a0),d1	; load current frame number
		move.b	1(a1,d1.w),d0	; read sprite number from script
		bmi.s	Anim_End_FF	; if animation is complete, branch

Anim_Next:				; ...
		move.b	d0,d1
		andi.b	#$1F,d0
		move.b	d0,$1A(a0)	; load sprite number
		move.b	$22(a0),d0
		rol.b	#3,d1
		eor.b	d0,d1
		andi.b	#3,d1
		andi.b	#$FC,1(a0)
		or.b	d1,1(a0)
		addq.b	#1,$1B(a0)	; next frame number

Anim_Wait:				; ...
		rts	

Anim_End_FF:				; ...
		addq.b	#1,d0		; is the end flag = $FF	?
		bne.s	Anim_End_FE	; if not, branch
		move.b	#0,$1B(a0)	; restart the animation
		move.b	1(a1),d0	; read sprite number
		bra.s	Anim_Next

Anim_End_FE:				; ...
		addq.b	#1,d0		; is the end flag = $FE	?
		bne.s	Anim_End_FD	; if not, branch
		move.b	2(a1,d1.w),d0	; read the next	byte in	the script
		sub.b	d0,$1B(a0)	; jump back d0 bytes in	the script
		sub.b	d0,d1
		move.b	1(a1,d1.w),d0	; read sprite number
		bra.s	Anim_Next

Anim_End_FD:				; ...
		addq.b	#1,d0		; is the end flag = $FD	?
		bne.s	Anim_End_FC	; if not, branch
		move.b	2(a1,d1.w),$1C(a0) ; read next byte, run that animation

Anim_End_FC:				; ...
		addq.b	#1,d0		; is the end flag = $FC	?
		bne.s	Anim_End_FB	; if not, branch
		addq.b	#2,$24(a0)	; jump to next routine

Anim_End_FB:				; ...
		addq.b	#1,d0		; is the end flag = $FB	?
		bne.s	Anim_End_FA	; if not, branch
		move.b	#0,$1B(a0)	; reset	animation
		clr.b	$25(a0)		; reset	2nd routine counter

Anim_End_FA:				; ...
		addq.b	#1,d0		; is the end flag = $FA	?
		bne.s	Anim_End	; if not, branch
		addq.b	#2,$25(a0)	; jump to next routine

Anim_End:				; ...
		rts	
; End of function AnimateSprite
; ---------------------------------------------------------------------------
; When debug mode is currently in use
; ---------------------------------------------------------------------------

DebugMode:				; ...
		moveq	#0,d0
		move.b	($FFFFFE08).w,d0
		move.w	Debug_Index(pc,d0.w),d1
		jmp	Debug_Index(pc,d1.w)
Debug_Index:	dc.w Debug_Main-Debug_Index ; ...
		dc.w Debug_Skip-Debug_Index

Debug_Main:				; ...
		addq.b	#2,($FFFFFE08).w
		move.w	($FFFFF72C).w,($FFFFFEF0).w ; buffer level x-boundary
		move.w	($FFFFF726).w,($FFFFFEF2).w ; buffer level y-boundary
		move.w	#0,($FFFFF72C).w
		move.w	#$720,($FFFFF726).w
		andi.w	#$7FF,($FFFFD00C).w
		andi.w	#$7FF,($FFFFF704).w
		andi.w	#$3FF,($FFFFF70C).w
		move.b	#0,$1A(a0)
		move.b	#0,$1C(a0)
		cmpi.b	#$10,($FFFFF600).w ; is	game mode = $10	(special stage)?
		bne.s	Debug_Zone	; if not, branch
		move.w	#0,($FFFFF782).w ; stop	special	stage rotating
		move.w	#0,($FFFFF780).w ; make	special	stage "upright"
		moveq	#6,d0		; use 6th debug	item list
		bra.s	Debug_UseList

Debug_Zone:				; ...
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0

Debug_UseList:				; ...
		lea	$880000+(DebugList).l,a2
		add.w	d0,d0
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,d6
		cmp.b	($FFFFFE06).w,d6
		bhi.s	loc_1CF9E
		move.b	#0,($FFFFFE06).w

loc_1CF9E:				; ...
		bsr.w	Debug_ShowItem
		move.b	#$C,($FFFFFE0A).w
		move.b	#1,($FFFFFE0B).w

Debug_Skip:				; ...
		moveq	#6,d0
		cmpi.b	#$10,($FFFFF600).w
		beq.s	loc_1CFBE
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0

loc_1CFBE:				; ...
		lea	$880000+(DebugList).l,a2
		add.w	d0,d0
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,d6
		bsr.w	Debug_Control
		jmp	$880000+DisplaySprite

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Debug_Control:				; ...
		moveq	#0,d4
		move.w	#1,d1
		move.b	($FFFFF605).w,d4
		andi.w	#$F,d4		; is up/down/left/right	pressed?
		bne.s	loc_1D018	; if yes, branch
		move.b	($FFFFF604).w,d0
		andi.w	#$F,d0
		bne.s	loc_1D000
		move.b	#$C,($FFFFFE0A).w
		move.b	#$F,($FFFFFE0B).w
		bra.w	Debug_BackItem

loc_1D000:				; ...
		subq.b	#1,($FFFFFE0A).w
		bne.s	loc_1D01C
		move.b	#1,($FFFFFE0A).w
		addq.b	#1,($FFFFFE0B).w
		bne.s	loc_1D018
		move.b	#-1,($FFFFFE0B).w

loc_1D018:				; ...
		move.b	($FFFFF604).w,d4

loc_1D01C:				; ...
		moveq	#0,d1
		move.b	($FFFFFE0B).w,d1
		addq.w	#1,d1
		swap	d1
		asr.l	#4,d1
		move.l	$C(a0),d2
		move.l	8(a0),d3
		btst	#0,d4		; is up	being pressed?
		beq.s	loc_1D03C	; if not, branch
		sub.l	d1,d2
		bcc.s	loc_1D03C
		moveq	#0,d2

loc_1D03C:				; ...
		btst	#1,d4		; is down being	pressed?
		beq.s	loc_1D052	; if not, branch
		add.l	d1,d2
		cmpi.l	#$7FF0000,d2
		bcs.s	loc_1D052
		move.l	#$7FF0000,d2

loc_1D052:				; ...
		btst	#2,d4
		beq.s	loc_1D05E
		sub.l	d1,d3
		bcc.s	loc_1D05E
		moveq	#0,d3

loc_1D05E:				; ...
		btst	#3,d4
		beq.s	loc_1D066
		add.l	d1,d3

loc_1D066:				; ...
		move.l	d2,$C(a0)
		move.l	d3,8(a0)

Debug_BackItem:				; ...
		btst	#6,($FFFFF604).w ; is button A pressed?
		beq.s	Debug_MakeItem	; if not, branch
		btst	#5,($FFFFF605).w ; is button C pressed?
		beq.s	Debug_NextItem	; if not, branch
		subq.b	#1,($FFFFFE06).w ; go back 1 item
		bcc.s	Debug_NoLoop
		add.b	d6,($FFFFFE06).w
		bra.s	Debug_NoLoop

Debug_NextItem:				; ...
		btst	#6,($FFFFF605).w ; is button A pressed?
		beq.s	Debug_MakeItem	; if not, branch
		addq.b	#1,($FFFFFE06).w ; go forwards 1 item
		cmp.b	($FFFFFE06).w,d6
		bhi.s	Debug_NoLoop
		move.b	#0,($FFFFFE06).w ; loop	back to	first item

Debug_NoLoop:				; ...
		bra.w	Debug_ShowItem

Debug_MakeItem:				; ...
		btst	#5,($FFFFF605).w ; is button C pressed?
		beq.s	Debug_Exit	; if not, branch
		jsr	$880000+SingleObjLoad
		bne.s	Debug_Exit
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	4(a0),0(a1)	; create object
		move.b	1(a0),1(a1)
		move.b	1(a0),$22(a1)
		andi.b	#$7F,$22(a1)
		moveq	#0,d0
		move.b	($FFFFFE06).w,d0
		lsl.w	#3,d0
		move.b	4(a2,d0.w),$28(a1)
		rts	

Debug_Exit:				; ...
		btst	#4,($FFFFF605).w ; is button B pressed?
		beq.s	Debug_DoNothing	; if not, branch
		moveq	#0,d0
		move.w	d0,($FFFFFE08).w ; deactivate debug mode
		move.l	#$900000+Map_Sonic,($FFFFD004).w
		move.w	#$780,($FFFFD002).w
		move.b	d0,($FFFFD01C).w
		move.w	d0,$A(a0)
		move.w	d0,$E(a0)
		move.w	($FFFFFEF0).w,($FFFFF72C).w ; restore level boundaries
		move.w	($FFFFFEF2).w,($FFFFF726).w
		cmpi.b	#$10,($FFFFF600).w ; are you in	the special stage?
		bne.s	Debug_DoNothing	; if not, branch
		clr.w	($FFFFF780).w
		move.w	#$40,($FFFFF782).w ; set new level rotation speed
		move.l	#$900000+Map_Sonic,($FFFFD004).w
		move.w	#$780,($FFFFD002).w
		move.b	#2,($FFFFD01C).w
		bset	#2,($FFFFD022).w
		bset	#1,($FFFFD022).w

Debug_DoNothing:			; ...
		rts	
; End of function Debug_Control


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Debug_ShowItem:				; ...
		moveq	#0,d0
		move.b	($FFFFFE06).w,d0
		lsl.w	#3,d0
		move.l	(a2,d0.w),4(a0)	; load mappings	for item
		move.w	6(a2,d0.w),2(a0) ; load	VRAM setting for item
		move.b	5(a2,d0.w),$1A(a0) ; load frame	number for item
		rts	
; End of function Debug_ShowItem


; ---------------------------------------------------------------------------
; Object 01 - Sonic
; ---------------------------------------------------------------------------

Obj01:					; ...
		tst.w	($FFFFFE08).w	; is debug mode	being used?
		beq.s	Obj01_Normal	; if not, branch
		jmp	$880000+DebugMode
		nop

Obj01_Normal:				; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj01_Index(pc,d0.w),d1
		jmp	Obj01_Index(pc,d1.w)
Obj01_Index:	dc.w Obj01_Main-Obj01_Index ; ...
		dc.w Obj01_Control-Obj01_Index
		dc.w Obj01_Hurt-Obj01_Index
		dc.w Obj01_Death-Obj01_Index
		dc.w Obj01_ResetLevel-Obj01_Index

Obj01_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$13,$16(a0)
		move.b	#9,$17(a0)
		move.l	#$900000+Map_Sonic,4(a0)
		move.w	#$780,2(a0)
		move.b	#2,$18(a0)
		move.b	#$18,$19(a0)
		move.b	#4,1(a0)
		move.w	#$600,($FFFFF760).w ; Sonic's top speed
		move.w	#$C,($FFFFF762).w ; Sonic's acceleration
		move.w	#$80,($FFFFF764).w ; Sonic's deceleration

Obj01_Control:				; ...
		tst.w	($FFFFFFFA).w	; is debug cheat enabled?
		beq.s	loc_12C58	; if not, branch
		btst	#4,($FFFFF605).w ; is button C pressed?
		beq.s	loc_12C58	; if not, branch
		move.w	#1,($FFFFFE08).w ; change Sonic	into a ring/item
		clr.b	($FFFFF7CC).w
		rts	

loc_12C58:				; ...
		tst.b	($FFFFF7CC).w	; are controls locked?
		bne.s	loc_12C64	; if yes, branch
		move.w	($FFFFF604).w,($FFFFF602).w ; enable joypad control

loc_12C64:				; ...
		btst	#0,($FFFFF7C8).w ; are controls	locked?
		bne.s	loc_12C7E	; if yes, branch
		moveq	#0,d0
		move.b	$22(a0),d0
		andi.w	#6,d0
		move.w	Obj01_Modes(pc,d0.w),d1
		jsr	Obj01_Modes(pc,d1.w)

loc_12C7E:				; ...
		bsr.s	Sonic_Display
		bsr.w	Sonic_RecordPos
		bsr.w	Sonic_Water
		move.b	($FFFFF768).w,$36(a0)
		move.b	($FFFFF76A).w,$37(a0)
		tst.b	($FFFFF7C7).w
		beq.s	loc_12CA6
		tst.b	$1C(a0)
		bne.s	loc_12CA6
		move.b	$1D(a0),$1C(a0)

loc_12CA6:				; ...
		bsr.w	Sonic_Animate
		tst.b	($FFFFF7C8).w
		bmi.s	loc_12CB6
		jsr	$880000+TouchResponse

loc_12CB6:				; ...
		bsr.w	Sonic_Loops
		bsr.w	LoadSonicDynPLC
		rts	
Obj01_Modes:	dc.w Obj01_MdNormal-Obj01_Modes	; ...
		dc.w Obj01_MdJump-Obj01_Modes
		dc.w Obj01_MdRoll-Obj01_Modes
		dc.w Obj01_MdJump2-Obj01_Modes
; ---------------------------------------------------------------------------
; Music	to play	after invincibility wears off
; ---------------------------------------------------------------------------
MusicList2:	dc.b $81, $82, $83, $84, $85, $86 ; ...

Sonic_Display:				; ...
		move.w	$30(a0),d0
		beq.s	Obj01_Display
		subq.w	#1,$30(a0)
		lsr.w	#3,d0
		bcc.s	Obj01_ChkInvin

Obj01_Display:				; ...
		jsr	$880000+DisplaySprite

Obj01_ChkInvin:				; ...
		tst.b	($FFFFFE2D).w	; does Sonic have invincibility?
		beq.s	Obj01_ChkShoes	; if not, branch
		tst.w	$32(a0)		; check	time remaining for invinciblity
		beq.s	Obj01_ChkShoes	; if no	time remains, branch
		subq.w	#1,$32(a0)	; subtract 1 from time
		bne.s	Obj01_ChkShoes
		tst.b	($FFFFF7AA).w
		bne.s	Obj01_RmvInvin
		cmpi.w	#$C,($FFFFFE14).w
		bcs.s	Obj01_RmvInvin
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		cmpi.w	#$103,($FFFFFE10).w ; check if level is	SBZ3
		bne.s	Obj01_PlayMusic
		moveq	#5,d0		; play SBZ music

Obj01_PlayMusic:			; ...
		lea	(MusicList2)(pc),a1
		move.b	(a1,d0.w),d0
		jsr	$880000+(PlaySound).l	; play normal music

Obj01_RmvInvin:				; ...
		move.b	#0,($FFFFFE2D).w ; cancel invincibility

Obj01_ChkShoes:				; ...
		tst.b	($FFFFFE2E).w	; does Sonic have speed	shoes?
		beq.s	Obj01_ExitChk	; if not, branch
		tst.w	$34(a0)		; check	time remaining
		beq.s	Obj01_ExitChk
		subq.w	#1,$34(a0)	; subtract 1 from time
		bne.s	Obj01_ExitChk
		move.w	#$600,($FFFFF760).w ; restore Sonic's speed
		move.w	#$C,($FFFFF762).w ; restore Sonic's acceleration
		move.w	#$80,($FFFFF764).w ; restore Sonic's deceleration
		move.b	#0,($FFFFFE2E).w ; cancel speed	shoes
		move.w	#$E3,d0
		jmp	$880000+(PlaySound).l	; run music at normal speed

Obj01_ExitChk:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	record Sonic's previous positions for invincibility stars
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_RecordPos:			; ...
		move.w	($FFFFF7A8).w,d0
		lea	($FFFFCB00).w,a1
		lea	(a1,d0.w),a1
		move.w	8(a0),(a1)+
		move.w	$C(a0),(a1)+
		addq.b	#4,($FFFFF7A9).w
		rts	
; End of function Sonic_RecordPos

; ---------------------------------------------------------------------------
; Subroutine for Sonic when he's underwater
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Water:				; ...
		cmpi.b	#1,($FFFFFE10).w ; is level LZ?
		beq.s	Obj01_InWater	; if yes, branch

locret_12D80:				; ...
		rts	

Obj01_InWater:				; ...
		move.w	($FFFFF646).w,d0
		cmp.w	$C(a0),d0	; is Sonic above the water?
		bge.s	Obj01_OutWater	; if yes, branch
		bset	#6,$22(a0)
		bne.s	locret_12D80
		bsr.w	ResumeMusic
		move.b	#$A,($FFFFD340).w ; load bubbles object	from Sonic's mouth
		move.b	#$81,($FFFFD368).w
		move.w	#$300,($FFFFF760).w ; change Sonic's top speed
		move.w	#6,($FFFFF762).w ; change Sonic's acceleration
		move.w	#$40,($FFFFF764).w ; change Sonic's deceleration
		asr	$10(a0)
		asr	$12(a0)
		asr	$12(a0)
		beq.s	locret_12D80
		move.b	#8,($FFFFD300).w ; load	splash object
		move.w	#$AA,d0
		jmp	$880000+(PlaySound_Special).l ;	play splash sound

Obj01_OutWater:				; ...
		bclr	#6,$22(a0)
		beq.s	locret_12D80
		bsr.w	ResumeMusic
		move.w	#$600,($FFFFF760).w ; restore Sonic's speed
		move.w	#$C,($FFFFF762).w ; restore Sonic's acceleration
		move.w	#$80,($FFFFF764).w ; restore Sonic's deceleration
		asl	$12(a0)
		beq.w	locret_12D80
		move.b	#8,($FFFFD300).w ; load	splash object
		cmpi.w	#-$1000,$12(a0)
		bgt.s	loc_12E0E
		move.w	#-$1000,$12(a0)	; set maximum speed on leaving water

loc_12E0E:				; ...
		move.w	#$AA,d0
		jmp	$880000+(PlaySound_Special).l ;	play splash sound
; End of function Sonic_Water

; ---------------------------------------------------------------------------
; Modes	for controlling	Sonic
; ---------------------------------------------------------------------------

Obj01_MdNormal:				; ...
		bsr.w	Sonic_Jump
		bsr.w	Sonic_SlopeResist
		bsr.w	Sonic_Move
		bsr.w	Sonic_Roll
		bsr.w	Sonic_LevelBound
		jsr	$880000+SpeedToPos
		bsr.w	Sonic_AnglePos
		bsr.w	Sonic_SlopeRepel
		rts	

Obj01_MdJump:				; ...
		bsr.w	Sonic_JumpHeight
		bsr.w	Sonic_ChgJumpDir
		bsr.w	Sonic_LevelBound
		jsr	$880000+ObjectFall
		btst	#6,$22(a0)
		beq.s	loc_12E5C
		subi.w	#$28,$12(a0)

loc_12E5C:				; ...
		bsr.w	Sonic_JumpAngle
		bsr.w	Sonic_Floor
		rts	

Obj01_MdRoll:				; ...
		bsr.w	Sonic_Jump
		bsr.w	Sonic_RollRepel
		bsr.w	Sonic_RollSpeed
		bsr.w	Sonic_LevelBound
		jsr	$880000+SpeedToPos
		bsr.w	Sonic_AnglePos
		bsr.w	Sonic_SlopeRepel
		rts	

Obj01_MdJump2:				; ...
		bsr.w	Sonic_JumpHeight
		bsr.w	Sonic_ChgJumpDir
		bsr.w	Sonic_LevelBound
		jsr	$880000+ObjectFall
		btst	#6,$22(a0)
		beq.s	loc_12EA6
		subi.w	#$28,$12(a0)

loc_12EA6:				; ...
		bsr.w	Sonic_JumpAngle
		bsr.w	Sonic_Floor
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	make Sonic walk/run
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Move:				; ...
		move.w	($FFFFF760).w,d6
		move.w	($FFFFF762).w,d5
		move.w	($FFFFF764).w,d4
		tst.b	($FFFFF7CA).w
		bne.w	loc_12FEE
		tst.w	$3E(a0)
		bne.w	Obj01_ResetScr
		btst	#2,($FFFFF602).w ; is left being pressed?
		beq.s	Obj01_NotLeft	; if not, branch
		bsr.w	Sonic_MoveLeft

Obj01_NotLeft:				; ...
		btst	#3,($FFFFF602).w ; is right being pressed?
		beq.s	Obj01_NotRight	; if not, branch
		bsr.w	Sonic_MoveRight

Obj01_NotRight:				; ...
		move.b	$26(a0),d0
		addi.b	#$20,d0
		andi.b	#$C0,d0		; is Sonic on a	slope?
		bne.w	Obj01_ResetScr	; if yes, branch
		tst.w	$14(a0)		; is Sonic moving?
		bne.w	Obj01_ResetScr	; if yes, branch
		bclr	#5,$22(a0)
		move.b	#5,$1C(a0)	; use "standing" animation
		btst	#3,$22(a0)
		beq.s	Sonic_Balance
		moveq	#0,d0
		move.b	$3D(a0),d0
		lsl.w	#6,d0
		lea	($FFFFD000).w,a1
		lea	(a1,d0.w),a1
		tst.b	$22(a1)
		bmi.s	Sonic_LookUp
		moveq	#0,d1
		move.b	$19(a1),d1
		move.w	d1,d2
		add.w	d2,d2
		subq.w	#4,d2
		add.w	8(a0),d1
		sub.w	8(a1),d1
		cmpi.w	#4,d1
		blt.s	loc_12F6A
		cmp.w	d2,d1
		bge.s	loc_12F5A
		bra.s	Sonic_LookUp

Sonic_Balance:				; ...
		jsr	$880000+ObjHitFloor
		cmpi.w	#$C,d1
		blt.s	Sonic_LookUp
		cmpi.b	#3,$36(a0)
		bne.s	loc_12F62

loc_12F5A:				; ...
		bclr	#0,$22(a0)
		bra.s	loc_12F70

loc_12F62:				; ...
		cmpi.b	#3,$37(a0)
		bne.s	Sonic_LookUp

loc_12F6A:				; ...
		bset	#0,$22(a0)

loc_12F70:				; ...
		move.b	#6,$1C(a0)	; use "balancing" animation
		bra.s	Obj01_ResetScr

Sonic_LookUp:				; ...
		btst	#0,($FFFFF602).w ; is up being pressed?
		beq.s	Sonic_Duck	; if not, branch
		move.b	#7,$1C(a0)	; use "looking up" animation
		cmpi.w	#$C8,($FFFFF73E).w
		beq.s	loc_12FC2
		addq.w	#2,($FFFFF73E).w
		bra.s	loc_12FC2

Sonic_Duck:				; ...
		btst	#1,($FFFFF602).w ; is down being pressed?
		beq.s	Obj01_ResetScr	; if not, branch
		move.b	#8,$1C(a0)	; use "ducking"	animation
		cmpi.w	#8,($FFFFF73E).w
		beq.s	loc_12FC2
		subq.w	#2,($FFFFF73E).w
		bra.s	loc_12FC2

Obj01_ResetScr:				; ...
		cmpi.w	#$60,($FFFFF73E).w ; is	screen in its default position?
		beq.s	loc_12FC2	; if yes, branch
		bcc.s	loc_12FBE
		addq.w	#4,($FFFFF73E).w ; move	screen back to default

loc_12FBE:				; ...
		subq.w	#2,($FFFFF73E).w ; move	screen back to default

loc_12FC2:				; ...
		move.b	($FFFFF602).w,d0
		andi.b	#$C,d0		; is left/right	pressed?
		bne.s	loc_12FEE	; if yes, branch
		move.w	$14(a0),d0
		beq.s	loc_12FEE
		bmi.s	loc_12FE2
		sub.w	d5,d0
		bcc.s	loc_12FDC
		move.w	#0,d0

loc_12FDC:				; ...
		move.w	d0,$14(a0)
		bra.s	loc_12FEE

loc_12FE2:				; ...
		add.w	d5,d0
		bcc.s	loc_12FEA
		move.w	#0,d0

loc_12FEA:				; ...
		move.w	d0,$14(a0)

loc_12FEE:				; ...
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		muls.w	$14(a0),d1
		asr.l	#8,d1
		move.w	d1,$10(a0)
		muls.w	$14(a0),d0
		asr.l	#8,d0
		move.w	d0,$12(a0)

loc_1300C:				; ...
		move.b	$26(a0),d0
		addi.b	#$40,d0
		bmi.s	locret_1307C
		move.b	#$40,d1
		tst.w	$14(a0)
		beq.s	locret_1307C
		bmi.s	loc_13024
		neg.w	d1

loc_13024:				; ...
		move.b	$26(a0),d0
		add.b	d1,d0
		move.w	d0,-(sp)
		bsr.w	Sonic_WalkSpeed
		move.w	(sp)+,d0
		tst.w	d1
		bpl.s	locret_1307C
		asl.w	#8,d1
		addi.b	#$20,d0
		andi.b	#$C0,d0
		beq.s	loc_13078
		cmpi.b	#$40,d0
		beq.s	loc_13066
		cmpi.b	#$80,d0
		beq.s	loc_13060
		add.w	d1,$10(a0)
		bset	#5,$22(a0)
		move.w	#0,$14(a0)
		rts	

loc_13060:				; ...
		sub.w	d1,$12(a0)
		rts	

loc_13066:				; ...
		sub.w	d1,$10(a0)
		bset	#5,$22(a0)
		move.w	#0,$14(a0)
		rts	

loc_13078:				; ...
		add.w	d1,$12(a0)

locret_1307C:				; ...
		rts	
; End of function Sonic_Move


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_MoveLeft:				; ...
		move.w	$14(a0),d0
		beq.s	loc_13086
		bpl.s	loc_130B2

loc_13086:				; ...
		bset	#0,$22(a0)
		bne.s	loc_1309A
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)

loc_1309A:				; ...
		sub.w	d5,d0
		move.w	d6,d1
		neg.w	d1
		cmp.w	d1,d0
		bgt.s	loc_130A6
		move.w	d1,d0

loc_130A6:				; ...
		move.w	d0,$14(a0)
		move.b	#0,$1C(a0)	; use walking animation
		rts	

loc_130B2:				; ...
		sub.w	d4,d0
		bcc.s	loc_130BA
		move.w	#-$80,d0

loc_130BA:				; ...
		move.w	d0,$14(a0)
		move.b	$26(a0),d0
		addi.b	#$20,d0
		andi.b	#$C0,d0
		bne.s	locret_130E8
		cmpi.w	#$400,d0
		blt.s	locret_130E8
		move.b	#$D,$1C(a0)	; use "stopping" animation
		bclr	#0,$22(a0)
		move.w	#$A4,d0
		jsr	$880000+(PlaySound_Special).l ;	play stopping sound

locret_130E8:				; ...
		rts	
; End of function Sonic_MoveLeft


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_MoveRight:			; ...
		move.w	$14(a0),d0
		bmi.s	loc_13118
		bclr	#0,$22(a0)
		beq.s	loc_13104
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)

loc_13104:				; ...
		add.w	d5,d0
		cmp.w	d6,d0
		blt.s	loc_1310C
		move.w	d6,d0

loc_1310C:				; ...
		move.w	d0,$14(a0)
		move.b	#0,$1C(a0)	; use walking animation
		rts	

loc_13118:				; ...
		add.w	d4,d0
		bcc.s	loc_13120
		move.w	#$80,d0

loc_13120:				; ...
		move.w	d0,$14(a0)
		move.b	$26(a0),d0
		addi.b	#$20,d0
		andi.b	#$C0,d0
		bne.s	locret_1314E
		cmpi.w	#-$400,d0
		bgt.s	locret_1314E
		move.b	#$D,$1C(a0)	; use "stopping" animation
		bset	#0,$22(a0)
		move.w	#$A4,d0
		jsr	$880000+(PlaySound_Special).l ;	play stopping sound

locret_1314E:				; ...
		rts	
; End of function Sonic_MoveRight

; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's speed as he rolls
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_RollSpeed:			; ...
		move.w	($FFFFF760).w,d6
		asl.w	#1,d6
		move.w	($FFFFF762).w,d5
		asr.w	#1,d5
		move.w	($FFFFF764).w,d4
		asr.w	#2,d4
		tst.b	($FFFFF7CA).w
		bne.w	loc_131CC
		tst.w	$3E(a0)
		bne.s	loc_13188
		btst	#2,($FFFFF602).w ; is left being pressed?
		beq.s	loc_1317C	; if not, branch
		bsr.w	Sonic_RollLeft

loc_1317C:				; ...
		btst	#3,($FFFFF602).w ; is right being pressed?
		beq.s	loc_13188	; if not, branch
		bsr.w	Sonic_RollRight

loc_13188:				; ...
		move.w	$14(a0),d0
		beq.s	loc_131AA
		bmi.s	loc_1319E
		sub.w	d5,d0
		bcc.s	loc_13198
		move.w	#0,d0

loc_13198:				; ...
		move.w	d0,$14(a0)
		bra.s	loc_131AA

loc_1319E:				; ...
		add.w	d5,d0
		bcc.s	loc_131A6
		move.w	#0,d0

loc_131A6:				; ...
		move.w	d0,$14(a0)

loc_131AA:				; ...
		tst.w	$14(a0)		; is Sonic moving?
		bne.s	loc_131CC	; if yes, branch
		bclr	#2,$22(a0)
		move.b	#$13,$16(a0)
		move.b	#9,$17(a0)
		move.b	#5,$1C(a0)	; use "standing" animation
		subq.w	#5,$C(a0)

loc_131CC:				; ...
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		muls.w	$14(a0),d0
		asr.l	#8,d0
		move.w	d0,$12(a0)
		muls.w	$14(a0),d1
		asr.l	#8,d1
		cmpi.w	#$1000,d1
		ble.s	loc_131F0
		move.w	#$1000,d1

loc_131F0:				; ...
		cmpi.w	#-$1000,d1
		bge.s	loc_131FA
		move.w	#-$1000,d1

loc_131FA:				; ...
		move.w	d1,$10(a0)
		bra.w	loc_1300C
; End of function Sonic_RollSpeed


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_RollLeft:				; ...
		move.w	$14(a0),d0
		beq.s	loc_1320A
		bpl.s	loc_13218

loc_1320A:				; ...
		bset	#0,$22(a0)
		move.b	#2,$1C(a0)	; use "rolling"	animation
		rts	

loc_13218:				; ...
		sub.w	d4,d0
		bcc.s	loc_13220
		move.w	#-$80,d0

loc_13220:				; ...
		move.w	d0,$14(a0)
		rts	
; End of function Sonic_RollLeft


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_RollRight:			; ...
		move.w	$14(a0),d0
		bmi.s	loc_1323A
		bclr	#0,$22(a0)
		move.b	#2,$1C(a0)	; use "rolling"	animation
		rts	

loc_1323A:				; ...
		add.w	d4,d0
		bcc.s	loc_13242
		move.w	#$80,d0

loc_13242:				; ...
		move.w	d0,$14(a0)
		rts	
; End of function Sonic_RollRight

; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's direction while jumping
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_ChgJumpDir:			; ...
		move.w	($FFFFF760).w,d6
		move.w	($FFFFF762).w,d5
		asl.w	#1,d5
		btst	#4,$22(a0)
		bne.s	Obj01_ResetScr2
		move.w	$10(a0),d0
		btst	#2,($FFFFF602).w ; is left being pressed?
		beq.s	loc_13278	; if not, branch
		bset	#0,$22(a0)
		sub.w	d5,d0
		move.w	d6,d1
		neg.w	d1
		cmp.w	d1,d0
		bgt.s	loc_13278
		move.w	d1,d0

loc_13278:				; ...
		btst	#3,($FFFFF602).w ; is right being pressed?
		beq.s	Obj01_JumpMove	; if not, branch
		bclr	#0,$22(a0)
		add.w	d5,d0
		cmp.w	d6,d0
		blt.s	Obj01_JumpMove
		move.w	d6,d0

Obj01_JumpMove:				; ...
		move.w	d0,$10(a0)	; change Sonic's horizontal speed

Obj01_ResetScr2:			; ...
		cmpi.w	#$60,($FFFFF73E).w ; is	the screen in its default position?
		beq.s	loc_132A4	; if yes, branch
		bcc.s	loc_132A0
		addq.w	#4,($FFFFF73E).w

loc_132A0:				; ...
		subq.w	#2,($FFFFF73E).w

loc_132A4:				; ...
		cmpi.w	#-$400,$12(a0)	; is Sonic moving faster than -$400 upwards?
		bcs.s	locret_132D2	; if yes, branch
		move.w	$10(a0),d0
		move.w	d0,d1
		asr.w	#5,d1
		beq.s	locret_132D2
		bmi.s	loc_132C6
		sub.w	d1,d0
		bcc.s	loc_132C0
		move.w	#0,d0

loc_132C0:				; ...
		move.w	d0,$10(a0)
		rts	

loc_132C6:				; ...
		sub.w	d1,d0
		bcs.s	loc_132CE
		move.w	#0,d0

loc_132CE:				; ...
		move.w	d0,$10(a0)

locret_132D2:				; ...
		rts	
; End of function Sonic_ChgJumpDir

; ---------------------------------------------------------------------------
; Unused subroutine to squash Sonic
; ---------------------------------------------------------------------------
		move.b	$26(a0),d0
		addi.b	#$20,d0
		andi.b	#$C0,d0
		bne.s	locret_13302
		bsr.w	Sonic_DontRunOnWalls
		tst.w	d1
		bpl.s	locret_13302
		move.w	#0,$14(a0)	; stop Sonic moving
		move.w	#0,$10(a0)
		move.w	#0,$12(a0)
		move.b	#$B,$1C(a0)	; use "warping"	animation

locret_13302:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	prevent	Sonic leaving the boundaries of	a level
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_LevelBound:			; ...
		move.l	8(a0),d1
		move.w	$10(a0),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d1
		swap	d1
		move.w	($FFFFF728).w,d0
		addi.w	#$10,d0
		cmp.w	d1,d0		; has Sonic touched the	side boundary?
		bhi.s	Boundary_Sides	; if yes, branch
		move.w	($FFFFF72A).w,d0
		addi.w	#$128,d0
		tst.b	($FFFFF7AA).w
		bne.s	loc_13332
		addi.w	#$40,d0

loc_13332:				; ...
		cmp.w	d1,d0		; has Sonic touched the	side boundary?
		bls.s	Boundary_Sides	; if yes, branch

loc_13336:				; ...
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0	; has Sonic touched the	bottom boundary?
		blt.s	Boundary_Bottom	; if yes, branch
		rts	

Boundary_Bottom:			; ...
		cmpi.w	#$501,($FFFFFE10).w ; is level SBZ2 ?
		bne.w	KillSonic	; if not, kill Sonic
		cmpi.w	#$2000,($FFFFD008).w
		bcs.w	KillSonic
		clr.b	($FFFFFE30).w	; clear	lamppost counter
		move.w	#1,($FFFFFE02).w ; restart the level
		move.w	#$103,($FFFFFE10).w ; set level	to SBZ3	(LZ4)
		rts	

Boundary_Sides:				; ...
		move.w	d0,8(a0)
		move.w	#0,$A(a0)
		move.w	#0,$10(a0)	; stop Sonic moving
		move.w	#0,$14(a0)
		bra.s	loc_13336
; End of function Sonic_LevelBound

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to roll when he's moving
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Roll:				; ...
		tst.b	($FFFFF7CA).w
		bne.s	Obj01_NoRoll
		move.w	$14(a0),d0
		bpl.s	loc_13392
		neg.w	d0

loc_13392:				; ...
		cmpi.w	#$80,d0		; is Sonic moving at $80 speed or faster?
		bcs.s	Obj01_NoRoll	; if not, branch
		move.b	($FFFFF602).w,d0
		andi.b	#$C,d0		; is left/right	being pressed?
		bne.s	Obj01_NoRoll	; if yes, branch
		btst	#1,($FFFFF602).w ; is down being pressed?
		bne.s	Obj01_ChkRoll	; if yes, branch

Obj01_NoRoll:				; ...
		rts	

Obj01_ChkRoll:				; ...
		btst	#2,$22(a0)	; is Sonic already rolling?
		beq.s	Obj01_DoRoll	; if not, branch
		rts	

Obj01_DoRoll:				; ...
		bset	#2,$22(a0)
		move.b	#$E,$16(a0)
		move.b	#7,$17(a0)
		move.b	#2,$1C(a0)	; use "rolling"	animation
		addq.w	#5,$C(a0)
		move.w	#$BE,d0
		jsr	$880000+(PlaySound_Special).l ;	play rolling sound
		tst.w	$14(a0)
		bne.s	locret_133E8
		move.w	#$200,$14(a0)

locret_133E8:				; ...
		rts	
; End of function Sonic_Roll

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to jump
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Jump:				; ...
		move.b	($FFFFF603).w,d0
		andi.b	#$70,d0		; is A,	B or C pressed?
		beq.w	locret_1348E	; if not, branch
		moveq	#0,d0
		move.b	$26(a0),d0
		addi.b	#$80,d0
		bsr.w	sub_14D48
		cmpi.w	#6,d1
		blt.w	locret_1348E
		move.w	#$680,d2
		btst	#6,$22(a0)
		beq.s	loc_1341C
		move.w	#$380,d2

loc_1341C:				; ...
		moveq	#0,d0
		move.b	$26(a0),d0
		subi.b	#$40,d0
		jsr	$880000+(CalcSine).l
		muls.w	d2,d1
		asr.l	#8,d1
		add.w	d1,$10(a0)	; make Sonic jump
		muls.w	d2,d0
		asr.l	#8,d0
		add.w	d0,$12(a0)	; make Sonic jump
		bset	#1,$22(a0)
		bclr	#5,$22(a0)
		addq.l	#4,sp
		move.b	#1,$3C(a0)
		clr.b	$38(a0)
		move.w	#$A0,d0
		jsr	$880000+(PlaySound_Special).l ;	play jumping sound
		move.b	#$13,$16(a0)
		move.b	#9,$17(a0)
		btst	#2,$22(a0)
		bne.s	loc_13490
		move.b	#$E,$16(a0)
		move.b	#7,$17(a0)
		move.b	#2,$1C(a0)	; use "jumping"	animation
		bset	#2,$22(a0)
		addq.w	#5,$C(a0)

locret_1348E:				; ...
		rts	

loc_13490:				; ...
		bset	#4,$22(a0)
		rts	
; End of function Sonic_Jump


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_JumpHeight:			; ...
		tst.b	$3C(a0)
		beq.s	loc_134C4
		move.w	#-$400,d1
		btst	#6,$22(a0)
		beq.s	loc_134AE
		move.w	#-$200,d1

loc_134AE:				; ...
		cmp.w	$12(a0),d1
		ble.s	locret_134C2
		move.b	($FFFFF602).w,d0
		andi.b	#$70,d0		; is A,	B or C pressed?
		bne.s	locret_134C2	; if yes, branch
		move.w	d1,$12(a0)

locret_134C2:				; ...
		rts	

loc_134C4:				; ...
		cmpi.w	#-$FC0,$12(a0)
		bge.s	locret_134D2
		move.w	#-$FC0,$12(a0)

locret_134D2:				; ...
		rts	
; End of function Sonic_JumpHeight

; ---------------------------------------------------------------------------
; Subroutine to	slow Sonic walking up a	slope
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_SlopeResist:			; ...
		move.b	$26(a0),d0
		addi.b	#$60,d0
		cmpi.b	#$C0,d0
		bcc.s	locret_13508
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		muls.w	#$20,d0
		asr.l	#8,d0
		tst.w	$14(a0)
		beq.s	locret_13508
		bmi.s	loc_13504
		tst.w	d0
		beq.s	locret_13502
		add.w	d0,$14(a0)	; change Sonic's inertia

locret_13502:				; ...
		rts	

loc_13504:				; ...
		add.w	d0,$14(a0)

locret_13508:				; ...
		rts	
; End of function Sonic_SlopeResist

; ---------------------------------------------------------------------------
; Subroutine to	push Sonic down	a slope	while he's rolling
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_RollRepel:			; ...
		move.b	$26(a0),d0
		addi.b	#$60,d0
		cmpi.b	#-$40,d0
		bcc.s	locret_13544
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		muls.w	#$50,d0
		asr.l	#8,d0
		tst.w	$14(a0)
		bmi.s	loc_1353A
		tst.w	d0
		bpl.s	loc_13534
		asr.l	#2,d0

loc_13534:				; ...
		add.w	d0,$14(a0)
		rts	

loc_1353A:				; ...
		tst.w	d0
		bmi.s	loc_13540
		asr.l	#2,d0

loc_13540:				; ...
		add.w	d0,$14(a0)

locret_13544:				; ...
		rts	
; End of function Sonic_RollRepel

; ---------------------------------------------------------------------------
; Subroutine to	push Sonic down	a slope
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_SlopeRepel:			; ...
		nop	
		tst.b	$38(a0)
		bne.s	locret_13580
		tst.w	$3E(a0)
		bne.s	loc_13582
		move.b	$26(a0),d0
		addi.b	#$20,d0
		andi.b	#$C0,d0
		beq.s	locret_13580
		move.w	$14(a0),d0
		bpl.s	loc_1356A
		neg.w	d0

loc_1356A:				; ...
		cmpi.w	#$280,d0
		bcc.s	locret_13580
		clr.w	$14(a0)
		bset	#1,$22(a0)
		move.w	#$1E,$3E(a0)

locret_13580:				; ...
		rts	

loc_13582:				; ...
		subq.w	#1,$3E(a0)
		rts	
; End of function Sonic_SlopeRepel

; ---------------------------------------------------------------------------
; Subroutine to	return Sonic's angle to 0 as he jumps
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_JumpAngle:			; ...
		move.b	$26(a0),d0	; get Sonic's angle
		beq.s	locret_135A2	; if already 0,	branch
		bpl.s	loc_13598	; if higher than 0, branch

		addq.b	#2,d0		; increase angle
		bcc.s	loc_13596
		moveq	#0,d0

loc_13596:				; ...
		bra.s	loc_1359E

loc_13598:				; ...
		subq.b	#2,d0		; decrease angle
		bcc.s	loc_1359E
		moveq	#0,d0

loc_1359E:				; ...
		move.b	d0,$26(a0)

locret_135A2:				; ...
		rts	
; End of function Sonic_JumpAngle

; ---------------------------------------------------------------------------
; Subroutine for Sonic to interact with	the floor after	jumping/falling
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Floor:				; ...
		move.w	$10(a0),d1
		move.w	$12(a0),d2
		jsr	$880000+(CalcAngle).l
		move.b	d0,($FFFFFFEC).w
		subi.b	#$20,d0
		move.b	d0,($FFFFFFED).w
		andi.b	#$C0,d0
		move.b	d0,($FFFFFFEE).w
		cmpi.b	#$40,d0
		beq.w	loc_13680
		cmpi.b	#$80,d0
		beq.w	loc_136E2
		cmpi.b	#-$40,d0
		beq.w	loc_1373E
		bsr.w	Sonic_HitWall
		tst.w	d1
		bpl.s	loc_135F0
		sub.w	d1,8(a0)
		move.w	#0,$10(a0)

loc_135F0:				; ...
		bsr.w	sub_14EB4
		tst.w	d1
		bpl.s	loc_13602
		add.w	d1,8(a0)
		move.w	#0,$10(a0)

loc_13602:				; ...
		bsr.w	Sonic_HitFloor
		move.b	d1,($FFFFFFEF).w
		tst.w	d1
		bpl.s	locret_1367E
		move.b	$12(a0),d2
		addq.b	#8,d2
		neg.b	d2
		cmp.b	d2,d1
		bge.s	loc_1361E
		cmp.b	d2,d0
		blt.s	locret_1367E

loc_1361E:				; ...
		add.w	d1,$C(a0)
		move.b	d3,$26(a0)
		bsr.w	Sonic_ResetOnFloor
		move.b	#0,$1C(a0)
		move.b	d3,d0
		addi.b	#$20,d0
		andi.b	#$40,d0
		bne.s	loc_1365C
		move.b	d3,d0
		addi.b	#$10,d0
		andi.b	#$20,d0
		beq.s	loc_1364E
		asr	$12(a0)
		bra.s	loc_13670

loc_1364E:				; ...
		move.w	#0,$12(a0)
		move.w	$10(a0),$14(a0)
		rts	

loc_1365C:				; ...
		move.w	#0,$10(a0)
		cmpi.w	#$FC0,$12(a0)
		ble.s	loc_13670
		move.w	#$FC0,$12(a0)

loc_13670:				; ...
		move.w	$12(a0),$14(a0)
		tst.b	d3
		bpl.s	locret_1367E
		neg.w	$14(a0)

locret_1367E:				; ...
		rts	

loc_13680:				; ...
		bsr.w	Sonic_HitWall
		tst.w	d1
		bpl.s	loc_1369A
		sub.w	d1,8(a0)
		move.w	#0,$10(a0)
		move.w	$12(a0),$14(a0)
		rts	

loc_1369A:				; ...
		bsr.w	Sonic_DontRunOnWalls
		tst.w	d1
		bpl.s	loc_136B4
		sub.w	d1,$C(a0)
		tst.w	$12(a0)
		bpl.s	locret_136B2
		move.w	#0,$12(a0)

locret_136B2:				; ...
		rts	

loc_136B4:				; ...
		tst.w	$12(a0)
		bmi.s	locret_136E0
		bsr.w	Sonic_HitFloor
		tst.w	d1
		bpl.s	locret_136E0
		add.w	d1,$C(a0)
		move.b	d3,$26(a0)
		bsr.w	Sonic_ResetOnFloor
		move.b	#0,$1C(a0)
		move.w	#0,$12(a0)
		move.w	$10(a0),$14(a0)

locret_136E0:				; ...
		rts	

loc_136E2:				; ...
		bsr.w	Sonic_HitWall
		tst.w	d1
		bpl.s	loc_136F4
		sub.w	d1,8(a0)
		move.w	#0,$10(a0)

loc_136F4:				; ...
		bsr.w	sub_14EB4
		tst.w	d1
		bpl.s	loc_13706
		add.w	d1,8(a0)
		move.w	#0,$10(a0)

loc_13706:				; ...
		bsr.w	Sonic_DontRunOnWalls
		tst.w	d1
		bpl.s	locret_1373C
		sub.w	d1,$C(a0)
		move.b	d3,d0
		addi.b	#$20,d0
		andi.b	#$40,d0
		bne.s	loc_13726
		move.w	#0,$12(a0)
		rts	

loc_13726:				; ...
		move.b	d3,$26(a0)
		bsr.w	Sonic_ResetOnFloor
		move.w	$12(a0),$14(a0)
		tst.b	d3
		bpl.s	locret_1373C
		neg.w	$14(a0)

locret_1373C:				; ...
		rts	

loc_1373E:				; ...
		bsr.w	sub_14EB4
		tst.w	d1
		bpl.s	loc_13758
		add.w	d1,8(a0)
		move.w	#0,$10(a0)
		move.w	$12(a0),$14(a0)
		rts	

loc_13758:				; ...
		bsr.w	Sonic_DontRunOnWalls
		tst.w	d1
		bpl.s	loc_13772
		sub.w	d1,$C(a0)
		tst.w	$12(a0)
		bpl.s	locret_13770
		move.w	#0,$12(a0)

locret_13770:				; ...
		rts	

loc_13772:				; ...
		tst.w	$12(a0)
		bmi.s	locret_1379E
		bsr.w	Sonic_HitFloor
		tst.w	d1
		bpl.s	locret_1379E
		add.w	d1,$C(a0)
		move.b	d3,$26(a0)
		bsr.w	Sonic_ResetOnFloor
		move.b	#0,$1C(a0)
		move.w	#0,$12(a0)
		move.w	$10(a0),$14(a0)

locret_1379E:				; ...
		rts	
; End of function Sonic_Floor

; ---------------------------------------------------------------------------
; Subroutine to	reset Sonic's mode when he lands on the floor
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_ResetOnFloor:			; ...
		btst	#4,$22(a0)
		beq.s	loc_137AE
		nop	
		nop	
		nop	

loc_137AE:				; ...
		bclr	#5,$22(a0)
		bclr	#1,$22(a0)
		bclr	#4,$22(a0)
		btst	#2,$22(a0)
		beq.s	loc_137E4
		bclr	#2,$22(a0)
		move.b	#$13,$16(a0)
		move.b	#9,$17(a0)
		move.b	#0,$1C(a0)	; use running/walking animation
		subq.w	#5,$C(a0)

loc_137E4:				; ...
		move.b	#0,$3C(a0)
		move.w	#0,($FFFFF7D0).w
		rts	
; End of function Sonic_ResetOnFloor

; ---------------------------------------------------------------------------
; Sonic	when he	gets hurt
; ---------------------------------------------------------------------------

Obj01_Hurt:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$30,$12(a0)
		btst	#6,$22(a0)
		beq.s	loc_1380C
		subi.w	#$20,$12(a0)

loc_1380C:				; ...
		bsr.w	Sonic_HurtStop
		bsr.w	Sonic_LevelBound
		bsr.w	Sonic_RecordPos
		bsr.w	Sonic_Animate
		bsr.w	LoadSonicDynPLC
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Subroutine to	stop Sonic falling after he's been hurt
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_HurtStop:				; ...
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0
		bcs.w	KillSonic
		bsr.w	Sonic_Floor
		btst	#1,$22(a0)
		bne.s	locret_13860
		moveq	#0,d0
		move.w	d0,$12(a0)
		move.w	d0,$10(a0)
		move.w	d0,$14(a0)
		move.b	#0,$1C(a0)
		subq.b	#2,$24(a0)
		move.w	#$78,$30(a0)

locret_13860:				; ...
		rts	
; End of function Sonic_HurtStop

; ---------------------------------------------------------------------------
; Sonic	when he	dies
; ---------------------------------------------------------------------------

Obj01_Death:				; ...
		bsr.w	GameOver
		jsr	$880000+ObjectFall
		bsr.w	Sonic_RecordPos
		bsr.w	Sonic_Animate
		bsr.w	LoadSonicDynPLC
		jmp	$880000+DisplaySprite

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


GameOver:				; ...
		move.w	($FFFFF72E).w,d0
		addi.w	#$100,d0
		cmp.w	$C(a0),d0
		bcc.w	locret_13900
		move.w	#-$38,$12(a0)
		addq.b	#2,$24(a0)
		clr.b	($FFFFFE1E).w	; stop time counter
		addq.b	#1,($FFFFFE1C).w ; update lives	counter
		subq.b	#1,($FFFFFE12).w ; subtract 1 from number of lives
		bne.s	loc_138D4
		move.w	#0,$3A(a0)
		move.b	#$39,($FFFFD080).w ; load GAME object
		move.b	#$39,($FFFFD0C0).w ; load OVER object
		move.b	#1,($FFFFD0DA).w ; set OVER object to correct frame
		clr.b	($FFFFFE1A).w

loc_138C2:				; ...
		move.w	#$8F,d0
		jsr	$880000+(PlaySound).l	; play game over music
		moveq	#3,d0
		jmp	$880000+(LoadPLC).l	; load game over patterns

loc_138D4:				; ...
		move.w	#60,$3A(a0)	; set time delay to 1 second
		tst.b	($FFFFFE1A).w	; is TIME OVER tag set?
		beq.s	locret_13900	; if not, branch
		move.w	#0,$3A(a0)
		move.b	#$39,($FFFFD080).w ; load TIME object
		move.b	#$39,($FFFFD0C0).w ; load OVER object
		move.b	#2,($FFFFD09A).w
		move.b	#3,($FFFFD0DA).w
		bra.s	loc_138C2

locret_13900:				; ...
		rts	
; End of function GameOver

; ---------------------------------------------------------------------------
; Sonic	when the level is restarted
; ---------------------------------------------------------------------------

Obj01_ResetLevel:			; ...
		tst.w	$3A(a0)
		beq.s	locret_13914
		subq.w	#1,$3A(a0)	; subtract 1 from time delay
		bne.s	locret_13914
		move.w	#1,($FFFFFE02).w ; restart the level

locret_13914:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	make Sonic run around loops (GHZ/SLZ)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Loops:				; ...
		cmpi.b	#3,($FFFFFE10).w ; is level SLZ	?
		beq.s	loc_13926	; if yes, branch
		tst.b	($FFFFFE10).w	; is level GHZ ?
		bne.w	locret_139C2	; if not, branch

loc_13926:				; ...
		move.w	$C(a0),d0
		lsr.w	#1,d0
		andi.w	#$380,d0
		move.b	8(a0),d1
		andi.w	#$7F,d1
		add.w	d1,d0
		lea	($FFFFA400).w,a1
		move.b	(a1,d0.w),d1	; d1 is	the 256x256 tile Sonic is currently on
		cmp.b	($FFFFF7AE).w,d1
		beq.w	Obj01_ChkRoll
		cmp.b	($FFFFF7AF).w,d1
		beq.w	Obj01_ChkRoll
		cmp.b	($FFFFF7AC).w,d1
		beq.s	loc_13976
		cmp.b	($FFFFF7AD).w,d1
		beq.s	loc_13966
		bclr	#6,1(a0)
		rts	

loc_13966:				; ...
		btst	#1,$22(a0)
		beq.s	loc_13976
		bclr	#6,1(a0)	; send Sonic to	high plane
		rts	

loc_13976:				; ...
		move.w	8(a0),d2
		cmpi.b	#$2C,d2
		bcc.s	loc_13988
		bclr	#6,1(a0)	; send Sonic to	high plane
		rts	

loc_13988:				; ...
		cmpi.b	#-$20,d2
		bcs.s	loc_13996
		bset	#6,1(a0)	; send Sonic to	low plane
		rts	

loc_13996:				; ...
		btst	#6,1(a0)
		bne.s	loc_139B2
		move.b	$26(a0),d1
		beq.s	locret_139C2
		cmpi.b	#-$80,d1
		bhi.s	locret_139C2
		bset	#6,1(a0)	; send Sonic to	low plane
		rts	

loc_139B2:				; ...
		move.b	$26(a0),d1
		cmpi.b	#-$80,d1
		bls.s	locret_139C2
		bclr	#6,1(a0)	; send Sonic to	high plane

locret_139C2:				; ...
		rts	
; End of function Sonic_Loops

; ---------------------------------------------------------------------------
; Subroutine to	animate	Sonic's sprites
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Animate:				; ...
		lea	(SonicAniData)(pc),a1
		moveq	#0,d0
		move.b	$1C(a0),d0
		cmp.b	$1D(a0),d0	; is animation set to restart?
		beq.s	SAnim_Do	; if not, branch
		move.b	d0,$1D(a0)	; set to "no restart"
		move.b	#0,$1B(a0)	; reset	animation
		move.b	#0,$1E(a0)	; reset	frame duration

SAnim_Do:				; ...
		add.w	d0,d0
		adda.w	(a1,d0.w),a1	; jump to appropriate animation	script
		move.b	(a1),d0
		bmi.s	SAnim_WalkRun	; if animation is walk/run/roll/jump, branch
		move.b	$22(a0),d1
		andi.b	#1,d1
		andi.b	#$FC,1(a0)
		or.b	d1,1(a0)
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	SAnim_Delay	; if time remains, branch
		move.b	d0,$1E(a0)	; load frame duration

SAnim_Do2:				; ...
		moveq	#0,d1
		move.b	$1B(a0),d1	; load current frame number
		move.b	1(a1,d1.w),d0	; read sprite number from script
		bmi.s	SAnim_End_FF	; if animation is complete, branch

SAnim_Next:				; ...
		move.b	d0,$1A(a0)	; load sprite number
		addq.b	#1,$1B(a0)	; next frame number

SAnim_Delay:				; ...
		rts	

SAnim_End_FF:				; ...
		addq.b	#1,d0		; is the end flag = $FF	?
		bne.s	SAnim_End_FE	; if not, branch
		move.b	#0,$1B(a0)	; restart the animation
		move.b	1(a1),d0	; read sprite number
		bra.s	SAnim_Next

SAnim_End_FE:				; ...
		addq.b	#1,d0		; is the end flag = $FE	?
		bne.s	SAnim_End_FD	; if not, branch
		move.b	2(a1,d1.w),d0	; read the next	byte in	the script
		sub.b	d0,$1B(a0)	; jump back d0 bytes in	the script
		sub.b	d0,d1
		move.b	1(a1,d1.w),d0	; read sprite number
		bra.s	SAnim_Next

SAnim_End_FD:				; ...
		addq.b	#1,d0		; is the end flag = $FD	?
		bne.s	SAnim_End	; if not, branch
		move.b	2(a1,d1.w),$1C(a0) ; read next byte, run that animation

SAnim_End:				; ...
		rts	

SAnim_WalkRun:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	SAnim_Delay	; if time remains, branch
		addq.b	#1,d0		; is animation walking/running?
		bne.w	SAnim_RollJump	; if not, branch
		moveq	#0,d1
		move.b	$26(a0),d0	; get Sonic's angle
		move.b	$22(a0),d2
		andi.b	#1,d2		; is Sonic mirrored horizontally?
		bne.s	loc_13A70	; if yes, branch
		not.b	d0		; reverse angle

loc_13A70:				; ...
		addi.b	#$10,d0		; add $10 to angle
		bpl.s	loc_13A78	; if angle is $0-$7F, branch
		moveq	#3,d1

loc_13A78:				; ...
		andi.b	#$FC,1(a0)
		eor.b	d1,d2
		or.b	d2,1(a0)
		btst	#5,$22(a0)
		bne.w	SAnim_Push
		lsr.b	#4,d0		; divide angle by $10
		andi.b	#6,d0		; angle	must be	0, 2, 4	or 6
		move.w	$14(a0),d2	; get Sonic's speed
		bpl.s	loc_13A9C
		neg.w	d2

loc_13A9C:				; ...
		lea	(SonAni_Run)(pc),a1 ; use	running	animation
		cmpi.w	#$600,d2	; is Sonic at running speed?
		bcc.s	loc_13AB4	; if yes, branch
		lea	(SonAni_Walk)(pc),a1 ; use walking animation
		move.b	d0,d1
		lsr.b	#1,d1
		add.b	d1,d0

loc_13AB4:				; ...
		add.b	d0,d0
		move.b	d0,d3
		neg.w	d2
		addi.w	#$800,d2
		bpl.s	loc_13AC2
		moveq	#0,d2

loc_13AC2:				; ...
		lsr.w	#8,d2
		move.b	d2,$1E(a0)	; modify frame duration
		bsr.w	SAnim_Do2
		add.b	d3,$1A(a0)	; modify frame number
		rts	

SAnim_RollJump:				; ...
		addq.b	#1,d0		; is animation rolling/jumping?
		bne.s	SAnim_Push	; if not, branch
		move.w	$14(a0),d2	; get Sonic's speed
		bpl.s	loc_13ADE
		neg.w	d2

loc_13ADE:				; ...
		lea	(SonAni_Roll2)(pc),a1 ; use fast animation
		cmpi.w	#$600,d2	; is Sonic moving fast?
		bcc.s	loc_13AF0	; if yes, branch
		lea	(SonAni_Roll)(pc),a1 ; use slower	animation

loc_13AF0:				; ...
		neg.w	d2
		addi.w	#$400,d2
		bpl.s	loc_13AFA
		moveq	#0,d2

loc_13AFA:				; ...
		lsr.w	#8,d2
		move.b	d2,$1E(a0)	; modify frame duration
		move.b	$22(a0),d1
		andi.b	#1,d1
		andi.b	#$FC,1(a0)
		or.b	d1,1(a0)
		bra.w	SAnim_Do2

SAnim_Push:				; ...
		move.w	$14(a0),d2	; get Sonic's speed
		bmi.s	loc_13B1E
		neg.w	d2

loc_13B1E:				; ...
		addi.w	#$800,d2
		bpl.s	loc_13B26
		moveq	#0,d2

loc_13B26:				; ...
		lsr.w	#6,d2
		move.b	d2,$1E(a0)	; modify frame duration
		lea	(SonAni_Push)(pc),a1
		move.b	$22(a0),d1
		andi.b	#1,d1
		andi.b	#$FC,1(a0)
		or.b	d1,1(a0)
		bra.w	SAnim_Do2
; End of function Sonic_Animate

SonicAniData:	dc.w SonAni_Walk-SonicAniData, SonAni_Run-SonicAniData ; ...
		dc.w SonAni_Roll-SonicAniData, SonAni_Roll2-SonicAniData
		dc.w SonAni_Push-SonicAniData, SonAni_Wait-SonicAniData
		dc.w SonAni_Balance-SonicAniData, SonAni_LookUp-SonicAniData
		dc.w SonAni_Duck-SonicAniData, SonAni_Warp1-SonicAniData
		dc.w SonAni_Warp2-SonicAniData,	SonAni_Warp3-SonicAniData
		dc.w SonAni_Warp4-SonicAniData,	SonAni_Stop-SonicAniData
		dc.w SonAni_Float1-SonicAniData, SonAni_Float2-SonicAniData
		dc.w SonAni_Spring-SonicAniData, SonAni_LZHang-SonicAniData
		dc.w SonAni_Leap1-SonicAniData,	SonAni_Leap2-SonicAniData
		dc.w SonAni_Surf-SonicAniData, SonAni_Bubble-SonicAniData
		dc.w SonAni_Death1-SonicAniData, SonAni_Drown-SonicAniData
		dc.w SonAni_Death2-SonicAniData, SonAni_Shrink-SonicAniData
		dc.w SonAni_Hurt-SonicAniData, SonAni_LZSlide-SonicAniData
		dc.w SonAni_Blank-SonicAniData,	SonAni_Float3-SonicAniData
		dc.w SonAni_Float4-SonicAniData
SonAni_Walk:	dc.b $FF, 8, 9,	$A, $B,	6, 7, $FF ; ...
SonAni_Run:	dc.b $FF, $1E, $1F, $20, $21, $FF, $FF,	$FF ; ...
SonAni_Roll:	dc.b $FE, $2E, $2F, $30, $31, $32, $FF,	$FF ; ...
SonAni_Roll2:	dc.b $FE, $2E, $2F, $32, $30, $31, $32,	$FF ; ...
SonAni_Push:	dc.b $FD, $45, $46, $47, $48, $FF, $FF,	$FF ; ...
SonAni_Wait:	dc.b $17, 1, 1,	1, 1, 1, 1, 1, 1, 1, 1,	1, 1, 3, 2, 2 ;	...
		dc.b 2,	3, 4, $FE, 2, 0
SonAni_Balance:	dc.b $1F, $3A, $3B, $FF	; ...
SonAni_LookUp:	dc.b $3F, 5, $FF, 0	; ...
SonAni_Duck:	dc.b $3F, $39, $FF, 0	; ...
SonAni_Warp1:	dc.b $3F, $33, $FF, 0	; ...
SonAni_Warp2:	dc.b $3F, $34, $FF, 0	; ...
SonAni_Warp3:	dc.b $3F, $35, $FF, 0	; ...
SonAni_Warp4:	dc.b $3F, $36, $FF, 0	; ...
SonAni_Stop:	dc.b 7,	$37, $38, $FF	; ...
SonAni_Float1:	dc.b 7,	$3C, $3F, $FF	; ...
SonAni_Float2:	dc.b 7,	$3C, $3D, $53, $3E, $54, $FF, 0	; ...
SonAni_Spring:	dc.b $2F, $40, $FD, 0	; ...
SonAni_LZHang:	dc.b 4,	$41, $42, $FF	; ...
SonAni_Leap1:	dc.b $F, $43, $43, $43,	$FE, 1 ; ...
SonAni_Leap2:	dc.b $F, $43, $44, $FE,	1, 0 ; ...
SonAni_Surf:	dc.b $3F, $49, $FF, 0	; ...
SonAni_Bubble:	dc.b $B, $56, $56, $A, $B, $FD,	0, 0 ; ...
SonAni_Death1:	dc.b $20, $4B, $FF, 0	; ...
SonAni_Drown:	dc.b $2F, $4C, $FF, 0	; ...
SonAni_Death2:	dc.b 3,	$4D, $FF, 0	; ...
SonAni_Shrink:	dc.b 3,	$4E, $4F, $50, $51, $52, 0, $FE, 1, 0 ;	...
SonAni_Hurt:	dc.b 3,	$55, $FF, 0	; ...
SonAni_LZSlide:	dc.b 7,	$55, $57, $FF	; ...
SonAni_Blank:	dc.b $77, 0, $FD, 0	; ...
SonAni_Float3:	dc.b 3,	$3C, $3D, $53, $3E, $54, $FF, 0	; ...
SonAni_Float4:	dc.b 3,	$3C, $FD, 0	; ...
; ---------------------------------------------------------------------------
; Sonic	pattern	loading	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadSonicDynPLC:			; ...
		moveq	#0,d0
		move.b	$1A(a0),d0	; load frame number
		cmp.b	($FFFFF766).w,d0
		beq.s	locret_13C96
		move.b	d0,($FFFFF766).w
		lea	$900000+(SonicDynPLC),a2
		add.w	d0,d0
		adda.w	(a2,d0.w),a2
		moveq	#0,d1
		move.b	(a2)+,d1	; read "number of entries" value
		subq.b	#1,d1
		bmi.s	locret_13C96
		lea	($FFFFC800).w,a3
		move.b	#1,($FFFFF767).w

SPLC_ReadEntry:				; ...
		moveq	#0,d2
		move.b	(a2)+,d2
		move.w	d2,d0
		lsr.b	#4,d0
		lsl.w	#8,d2
		move.b	(a2)+,d2
		lsl.w	#5,d2
		lea	$900000+(Art_Sonic),a1
		adda.l	d2,a1

SPLC_LoadTile:				; ...
		movem.l	(a1)+,d2-d6/a4-a6
		movem.l	d2-d6/a4-a6,(a3)
		lea	$20(a3),a3	; next tile
		dbf	d0,SPLC_LoadTile ; repeat for number of	tiles
		dbf	d1,SPLC_ReadEntry ; repeat for number of entries

locret_13C96:				; ...
		rts	
; End of function LoadSonicDynPLC

; ---------------------------------------------------------------------------
; Object 0A - drowning countdown numbers and small bubbles (LZ)
; ---------------------------------------------------------------------------

Obj0A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0A_Index(pc,d0.w),d1
		jmp	Obj0A_Index(pc,d1.w)
Obj0A_Index:	dc.w Obj0A_Main-Obj0A_Index, Obj0A_Animate-Obj0A_Index ; ...
		dc.w Obj0A_ChkWater-Obj0A_Index, Obj0A_Display-Obj0A_Index
		dc.w Obj0A_Delete2-Obj0A_Index,	Obj0A_Countdown-Obj0A_Index
		dc.w Obj0A_AirLeft-Obj0A_Index,	Obj0A_Display-Obj0A_Index
		dc.w Obj0A_Delete2-Obj0A_Index

Obj0A_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj64,4(a0)
		move.w	#$8348,2(a0)
		move.b	#$84,1(a0)
		move.b	#$10,$19(a0)
		move.b	#1,$18(a0)
		move.b	$28(a0),d0
		bpl.s	loc_13D00
		addq.b	#8,$24(a0)
		move.l	#$880000+Map_obj0A,4(a0)
		move.w	#$440,2(a0)
		andi.w	#$7F,d0
		move.b	d0,$33(a0)
		bra.w	Obj0A_Countdown

loc_13D00:				; ...
		move.b	d0,$1C(a0)
		move.w	8(a0),$30(a0)
		move.w	#-$88,$12(a0)

Obj0A_Animate:				; ...
		lea	(Ani_obj0A)(pc),a1
		jsr	$880000+AnimateSprite

Obj0A_ChkWater:				; ...
		move.w	($FFFFF646).w,d0
		cmp.w	$C(a0),d0	; has bubble reached the water surface?
		bcs.s	Obj0A_Wobble	; if not, branch
		move.b	#6,$24(a0)
		addq.b	#7,$1C(a0)
		cmpi.b	#$D,$1C(a0)
		beq.s	Obj0A_Display
		bra.s	Obj0A_Display

Obj0A_Wobble:				; ...
		tst.b	($FFFFF7C7).w
		beq.s	loc_13D44
		addq.w	#4,$30(a0)

loc_13D44:				; ...
		move.b	$26(a0),d0
		addq.b	#1,$26(a0)
		andi.w	#$7F,d0
		lea	(Obj0A_WobbleData)(pc),a1
		move.b	(a1,d0.w),d0
		ext.w	d0
		add.w	$30(a0),d0
		move.w	d0,8(a0)
		bsr.s	Obj0A_ShowNumber
		jsr	$880000+SpeedToPos
		tst.b	1(a0)
		bpl.s	Obj0A_Delete
		jmp	$880000+DisplaySprite

Obj0A_Delete:				; ...
		jmp	$880000+DeleteObject

Obj0A_Display:				; ...
		bsr.s	Obj0A_ShowNumber
		lea	(Ani_obj0A)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj0A_Delete2:				; ...
		jmp	$880000+DeleteObject

Obj0A_AirLeft:				; ...
		cmpi.w	#$C,($FFFFFE14).w ; check air remaining
		bhi.s	Obj0A_Delete3	; if higher than $C, branch
		subq.w	#1,$38(a0)
		bne.s	Obj0A_Display2
		move.b	#$E,$24(a0)
		addq.b	#7,$1C(a0)
		bra.s	Obj0A_Display

Obj0A_Display2:				; ...
		lea	(Ani_obj0A)(pc),a1
		jsr	$880000+AnimateSprite
		tst.b	1(a0)
		bpl.s	Obj0A_Delete3
		jmp	$880000+DisplaySprite

Obj0A_Delete3:				; ...
		jmp	$880000+DeleteObject

Obj0A_ShowNumber:			; ...
		tst.w	$38(a0)
		beq.s	locret_13E1A
		subq.w	#1,$38(a0)
		bne.s	locret_13E1A
		cmpi.b	#7,$1C(a0)
		bcc.s	locret_13E1A
		move.w	#$F,$38(a0)
		clr.w	$12(a0)
		move.b	#$80,1(a0)
		move.w	8(a0),d0
		sub.w	($FFFFF700).w,d0
		addi.w	#$80,d0
		move.w	d0,8(a0)
		move.w	$C(a0),d0
		sub.w	($FFFFF704).w,d0
		addi.w	#$80,d0
		move.w	d0,$A(a0)
		move.b	#$C,$24(a0)

locret_13E1A:				; ...
		rts	
Obj0A_WobbleData:dc.b 0, 0, 0, 0, 0, 0,	1, 1, 1, 1, 1, 2, 2, 2,	2, 2, 2	; ...
		dc.b 2,	3, 3, 3, 3, 3, 3, 3, 3,	3, 3, 3, 3, 3, 3, 4, 3
		dc.b 3,	3, 3, 3, 3, 3, 3, 3, 3,	3, 3, 3, 3, 2, 2, 2, 2
		dc.b 2,	2, 2, 1, 1, 1, 1, 1, 0,	0, 0, 0, 0, 0, -1, -1
		dc.b -1, -1, -1, -2, -2, -2, -2, -2, -3, -3, -3, -3, -3
		dc.b -3, -3, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4
		dc.b -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4
		dc.b -4, -4, -4, -4, -4, -3, -3, -3, -3, -3, -3, -3, -2
		dc.b -2, -2, -2, -2, -1, -1, -1, -1, -1

Obj0A_Countdown:			; ...
		tst.w	$2C(a0)
		bne.w	loc_13F86
		cmpi.b	#6,($FFFFD024).w
		bcc.w	locret_1408C
		btst	#6,($FFFFD022).w
		beq.w	locret_1408C
		subq.w	#1,$38(a0)
		bpl.w	loc_13FAC
		move.w	#59,$38(a0)
		move.w	#1,$36(a0)
		jsr	$880000+(RandomNumber).l
		andi.w	#1,d0
		move.b	d0,$34(a0)
		move.w	($FFFFFE14).w,d0 ; check air remaining
		cmpi.w	#$19,d0
		beq.s	Obj0A_WarnSound	; play sound if	air is $19
		cmpi.w	#$14,d0
		beq.s	Obj0A_WarnSound
		cmpi.w	#$F,d0
		beq.s	Obj0A_WarnSound
		cmpi.w	#$C,d0
		bhi.s	Obj0A_ReduceAir	; if air is above $C, branch
		bne.s	loc_13F02
		move.w	#$92,d0
		jsr	$880000+(PlaySound).l	; play countdown music

loc_13F02:				; ...
		subq.b	#1,$32(a0)
		bpl.s	Obj0A_ReduceAir
		move.b	$33(a0),$32(a0)
		bset	#7,$36(a0)
		bra.s	Obj0A_ReduceAir

Obj0A_WarnSound:			; ...
		move.w	#$C2,d0
		jsr	$880000+(PlaySound_Special).l ;	play "ding-ding" warning sound

Obj0A_ReduceAir:			; ...
		subq.w	#1,($FFFFFE14).w ; subtract 1 from air remaining
		bcc.w	Obj0A_GoMakeItem ; if air is above 0, branch
		bsr.w	ResumeMusic
		move.b	#$81,($FFFFF7C8).w ; lock controls
		move.w	#$B2,d0
		jsr	$880000+(PlaySound_Special).l ;	play drowning sound
		move.b	#$A,$34(a0)
		move.w	#1,$36(a0)
		move.w	#$78,$2C(a0)
		move.l	a0,-(sp)
		lea	($FFFFD000).w,a0
		bsr.w	Sonic_ResetOnFloor
		move.b	#$17,$1C(a0)	; use Sonic's drowning animation
		bset	#1,$22(a0)
		bset	#7,2(a0)
		move.w	#0,$12(a0)
		move.w	#0,$10(a0)
		move.w	#0,$14(a0)
		move.b	#1,($FFFFF744).w
		movea.l	(sp)+,a0
		rts	

loc_13F86:				; ...
		subq.w	#1,$2C(a0)
		bne.s	loc_13F94
		move.b	#6,($FFFFD024).w
		rts	

loc_13F94:				; ...
		move.l	a0,-(sp)
		lea	($FFFFD000).w,a0
		jsr	$880000+SpeedToPos
		addi.w	#$10,$12(a0)
		movea.l	(sp)+,a0
		bra.s	loc_13FAC

Obj0A_GoMakeItem:			; ...
		bra.s	Obj0A_MakeItem

loc_13FAC:				; ...
		tst.w	$36(a0)
		beq.w	locret_1408C
		subq.w	#1,$3A(a0)
		bpl.w	locret_1408C

Obj0A_MakeItem:				; ...
		jsr	$880000+(RandomNumber).l
		andi.w	#$F,d0
		move.w	d0,$3A(a0)
		jsr	$880000+SingleObjLoad
		bne.w	locret_1408C
		move.b	#$A,0(a1)	; load object
		move.w	($FFFFD008).w,8(a1) ; match X position to Sonic
		moveq	#6,d0
		btst	#0,($FFFFD022).w
		beq.s	loc_13FF2
		neg.w	d0
		move.b	#$40,$26(a1)

loc_13FF2:				; ...
		add.w	d0,8(a1)
		move.w	($FFFFD00C).w,$C(a1)
		move.b	#6,$28(a1)
		tst.w	$2C(a0)
		beq.w	loc_1403E
		andi.w	#7,$3A(a0)
		addi.w	#0,$3A(a0)
		move.w	($FFFFD00C).w,d0
		subi.w	#$C,d0
		move.w	d0,$C(a1)
		jsr	$880000+(RandomNumber).l
		move.b	d0,$26(a1)
		move.w	($FFFFFE04).w,d0
		andi.b	#3,d0
		bne.s	loc_14082
		move.b	#$E,$28(a1)
		bra.s	loc_14082

loc_1403E:				; ...
		btst	#7,$36(a0)
		beq.s	loc_14082
		move.w	($FFFFFE14).w,d2
		lsr.w	#1,d2
		jsr	$880000+(RandomNumber).l
		andi.w	#3,d0
		bne.s	loc_1406A
		bset	#6,$36(a0)
		bne.s	loc_14082
		move.b	d2,$28(a1)
		move.w	#$1C,$38(a1)

loc_1406A:				; ...
		tst.b	$34(a0)
		bne.s	loc_14082
		bset	#6,$36(a0)
		bne.s	loc_14082
		move.b	d2,$28(a1)
		move.w	#$1C,$38(a1)

loc_14082:				; ...
		subq.b	#1,$34(a0)
		bpl.s	locret_1408C
		clr.w	$36(a0)

locret_1408C:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	play music for LZ/SBZ3 after a countdown
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ResumeMusic:				; ...
		cmpi.w	#$C,($FFFFFE14).w
		bhi.s	loc_140AC
		move.w	#$82,d0		; play LZ music
		cmpi.w	#$103,($FFFFFE10).w ; check if level is	0103 (SBZ3)
		bne.s	loc_140A6
		move.w	#$86,d0		; play SBZ music

loc_140A6:				; ...
		jsr	$880000+(PlaySound).l

loc_140AC:				; ...
		move.w	#$1E,($FFFFFE14).w
		clr.b	($FFFFD372).w
		rts	
; End of function ResumeMusic

Ani_obj0A:	dc.w byte_140D6-Ani_obj0A, byte_140E0-Ani_obj0A, byte_140EA-Ani_obj0A ;	...
		dc.w byte_140F4-Ani_obj0A, byte_140FE-Ani_obj0A, byte_14108-Ani_obj0A
		dc.w byte_14112-Ani_obj0A, byte_14118-Ani_obj0A, byte_14120-Ani_obj0A
		dc.w byte_14128-Ani_obj0A, byte_14130-Ani_obj0A, byte_14138-Ani_obj0A
		dc.w byte_14140-Ani_obj0A, byte_14148-Ani_obj0A, byte_1414A-Ani_obj0A
byte_140D6:	dc.b 5,	0, 1, 2, 3, 4, 9, $D, $FC, 0 ; ...
byte_140E0:	dc.b 5,	0, 1, 2, 3, 4, $C, $12,	$FC, 0 ; ...
byte_140EA:	dc.b 5,	0, 1, 2, 3, 4, $C, $11,	$FC, 0 ; ...
byte_140F4:	dc.b 5,	0, 1, 2, 3, 4, $B, $10,	$FC, 0 ; ...
byte_140FE:	dc.b 5,	0, 1, 2, 3, 4, 9, $F, $FC, 0 ; ...
byte_14108:	dc.b 5,	0, 1, 2, 3, 4, $A, $E, $FC, 0 ;	...
byte_14112:	dc.b $E, 0, 1, 2, $FC, 0 ; ...
byte_14118:	dc.b 7,	$16, $D, $16, $D, $16, $D, $FC ; ...
byte_14120:	dc.b 7,	$16, $12, $16, $12, $16, $12, $FC ; ...
byte_14128:	dc.b 7,	$16, $11, $16, $11, $16, $11, $FC ; ...
byte_14130:	dc.b 7,	$16, $10, $16, $10, $16, $10, $FC ; ...
byte_14138:	dc.b 7,	$16, $F, $16, $F, $16, $F, $FC ; ...
byte_14140:	dc.b 7,	$16, $E, $16, $E, $16, $E, $FC ; ...
byte_14148:	dc.b $E, $FC		; ...
byte_1414A:	dc.b $E, 1, 2, 3, 4, $FC ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - drowning countdown numbers (LZ)
; ---------------------------------------------------------------------------
Map_obj0A:	dc.w byte_14152-Map_obj0A ; ...
byte_14152:	dc.b 1			; ...
		dc.b $E8, $E, 0, 0, $F2
; ---------------------------------------------------------------------------
; Object 38 - shield and invincibility stars
; ---------------------------------------------------------------------------

Obj38:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj38_Index(pc,d0.w),d1
		jmp	Obj38_Index(pc,d1.w)
Obj38_Index:	dc.w Obj38_Main-Obj38_Index ; ...
		dc.w Obj38_Shield-Obj38_Index
		dc.w Obj38_Stars-Obj38_Index

Obj38_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj38,4(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#$10,$19(a0)
		tst.b	$1C(a0)		; is object a shield?
		bne.s	Obj38_DoStars	; if not, branch
		move.w	#$541,2(a0)	; shield specific code
		rts	

Obj38_DoStars:				; ...
		addq.b	#2,$24(a0)	; stars	specific code
		move.w	#$55C,2(a0)
		rts	

Obj38_Shield:				; ...
		tst.b	($FFFFFE2D).w	; does Sonic have invincibility?
		bne.s	Obj38_RmvShield	; if yes, branch
		tst.b	($FFFFFE2C).w	; does Sonic have shield?
		beq.s	Obj38_Delete	; if not, branch
		move.w	($FFFFD008).w,8(a0)
		move.w	($FFFFD00C).w,$C(a0)
		move.b	($FFFFD022).w,$22(a0)
		lea	(Ani_obj38)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj38_RmvShield:			; ...
		rts	

Obj38_Delete:				; ...
		jmp	$880000+DeleteObject

Obj38_Stars:				; ...
		tst.b	($FFFFFE2D).w	; does Sonic have invincibility?
		beq.s	Obj38_Delete2	; if not, branch
		move.w	($FFFFF7A8).w,d0
		move.b	$1C(a0),d1
		subq.b	#1,d1
		bra.s	Obj38_StarTrail
		lsl.b	#4,d1
		addq.b	#4,d1
		sub.b	d1,d0
		move.b	$30(a0),d1
		sub.b	d1,d0
		addq.b	#4,d1
		andi.b	#$F,d1
		move.b	d1,$30(a0)
		bra.s	Obj38_StarTrail2a

Obj38_StarTrail:			; ...
		lsl.b	#3,d1
		move.b	d1,d2
		add.b	d1,d1
		add.b	d2,d1
		addq.b	#4,d1
		sub.b	d1,d0
		move.b	$30(a0),d1
		sub.b	d1,d0
		addq.b	#4,d1
		cmpi.b	#$18,d1
		bcs.s	Obj38_StarTrail2
		moveq	#0,d1

Obj38_StarTrail2:			; ...
		move.b	d1,$30(a0)

Obj38_StarTrail2a:			; ...
		lea	($FFFFCB00).w,a1
		lea	(a1,d0.w),a1
		move.w	(a1)+,8(a0)
		move.w	(a1)+,$C(a0)
		move.b	($FFFFD022).w,$22(a0)
		lea	(Ani_obj38)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj38_Delete2:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 4A - special stage entry from beta
; ---------------------------------------------------------------------------

Obj4A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj4A_Index(pc,d0.w),d1
		jmp	Obj4A_Index(pc,d1.w)
Obj4A_Index:	dc.w Obj4A_Main-Obj4A_Index ; ...
		dc.w Obj4A_RmvSonic-Obj4A_Index
		dc.w Obj4A_LoadSonic-Obj4A_Index

Obj4A_Main:				; ...
		tst.l	($FFFFF680).w	; are pattern load cues	empty?
		beq.s	Obj4A_Main2	; if yes, branch
		rts	

Obj4A_Main2:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj4A,4(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#$38,$19(a0)
		move.w	#$541,2(a0)
		move.w	#120,$30(a0)	; set time for Sonic's disappearance to 2 seconds

Obj4A_RmvSonic:				; ...
		move.w	($FFFFD008).w,8(a0)
		move.w	($FFFFD00C).w,$C(a0)
		move.b	($FFFFD022).w,$22(a0)
		lea	(Ani_obj4A)(pc),a1
		jsr	$880000+AnimateSprite
		cmpi.b	#2,$1A(a0)
		bne.s	Obj4A_Display
		tst.b	($FFFFD000).w
		beq.s	Obj4A_Display
		move.b	#0,($FFFFD000).w ; remove Sonic
		move.w	#$A8,d0
		jsr	$880000+(PlaySound_Special).l ;	play Special Stage "GOAL" sound

Obj4A_Display:				; ...
		jmp	$880000+DisplaySprite

Obj4A_LoadSonic:			; ...
		subq.w	#1,$30(a0)	; subtract 1 from time
		bne.s	Obj4A_Wait	; if time remains, branch
		move.b	#1,($FFFFD000).w ; load	Sonic object
		jmp	$880000+DeleteObject

Obj4A_Wait:				; ...
		rts	
; ---------------------------------------------------------------------------
; Object 08 - water splash (LZ)
; ---------------------------------------------------------------------------

Obj08:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj08_Index(pc,d0.w),d1
		jmp	Obj08_Index(pc,d1.w)
Obj08_Index:	dc.w Obj08_Main-Obj08_Index ; ...
		dc.w Obj08_Display-Obj08_Index
		dc.w Obj08_Delete-Obj08_Index

Obj08_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj08,4(a0)
		ori.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#$10,$19(a0)
		move.w	#$4259,2(a0)
		move.w	($FFFFD008).w,8(a0) ; copy x-position from Sonic

Obj08_Display:				; ...
		move.w	($FFFFF646).w,$C(a0) ; copy y-position from water height
		lea	(Ani_obj08)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj08_Delete:				; ...
		jmp	$880000+DeleteObject	; delete when animation	is complete
Ani_obj38:	dc.w byte_14356-Ani_obj38, byte_1435E-Ani_obj38, byte_14364-Ani_obj38 ;	...
		dc.w byte_1437E-Ani_obj38, byte_14398-Ani_obj38
byte_14356:	dc.b 1,	1, 0, 2, 0, 3, 0, $FF ;	...
byte_1435E:	dc.b 5,	4, 5, 6, 7, $FF	; ...
byte_14364:	dc.b 0,	4, 4, 0, 4, 4, 0, 5, 5,	0, 5, 5, 0, 6, 6, 0, 6 ; ...
		dc.b 6,	0, 7, 7, 0, 7, 7, 0, $FF
byte_1437E:	dc.b 0,	4, 4, 0, 4, 0, 0, 5, 5,	0, 5, 0, 0, 6, 6, 0, 6 ; ...
		dc.b 0,	0, 7, 7, 0, 7, 0, 0, $FF
byte_14398:	dc.b 0,	4, 0, 0, 4, 0, 0, 5, 0,	0, 5, 0, 0, 6, 0, 0, 6 ; ...
		dc.b 0,	0, 7, 0, 0, 7, 0, 0, $FF
; ---------------------------------------------------------------------------
; Sprite mappings - shield and invincibility stars
; ---------------------------------------------------------------------------
Map_obj38:	dc.w byte_143CD-Map_obj38, byte_143C2-Map_obj38	; ...
		dc.w byte_143D7-Map_obj38, byte_143EC-Map_obj38
		dc.w byte_14401-Map_obj38, byte_14416-Map_obj38
		dc.w byte_1442B-Map_obj38, byte_14440-Map_obj38
byte_143C2:	dc.b 4			; ...
		dc.b $E8, $A, 0, 0, $E8
		dc.b $E8, $A, 0, 9, 0
byte_143CD:	dc.b 0,	$A, $10, 0, $E8	; ...
		dc.b 0,	$A, $10, 9, 0
byte_143D7:	dc.b 4			; ...
		dc.b $E8, $A, 8, $12, $E9
		dc.b $E8, $A, 0, $12, 0
		dc.b 0,	$A, $18, $12, $E9
		dc.b 0,	$A, $10, $12, 0
byte_143EC:	dc.b 4			; ...
		dc.b $E8, $A, 8, 9, $E8
		dc.b $E8, $A, 8, 0, 0
		dc.b 0,	$A, $18, 9, $E8
		dc.b 0,	$A, $18, 0, 0
byte_14401:	dc.b 4			; ...
		dc.b $E8, $A, 0, 0, $E8
		dc.b $E8, $A, 0, 9, 0
		dc.b 0,	$A, $18, 9, $E8
		dc.b 0,	$A, $18, 0, 0
byte_14416:	dc.b 4			; ...
		dc.b $E8, $A, 8, 9, $E8
		dc.b $E8, $A, 8, 0, 0
		dc.b 0,	$A, $10, 0, $E8
		dc.b 0,	$A, $10, 9, 0
byte_1442B:	dc.b 4			; ...
		dc.b $E8, $A, 0, $12, $E8
		dc.b $E8, $A, 0, $1B, 0
		dc.b 0,	$A, $18, $1B, $E8
		dc.b 0,	$A, $18, $12, 0
byte_14440:	dc.b 4			; ...
		dc.b $E8, $A, 8, $1B, $E8
		dc.b $E8, $A, 8, $12, 0
		dc.b 0,	$A, $10, $12, $E8
		dc.b 0,	$A, $10, $1B, 0
		dc.b 0

Ani_obj4A:	dc.w byte_14458-Ani_obj4A ; ...
byte_14458:	dc.b 5,	0, 1, 0, 1, 0, 7, 1, 7,	2, 7, 3, 7, 4, 7, 5, 7 ; ...
		dc.b 6,	7, $FC
; ---------------------------------------------------------------------------
; Sprite mappings - special stage entry	from beta
; ---------------------------------------------------------------------------
Map_obj4A:	dc.w byte_1447C-Map_obj4A, byte_1448C-Map_obj4A	; ...
		dc.w byte_1449C-Map_obj4A, byte_144B6-Map_obj4A
		dc.w byte_144E4-Map_obj4A, byte_1453F-Map_obj4A
		dc.w byte_14595-Map_obj4A, byte_145BF-Map_obj4A
byte_1447C:	dc.b 3			; ...
		dc.b $F8, 0, 0,	0, 8
		dc.b 0,	4, 0, 1, 0
		dc.b 8,	0, $10,	0, 8
byte_1448C:	dc.b 3			; ...
		dc.b $F0, $D, 0, 3, $F0
		dc.b 0,	$C, 0, $B, $F0
		dc.b 8,	$D, $10, 3, $F0
byte_1449C:	dc.b 5			; ...
		dc.b $E4, $E, 0, $F, $F4
		dc.b $EC, 2, 0,	$1B, $EC
		dc.b $FC, $C, 0, $1E, $F4
		dc.b 4,	$E, $10, $F, $F4
		dc.b 4,	1, $10,	$1B, $EC
byte_144B6:	dc.b 9			; ...
		dc.b $F0, 8, 0,	$22, $F8
		dc.b $F8, $E, 0, $25, $F0
		dc.b $10, 8, 0,	$31, $F0
		dc.b 0,	5, 0, $34, $10
		dc.b $F8, 0, 8,	$25, $10
		dc.b $F0, 0, $18, $36, $18
		dc.b $F8, 0, $18, $25, $20
		dc.b 0,	0, 8, $25, $28
		dc.b $F8, 0, 0,	$25, $30
byte_144E4:	dc.b $12		; ...
		dc.b 0,	0, $18,	$25, $F0
		dc.b $F8, 4, 0,	$38, $F8
		dc.b $F0, 0, 0,	$26, 8
		dc.b 0,	0, 0, $25, 0
		dc.b 8,	0, $18,	$25, $F8
		dc.b $10, 0, $10, $26, 0
		dc.b 8,	0, $10,	$38, 8
		dc.b $F8, 0, 0,	$29, $10
		dc.b 0,	0, 0, $26, $10
		dc.b 0,	0, 0, $2D, $18
		dc.b 8,	0, 8, $26, $18
		dc.b 8,	0, 0, $29, $20
		dc.b $F8, 0, 0,	$26, $20
		dc.b $F8, 0, 0,	$2D, $28
		dc.b 0,	0, 0, $3A, $28
		dc.b $F8, 0, $18, $26, $30
		dc.b 0,	0, $10,	$25, $38
		dc.b $F8, 0, $10, $25, $40
byte_1453F:	dc.b $11		; ...
		dc.b $F8, 0, 8,	$25, 0
		dc.b $F0, 0, 0,	$38, $10
		dc.b $10, 0, 8,	$25, 0
		dc.b 0,	0, $18,	$25, $10
		dc.b 8,	0, $10,	$25, $18
		dc.b $F8, 0, $18, $25, $20
		dc.b 0,	0, $10,	$26, $28
		dc.b $F8, 0, $10, $25, $30
		dc.b 0,	0, 0, $25, $30
		dc.b 8,	0, 8, $25, $30
		dc.b 0,	0, 8, $26, $38
		dc.b 8,	0, 0, $29, $38
		dc.b $F8, 0, 8,	$26, $40
		dc.b 0,	0, 0, $2D, $40
		dc.b $F8, 0, 8,	$25, $48
		dc.b 0,	0, 0, $25, $48
		dc.b 0,	0, $10,	$25, $50
byte_14595:	dc.b 9			; ...
		dc.b $FC, 0, 8,	$26, $30
		dc.b 4,	0, 8, $25, $28
		dc.b 4,	0, $10,	$27, $38
		dc.b 4,	0, 8, $26, $40
		dc.b $FC, 0, $10, $25, $40
		dc.b $FC, 0, $10, $26, $48
		dc.b $C, 0, 8, $27, $48
		dc.b 4,	0, $18,	$26, $50
		dc.b 4
byte_145BF:	dc.b 0,	8, $27,	$58, 0	; ...

Ani_obj08:	dc.w byte_145C6-Ani_obj08 ; ...
byte_145C6:	dc.b 4,	0, 1, 2, $FC, 0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - water splash (LZ)
; ---------------------------------------------------------------------------
Map_obj08:	dc.w byte_145D2-Map_obj08 ; ...
		dc.w byte_145DD-Map_obj08
		dc.w byte_145E8-Map_obj08
byte_145D2:	dc.b 2			; ...
		dc.b $F2, 4, 0,	$6D, $F8
		dc.b $FA, $C, 0, $6F, $F0
byte_145DD:	dc.b 2			; ...
		dc.b $E2, 0, 0,	$73, $F8
		dc.b $EA, $E, 0, $74, $F0
byte_145E8:	dc.b 1			; ...
		dc.b $E2, $F, 0, $80, $F0
; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's angle & position as he walks along the floor
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_AnglePos:				; ...
		btst	#3,$22(a0)
		beq.s	loc_14602
		moveq	#0,d0
		move.b	d0,($FFFFF768).w
		move.b	d0,($FFFFF76A).w
		rts	

loc_14602:				; ...
		moveq	#3,d0
		move.b	d0,($FFFFF768).w
		move.b	d0,($FFFFF76A).w
		move.b	$26(a0),d0
		addi.b	#$20,d0
		bpl.s	loc_14624
		move.b	$26(a0),d0
		bpl.s	loc_1461E
		subq.b	#1,d0

loc_1461E:				; ...
		addi.b	#$20,d0
		bra.s	loc_14630

loc_14624:				; ...
		move.b	$26(a0),d0
		bpl.s	loc_1462C
		addq.b	#1,d0

loc_1462C:				; ...
		addi.b	#$1F,d0

loc_14630:				; ...
		andi.b	#$C0,d0
		cmpi.b	#$40,d0
		beq.w	Sonic_WalkVertL
		cmpi.b	#$80,d0
		beq.w	Sonic_WalkCeiling
		cmpi.b	#$C0,d0
		beq.w	Sonic_WalkVertR
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$17(a0),d0
		ext.w	d0
		neg.w	d0
		add.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	(sp)+,d0
		bsr.w	Sonic_Angle
		tst.w	d1
		beq.s	locret_146BE
		bpl.s	loc_146C0
		cmpi.w	#-$E,d1
		blt.s	locret_146E6
		add.w	d1,$C(a0)

locret_146BE:				; ...
		rts	

loc_146C0:				; ...
		cmpi.w	#$E,d1
		bgt.s	loc_146CC

loc_146C6:				; ...
		add.w	d1,$C(a0)
		rts	

loc_146CC:				; ...
		tst.b	$38(a0)
		bne.s	loc_146C6
		bset	#1,$22(a0)
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)
		rts	

locret_146E6:				; ...
		rts	
; End of function Sonic_AnglePos

		move.l	8(a0),d2
		move.w	$10(a0),d0
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d2
		move.l	d2,8(a0)
		move.w	#$38,d0
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d3
		move.l	d3,$C(a0)
		rts	

locret_1470A:				; ...
		rts	
		move.l	$C(a0),d3
		move.w	$12(a0),d0
		subi.w	#$38,d0
		move.w	d0,$12(a0)
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d3
		move.l	d3,$C(a0)
		rts	
		rts	
		move.l	8(a0),d2
		move.l	$C(a0),d3
		move.w	$10(a0),d0
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d2
		move.w	$12(a0),d0
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d3
		move.l	d2,8(a0)
		move.l	d3,$C(a0)
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's angle as he walks along the floor
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_Angle:				; ...
		move.b	($FFFFF76A).w,d2
		cmp.w	d0,d1
		ble.s	loc_1475E
		move.b	($FFFFF768).w,d2
		move.w	d0,d1

loc_1475E:				; ...
		btst	#0,d2
		bne.s	loc_1476A
		move.b	d2,$26(a0)
		rts	

loc_1476A:				; ...
		move.b	$26(a0),d2
		addi.b	#$20,d2
		andi.b	#$C0,d2
		move.b	d2,$26(a0)
		rts	
; End of function Sonic_Angle

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to walk up a vertical slope/wall to	his right
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_WalkVertR:			; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		neg.w	d0
		add.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindWall
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindWall
		move.w	(sp)+,d0
		bsr.w	Sonic_Angle
		tst.w	d1
		beq.s	locret_147F0
		bpl.s	loc_147F2
		cmpi.w	#-$E,d1
		blt.w	locret_1470A
		add.w	d1,8(a0)

locret_147F0:				; ...
		rts	

loc_147F2:				; ...
		cmpi.w	#$E,d1
		bgt.s	loc_147FE

loc_147F8:				; ...
		add.w	d1,8(a0)
		rts	

loc_147FE:				; ...
		tst.b	$38(a0)
		bne.s	loc_147F8
		bset	#1,$22(a0)
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)
		rts	
; End of function Sonic_WalkVertR

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to walk upside-down
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_WalkCeiling:			; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d2
		eori.w	#$F,d2
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d2
		eori.w	#$F,d2
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	(sp)+,d0
		bsr.w	Sonic_Angle
		tst.w	d1
		beq.s	locret_14892
		bpl.s	loc_14894
		cmpi.w	#-$E,d1
		blt.w	locret_146E6
		sub.w	d1,$C(a0)

locret_14892:				; ...
		rts	

loc_14894:				; ...
		cmpi.w	#$E,d1
		bgt.s	loc_148A0

loc_1489A:				; ...
		sub.w	d1,$C(a0)
		rts	

loc_148A0:				; ...
		tst.b	$38(a0)
		bne.s	loc_1489A
		bset	#1,$22(a0)
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)
		rts	
; End of function Sonic_WalkCeiling

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to walk up a vertical slope/wall to	his left
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_WalkVertL:			; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d3
		eori.w	#$F,d3
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$800,d6
		moveq	#$D,d5
		bsr.w	FindWall
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d3
		eori.w	#$F,d3
		lea	($FFFFF76A).w,a4
		movea.w	#-$10,a3
		move.w	#$800,d6
		moveq	#$D,d5
		bsr.w	FindWall
		move.w	(sp)+,d0
		bsr.w	Sonic_Angle
		tst.w	d1
		beq.s	locret_14934
		bpl.s	loc_14936
		cmpi.w	#-$E,d1
		blt.w	locret_1470A
		sub.w	d1,8(a0)

locret_14934:				; ...
		rts	

loc_14936:				; ...
		cmpi.w	#$E,d1
		bgt.s	loc_14942

loc_1493C:				; ...
		sub.w	d1,8(a0)
		rts	

loc_14942:				; ...
		tst.b	$38(a0)
		bne.s	loc_1493C
		bset	#1,$22(a0)
		bclr	#5,$22(a0)
		move.b	#1,$1D(a0)
		rts	
; End of function Sonic_WalkVertL

; ---------------------------------------------------------------------------
; Subroutine to	find which tile	the object is standing on
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Floor_ChkTile:				; ...
		move.w	d2,d0
		lsr.w	#1,d0
		andi.w	#$380,d0
		move.w	d3,d1
		lsr.w	#8,d1
		andi.w	#$7F,d1
		add.w	d1,d0
		moveq	#-1,d1
		lea	($FFFFA400).w,a1
		move.b	(a1,d0.w),d1
		beq.s	loc_14996
		bmi.s	loc_1499A
		subq.b	#1,d1
		ext.w	d1
		ror.w	#7,d1
		move.w	d2,d0
		add.w	d0,d0
		andi.w	#$1E0,d0
		add.w	d0,d1
		move.w	d3,d0
		lsr.w	#3,d0
		andi.w	#$1E,d0
		add.w	d0,d1

loc_14996:				; ...
		movea.l	d1,a1
		rts	

loc_1499A:				; ...
		andi.w	#$7F,d1
		btst	#6,1(a0)
		beq.s	loc_149B2
		addq.w	#1,d1
		cmpi.w	#$29,d1
		bne.s	loc_149B2
		move.w	#$51,d1

loc_149B2:				; ...
		subq.b	#1,d1
		ror.w	#7,d1
		move.w	d2,d0
		add.w	d0,d0
		andi.w	#$1E0,d0
		add.w	d0,d1
		move.w	d3,d0
		lsr.w	#3,d0
		andi.w	#$1E,d0
		add.w	d0,d1
		movea.l	d1,a1
		rts	
; End of function Floor_ChkTile


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FindFloor:				; ...
		bsr.s	Floor_ChkTile
		move.w	(a1),d0
		move.w	d0,d4
		andi.w	#$7FF,d0
		beq.s	loc_149DE
		btst	d5,d4
		bne.s	loc_149EC

loc_149DE:				; ...
		add.w	a3,d2
		bsr.w	FindFloor2
		sub.w	a3,d2
		addi.w	#$10,d1
		rts	

loc_149EC:				; ...
		movea.l	($FFFFF796).w,a2 ; load	collision index
		move.b	(a2,d0.w),d0
		andi.w	#$FF,d0
		beq.s	loc_149DE
		lea	$900000+(AngleMap).l,a2
		move.b	(a2,d0.w),(a4)
		lsl.w	#4,d0
		move.w	d3,d1
		btst	#$B,d4
		beq.s	loc_14A12
		not.w	d1
		neg.b	(a4)

loc_14A12:				; ...
		btst	#$C,d4
		beq.s	loc_14A22
		addi.b	#$40,(a4)
		neg.b	(a4)
		subi.b	#$40,(a4)

loc_14A22:				; ...
		andi.w	#$F,d1
		add.w	d0,d1
		lea	$900000+(CollArray1).l,a2
		move.b	(a2,d1.w),d0
		ext.w	d0
		eor.w	d6,d4
		btst	#$C,d4
		beq.s	loc_14A3E
		neg.w	d0

loc_14A3E:				; ...
		tst.w	d0
		beq.s	loc_149DE
		bmi.s	loc_14A5A
		cmpi.b	#$10,d0
		beq.s	loc_14A66
		move.w	d2,d1
		andi.w	#$F,d1
		add.w	d1,d0
		move.w	#$F,d1
		sub.w	d0,d1
		rts	

loc_14A5A:				; ...
		move.w	d2,d1
		andi.w	#$F,d1
		add.w	d1,d0
		bpl.w	loc_149DE

loc_14A66:				; ...
		sub.w	a3,d2
		bsr.w	FindFloor2
		add.w	a3,d2
		subi.w	#$10,d1
		rts	
; End of function FindFloor


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FindFloor2:				; ...
		bsr.w	Floor_ChkTile
		move.w	(a1),d0
		move.w	d0,d4
		andi.w	#$7FF,d0
		beq.s	loc_14A86
		btst	d5,d4
		bne.s	loc_14A94

loc_14A86:				; ...
		move.w	#$F,d1
		move.w	d2,d0
		andi.w	#$F,d0
		sub.w	d0,d1
		rts	

loc_14A94:				; ...
		movea.l	($FFFFF796).w,a2
		move.b	(a2,d0.w),d0
		andi.w	#$FF,d0
		beq.s	loc_14A86
		lea	$900000+(AngleMap).l,a2
		move.b	(a2,d0.w),(a4)
		lsl.w	#4,d0
		move.w	d3,d1
		btst	#$B,d4
		beq.s	loc_14ABA
		not.w	d1
		neg.b	(a4)

loc_14ABA:				; ...
		btst	#$C,d4
		beq.s	loc_14ACA
		addi.b	#$40,(a4)
		neg.b	(a4)
		subi.b	#$40,(a4)

loc_14ACA:				; ...
		andi.w	#$F,d1
		add.w	d0,d1
		lea	$900000+(CollArray1).l,a2
		move.b	(a2,d1.w),d0
		ext.w	d0
		eor.w	d6,d4
		btst	#$C,d4
		beq.s	loc_14AE6
		neg.w	d0

loc_14AE6:				; ...
		tst.w	d0
		beq.s	loc_14A86
		bmi.s	loc_14AFC
		move.w	d2,d1
		andi.w	#$F,d1
		add.w	d1,d0
		move.w	#$F,d1
		sub.w	d0,d1
		rts	

loc_14AFC:				; ...
		move.w	d2,d1
		andi.w	#$F,d1
		add.w	d1,d0
		bpl.w	loc_14A86
		not.w	d1
		rts	
; End of function FindFloor2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FindWall:				; ...
		bsr.w	Floor_ChkTile
		move.w	(a1),d0
		move.w	d0,d4
		andi.w	#$7FF,d0
		beq.s	loc_14B1E
		btst	d5,d4
		bne.s	loc_14B2C

loc_14B1E:				; ...
		add.w	a3,d3
		bsr.w	FindWall2
		sub.w	a3,d3
		addi.w	#$10,d1
		rts	

loc_14B2C:				; ...
		movea.l	($FFFFF796).w,a2
		move.b	(a2,d0.w),d0
		andi.w	#$FF,d0
		beq.s	loc_14B1E
		lea	$900000+(AngleMap).l,a2
		move.b	(a2,d0.w),(a4)
		lsl.w	#4,d0
		move.w	d2,d1
		btst	#$C,d4
		beq.s	loc_14B5A
		not.w	d1
		addi.b	#$40,(a4)
		neg.b	(a4)
		subi.b	#$40,(a4)

loc_14B5A:				; ...
		btst	#$B,d4
		beq.s	loc_14B62
		neg.b	(a4)

loc_14B62:				; ...
		andi.w	#$F,d1
		add.w	d0,d1
		lea	$900000+(CollArray2).l,a2
		move.b	(a2,d1.w),d0
		ext.w	d0
		eor.w	d6,d4
		btst	#$B,d4
		beq.s	loc_14B7E
		neg.w	d0

loc_14B7E:				; ...
		tst.w	d0
		beq.s	loc_14B1E
		bmi.s	loc_14B9A
		cmpi.b	#$10,d0
		beq.s	loc_14BA6
		move.w	d3,d1
		andi.w	#$F,d1
		add.w	d1,d0
		move.w	#$F,d1
		sub.w	d0,d1
		rts	

loc_14B9A:				; ...
		move.w	d3,d1
		andi.w	#$F,d1
		add.w	d1,d0
		bpl.w	loc_14B1E

loc_14BA6:				; ...
		sub.w	a3,d3
		bsr.w	FindWall2
		add.w	a3,d3
		subi.w	#$10,d1
		rts	
; End of function FindWall


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FindWall2:				; ...
		bsr.w	Floor_ChkTile
		move.w	(a1),d0
		move.w	d0,d4
		andi.w	#$7FF,d0
		beq.s	loc_14BC6
		btst	d5,d4
		bne.s	loc_14BD4

loc_14BC6:				; ...
		move.w	#$F,d1
		move.w	d3,d0
		andi.w	#$F,d0
		sub.w	d0,d1
		rts	

loc_14BD4:				; ...
		movea.l	($FFFFF796).w,a2
		move.b	(a2,d0.w),d0
		andi.w	#$FF,d0
		beq.s	loc_14BC6
		lea	$900000+(AngleMap).l,a2
		move.b	(a2,d0.w),(a4)
		lsl.w	#4,d0
		move.w	d2,d1
		btst	#$C,d4
		beq.s	loc_14C02
		not.w	d1
		addi.b	#$40,(a4)
		neg.b	(a4)
		subi.b	#$40,(a4)

loc_14C02:				; ...
		btst	#$B,d4
		beq.s	loc_14C0A
		neg.b	(a4)

loc_14C0A:				; ...
		andi.w	#$F,d1
		add.w	d0,d1
		lea	$900000+(CollArray2).l,a2
		move.b	(a2,d1.w),d0
		ext.w	d0
		eor.w	d6,d4
		btst	#$B,d4
		beq.s	loc_14C26
		neg.w	d0

loc_14C26:				; ...
		tst.w	d0
		beq.s	loc_14BC6
		bmi.s	loc_14C3C
		move.w	d3,d1
		andi.w	#$F,d1
		add.w	d1,d0
		move.w	#$F,d1
		sub.w	d0,d1
		rts	

loc_14C3C:				; ...
		move.w	d3,d1
		andi.w	#$F,d1
		add.w	d1,d0
		bpl.w	loc_14BC6
		not.w	d1
		rts	
; End of function FindWall2

; ---------------------------------------------------------------------------
; Unused floor/wall subroutine - logs something	to do with collision
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FloorLog_Unk:				; ...
		rts	
; End of function FloorLog_Unk

		lea	$900000+(CollArray1).l,a1
		lea	$900000+(CollArray1).l,a2
		move.w	#$FF,d3

loc_14C5E:				; ...
		moveq	#$10,d5
		move.w	#$F,d2

loc_14C64:				; ...
		moveq	#0,d4
		move.w	#$F,d1

loc_14C6A:				; ...
		move.w	(a1)+,d0
		lsr.l	d5,d0
		addx.w	d4,d4
		dbf	d1,loc_14C6A
		move.w	d4,(a2)+
		suba.w	#$20,a1
		subq.w	#1,d5
		dbf	d2,loc_14C64
		adda.w	#$20,a1
		dbf	d3,loc_14C5E
		lea	$900000+(CollArray1).l,a1
		lea	$900000+(CollArray2).l,a2
		bsr.s	FloorLog_Unk2
		lea	$900000+(CollArray1).l,a1
		lea	$900000+(CollArray1).l,a2

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


FloorLog_Unk2:				; ...
		move.w	#$FFF,d3

loc_14CA6:				; ...
		moveq	#0,d2
		move.w	#$F,d1
		move.w	(a1)+,d0
		beq.s	loc_14CD4
		bmi.s	loc_14CBE

loc_14CB2:				; ...
		lsr.w	#1,d0
		bcc.s	loc_14CB8
		addq.b	#1,d2

loc_14CB8:				; ...
		dbf	d1,loc_14CB2
		bra.s	loc_14CD6

loc_14CBE:				; ...
		cmpi.w	#$FFFF,d0
		beq.s	loc_14CD0

loc_14CC4:				; ...
		lsl.w	#1,d0
		bcc.s	loc_14CCA
		subq.b	#1,d2

loc_14CCA:				; ...
		dbf	d1,loc_14CC4
		bra.s	loc_14CD6

loc_14CD0:				; ...
		move.w	#$10,d0

loc_14CD4:				; ...
		move.w	d0,d2

loc_14CD6:				; ...
		move.b	d2,(a2)+
		dbf	d3,loc_14CA6
		rts	
; End of function FloorLog_Unk2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_WalkSpeed:			; ...
		move.l	8(a0),d3
		move.l	$C(a0),d2
		move.w	$10(a0),d1
		ext.l	d1
		asl.l	#8,d1
		add.l	d1,d3
		move.w	$12(a0),d1
		ext.l	d1
		asl.l	#8,d1
		add.l	d1,d2
		swap	d2
		swap	d3
		move.b	d0,($FFFFF768).w
		move.b	d0,($FFFFF76A).w
		move.b	d0,d1
		addi.b	#$20,d0
		bpl.s	loc_14D1A
		move.b	d1,d0
		bpl.s	loc_14D14
		subq.b	#1,d0

loc_14D14:				; ...
		addi.b	#$20,d0
		bra.s	loc_14D24

loc_14D1A:				; ...
		move.b	d1,d0
		bpl.s	loc_14D20
		addq.b	#1,d0

loc_14D20:				; ...
		addi.b	#$1F,d0

loc_14D24:				; ...
		andi.b	#$C0,d0
		beq.w	loc_14DF0
		cmpi.b	#$80,d0
		beq.w	loc_14F7C
		andi.b	#$38,d1
		bne.s	loc_14D3C
		addq.w	#8,d2

loc_14D3C:				; ...
		cmpi.b	#$40,d0
		beq.w	loc_1504A
		bra.w	loc_14EBC
; End of function Sonic_WalkSpeed


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_14D48:				; ...
		move.b	d0,($FFFFF768).w
		move.b	d0,($FFFFF76A).w
		addi.b	#$20,d0
		andi.b	#$C0,d0
		cmpi.b	#$40,d0
		beq.w	loc_14FD6
		cmpi.b	#$80,d0
		beq.w	Sonic_DontRunOnWalls
		cmpi.b	#$C0,d0
		beq.w	sub_14E50
; End of function sub_14D48

; ---------------------------------------------------------------------------
; Subroutine to	make Sonic land	on the floor after jumping
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_HitFloor:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.w	(sp)+,d0
		move.b	#0,d2

loc_14DD0:				; ...
		move.b	($FFFFF76A).w,d3
		cmp.w	d0,d1
		ble.s	loc_14DDE
		move.b	($FFFFF768).w,d3
		exg	d0,d1

loc_14DDE:				; ...
		btst	#0,d3
		beq.s	locret_14DE6
		move.b	d2,d3

locret_14DE6:				; ...
		rts	
; End of function Sonic_HitFloor

		move.w	$C(a0),d2
		move.w	8(a0),d3

loc_14DF0:				; ...
		addi.w	#$A,d2
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$E,d5
		bsr.w	FindFloor
		move.b	#0,d2

loc_14E0A:				; ...
		move.b	($FFFFF768).w,d3
		btst	#0,d3
		beq.s	locret_14E16
		move.b	d2,d3

locret_14E16:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine allowing objects to interact with the floor
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjHitFloor:				; ...
		move.w	8(a0),d3
; End of function ObjHitFloor


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjHitFloor2:				; ...
		move.w	$C(a0),d2
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d2
		lea	($FFFFF768).w,a4
		move.b	#0,(a4)
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$D,d5
		bsr.w	FindFloor
		move.b	($FFFFF768).w,d3
		btst	#0,d3
		beq.s	locret_14E4E
		move.b	#0,d3

locret_14E4E:				; ...
		rts	
; End of function ObjHitFloor2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_14E50:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.w	(sp)+,d0
		move.b	#-$40,d2
		bra.w	loc_14DD0
; End of function sub_14E50


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_14EB4:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3

loc_14EBC:				; ...
		addi.w	#$A,d3
		lea	($FFFFF768).w,a4
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.b	#-$40,d2
		bra.w	loc_14E0A
; End of function sub_14EB4

; ---------------------------------------------------------------------------
; Subroutine to	detect when an object hits a wall to its right
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjHitWallRight:			; ...
		add.w	8(a0),d3
		move.w	$C(a0),d2
		lea	($FFFFF768).w,a4
		move.b	#0,(a4)
		movea.w	#$10,a3
		move.w	#0,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.b	($FFFFF768).w,d3
		btst	#0,d3
		beq.s	locret_14F06
		move.b	#-$40,d3

locret_14F06:				; ...
		rts	
; End of function ObjHitWallRight

; ---------------------------------------------------------------------------
; Subroutine preventing	Sonic from running on walls and	ceilings when he
; touches them
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_DontRunOnWalls:			; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d2
		eori.w	#$F,d2
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d3
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$E,d5
		bsr.w	FindFloor
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d2
		eori.w	#$F,d2
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d3
		lea	($FFFFF76A).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$E,d5
		bsr.w	FindFloor
		move.w	(sp)+,d0
		move.b	#-$80,d2
		bra.w	loc_14DD0
; End of function Sonic_DontRunOnWalls

		move.w	$C(a0),d2
		move.w	8(a0),d3

loc_14F7C:				; ...
		subi.w	#$A,d2
		eori.w	#$F,d2
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$E,d5
		bsr.w	FindFloor
		move.b	#-$80,d2
		bra.w	loc_14E0A

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjHitCeiling:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d2
		eori.w	#$F,d2
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$1000,d6
		moveq	#$E,d5
		bsr.w	FindFloor
		move.b	($FFFFF768).w,d3
		btst	#0,d3
		beq.s	locret_14FD4
		move.b	#-$80,d3

locret_14FD4:				; ...
		rts	
; End of function ObjHitCeiling


loc_14FD6:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		sub.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d3
		eori.w	#$F,d3
		lea	($FFFFF768).w,a4
		movea.w	#-$10,a3
		move.w	#$800,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.w	d1,-(sp)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		moveq	#0,d0
		move.b	$17(a0),d0
		ext.w	d0
		add.w	d0,d2
		move.b	$16(a0),d0
		ext.w	d0
		sub.w	d0,d3
		eori.w	#$F,d3
		lea	($FFFFF76A).w,a4
		movea.w	#-$10,a3
		move.w	#$800,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.w	(sp)+,d0
		move.b	#$40,d2
		bra.w	loc_14DD0
; ---------------------------------------------------------------------------
; Subroutine to	stop Sonic when	he jumps at a wall
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sonic_HitWall:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3

loc_1504A:				; ...
		subi.w	#$A,d3
		eori.w	#$F,d3
		lea	($FFFFF768).w,a4
		movea.w	#$FFF0,a3
		move.w	#$800,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.b	#$40,d2
		bra.w	loc_14E0A
; End of function Sonic_HitWall

; ---------------------------------------------------------------------------
; Subroutine to	detect when an object hits a wall to its left
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjHitWallLeft:				; ...
		add.w	8(a0),d3
		move.w	$C(a0),d2
		lea	($FFFFF768).w,a4
		move.b	#0,(a4)
		movea.w	#-$10,a3
		move.w	#$800,d6
		moveq	#$E,d5
		bsr.w	FindWall
		move.b	($FFFFF768).w,d3
		btst	#0,d3
		beq.s	locret_15098
		move.b	#$40,d3

locret_15098:				; ...
		rts	
; End of function ObjHitWallLeft

; ---------------------------------------------------------------------------
; Object touch response	subroutine - $20(a0) in	the object RAM
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


TouchResponse:				; ...
		nop	
		move.w	8(a0),d2	; load Sonic's x-axis value
		move.w	$C(a0),d3	; load Sonic's y-axis value
		subq.w	#8,d2
		moveq	#0,d5
		move.b	$16(a0),d5	; load Sonic's height
		subq.b	#3,d5
		sub.w	d5,d3
		cmpi.b	#$39,$1A(a0)	; is Sonic ducking?
		bne.s	Touch_NoDuck	; if not, branch
		addi.w	#$C,d3
		moveq	#$A,d5

Touch_NoDuck:				; ...
		move.w	#$10,d4
		add.w	d5,d5
		lea	($FFFFD800).w,a1 ; begin checking the object RAM
		move.w	#$5F,d6

Touch_Loop:				; ...
		tst.b	1(a1)
		bpl.s	Touch_NextObj
		move.b	$20(a1),d0	; load touch response number
		bne.s	Touch_Height	; if touch response is not 0, branch

Touch_NextObj:				; ...
		lea	$40(a1),a1	; next object RAM
		dbf	d6,Touch_Loop	; repeat $5F more times
		moveq	#0,d0
		rts	
Touch_Sizes:	dc.b  $14, $14		; ...
		dc.b   $C, $14		; width, height
		dc.b  $14,  $C
		dc.b	4, $10
		dc.b   $C, $12
		dc.b  $10, $10
		dc.b	6,   6
		dc.b  $18,  $C
		dc.b   $C, $10
		dc.b  $10,  $C
		dc.b	8,   8
		dc.b  $14, $10
		dc.b  $14,   8
		dc.b   $E,  $E
		dc.b  $18, $18
		dc.b  $28, $10
		dc.b  $10, $18
		dc.b	8, $10
		dc.b  $20, $70
		dc.b  $40, $20
		dc.b  $80, $20
		dc.b  $20, $20
		dc.b	8,   8
		dc.b	4,   4
		dc.b  $20,   8
		dc.b   $C,  $C
		dc.b	8,   4
		dc.b  $18,   4
		dc.b  $28,   4
		dc.b	4,   8
		dc.b	4, $18
		dc.b	4, $28
		dc.b	4, $20
		dc.b  $18, $18
		dc.b   $C, $18
		dc.b  $48,   8

Touch_Height:				; ...
		andi.w	#$3F,d0
		add.w	d0,d0
		lea	Touch_Sizes-2(pc,d0.w),a2
		moveq	#0,d1
		move.b	(a2)+,d1
		move.w	8(a1),d0
		sub.w	d1,d0
		sub.w	d2,d0
		bcc.s	loc_1AE98
		add.w	d1,d1
		add.w	d1,d0
		bcs.s	Touch_Width
		bra.w	Touch_NextObj

loc_1AE98:				; ...
		cmp.w	d4,d0
		bhi.w	Touch_NextObj

Touch_Width:				; ...
		moveq	#0,d1
		move.b	(a2)+,d1
		move.w	$C(a1),d0
		sub.w	d1,d0
		sub.w	d3,d0
		bcc.s	loc_1AEB6
		add.w	d1,d1
		add.w	d0,d1
		bcs.s	Touch_ChkValue
		bra.w	Touch_NextObj

loc_1AEB6:				; ...
		cmp.w	d5,d0
		bhi.w	Touch_NextObj

Touch_ChkValue:				; ...
		move.b	$20(a1),d1	; load touch response number
		andi.b	#$C0,d1		; is touch response $40	or higher?
		beq.w	Touch_Enemy	; if not, branch
		cmpi.b	#$C0,d1		; is touch response $C0	or higher?
		beq.w	Touch_Special	; if yes, branch
		tst.b	d1		; is touch response $80-$BF ?
		bmi.w	Touch_ChkHurt	; if yes, branch

; touch	response is $40-$7F

		move.b	$20(a1),d0
		andi.b	#$3F,d0
		cmpi.b	#6,d0		; is touch response $46	?
		beq.s	Touch_Monitor	; if yes, branch
		cmpi.w	#$5A,$30(a0)
		bcc.w	locret_1AEF2
		addq.b	#2,$24(a1)	; advance the object's routine counter

locret_1AEF2:				; ...
		rts	

Touch_Monitor:				; ...
		tst.w	$12(a0)		; is Sonic moving upwards?
		bpl.s	loc_1AF1E	; if not, branch
		move.w	$C(a0),d0
		subi.w	#$10,d0
		cmp.w	$C(a1),d0
		bcs.s	locret_1AF2E
		neg.w	$12(a0)		; reverse Sonic's y-motion
		move.w	#-$180,$12(a1)
		tst.b	$25(a1)
		bne.s	locret_1AF2E
		addq.b	#4,$25(a1)	; advance the monitor's routine counter
		rts	

loc_1AF1E:				; ...
		cmpi.b	#2,$1C(a0)	; is Sonic rolling/jumping?
		bne.s	locret_1AF2E
		neg.w	$12(a0)		; reverse Sonic's y-motion
		addq.b	#2,$24(a1)	; advance the monitor's routine counter

locret_1AF2E:				; ...
		rts	

Touch_Enemy:				; ...
		tst.b	($FFFFFE2D).w	; is Sonic invincible?
		bne.s	loc_1AF40	; if yes, branch
		cmpi.b	#2,$1C(a0)	; is Sonic rolling?
		bne.w	Touch_ChkHurt	; if not, branch

loc_1AF40:				; ...
		tst.b	$21(a1)
		beq.s	Touch_KillEnemy
		neg.w	$10(a0)
		neg.w	$12(a0)
		asr	$10(a0)
		asr	$12(a0)
		move.b	#0,$20(a1)
		subq.b	#1,$21(a1)
		bne.s	locret_1AF68
		bset	#7,$22(a1)

locret_1AF68:				; ...
		rts	

Touch_KillEnemy:			; ...
		bset	#7,$22(a1)
		moveq	#0,d0
		move.w	($FFFFF7D0).w,d0
		addq.w	#2,($FFFFF7D0).w ; add 2 to item bonus counter
		cmpi.w	#6,d0
		bcs.s	loc_1AF82
		moveq	#6,d0

loc_1AF82:				; ...
		move.w	d0,$3E(a1)
		move.w	Enemy_Points(pc,d0.w),d0
		cmpi.w	#$20,($FFFFF7D0).w ; have 16 enemies been destroyed?
		bcs.s	loc_1AF9C	; if not, branch
		move.w	#1000,d0	; fix bonus to 10000
		move.w	#$A,$3E(a1)

loc_1AF9C:				; ...
		jsr	$880000+AddPoints
		move.b	#$27,0(a1)	; change object	to points
		move.b	#0,$24(a1)
		tst.w	$12(a0)
		bmi.s	loc_1AFC2
		move.w	$C(a0),d0
		cmp.w	$C(a1),d0
		bcc.s	loc_1AFCA
		neg.w	$12(a0)
		rts	

loc_1AFC2:				; ...
		addi.w	#$100,$12(a0)
		rts	

loc_1AFCA:				; ...
		subi.w	#$100,$12(a0)
		rts	
Enemy_Points:
		dc.w 10, 20, 50, 100

loc_1AFDA:				; ...
		bset	#7,$22(a1)

Touch_ChkHurt:				; ...
		tst.b	($FFFFFE2D).w	; is Sonic invincible?
		beq.s	Touch_Hurt	; if not, branch

loc_1AFE6:				; ...
		moveq	#-1,d0
		rts	

Touch_Hurt:				; ...
		nop	
		tst.w	$30(a0)
		bne.s	loc_1AFE6
		movea.l	a1,a2
; End of function TouchResponse

; ---------------------------------------------------------------------------
; Hurting Sonic	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


HurtSonic:				; ...
		tst.b	($FFFFFE2C).w	; does Sonic have a shield?
		bne.s	Hurt_Shield	; if yes, branch
		tst.w	($FFFFFE20).w	; does Sonic have any rings?
		beq.w	Hurt_NoRings	; if not, branch
		jsr	$880000+SingleObjLoad
		bne.s	Hurt_Shield
		move.b	#$37,0(a1)	; load bouncing	multi rings object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Hurt_Shield:				; ...
		move.b	#0,($FFFFFE2C).w ; remove shield
		move.b	#4,$24(a0)
		bsr.w	Sonic_ResetOnFloor
		bset	#1,$22(a0)
		move.w	#-$400,$12(a0)	; make Sonic bounce away from the object
		move.w	#-$200,$10(a0)
		btst	#6,$22(a0)
		beq.s	Hurt_Reverse
		move.w	#-$200,$12(a0)
		move.w	#-$100,$10(a0)

Hurt_Reverse:				; ...
		move.w	8(a0),d0
		cmp.w	8(a2),d0
		bcs.s	Hurt_ChkSpikes	; if Sonic is left of the object, branch
		neg.w	$10(a0)		; if Sonic is right of the object, reverse

Hurt_ChkSpikes:				; ...
		move.w	#0,$14(a0)
		move.b	#$1A,$1C(a0)
		move.w	#$78,$30(a0)
		move.w	#$A3,d0		; load normal damage sound
		cmpi.b	#$36,(a2)	; was damage caused by spikes?
		bne.s	Hurt_Sound	; if not, branch
		cmpi.b	#$16,(a2)	; was damage caused by LZ harpoon?
		bne.s	Hurt_Sound	; if not, branch
		move.w	#$A6,d0		; load spikes damage sound

Hurt_Sound:				; ...
		jsr	$880000+(PlaySound_Special).l
		moveq	#-1,d0
		rts	

Hurt_NoRings:				; ...
		tst.w	($FFFFFFFA).w	; is debug mode	cheat on?
		bne.w	Hurt_Shield	; if yes, branch
; End of function HurtSonic

; ---------------------------------------------------------------------------
; Subroutine to	kill Sonic
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


KillSonic:				; ...
		tst.w	($FFFFFE08).w	; is debug mode	active?
		bne.s	Kill_NoDeath	; if yes, branch
		move.b	#0,($FFFFFE2D).w ; remove invincibility
		move.b	#6,$24(a0)
		bsr.w	Sonic_ResetOnFloor
		bset	#1,$22(a0)
		move.w	#-$700,$12(a0)
		move.w	#0,$10(a0)
		move.w	#0,$14(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$18,$1C(a0)
		bset	#7,2(a0)
		move.w	#$A3,d0		; play normal death sound
		cmpi.b	#$36,(a2)	; check	if you were killed by spikes
		bne.s	Kill_Sound
		move.w	#$A6,d0		; play spikes death sound

Kill_Sound:				; ...
		jsr	$880000+(PlaySound_Special).l

Kill_NoDeath:				; ...
		moveq	#-1,d0
		rts	
; End of function KillSonic


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Touch_Special:				; ...
		move.b	$20(a1),d1
		andi.b	#$3F,d1
		cmpi.b	#$B,d1		; is touch response $CB	?
		beq.s	Touch_CatKiller	; if yes, branch
		cmpi.b	#$C,d1		; is touch response $CC	?
		beq.s	Touch_Yadrin	; if yes, branch
		cmpi.b	#$17,d1		; is touch response $D7	?
		beq.s	Touch_D7orE1	; if yes, branch
		cmpi.b	#$21,d1		; is touch response $E1	?
		beq.s	Touch_D7orE1	; if yes, branch
		rts	

Touch_CatKiller:			; ...
		bra.w	loc_1AFDA

Touch_Yadrin:				; ...
		sub.w	d0,d5
		cmpi.w	#8,d5
		bcc.s	loc_1B144
		move.w	8(a1),d0
		subq.w	#4,d0
		btst	#0,$22(a1)
		beq.s	loc_1B130
		subi.w	#$10,d0

loc_1B130:				; ...
		sub.w	d2,d0
		bcc.s	loc_1B13C
		addi.w	#$18,d0
		bcs.s	loc_1B140
		bra.s	loc_1B144

loc_1B13C:				; ...
		cmp.w	d4,d0
		bhi.s	loc_1B144

loc_1B140:				; ...
		bra.w	Touch_ChkHurt

loc_1B144:				; ...
		bra.w	Touch_Enemy

Touch_D7orE1:				; ...
		addq.b	#1,$21(a1)
		rts	
; End of function Touch_Special

; ---------------------------------------------------------------------------
; Subroutine to	show the special stage layout
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_ShowLayout:				; ...
		bsr.w	SS_AniWallsRings
		bsr.w	SS_AniItems
		move.w	d5,-(sp)
		lea	($FFFF8000).w,a1
		move.b	($FFFFF780).w,d0
		andi.b	#$FC,d0
		jsr	$880000+(CalcSine).l
		move.w	d0,d4
		move.w	d1,d5
		muls.w	#$18,d4
		muls.w	#$18,d5
		moveq	#0,d2
		move.w	($FFFFF700).w,d2
		divu.w	#$18,d2
		swap	d2
		neg.w	d2
		addi.w	#-$B4,d2
		moveq	#0,d3
		move.w	($FFFFF704).w,d3
		divu.w	#$18,d3
		swap	d3
		neg.w	d3
		addi.w	#-$B4,d3
		move.w	#$F,d7

loc_1B19E:				; ...
		movem.w	d0-d2,-(sp)
		movem.w	d0-d1,-(sp)
		neg.w	d0
		muls.w	d2,d1
		muls.w	d3,d0
		move.l	d0,d6
		add.l	d1,d6
		movem.w	(sp)+,d0-d1
		muls.w	d2,d0
		muls.w	d3,d1
		add.l	d0,d1
		move.l	d6,d2
		move.w	#$F,d6

loc_1B1C0:				; ...
		move.l	d2,d0
		asr.l	#8,d0
		move.w	d0,(a1)+
		move.l	d1,d0
		asr.l	#8,d0
		move.w	d0,(a1)+
		add.l	d5,d2
		add.l	d4,d1
		dbf	d6,loc_1B1C0
		movem.w	(sp)+,d0-d2
		addi.w	#$18,d3
		dbf	d7,loc_1B19E
		move.w	(sp)+,d5
		lea	($FF0000).l,a0
		moveq	#0,d0
		move.w	($FFFFF704).w,d0
		divu.w	#$18,d0
		mulu.w	#$80,d0
		adda.l	d0,a0
		moveq	#0,d0
		move.w	($FFFFF700).w,d0
		divu.w	#$18,d0
		adda.w	d0,a0
		lea	($FFFF8000).w,a4
		move.w	#$F,d7

loc_1B20C:				; ...
		move.w	#$F,d6

loc_1B210:				; ...
		moveq	#0,d0
		move.b	(a0)+,d0
		beq.s	loc_1B268
		cmpi.b	#$4E,d0
		bhi.s	loc_1B268
		move.w	(a4),d3
		addi.w	#$120,d3
		cmpi.w	#$70,d3
		bcs.s	loc_1B268
		cmpi.w	#$1D0,d3
		bcc.s	loc_1B268
		move.w	2(a4),d2
		addi.w	#$F0,d2
		cmpi.w	#$70,d2
		bcs.s	loc_1B268
		cmpi.w	#$170,d2
		bcc.s	loc_1B268
		lea	($FF4000).l,a5
		lsl.w	#3,d0
		lea	(a5,d0.w),a5
		movea.l	(a5)+,a1
		move.w	(a5)+,d1
		add.w	d1,d1
		adda.w	(a1,d1.w),a1
		movea.w	(a5)+,a3
		moveq	#0,d1
		move.b	(a1)+,d1
		subq.b	#1,d1
		bmi.s	loc_1B268
		jsr	$880000+sub_D762

loc_1B268:				; ...
		addq.w	#4,a4
		dbf	d6,loc_1B210
		lea	$70(a0),a0
		dbf	d7,loc_1B20C
		move.b	d5,($FFFFF62C).w
		cmpi.b	#$50,d5
		beq.s	loc_1B288
		move.l	#0,(a2)
		rts	

loc_1B288:				; ...
		move.b	#0,-5(a2)
		rts	
; End of function SS_ShowLayout

; ---------------------------------------------------------------------------
; Subroutine to	animate	walls and rings	in the special stage
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_AniWallsRings:			; ...
		lea	($FF400C).l,a1
		moveq	#0,d0
		move.b	($FFFFF780).w,d0
		lsr.b	#2,d0
		andi.w	#$F,d0
		moveq	#$23,d1

loc_1B2A4:				; ...
		move.w	d0,(a1)
		addq.w	#8,a1
		dbf	d1,loc_1B2A4
		lea	($FF4005).l,a1
		subq.b	#1,($FFFFFEC2).w
		bpl.s	loc_1B2C8
		move.b	#7,($FFFFFEC2).w
		addq.b	#1,($FFFFFEC3).w
		andi.b	#3,($FFFFFEC3).w

loc_1B2C8:				; ...
		move.b	($FFFFFEC3).w,$1D0(a1)
		subq.b	#1,($FFFFFEC4).w
		bpl.s	loc_1B2E4
		move.b	#7,($FFFFFEC4).w
		addq.b	#1,($FFFFFEC5).w
		andi.b	#1,($FFFFFEC5).w

loc_1B2E4:				; ...
		move.b	($FFFFFEC5).w,d0
		move.b	d0,$138(a1)
		move.b	d0,$160(a1)
		move.b	d0,$148(a1)
		move.b	d0,$150(a1)
		move.b	d0,$1D8(a1)
		move.b	d0,$1E0(a1)
		move.b	d0,$1E8(a1)
		move.b	d0,$1F0(a1)
		move.b	d0,$1F8(a1)
		move.b	d0,$200(a1)
		subq.b	#1,($FFFFFEC6).w
		bpl.s	loc_1B326
		move.b	#4,($FFFFFEC6).w
		addq.b	#1,($FFFFFEC7).w
		andi.b	#3,($FFFFFEC7).w

loc_1B326:				; ...
		move.b	($FFFFFEC7).w,d0
		move.b	d0,$168(a1)
		move.b	d0,$170(a1)
		move.b	d0,$178(a1)
		move.b	d0,$180(a1)
		subq.b	#1,($FFFFFEC0).w
		bpl.s	loc_1B350
		move.b	#7,($FFFFFEC0).w
		subq.b	#1,($FFFFFEC1).w
		andi.b	#7,($FFFFFEC1).w

loc_1B350:				; ...
		lea	($FF4016).l,a1
		lea	(SS_WaRiVramSet)(pc),a0
		moveq	#0,d0
		move.b	($FFFFFEC1).w,d0
		add.w	d0,d0
		lea	(a0,d0.w),a0
		move.w	(a0),(a1)
		move.w	2(a0),8(a1)
		move.w	4(a0),$10(a1)
		move.w	6(a0),$18(a1)
		move.w	8(a0),$20(a1)
		move.w	$A(a0),$28(a1)
		move.w	$C(a0),$30(a1)
		move.w	$E(a0),$38(a1)
		adda.w	#$20,a0
		adda.w	#$48,a1
		move.w	(a0),(a1)
		move.w	2(a0),8(a1)
		move.w	4(a0),$10(a1)
		move.w	6(a0),$18(a1)
		move.w	8(a0),$20(a1)
		move.w	$A(a0),$28(a1)
		move.w	$C(a0),$30(a1)
		move.w	$E(a0),$38(a1)
		adda.w	#$20,a0
		adda.w	#$48,a1
		move.w	(a0),(a1)
		move.w	2(a0),8(a1)
		move.w	4(a0),$10(a1)
		move.w	6(a0),$18(a1)
		move.w	8(a0),$20(a1)
		move.w	$A(a0),$28(a1)
		move.w	$C(a0),$30(a1)
		move.w	$E(a0),$38(a1)
		adda.w	#$20,a0
		adda.w	#$48,a1
		move.w	(a0),(a1)
		move.w	2(a0),8(a1)
		move.w	4(a0),$10(a1)
		move.w	6(a0),$18(a1)
		move.w	8(a0),$20(a1)
		move.w	$A(a0),$28(a1)
		move.w	$C(a0),$30(a1)
		move.w	$E(a0),$38(a1)
		adda.w	#$20,a0
		adda.w	#$48,a1
		rts	
; End of function SS_AniWallsRings

SS_WaRiVramSet:	dc.w $142, $6142, $142,	$142, $142, $142, $142,	$6142 ;	...
		dc.w $142, $6142, $142,	$142, $142, $142, $142,	$6142
		dc.w $2142, $142, $2142, $2142,	$2142, $2142, $2142, $142
		dc.w $2142, $142, $2142, $2142,	$2142, $2142, $2142, $142
		dc.w $4142, $2142, $4142, $4142, $4142,	$4142, $4142, $2142
		dc.w $4142, $2142, $4142, $4142, $4142,	$4142, $4142, $2142
		dc.w $6142, $4142, $6142, $6142, $6142,	$6142, $6142, $4142
		dc.w $6142, $4142, $6142, $6142, $6142,	$6142, $6142, $4142
; ---------------------------------------------------------------------------
; Subroutine to	remove items when you collect them in the special stage
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_RemoveCollectedItem:			; ...
		lea	($FF4400).l,a2
		move.w	#$1F,d0

loc_1B4C4:				; ...
		tst.b	(a2)
		beq.s	locret_1B4CE
		addq.w	#8,a2
		dbf	d0,loc_1B4C4

locret_1B4CE:				; ...
		rts	
; End of function SS_RemoveCollectedItem

; ---------------------------------------------------------------------------
; Subroutine to	animate	special	stage items when you touch them
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_AniItems:				; ...
		lea	($FF4400).l,a0
		move.w	#$1F,d7

loc_1B4DA:				; ...
		moveq	#0,d0
		move.b	(a0),d0
		beq.s	loc_1B4E8
		lsl.w	#2,d0
		movea.l	SS_AniIndex-4(pc,d0.w),a1
		jsr	(a1)

loc_1B4E8:				; ...
		addq.w	#8,a0

loc_1B4EA:
		dbf	d7,loc_1B4DA
		rts	
; End of function SS_AniItems

SS_AniIndex:	dc.l $880000+SS_AniRingSparks	; ...
		dc.l $880000+SS_AniBumper
		dc.l $880000+SS_Ani1Up
		dc.l $880000+SS_AniReverse
		dc.l $880000+SS_AniEmeraldSparks
		dc.l $880000+SS_AniGlassBlock

SS_AniRingSparks:			; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B530
		move.b	#5,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_AniRingData(pc,d0.w),d0
		move.b	d0,(a1)
		bne.s	locret_1B530
		clr.l	(a0)
		clr.l	4(a0)

locret_1B530:				; ...
		rts	
SS_AniRingData:	dc.b $42, $43, $44, $45, 0, 0

SS_AniBumper:				; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B566
		move.b	#7,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_AniBumpData(pc,d0.w),d0
		bne.s	loc_1B564
		clr.l	(a0)
		clr.l	4(a0)
		move.b	#$25,(a1)
		rts	

loc_1B564:				; ...
		move.b	d0,(a1)

locret_1B566:				; ...
		rts	
SS_AniBumpData:	dc.b $32, $33, $32, $33, 0, 0

SS_Ani1Up:				; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B596
		move.b	#5,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_Ani1UpData(pc,d0.w),d0
		move.b	d0,(a1)
		bne.s	locret_1B596
		clr.l	(a0)
		clr.l	4(a0)

locret_1B596:				; ...
		rts	
SS_Ani1UpData:	dc.b $46, $47, $48, $49, 0, 0

SS_AniReverse:				; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B5CC
		move.b	#7,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_AniRevData(pc,d0.w),d0
		bne.s	loc_1B5CA
		clr.l	(a0)
		clr.l	4(a0)
		move.b	#$2B,(a1)
		rts	

loc_1B5CA:				; ...
		move.b	d0,(a1)

locret_1B5CC:				; ...
		rts	
SS_AniRevData:	dc.b $2B, $31, $2B, $31, 0, 0

SS_AniEmeraldSparks:			; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B60C
		move.b	#5,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_AniEmerData(pc,d0.w),d0
		move.b	d0,(a1)
		bne.s	locret_1B60C
		clr.l	(a0)
		clr.l	4(a0)
		move.b	#4,($FFFFD024).w
		move.w	#$A8,d0
		jsr	$880000+(PlaySound_Special).l ;	play special stage GOAL	sound

locret_1B60C:				; ...
		rts	
SS_AniEmerData:	dc.b $46, $47, $48, $49, 0, 0

SS_AniGlassBlock:			; ...
		subq.b	#1,2(a0)
		bpl.s	locret_1B640
		move.b	#1,2(a0)
		moveq	#0,d0
		move.b	3(a0),d0
		addq.b	#1,3(a0)
		movea.l	4(a0),a1
		move.b	SS_AniGlassData(pc,d0.w),d0
		move.b	d0,(a1)
		bne.s	locret_1B640
		move.b	4(a0),(a1)
		clr.l	(a0)
		clr.l	4(a0)

locret_1B640:				; ...
		rts	
SS_AniGlassData:dc.b $4B, $4C, $4D, $4E, $4B, $4C, $4D,	$4E, 0,	0
; ---------------------------------------------------------------------------
; Special stage	layout pointers
; ---------------------------------------------------------------------------
SS_LayoutIndex:	dc.l $900000+SS_1, $900000+SS_2
		dc.l $900000+SS_3, $900000+SS_4
		dc.l $900000+SS_5, $900000+SS_6
; ---------------------------------------------------------------------------
; Special stage	start locations
; ---------------------------------------------------------------------------
SS_StartLoc:	dc.w $3D0, $2E0		; x-position, y-position
		dc.w $328, $574
		dc.w $4E4, $2E0
		dc.w $3AD, $2E0
		dc.w $340, $6B8
		dc.w $49B, $358
; ---------------------------------------------------------------------------
; Subroutine to	load special stage layout
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_Load:				; ...
		moveq	#0,d0
		move.b	($FFFFFE16).w,d0 ; load	number of last special stage entered
		addq.b	#1,($FFFFFE16).w
		cmpi.b	#6,($FFFFFE16).w
		bcs.s	SS_ChkEmldNum
		move.b	#0,($FFFFFE16).w ; reset if higher than	6

SS_ChkEmldNum:				; ...
		cmpi.b	#6,($FFFFFE57).w ; do you have all emeralds?
		beq.s	SS_LoadData	; if yes, branch
		moveq	#0,d1
		move.b	($FFFFFE57).w,d1
		subq.b	#1,d1
		bcs.s	SS_LoadData
		lea	($FFFFFE58).w,a3 ; check which emeralds	you have

SS_ChkEmldLoop:				; ...
		cmp.b	(a3,d1.w),d0
		bne.s	SS_ChkEmldRepeat
		bra.s	SS_Load

SS_ChkEmldRepeat:			; ...
		dbf	d1,SS_ChkEmldLoop

SS_LoadData:				; ...
		lsl.w	#2,d0
		lea	SS_StartLoc(pc,d0.w),a1
		move.w	(a1)+,($FFFFD008).w
		move.w	(a1)+,($FFFFD00C).w
		movea.l	SS_LayoutIndex(pc,d0.w),a0
		lea	($FF4000).l,a1
		move.w	#0,d0
		jsr	$880000+(EniDec).l
		lea	($FF0000).l,a1
		move.w	#$FFF,d0

SS_ClrRAM3:				; ...
		clr.l	(a1)+
		dbf	d0,SS_ClrRAM3
		lea	($FF1020).l,a1
		lea	($FF4000).l,a0
		moveq	#$3F,d1

loc_1B6F6:				; ...
		moveq	#$3F,d2

loc_1B6F8:				; ...
		move.b	(a0)+,(a1)+
		dbf	d2,loc_1B6F8
		lea	$40(a1),a1
		dbf	d1,loc_1B6F6
		lea	($FF4008).l,a1
		lea	(SS_MapIndex)(pc),a0
		moveq	#$4D,d1

loc_1B714:				; ...
		move.l	(a0)+,(a1)+
		move.w	#0,(a1)+
		move.b	-4(a0),-1(a1)
		move.w	(a0)+,(a1)+
		dbf	d1,loc_1B714
		lea	($FF4400).l,a1
		move.w	#$3F,d1

loc_1B730:				; ...
		clr.l	(a1)+
		dbf	d1,loc_1B730
		rts	
; End of function SS_Load

SS_MapIndex:	dc.l $880000+Map_SSWalls	; ...
		dc.w $142
		dc.l $880000+Map_SSWalls	; address of mappings
		dc.w $142		; VRAM setting
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $2142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $4142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_SSWalls
		dc.w $6142
		dc.l $880000+Map_obj47
		dc.w $23B
		dc.l $880000+Map_SS_R
		dc.w $570
		dc.l $880000+Map_SS_R
		dc.w $251
		dc.l $880000+Map_SS_R
		dc.w $370
		dc.l $880000+Map_SS_Up
		dc.w $263
		dc.l $880000+Map_SS_Down
		dc.w $263
		dc.l $880000+Map_SS_R
		dc.w $22F0
		dc.l $880000+Map_SS_Glass
		dc.w $470
		dc.l $880000+Map_SS_Glass
		dc.w $5F0
		dc.l $880000+Map_SS_Glass
		dc.w $65F0
		dc.l $880000+Map_SS_Glass
		dc.w $25F0
		dc.l $880000+Map_SS_Glass
		dc.w $45F0
		dc.l $880000+Map_SS_R
		dc.w $2F0
		dc.l $880000+Map_obj47+$1000000	; add frame no.	* $1000000
		dc.w $23B
		dc.l $880000+Map_obj47+$2000000
		dc.w $23B
		dc.l $880000+Map_SS_R
		dc.w $797
		dc.l $880000+Map_SS_R
		dc.w $7A0
		dc.l $880000+Map_SS_R
		dc.w $7A9
		dc.l $880000+Map_SS_R
		dc.w $797
		dc.l $880000+Map_SS_R
		dc.w $7A0
		dc.l $880000+Map_SS_R
		dc.w $7A9
		dc.l $880000+Map_obj25
		dc.w $27B2
		dc.l $880000+Map_SS_Chaos3
		dc.w $770
		dc.l $880000+Map_SS_Chaos3
		dc.w $2770
		dc.l $880000+Map_SS_Chaos3
		dc.w $4770
		dc.l $880000+Map_SS_Chaos3
		dc.w $6770
		dc.l $880000+Map_SS_Chaos1
		dc.w $770
		dc.l $880000+Map_SS_Chaos2
		dc.w $770
		dc.l $880000+Map_SS_R
		dc.w $4F0
		dc.l $880000+Map_obj25+$4000000
		dc.w $27B2
		dc.l $880000+Map_obj25+$5000000
		dc.w $27B2
		dc.l $880000+Map_obj25+$6000000
		dc.w $27B2
		dc.l $880000+Map_obj25+$7000000
		dc.w $27B2
		dc.l $880000+Map_SS_Glass
		dc.w $23F0
		dc.l $880000+Map_SS_Glass+$1000000
		dc.w $23F0
		dc.l $880000+Map_SS_Glass+$2000000
		dc.w $23F0
		dc.l $880000+Map_SS_Glass+$3000000
		dc.w $23F0
		dc.l $880000+Map_SS_R+$2000000
		dc.w $4F0
		dc.l $880000+Map_SS_Glass
		dc.w $5F0
		dc.l $880000+Map_SS_Glass
		dc.w $65F0
		dc.l $880000+Map_SS_Glass
		dc.w $25F0
		dc.l $880000+Map_SS_Glass
		dc.w $45F0
; ---------------------------------------------------------------------------
; Sprite mappings - special stage "R" block
; ---------------------------------------------------------------------------
Map_SS_R:	dc.w byte_1B912-Map_SS_R, byte_1B918-Map_SS_R ;	...
		dc.w byte_1B91E-Map_SS_R
byte_1B912:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_1B918:	dc.b 1			; ...
		dc.b $F4, $A, 0, 9, $F4
byte_1B91E:	dc.b 0			; ...
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - special stage breakable glass blocks and red-white blocks
; ---------------------------------------------------------------------------
Map_SS_Glass:	dc.w byte_1B928-Map_SS_Glass, byte_1B92E-Map_SS_Glass ;	...
		dc.w byte_1B934-Map_SS_Glass, byte_1B93A-Map_SS_Glass
byte_1B928:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_1B92E:	dc.b 1			; ...
		dc.b $F4, $A, 8, 0, $F4
byte_1B934:	dc.b 1			; ...
		dc.b $F4, $A, $18, 0, $F4
byte_1B93A:	dc.b 1			; ...
		dc.b $F4, $A, $10, 0, $F4
; ---------------------------------------------------------------------------
; Sprite mappings - special stage "UP" block
; ---------------------------------------------------------------------------
Map_SS_Up:	dc.w byte_1B944-Map_SS_Up ; ...
		dc.w byte_1B94A-Map_SS_Up
byte_1B944:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_1B94A:	dc.b 1			; ...
		dc.b $F4, $A, 0, $12, $F4
; ---------------------------------------------------------------------------
; Sprite mappings - special stage "DOWN" block
; ---------------------------------------------------------------------------
Map_SS_Down:	dc.w byte_1B954-Map_SS_Down ; ...
		dc.w byte_1B95A-Map_SS_Down
byte_1B954:	dc.b 1			; ...
		dc.b $F4, $A, 0, 9, $F4
byte_1B95A:	dc.b 1			; ...
		dc.b $F4, $A, 0, $12, $F4
; ---------------------------------------------------------------------------
; Sprite mappings - special stage chaos	emeralds
; ---------------------------------------------------------------------------
Map_SS_Chaos1:	dc.w byte_1B96C-Map_SS_Chaos1 ;	...
		dc.w byte_1B97E-Map_SS_Chaos1
Map_SS_Chaos2:	dc.w byte_1B972-Map_SS_Chaos2 ;	...
		dc.w byte_1B97E-Map_SS_Chaos2
Map_SS_Chaos3:	dc.w byte_1B978-Map_SS_Chaos3 ;	...
		dc.w byte_1B97E-Map_SS_Chaos3
byte_1B96C:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_1B972:	dc.b 1			; ...
		dc.b $F8, 5, 0,	4, $F8
byte_1B978:	dc.b 1			; ...
		dc.b $F8, 5, 0,	8, $F8
byte_1B97E:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$C, $F8

; ---------------------------------------------------------------------------
; Object 09 - Sonic (special stage)
; ---------------------------------------------------------------------------

Obj09:					; ...
		tst.w	($FFFFFE08).w	; is debug mode	being used?
		beq.s	Obj09_Normal	; if not, branch
		bsr.w	SS_FixCamera
		bra.w	DebugMode

Obj09_Normal:				; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj09_Index(pc,d0.w),d1
		jmp	Obj09_Index(pc,d1.w)
Obj09_Index:	dc.w Obj09_Main-Obj09_Index ; ...
		dc.w Obj09_ChkDebug-Obj09_Index
		dc.w Obj09_ExitStage-Obj09_Index
		dc.w Obj09_Exit2-Obj09_Index

Obj09_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$E,$16(a0)
		move.b	#7,$17(a0)
		move.l	#$900000+Map_Sonic,4(a0)
		move.w	#$780,2(a0)
		move.b	#4,1(a0)
		move.b	#0,$18(a0)
		move.b	#2,$1C(a0)
		bset	#2,$22(a0)
		bset	#1,$22(a0)

Obj09_ChkDebug:				; ...
		tst.w	($FFFFFFFA).w	; is debug mode	cheat enabled?
		beq.s	Obj09_NoDebug	; if not, branch
		btst	#4,($FFFFF605).w ; is button B pressed?
		beq.s	Obj09_NoDebug	; if not, branch
		move.w	#1,($FFFFFE08).w ; change Sonic	into a ring

Obj09_NoDebug:				; ...
		move.b	#0,$30(a0)
		moveq	#0,d0
		move.b	$22(a0),d0
		andi.w	#2,d0
		move.w	Obj09_Modes(pc,d0.w),d1
		jsr	Obj09_Modes(pc,d1.w)
		jsr	$880000+LoadSonicDynPLC
		jmp	$880000+DisplaySprite
Obj09_Modes:	dc.w Obj09_OnWall-Obj09_Modes ;	...
		dc.w Obj09_InAir-Obj09_Modes

Obj09_OnWall:				; ...
		bsr.w	Obj09_Jump
		bsr.w	Obj09_Move
		bsr.w	Obj09_Fall
		bra.s	Obj09_Display

Obj09_InAir:				; ...
		bsr.w	nullsub_2
		bsr.w	Obj09_Move
		bsr.w	Obj09_Fall

Obj09_Display:				; ...
		bsr.w	Obj09_ChkItems
		bsr.w	Obj09_ChkItems2
		jsr	$880000+SpeedToPos
		bsr.w	SS_FixCamera
		move.w	($FFFFF780).w,d0
		add.w	($FFFFF782).w,d0
		move.w	d0,($FFFFF780).w
		jsr	$880000+Sonic_Animate
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_Move:				; ...
		btst	#2,($FFFFF602).w ; is left being pressed?
		beq.s	Obj09_ChkRight	; if not, branch
		bsr.w	Obj09_MoveLeft

Obj09_ChkRight:				; ...
		btst	#3,($FFFFF602).w ; is right being pressed?
		beq.s	loc_1BA78	; if not, branch
		bsr.w	Obj09_MoveRight

loc_1BA78:				; ...
		move.b	($FFFFF602).w,d0
		andi.b	#$C,d0
		bne.s	loc_1BAA8
		move.w	$14(a0),d0
		beq.s	loc_1BAA8
		bmi.s	loc_1BA9A
		subi.w	#$C,d0
		bcc.s	loc_1BA94
		move.w	#0,d0

loc_1BA94:				; ...
		move.w	d0,$14(a0)
		bra.s	loc_1BAA8

loc_1BA9A:				; ...
		addi.w	#$C,d0
		bcc.s	loc_1BAA4
		move.w	#0,d0

loc_1BAA4:				; ...
		move.w	d0,$14(a0)

loc_1BAA8:				; ...
		move.b	($FFFFF780).w,d0
		addi.b	#$20,d0
		andi.b	#$C0,d0
		neg.b	d0
		jsr	$880000+(CalcSine).l
		muls.w	$14(a0),d1
		add.l	d1,8(a0)
		muls.w	$14(a0),d0
		add.l	d0,$C(a0)
		movem.l	d0-d1,-(sp)
		move.l	$C(a0),d2
		move.l	8(a0),d3
		bsr.w	sub_1BCE8
		beq.s	loc_1BAF2
		movem.l	(sp)+,d0-d1
		sub.l	d1,8(a0)
		sub.l	d0,$C(a0)
		move.w	#0,$14(a0)
		rts	

loc_1BAF2:				; ...
		movem.l	(sp)+,d0-d1
		rts	
; End of function Obj09_Move


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_MoveLeft:				; ...
		bset	#0,$22(a0)
		move.w	$14(a0),d0
		beq.s	loc_1BB06
		bpl.s	loc_1BB1A

loc_1BB06:				; ...
		subi.w	#$C,d0
		cmpi.w	#-$800,d0
		bgt.s	loc_1BB14
		move.w	#-$800,d0

loc_1BB14:				; ...
		move.w	d0,$14(a0)
		rts	

loc_1BB1A:				; ...
		subi.w	#$40,d0
		bcc.s	loc_1BB22
		nop	

loc_1BB22:				; ...
		move.w	d0,$14(a0)
		rts	
; End of function Obj09_MoveLeft


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_MoveRight:			; ...
		bclr	#0,$22(a0)
		move.w	$14(a0),d0
		bmi.s	loc_1BB48
		addi.w	#$C,d0
		cmpi.w	#$800,d0
		blt.s	loc_1BB42
		move.w	#$800,d0

loc_1BB42:				; ...
		move.w	d0,$14(a0)
		bra.s	locret_1BB54

loc_1BB48:				; ...
		addi.w	#$40,d0
		bcc.s	loc_1BB50
		nop	

loc_1BB50:				; ...
		move.w	d0,$14(a0)

locret_1BB54:				; ...
		rts	
; End of function Obj09_MoveRight


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_Jump:				; ...
		move.b	($FFFFF603).w,d0
		andi.b	#$70,d0		; is A,	B or C pressed?
		beq.s	Obj09_NoJump	; if not, branch
		move.b	($FFFFF780).w,d0
		andi.b	#$FC,d0
		neg.b	d0
		subi.b	#$40,d0
		jsr	$880000+(CalcSine).l
		muls.w	#$680,d1
		asr.l	#8,d1
		move.w	d1,$10(a0)
		muls.w	#$680,d0
		asr.l	#8,d0
		move.w	d0,$12(a0)
		bset	#1,$22(a0)
		move.w	#$A0,d0
		jsr	$880000+(PlaySound_Special).l ;	play jumping sound

Obj09_NoJump:				; ...
		rts	
; End of function Obj09_Jump


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


nullsub_2:				; ...
		rts	
; End of function nullsub_2

; ---------------------------------------------------------------------------
; unused subroutine to limit Sonic's upward vertical speed
; ---------------------------------------------------------------------------
		move.w	#-$400,d1
		cmp.w	$12(a0),d1
		ble.s	locret_1BBB4
		move.b	($FFFFF602).w,d0
		andi.b	#$70,d0
		bne.s	locret_1BBB4
		move.w	d1,$12(a0)

locret_1BBB4:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	fix the	camera on Sonic's position (special stage)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SS_FixCamera:				; ...
		move.w	$C(a0),d2
		move.w	8(a0),d3
		move.w	($FFFFF700).w,d0
		subi.w	#$A0,d3
		bcs.s	loc_1BBCE
		sub.w	d3,d0
		sub.w	d0,($FFFFF700).w

loc_1BBCE:				; ...
		move.w	($FFFFF704).w,d0
		subi.w	#$70,d2
		bcs.s	locret_1BBDE
		sub.w	d2,d0
		sub.w	d0,($FFFFF704).w

locret_1BBDE:				; ...
		rts	
; End of function SS_FixCamera


Obj09_ExitStage:			; ...
		addi.w	#$40,($FFFFF782).w
		cmpi.w	#$1800,($FFFFF782).w
		bne.s	loc_1BBF4
		move.b	#$C,($FFFFF600).w

loc_1BBF4:				; ...
		cmpi.w	#$3000,($FFFFF782).w
		blt.s	loc_1BC12
		move.w	#0,($FFFFF782).w
		move.w	#$4000,($FFFFF780).w
		addq.b	#2,$24(a0)
		move.w	#$3C,$38(a0)

loc_1BC12:				; ...
		move.w	($FFFFF780).w,d0
		add.w	($FFFFF782).w,d0
		move.w	d0,($FFFFF780).w
		jsr	$880000+Sonic_Animate
		jsr	$880000+LoadSonicDynPLC
		bsr.w	SS_FixCamera
		jmp	$880000+DisplaySprite

Obj09_Exit2:				; ...
		subq.w	#1,$38(a0)
		bne.s	loc_1BC40
		move.b	#$C,($FFFFF600).w

loc_1BC40:				; ...
		jsr	$880000+Sonic_Animate
		jsr	$880000+LoadSonicDynPLC
		bsr.w	SS_FixCamera
		jmp	$880000+DisplaySprite

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_Fall:				; ...
		move.l	$C(a0),d2
		move.l	8(a0),d3
		move.b	($FFFFF780).w,d0
		andi.b	#$FC,d0
		jsr	$880000+(CalcSine).l
		move.w	$10(a0),d4
		ext.l	d4
		asl.l	#8,d4
		muls.w	#$2A,d0
		add.l	d4,d0
		move.w	$12(a0),d4
		ext.l	d4
		asl.l	#8,d4
		muls.w	#$2A,d1
		add.l	d4,d1
		add.l	d0,d3
		bsr.w	sub_1BCE8
		beq.s	loc_1BCB0
		sub.l	d0,d3
		moveq	#0,d0
		move.w	d0,$10(a0)
		bclr	#1,$22(a0)
		add.l	d1,d2
		bsr.w	sub_1BCE8
		beq.s	loc_1BCC6
		sub.l	d1,d2
		moveq	#0,d1
		move.w	d1,$12(a0)
		rts	

loc_1BCB0:				; ...
		add.l	d1,d2
		bsr.w	sub_1BCE8
		beq.s	loc_1BCD4
		sub.l	d1,d2
		moveq	#0,d1
		move.w	d1,$12(a0)
		bclr	#1,$22(a0)

loc_1BCC6:				; ...
		asr.l	#8,d0
		asr.l	#8,d1
		move.w	d0,$10(a0)
		move.w	d1,$12(a0)
		rts	

loc_1BCD4:				; ...
		asr.l	#8,d0
		asr.l	#8,d1
		move.w	d0,$10(a0)
		move.w	d1,$12(a0)
		bset	#1,$22(a0)
		rts	
; End of function Obj09_Fall


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_1BCE8:				; ...
		lea	($FF0000).l,a1
		moveq	#0,d4
		swap	d2
		move.w	d2,d4
		swap	d2
		addi.w	#$44,d4
		divu.w	#$18,d4
		mulu.w	#$80,d4
		adda.l	d4,a1
		moveq	#0,d4
		swap	d3
		move.w	d3,d4
		swap	d3
		addi.w	#$14,d4
		divu.w	#$18,d4
		adda.w	d4,a1
		moveq	#0,d5
		move.b	(a1)+,d4
		bsr.s	sub_1BD30
		move.b	(a1)+,d4
		bsr.s	sub_1BD30
		adda.w	#$7E,a1
		move.b	(a1)+,d4
		bsr.s	sub_1BD30
		move.b	(a1)+,d4
		bsr.s	sub_1BD30
		tst.b	d5
		rts	
; End of function sub_1BCE8


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_1BD30:				; ...
		beq.s	locret_1BD44
		cmpi.b	#$28,d4
		beq.s	locret_1BD44
		cmpi.b	#$3A,d4
		bcs.s	loc_1BD46
		cmpi.b	#$4B,d4
		bcc.s	loc_1BD46

locret_1BD44:				; ...
		rts	

loc_1BD46:				; ...
		move.b	d4,$30(a0)
		move.l	a1,$32(a0)
		moveq	#-1,d5
		rts	
; End of function sub_1BD30


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_ChkItems:				; ...
		lea	($FF0000).l,a1
		moveq	#0,d4
		move.w	$C(a0),d4
		addi.w	#$50,d4
		divu.w	#$18,d4
		mulu.w	#$80,d4
		adda.l	d4,a1
		moveq	#0,d4
		move.w	8(a0),d4
		addi.w	#$20,d4
		divu.w	#$18,d4
		adda.w	d4,a1
		move.b	(a1),d4
		bne.s	Obj09_ChkCont
		tst.b	$3A(a0)
		bne.w	Obj09_MakeGhostSolid
		moveq	#0,d4
		rts	

Obj09_ChkCont:				; ...
		cmpi.b	#$3A,d4		; is the item a	ring?
		bne.s	Obj09_Chk1Up
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_GetCont
		move.b	#1,(a2)
		move.l	a1,4(a2)

Obj09_GetCont:				; ...
		jsr	$880000+CollectRing
		cmpi.w	#50,($FFFFFE20).w ; check if you have 50 rings
		bcs.s	Obj09_NoCont
		bset	#0,($FFFFFE1B).w
		bne.s	Obj09_NoCont
		addq.b	#1,($FFFFFE18).w ; add 1 to number of continues
		move.w	#$BF,d0
		jsr	$880000+(PlaySound).l	; play extra continue sound

Obj09_NoCont:				; ...
		moveq	#0,d4
		rts	

Obj09_Chk1Up:				; ...
		cmpi.b	#$28,d4		; is the item an extra life?
		bne.s	Obj09_ChkEmer
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_Get1Up
		move.b	#3,(a2)
		move.l	a1,4(a2)

Obj09_Get1Up:				; ...
		addq.b	#1,($FFFFFE12).w ; add 1 to number of lives
		addq.b	#1,($FFFFFE1C).w ; add 1 to lives counter
		move.w	#$88,d0
		jsr	$880000+(PlaySound).l	; play extra life music
		moveq	#0,d4
		rts	

Obj09_ChkEmer:				; ...
		cmpi.b	#$3B,d4		; is the item an emerald?
		bcs.s	Obj09_ChkGhost
		cmpi.b	#$40,d4
		bhi.s	Obj09_ChkGhost
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_GetEmer
		move.b	#5,(a2)
		move.l	a1,4(a2)

Obj09_GetEmer:				; ...
		cmpi.b	#6,($FFFFFE57).w ; do you have all the emeralds?
		beq.s	Obj09_NoEmer	; if yes, branch
		subi.b	#$3B,d4
		moveq	#0,d0
		move.b	($FFFFFE57).w,d0
		lea	($FFFFFE58).w,a2
		move.b	d4,(a2,d0.w)
		addq.b	#1,($FFFFFE57).w ; add 1 to number of emeralds

Obj09_NoEmer:				; ...
		move.w	#$93,d0
		jsr	$880000+(PlaySound_Special).l ;	play emerald music
		moveq	#0,d4
		rts	

Obj09_ChkGhost:				; ...
		cmpi.b	#$41,d4		; is the item a	ghost block?
		bne.s	Obj09_ChkGhostTag
		move.b	#1,$3A(a0)	; mark the ghost block as "passed"

Obj09_ChkGhostTag:			; ...
		cmpi.b	#$4A,d4		; is the item a	switch for ghost blocks?
		bne.s	Obj09_NoGhost
		cmpi.b	#1,$3A(a0)	; have the ghost blocks	been passed?
		bne.s	Obj09_NoGhost	; if not, branch
		move.b	#2,$3A(a0)	; mark the ghost blocks	as "solid"

Obj09_NoGhost:				; ...
		moveq	#-1,d4
		rts	

Obj09_MakeGhostSolid:			; ...
		cmpi.b	#2,$3A(a0)	; is the ghost marked as "solid"?
		bne.s	Obj09_GhostNotSolid ; if not, branch
		lea	($FF1020).l,a1
		moveq	#$3F,d1

Obj09_GhostLoop2:			; ...
		moveq	#$3F,d2

Obj09_GhostLoop:			; ...
		cmpi.b	#$41,(a1)	; is the item a	ghost block?
		bne.s	Obj09_NoReplace	; if not, branch
		move.b	#$2C,(a1)	; replace ghost	block with a solid block

Obj09_NoReplace:			; ...
		addq.w	#1,a1
		dbf	d2,Obj09_GhostLoop
		lea	$40(a1),a1
		dbf	d1,Obj09_GhostLoop2

Obj09_GhostNotSolid:			; ...
		clr.b	$3A(a0)
		moveq	#0,d4
		rts	
; End of function Obj09_ChkItems


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj09_ChkItems2:			; ...
		move.b	$30(a0),d0
		bne.s	Obj09_ChkBumper
		subq.b	#1,$36(a0)
		bpl.s	loc_1BEA0
		move.b	#0,$36(a0)

loc_1BEA0:				; ...
		subq.b	#1,$37(a0)
		bpl.s	locret_1BEAC
		move.b	#0,$37(a0)

locret_1BEAC:				; ...
		rts	

Obj09_ChkBumper:			; ...
		cmpi.b	#$25,d0		; is the item a	bumper?
		bne.s	Obj09_GOAL
		move.l	$32(a0),d1
		subi.l	#$FF0001,d1
		move.w	d1,d2
		andi.w	#$7F,d1
		mulu.w	#$18,d1
		subi.w	#$14,d1
		lsr.w	#7,d2
		andi.w	#$7F,d2
		mulu.w	#$18,d2
		subi.w	#$44,d2
		sub.w	8(a0),d1
		sub.w	$C(a0),d2
		jsr	$880000+(CalcAngle).l
		jsr	$880000+(CalcSine).l
		muls.w	#-$700,d1
		asr.l	#8,d1
		move.w	d1,$10(a0)
		muls.w	#-$700,d0
		asr.l	#8,d0
		move.w	d0,$12(a0)
		bset	#1,$22(a0)
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_BumpSnd
		move.b	#2,(a2)
		move.l	$32(a0),d0
		subq.l	#1,d0
		move.l	d0,4(a2)

Obj09_BumpSnd:				; ...
		move.w	#$B4,d0
		jmp	$880000+(PlaySound_Special).l ;	play bumper sound

Obj09_GOAL:				; ...
		cmpi.b	#$27,d0		; is the item a	"GOAL"?
		bne.s	Obj09_UPblock
		addq.b	#2,$24(a0)	; run routine "Obj09_ExitStage"
		move.w	#$A8,d0		; change item
		jsr	$880000+(PlaySound_Special).l ;	play "GOAL" sound
		rts	

Obj09_UPblock:				; ...
		cmpi.b	#$29,d0		; is the item an "UP" block?
		bne.s	Obj09_DOWNblock
		tst.b	$36(a0)
		bne.w	Obj09_NoGlass
		move.b	#$1E,$36(a0)
		btst	#6,($FFFFF783).w
		beq.s	Obj09_UPsnd
		asl	($FFFFF782).w	; increase stage rotation speed
		movea.l	$32(a0),a1
		subq.l	#1,a1
		move.b	#$2A,(a1)	; change item to a "DOWN" block

Obj09_UPsnd:				; ...
		move.w	#$A9,d0
		jmp	$880000+(PlaySound_Special).l ;	play up/down sound

Obj09_DOWNblock:			; ...
		cmpi.b	#$2A,d0		; is the item a	"DOWN" block?
		bne.s	Obj09_Rblock
		tst.b	$36(a0)
		bne.w	Obj09_NoGlass
		move.b	#$1E,$36(a0)
		btst	#6,($FFFFF783).w
		bne.s	Obj09_DOWNsnd
		asr	($FFFFF782).w	; reduce stage rotation	speed
		movea.l	$32(a0),a1
		subq.l	#1,a1
		move.b	#$29,(a1)	; change item to an "UP" block

Obj09_DOWNsnd:				; ...
		move.w	#$A9,d0
		jmp	$880000+(PlaySound_Special).l ;	play up/down sound

Obj09_Rblock:				; ...
		cmpi.b	#$2B,d0		; is the item an "R" block?
		bne.s	Obj09_ChkGlass
		tst.b	$37(a0)
		bne.w	Obj09_NoGlass
		move.b	#$1E,$37(a0)
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_RevStage
		move.b	#4,(a2)
		move.l	$32(a0),d0
		subq.l	#1,d0
		move.l	d0,4(a2)

Obj09_RevStage:				; ...
		neg.w	($FFFFF782).w	; reverse stage	rotation
		move.w	#$A9,d0
		jmp	$880000+(PlaySound_Special).l ;	play sound

Obj09_ChkGlass:				; ...
		cmpi.b	#$2D,d0		; is the item a	glass block?
		beq.s	Obj09_Glass	; if yes, branch
		cmpi.b	#$2E,d0
		beq.s	Obj09_Glass
		cmpi.b	#$2F,d0
		beq.s	Obj09_Glass
		cmpi.b	#$30,d0
		bne.s	Obj09_NoGlass	; if not, branch

Obj09_Glass:				; ...
		bsr.w	SS_RemoveCollectedItem
		bne.s	Obj09_GlassSnd
		move.b	#6,(a2)
		movea.l	$32(a0),a1
		subq.l	#1,a1
		move.l	a1,4(a2)
		move.b	(a1),d0
		addq.b	#1,d0		; change glass type when touched
		cmpi.b	#$30,d0
		bls.s	Obj09_GlassUpdate ; if glass is	still there, branch
		clr.b	d0		; remove the glass block when it's destroyed

Obj09_GlassUpdate:			; ...
		move.b	d0,4(a2)	; update the stage layout

Obj09_GlassSnd:				; ...
		move.w	#$BA,d0
		jmp	$880000+(PlaySound_Special).l ;	play glass block sound

Obj09_NoGlass:				; ...
		rts	
; End of function Obj09_ChkItems2
; ---------------------------------------------------------------------------
; Object 0B - pole that	breaks (LZ)
; ---------------------------------------------------------------------------

Obj0B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0B_Index(pc,d0.w),d1
		jmp	Obj0B_Index(pc,d1.w)
Obj0B_Index:	dc.w Obj0B_Main-Obj0B_Index ; ...
		dc.w Obj0B_Action-Obj0B_Index
		dc.w Obj0B_Display-Obj0B_Index

Obj0B_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj0B,4(a0)
		move.w	#$43DE,2(a0)
		move.b	#4,1(a0)
		move.b	#8,$19(a0)
		move.b	#4,$18(a0)
		move.b	#$E1,$20(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		mulu.w	#60,d0		; multiply by 60 (1 second)
		move.w	d0,$30(a0)	; set breakage time

Obj0B_Action:				; ...
		tst.b	$32(a0)
		beq.s	Obj0B_Grab
		tst.w	$30(a0)
		beq.s	Obj0B_MoveUp
		subq.w	#1,$30(a0)
		bne.s	Obj0B_MoveUp
		move.b	#1,$1A(a0)	; break	the pole
		bra.s	Obj0B_Release

Obj0B_MoveUp:				; ...
		lea	($FFFFD000).w,a1
		move.w	$C(a0),d0
		subi.w	#$18,d0
		btst	#0,($FFFFF604).w ; check if "up" is pressed
		beq.s	Obj0B_MoveDown
		subq.w	#1,$C(a1)	; move Sonic up
		cmp.w	$C(a1),d0
		bcs.s	Obj0B_MoveDown
		move.w	d0,$C(a1)

Obj0B_MoveDown:				; ...
		addi.w	#$24,d0
		btst	#1,($FFFFF604).w ; check if "down" is pressed
		beq.s	Obj0B_LetGo
		addq.w	#1,$C(a1)	; move Sonic down
		cmp.w	$C(a1),d0
		bcc.s	Obj0B_LetGo
		move.w	d0,$C(a1)

Obj0B_LetGo:				; ...
		move.b	($FFFFF603).w,d0
		andi.w	#$70,d0
		beq.s	Obj0B_Display

Obj0B_Release:				; ...
		clr.b	$20(a0)
		addq.b	#2,$24(a0)
		clr.b	($FFFFF7C8).w
		clr.b	($FFFFF7C9).w
		clr.b	$32(a0)
		bra.s	Obj0B_Display

Obj0B_Grab:				; ...
		tst.b	$21(a0)		; has Sonic touched the	pole?
		beq.s	Obj0B_Display	; if not, branch
		lea	($FFFFD000).w,a1
		move.w	8(a0),d0
		addi.w	#$14,d0
		cmp.w	8(a1),d0
		bcc.s	Obj0B_Display
		clr.b	$21(a0)
		cmpi.b	#4,$24(a1)
		bcc.s	Obj0B_Display
		clr.w	$10(a1)		; stop Sonic moving
		clr.w	$12(a1)		; stop Sonic moving
		move.w	8(a0),d0
		addi.w	#$14,d0
		move.w	d0,8(a1)
		bclr	#0,$22(a1)
		move.b	#$11,$1C(a1)	; set Sonic's animation to "hanging" ($11)
		move.b	#1,($FFFFF7C8).w ; lock	controls
		move.b	#1,($FFFFF7C9).w ; disable wind	tunnel
		move.b	#1,$32(a0)	; begin	countdown to breakage

Obj0B_Display:				; ...
		bra.w	MarkObjGone
; ---------------------------------------------------------------------------
; Sprite mappings - pole that breaks (LZ)
; ---------------------------------------------------------------------------
Map_obj0B:	dc.w byte_11326-Map_obj0B ; ...
		dc.w byte_11331-Map_obj0B
byte_11326:	dc.b 2			; ...
		dc.b $E0, 3, 0,	0, $FC	; normal pole
		dc.b 0,	3, $10,	0, $FC
byte_11331:	dc.b 4			; ...
		dc.b $E0, 1, 0,	0, $FC	; broken pole
		dc.b $F0, 5, 0,	4, $FC
		dc.b 0,	5, $10,	4, $FC
		dc.b $10, 1, $10, 0, $FC
; ---------------------------------------------------------------------------
; Object 0C - flapping door (LZ)
; ---------------------------------------------------------------------------

Obj0C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0C_Index(pc,d0.w),d1
		jmp	Obj0C_Index(pc,d1.w)
Obj0C_Index:	dc.w Obj0C_Main-Obj0C_Index ; ...
		dc.w Obj0C_OpenClose-Obj0C_Index

Obj0C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj0C,4(a0)
		move.w	#$4328,2(a0)
		ori.b	#4,1(a0)
		move.b	#$28,$19(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		mulu.w	#60,d0		; multiply by 60 (1 second)
		move.w	d0,$32(a0)	; set flap delay time

Obj0C_OpenClose:			; ...
		subq.w	#1,$30(a0)	; subtract 1 from time delay
		bpl.s	Obj0C_Solid	; if time remains, branch
		move.w	$32(a0),$30(a0)	; reset	time delay
		bchg	#0,$1C(a0)	; open/close door
		tst.b	1(a0)
		bpl.s	Obj0C_Solid
		move.w	#$BB,d0
		jsr	$880000+(PlaySound_Special).l ;	play door sound

Obj0C_Solid:				; ...
		lea	$880000+(Ani_obj0C).l,a1
		jsr	$880000+AnimateSprite
		clr.b	($FFFFF7C9).w	; enable wind tunnel
		tst.b	$1A(a0)		; is the door open?
		bne.s	Obj0C_Display	; if yes, branch
		move.w	($FFFFD008).w,d0
		cmp.w	8(a0),d0	; is Sonic in front of the door?
		bcc.s	Obj0C_Display	; if yes, branch
		move.b	#1,($FFFFF7C9).w ; disable wind	tunnel
		move.w	#$13,d1
		move.w	#$20,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject	; make the door	solid

Obj0C_Display:				; ...
		bra.w	MarkObjGone
Ani_obj0C:	dc.w byte_113E6-Ani_obj0C, byte_113EC-Ani_obj0C	; ...
byte_113E6:	dc.b 3,	0, 1, 2, $FE, 1	; ...
byte_113EC:	dc.b 3,	2, 1, 0, $FE, 1	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - flapping door (LZ)
; ---------------------------------------------------------------------------
Map_obj0C:	dc.w byte_113F8-Map_obj0C ; ...
		dc.w byte_11403-Map_obj0C
		dc.w byte_1140E-Map_obj0C
byte_113F8:	dc.b 2			; ...
		dc.b $E0, 7, 0,	0, $F8
		dc.b 0,	7, $10,	0, $F8
byte_11403:	dc.b 2			; ...
		dc.b $DA, $F, 0, 8, $FB
		dc.b 6,	$F, $10, 8, $FB
byte_1140E:	dc.b 2			; ...
		dc.b $D8, $D, 0, $18, 0
		dc.b $18, $D, $10, $18,	0
		dc.b 0

; ---------------------------------------------------------------------------
; Object 0D - signpost at the end of a level
; ---------------------------------------------------------------------------

Obj0D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0D_Index(pc,d0.w),d1
		jsr	Obj0D_Index(pc,d1.w)
		lea	$880000+(Ani_obj0D).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj0D_Delete
		rts	
		
Obj0D_Delete:
		jmp	$880000+DeleteObject
		
Obj0D_Index:	dc.w Obj0D_Main-Obj0D_Index ; ...
		dc.w Obj0D_Touch-Obj0D_Index
		dc.w Obj0D_Spin-Obj0D_Index
		dc.w Obj0D_SonicRun-Obj0D_Index
		dc.w locret_ED1A-Obj0D_Index

Obj0D_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj0D,4(a0)
		move.w	#$680,2(a0)
		move.b	#4,1(a0)
		move.b	#$18,$19(a0)
		move.b	#4,$18(a0)

Obj0D_Touch:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcs.s	locret_EBBA
		cmpi.w	#$20,d0		; is Sonic within $20 pixels of	the signpost?
		bcc.s	locret_EBBA	; if not, branch
		move.w	#$CF,d0
		jsr	$880000+(PlaySound).l	; play signpost	sound
		clr.b	($FFFFFE1E).w	; stop time counter
		move.w	($FFFFF72A).w,($FFFFF728).w ; lock screen position
		addq.b	#2,$24(a0)

locret_EBBA:				; ...
		rts	

Obj0D_Spin:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from spin time
		bpl.s	Obj0D_Sparkle	; if time remains, branch
		move.w	#60,$30(a0)	; set spin cycle time to 1 second
		addq.b	#1,$1C(a0)	; next spin cycle
		cmpi.b	#3,$1C(a0)	; have 3 spin cycles completed?
		bne.s	Obj0D_Sparkle	; if not, branch
		addq.b	#2,$24(a0)

Obj0D_Sparkle:				; ...
		subq.w	#1,$32(a0)	; subtract 1 from time delay
		bpl.s	locret_EC42	; if time remains, branch
		move.w	#$B,$32(a0)	; set time between sparkles to $B frames
		moveq	#0,d0
		move.b	$34(a0),d0
		addq.b	#2,$34(a0)
		andi.b	#$E,$34(a0)
		lea	Obj0D_SparkPos(pc,d0.w),a2 ; load sparkle position data
		jsr	$880000+SingleObjLoad
		bne.s	locret_EC42
		move.b	#$25,0(a1)	; load rings object
		move.b	#6,$24(a1)	; jump to ring sparkle subroutine
		move.b	(a2)+,d0
		ext.w	d0
		add.w	8(a0),d0
		move.w	d0,8(a1)
		move.b	(a2)+,d0
		ext.w	d0
		add.w	$C(a0),d0
		move.w	d0,$C(a1)
		move.l	#$880000+Map_obj25,4(a1)
		move.w	#$27B2,2(a1)
		move.b	#4,1(a1)
		move.b	#2,$18(a1)
		move.b	#8,$19(a1)

locret_EC42:				; ...
		rts	
Obj0D_SparkPos:	dc.b -$18,-$10		; x-position, y-position
		dc.b	8,   8
		dc.b -$10,   0
		dc.b  $18,  -8
		dc.b	0,  -8
		dc.b  $10,   0
		dc.b -$18,   8
		dc.b  $18, $10

Obj0D_SonicRun:				; ...
		tst.w	($FFFFFE08).w	; is debug mode	on?
		bne.w	locret_ECEE	; if yes, branch
		btst	#1,($FFFFD022).w
		bne.s	loc_EC70
		move.b	#1,($FFFFF7CC).w ; lock	controls
		move.w	#$800,($FFFFF602).w ; make Sonic run to	the right

loc_EC70:				; ...
		tst.b	($FFFFD000).w
		beq.s	loc_EC86
		move.w	($FFFFD008).w,d0
		move.w	($FFFFF72A).w,d1
		addi.w	#$128,d1
		cmp.w	d1,d0
		bcs.s	locret_ECEE

loc_EC86:				; ...
		addq.b	#2,$24(a0)

; ---------------------------------------------------------------------------
; Subroutine to	set up bonuses at the end of an	act
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


GotThroughAct:				; ...
		tst.b	($FFFFD5C0).w
		bne.s	locret_ECEE
		move.w	($FFFFF72A).w,($FFFFF728).w
		clr.b	($FFFFFE2D).w	; disable invincibility
		clr.b	($FFFFFE1E).w	; stop time counter
		move.b	#$3A,($FFFFD5C0).w
		moveq	#$10,d0
		jsr	$880000+(LoadPLC2).l	; load title card patterns
		move.b	#1,($FFFFF7D6).w
		moveq	#0,d0
		move.b	($FFFFFE23).w,d0
		mulu.w	#60,d0		; convert minutes to seconds
		moveq	#0,d1
		move.b	($FFFFFE24).w,d1
		add.w	d1,d0		; add up your time
		divu.w	#15,d0		; divide by 15
		moveq	#$14,d1
		cmp.w	d1,d0		; is time 5 minutes or higher?
		bcs.s	loc_ECD0	; if not, branch
		move.w	d1,d0		; use minimum time bonus (0)

loc_ECD0:				; ...
		add.w	d0,d0
		move.w	TimeBonuses(pc,d0.w),($FFFFF7D2).w ; set time bonus
		move.w	($FFFFFE20).w,d0 ; load	number of rings
		mulu.w	#10,d0		; multiply by 10
		move.w	d0,($FFFFF7D4).w ; set ring bonus
		move.w	#$8E,d0
		jsr	$880000+(PlaySound_Special).l ;	play "Sonic got	through" music

locret_ECEE:				; ...
		rts	
; End of function GotThroughAct

TimeBonuses:	dc.w 5000, 5000, 1000, 500, 400, 400, 300, 300,	200, 200
		dc.w 200, 200, 100, 100, 100, 100, 50, 50, 50, 50, 0

locret_ED1A:				; ...
		rts	
Ani_obj0D:	dc.w byte_ED24-Ani_obj0D, byte_ED28-Ani_obj0D, byte_ED2E-Ani_obj0D ; ...
		dc.w byte_ED34-Ani_obj0D
byte_ED24:	dc.b $F, 0, $FF, 0	; ...
byte_ED28:	dc.b 1,	0, 1, 2, 3, $FF	; ...
byte_ED2E:	dc.b 1,	4, 1, 2, 3, $FF	; ...
byte_ED34:	dc.b $F, 4, $FF, 0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - signpost
; ---------------------------------------------------------------------------
Map_obj0D:	dc.w byte_ED42-Map_obj0D, byte_ED52-Map_obj0D ;	...
		dc.w byte_ED5D-Map_obj0D, byte_ED68-Map_obj0D
		dc.w byte_ED73-Map_obj0D
byte_ED42:	dc.b 3			; ...
		dc.b $F0, $B, 0, 0, $E8
		dc.b $F0, $B, 8, 0, 0
		dc.b $10, 1, 0,	$38, $FC
byte_ED52:	dc.b 2			; ...
		dc.b $F0, $F, 0, $C, $F0
		dc.b $10, 1, 0,	$38, $FC
byte_ED5D:	dc.b 2			; ...
		dc.b $F0, 3, 0,	$1C, $FC
		dc.b $10, 1, 8,	$38, $FC
byte_ED68:	dc.b 2			; ...
		dc.b $F0, $F, 8, $C, $F0
		dc.b $10, 1, 8,	$38, $FC
byte_ED73:	dc.b 3			; ...
		dc.b $F0, $B, 0, $20, $E8
		dc.b $F0, $B, 0, $2C, 0
		dc.b $10, 1, 0,	$38, $FC
		dc.b 0
; ---------------------------------------------------------------------------
; Object 0E - Sonic on the title screen
; ---------------------------------------------------------------------------

Obj0E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0E_Index(pc,d0.w),d1
		jmp	Obj0E_Index(pc,d1.w)
Obj0E_Index:	dc.w Obj0E_Main-Obj0E_Index ; ...
		dc.w Obj0E_Delay-Obj0E_Index
		dc.w Obj0E_Move-Obj0E_Index
		dc.w Obj0E_Animate-Obj0E_Index

Obj0E_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$F0,8(a0)
		move.w	#$DE,$A(a0)
		move.l	#$880000+Map_obj0E,4(a0)
		move.w	#$2300,2(a0)
		move.b	#1,$18(a0)
		move.b	#29,$1F(a0)	; set time delay to 0.5	seconds
		lea	(Ani_obj0E)(pc),a1
		jsr	$880000+AnimateSprite

Obj0E_Delay:				; ...
		subq.b	#1,$1F(a0)	; subtract 1 from time delay
		bpl.s	Obj0E_Wait	; if time remains, branch
		addq.b	#2,$24(a0)	; go to	next routine
		jmp	$880000+DisplaySprite

Obj0E_Wait:				; ...
		rts	

Obj0E_Move:				; ...
		subq.w	#8,$A(a0)
		cmpi.w	#$96,$A(a0)
		bne.s	Obj0E_Display
		addq.b	#2,$24(a0)

Obj0E_Display:				; ...
		jmp	$880000+DisplaySprite
		rts	

Obj0E_Animate:				; ...
		lea	(Ani_obj0E)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite
		rts	
; ---------------------------------------------------------------------------
; Object 0F - "PRESS START BUTTON" and "TM" from title screen
; ---------------------------------------------------------------------------

Obj0F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj0F_Index(pc,d0.w),d1
		jsr	Obj0F_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj0F_Index:	dc.w Obj0F_Main-Obj0F_Index ; ...
		dc.w Obj0F_PrsStart-Obj0F_Index
		dc.w locret_A6F8-Obj0F_Index

Obj0F_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$D0,8(a0)
		move.w	#$130,$A(a0)
		move.l	#$880000+Map_obj0F,4(a0)
		move.w	#$200,2(a0)
		cmpi.b	#2,$1A(a0)	; is object "PRESS START"?
		bcs.s	Obj0F_PrsStart	; if yes, branch
		addq.b	#2,$24(a0)
		cmpi.b	#3,$1A(a0)	; is the object	"TM"?
		bne.s	locret_A6F8	; if not, branch
		move.w	#$2510,2(a0)	; "TM" specific	code
		move.w	#$170,8(a0)
		move.w	#$F8,$A(a0)

locret_A6F8:				; ...
		rts	

Obj0F_PrsStart:				; ...
		lea	(Ani_obj0F)(pc),a1
		jmp	$880000+AnimateSprite
Ani_obj0E:	dc.w byte_A706-Ani_obj0E ; ...
byte_A706:	dc.b 7,	0, 1, 2, 3, 4, 5, 6, 7,	$FE, 2,	0 ; ...
Ani_obj0F:	dc.w byte_A714-Ani_obj0F ; ...
byte_A714:	dc.b $1F, 0, 1,	$FF	; ...

; ---------------------------------------------------------------------------
; Sprite mappings - "PRESS START BUTTON" and "TM" from title screen
; ---------------------------------------------------------------------------
Map_obj0F:	dc.w byte_A7CD-Map_obj0F ; ...
		dc.w byte_A7CC-Map_obj0F
		dc.w byte_A7EB-Map_obj0F
		dc.w byte_A882-Map_obj0F
byte_A7CC:	dc.b 6			; ...
byte_A7CD:	dc.b 0,	$C, 0, $F0, 0	; ...
		dc.b 0,	0, 0, $F3, $20	; "PRESS START BUTTON"
		dc.b 0,	0, 0, $F3, $30
		dc.b 0,	$C, 0, $F4, $38
		dc.b 0,	8, 0, $F8, $60
		dc.b 0,	8, 0, $FB, $78
byte_A7EB:	dc.b $1E		; ...
		dc.b $B8, $F, 0, 0, $80	; sprite list filler
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $B8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $D8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
		dc.b $F8, $F, 0, 0, $80
byte_A882:	dc.b 1			; ...
		dc.b $FC, 4, 0,	0, $F8	; "TM"
; ---------------------------------------------------------------------------
; Sprite mappings - Sonic on the title screen
; ---------------------------------------------------------------------------
Map_obj0E:	dc.w byte_A898-Map_obj0E ; ...
		dc.w byte_A8CB-Map_obj0E
		dc.w byte_A917-Map_obj0E
		dc.w byte_A96D-Map_obj0E
		dc.w byte_A9AF-Map_obj0E
		dc.w byte_A9E7-Map_obj0E
		dc.w byte_AA47-Map_obj0E
		dc.w byte_AAB1-Map_obj0E
byte_A898:	dc.b $A			; ...
		dc.b 8,	8, 0, 0, 8
		dc.b $10, $F, 0, 3, 8
		dc.b $10, $F, 0, $13, $28
		dc.b $30, $E, 0, $23, 8
		dc.b $30, $E, 0, $2F, $28
		dc.b $48, $D, 0, $3B, 0
		dc.b $48, 9, 0,	$43, $20
		dc.b $48, 0, 0,	$49, $38
		dc.b $58, $C, 0, $4A, 8
		dc.b $58, 0, 0,	$4E, $28
byte_A8CB:	dc.b $F			; ...
		dc.b $48, $E, 1, $BD, $20
		dc.b $38, 5, 1,	$C9, $38
		dc.b $40, 0, 1,	$CD, $30
		dc.b $48, 0, 1,	$CE, $40
		dc.b $60, 0, 1,	$CF, $20
		dc.b $10, $E, 0, $4F, 8
		dc.b $10, $E, 0, $5B, $28
		dc.b $18, 1, 0,	$67, $48
		dc.b $28, 2, 0,	$69, 0
		dc.b $28, $F, 0, $6C, 8
		dc.b $28, $F, 0, $7C, $28
		dc.b $30, 2, 0,	$8C, $48
		dc.b $48, $E, 0, $8F, $10
		dc.b $48, 9, 0,	$9B, $30
		dc.b $58, 4, 0,	$A1, $30
byte_A917:	dc.b $11		; ...
		dc.b $38, $E, 1, $BD, $28
		dc.b $28, 5, 1,	$C9, $40
		dc.b $30, 0, 1,	$CD, $38
		dc.b $38, 0, 1,	$CE, $48
		dc.b $50, 0, 1,	$CF, $28
		dc.b $20, $F, 1, $A9, 8
		dc.b $20, 3, 1,	$B9, $28
		dc.b $10, $E, 0, $4F, 8
		dc.b $10, $E, 0, $5B, $28
		dc.b $18, 1, 0,	$67, $48
		dc.b $28, 2, 0,	$69, 0
		dc.b $28, $F, 0, $6C, 8
		dc.b $28, $F, 0, $7C, $28
		dc.b $30, 2, 0,	$8C, $48
		dc.b $48, $E, 0, $8F, $10
		dc.b $48, 9, 0,	$9B, $30
		dc.b $58, 4, 0,	$A1, $30
byte_A96D:	dc.b $D			; ...
		dc.b $10, $F, 0, $A3, 8
		dc.b 8,	8, 0, $B3, $28
		dc.b $10, $F, 0, $B6, $28
		dc.b $18, 0, 0,	$C6, $48
		dc.b $20, 6, 0,	$C7, $48
		dc.b $38, 0, 0,	$CD, $48
		dc.b $30, $D, 0, $CE, 8
		dc.b $30, $E, 0, $D6, $28
		dc.b $40, $B, 0, $E2, $10
		dc.b $48, 8, 0,	$EE, $28
		dc.b $50, 1, 0,	$F1, 8
		dc.b $50, 4, 0,	$F3, $28
		dc.b $58, 0, 0,	$F5, $28
byte_A9AF:	dc.b $B			; ...
		dc.b 8,	$F, 0, $F6, $10
		dc.b 8,	$B, 1, 6, $30
		dc.b $10, 6, 1,	$12, $48
		dc.b $28, $E, 1, $18, $18
		dc.b $28, $E, 1, $24, $38
		dc.b $28, 1, 1,	$30, $10
		dc.b $40, $E, 1, $32, $10
		dc.b $40, 6, 1,	$3E, $30
		dc.b $40, 4, 1,	$44, $40
		dc.b $48, 0, 1,	$46, $40
		dc.b $58, 8, 1,	$47, $18
byte_A9E7:	dc.b $13		; ...
		dc.b $28, $E, 1, $E4, $38
		dc.b $18, 5, 1,	$F0, $48
		dc.b $40, 8, 1,	$F4, $38
		dc.b $48, 4, 1,	$F7, $38
		dc.b $10, $F, 1, $4A, $10
		dc.b 8,	4, 1, $5A, $20
		dc.b 0,	$B, 1, $5C, $30
		dc.b 8,	0, 1, $68, $48
		dc.b $18, 0, 1,	$69, $48
		dc.b $18, 5, 1,	$6A, 0
		dc.b $28, 2, 1,	$6E, 8
		dc.b $30, $F, 1, $71, $10
		dc.b $20, $D, 1, $81, $30
		dc.b $20, 1, 1,	$89, $50
		dc.b $30, 8, 1,	$8B, $30
		dc.b $38, $E, 1, $8E, $30
		dc.b $50, $D, 1, $9A, 8
		dc.b $50, $C, 1, $A2, $28
		dc.b $58, 8, 1,	$A6, $28
byte_AA47:	dc.b $15		; ...
		dc.b $28, $E, 1, $E4, $38
		dc.b $18, 5, 1,	$F0, $48
		dc.b $40, 8, 1,	$F4, $38
		dc.b $48, 4, 1,	$F7, $38
		dc.b $18, $F, 1, $D0, 8
		dc.b $18, 3, 1,	$E0, $28
		dc.b $10, $F, 1, $4A, $10
		dc.b 8,	4, 1, $5A, $20
		dc.b 0,	$B, 1, $5C, $30
		dc.b 8,	0, 1, $68, $48
		dc.b $18, 0, 1,	$69, $48
		dc.b $18, 5, 1,	$6A, 0
		dc.b $28, 2, 1,	$6E, 8
		dc.b $30, $F, 1, $71, $10
		dc.b $20, $D, 1, $81, $30
		dc.b $20, 1, 1,	$89, $50
		dc.b $30, 8, 1,	$8B, $30
		dc.b $38, $E, 1, $8E, $30
		dc.b $50, $D, 1, $9A, 8
		dc.b $50, $C, 1, $A2, $28
		dc.b $58, 8, 1,	$A6, $28
byte_AAB1:	dc.b $16		; ...
		dc.b $18, 4, 1,	$F9, $38
		dc.b $20, 0, 1,	$FB, $38
		dc.b $28, 8, 1,	$FC, $30
		dc.b $30, 1, 1,	$FF, $30
		dc.b $30, $B, 2, 1, $38
		dc.b $18, $F, 1, $D0, 8
		dc.b $18, 3, 1,	$E0, $28
		dc.b $10, $F, 1, $4A, $10
		dc.b 8,	4, 1, $5A, $20
		dc.b 0,	$B, 1, $5C, $30
		dc.b 8,	0, 1, $68, $48
		dc.b $18, 0, 1,	$69, $48
		dc.b $18, 5, 1,	$6A, 0
		dc.b $28, 2, 1,	$6E, 8
		dc.b $30, $F, 1, $71, $10
		dc.b $20, $D, 1, $81, $30
		dc.b $20, 1, 1,	$89, $50
		dc.b $30, 8, 1,	$8B, $30
		dc.b $38, $E, 1, $8E, $30
		dc.b $50, $D, 1, $9A, 8
		dc.b $50, $C, 1, $A2, $28
		dc.b $58, 8, 1,	$A6, $28

; ---------------------------------------------------------------------------
; Object 10 - blank
; ---------------------------------------------------------------------------

Obj10:					; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	animate	level graphics
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


AniArt_Load:				; ...
		tst.w	($FFFFF63A).w	; is the game paused?
		bne.s	AniArt_Pause	; if yes, branch
		lea	($C00000).l,a6
		bsr.w	AniArt_GiantRing
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		add.w	d0,d0
		move.w	AniArt_Index(pc,d0.w),d0
		jmp	AniArt_Index(pc,d0.w)

AniArt_Pause:				; ...
		rts	
; End of function AniArt_Load

AniArt_Index:	dc.w AniArt_GHZ-AniArt_Index, AniArt_none-AniArt_Index ; ...
		dc.w AniArt_MZ-AniArt_Index, AniArt_none-AniArt_Index
		dc.w AniArt_none-AniArt_Index, AniArt_SBZ-AniArt_Index
		dc.w AniArt_Ending-AniArt_Index
; ---------------------------------------------------------------------------
; Animated pattern routine - Green Hill
; ---------------------------------------------------------------------------

AniArt_GHZ:				; ...
		subq.b	#1,($FFFFF7B1).w
		bpl.s	loc_1C08A
		move.b	#5,($FFFFF7B1).w ; time	to display each	frame for
		lea	$900000+(Art_GhzWater).l,a1 ; load waterfall patterns
		move.b	($FFFFF7B0).w,d0
		addq.b	#1,($FFFFF7B0).w
		andi.w	#1,d0
		beq.s	loc_1C078
		lea	$100(a1),a1	; load next frame

loc_1C078:				; ...
		move.l	#$6F000001,($C00004).l ; VRAM address
		move.w	#7,d1		; number of 8x8	tiles
		bra.w	LoadTiles

loc_1C08A:				; ...
		subq.b	#1,($FFFFF7B3).w
		bpl.s	loc_1C0C0
		move.b	#$F,($FFFFF7B3).w
		lea	$900000+(Art_GhzFlower1).l,a1 ;	load big flower	patterns
		move.b	($FFFFF7B2).w,d0
		addq.b	#1,($FFFFF7B2).w
		andi.w	#1,d0
		beq.s	loc_1C0AE
		lea	$200(a1),a1

loc_1C0AE:				; ...
		move.l	#$6B800001,($C00004).l
		move.w	#$F,d1
		bra.w	LoadTiles

loc_1C0C0:				; ...
		subq.b	#1,($FFFFF7B5).w
		bpl.s	locret_1C10C
		move.b	#7,($FFFFF7B5).w
		move.b	($FFFFF7B4).w,d0
		addq.b	#1,($FFFFF7B4).w
		andi.w	#3,d0
		move.b	byte_1C10E(pc,d0.w),d0
		btst	#0,d0
		bne.s	loc_1C0E8
		move.b	#$7F,($FFFFF7B5).w

loc_1C0E8:				; ...
		lsl.w	#7,d0
		move.w	d0,d1
		add.w	d0,d0
		add.w	d1,d0
		move.l	#$6D800001,($C00004).l
		lea	$900000+(Art_GhzFlower2).l,a1 ;	load small flower patterns
		lea	(a1,d0.w),a1
		move.w	#$B,d1
		bsr.w	LoadTiles

locret_1C10C:				; ...
		rts	
byte_1C10E:	dc.b 0,	1, 2, 1
; ---------------------------------------------------------------------------
; Animated pattern routine - Marble
; ---------------------------------------------------------------------------

AniArt_MZ:				; ...
		subq.b	#1,($FFFFF7B1).w
		bpl.s	loc_1C150
		move.b	#$13,($FFFFF7B1).w
		lea	$900000+(Art_MzLava1).l,a1 ; load lava surface patterns
		moveq	#0,d0
		move.b	($FFFFF7B0).w,d0
		addq.b	#1,d0
		cmpi.b	#3,d0
		bne.s	loc_1C134
		moveq	#0,d0

loc_1C134:				; ...
		move.b	d0,($FFFFF7B0).w
		mulu.w	#$100,d0
		adda.w	d0,a1
		move.l	#$5C400001,($C00004).l
		move.w	#7,d1
		bsr.w	LoadTiles

loc_1C150:				; ...
		subq.b	#1,($FFFFF7B3).w
		bpl.s	loc_1C1AE
		move.b	#1,($FFFFF7B3).w
		moveq	#0,d0
		move.b	($FFFFF7B0).w,d0
		lea	$900000+(Art_MzLava2).l,a4 ; load lava patterns
		ror.w	#7,d0
		adda.w	d0,a4
		move.l	#$5A400001,($C00004).l
		moveq	#0,d3
		move.b	($FFFFF7B2).w,d3
		addq.b	#1,($FFFFF7B2).w
		move.b	($FFFFFE68).w,d3
		move.w	#3,d2

loc_1C188:				; ...
		move.w	d3,d0
		add.w	d0,d0
		andi.w	#$1E,d0
		lea	$880000+(AniArt_MZextra).l,a3
		move.w	(a3,d0.w),d0
		lea	(a3,d0.w),a3
		movea.l	a4,a1
		move.w	#$1F,d1
		jsr	(a3)
		addq.w	#4,d3
		dbf	d2,loc_1C188
		rts	

loc_1C1AE:				; ...
		subq.b	#1,($FFFFF7B5).w
		bpl.w	locret_1C1EA
		move.b	#7,($FFFFF7B5).w
		lea	$900000+(Art_MzTorch).l,a1 ; load torch	patterns
		moveq	#0,d0
		move.b	($FFFFF7B6).w,d0
		addq.b	#1,($FFFFF7B6).w
		andi.b	#3,($FFFFF7B6).w
		mulu.w	#$C0,d0
		adda.w	d0,a1
		move.l	#$5E400001,($C00004).l
		move.w	#5,d1
		bra.w	LoadTiles

locret_1C1EA:				; ...
		rts	
; ---------------------------------------------------------------------------
; Animated pattern routine - Scrap Brain
; ---------------------------------------------------------------------------

AniArt_SBZ:				; ...
		tst.b	($FFFFF7B4).w
		beq.s	loc_1C1F8
		subq.b	#1,($FFFFF7B4).w
		bra.s	loc_1C250

loc_1C1F8:				; ...
		subq.b	#1,($FFFFF7B1).w
		bpl.s	loc_1C250
		move.b	#7,($FFFFF7B1).w
		lea	$900000+(Art_SbzSmoke).l,a1 ; load smoke patterns
		move.l	#$49000002,($C00004).l
		move.b	($FFFFF7B0).w,d0
		addq.b	#1,($FFFFF7B0).w
		andi.w	#7,d0
		beq.s	loc_1C234
		subq.w	#1,d0
		mulu.w	#$180,d0
		lea	(a1,d0.w),a1
		move.w	#$B,d1
		bra.w	LoadTiles

loc_1C234:				; ...
		move.b	#$B4,($FFFFF7B4).w

loc_1C23A:				; ...
		move.w	#5,d1
		bsr.w	LoadTiles
		lea	$900000+(Art_SbzSmoke).l,a1
		move.w	#5,d1
		bra.w	LoadTiles

loc_1C250:				; ...
		tst.b	($FFFFF7B5).w
		beq.s	loc_1C25C
		subq.b	#1,($FFFFF7B5).w
		bra.s	locret_1C2A0

loc_1C25C:				; ...
		subq.b	#1,($FFFFF7B3).w
		bpl.s	locret_1C2A0
		move.b	#7,($FFFFF7B3).w
		lea	$900000+(Art_SbzSmoke).l,a1
		move.l	#$4A800002,($C00004).l
		move.b	($FFFFF7B2).w,d0
		addq.b	#1,($FFFFF7B2).w
		andi.w	#7,d0
		beq.s	loc_1C298
		subq.w	#1,d0
		mulu.w	#$180,d0
		lea	(a1,d0.w),a1
		move.w	#$B,d1
		bra.w	LoadTiles

loc_1C298:				; ...
		move.b	#$78,($FFFFF7B5).w
		bra.s	loc_1C23A

locret_1C2A0:				; ...
		rts	
; ---------------------------------------------------------------------------
; Animated pattern routine - ending sequence
; ---------------------------------------------------------------------------

AniArt_Ending:				; ...
		subq.b	#1,($FFFFF7B3).w
		bpl.s	loc_1C2F4
		move.b	#7,($FFFFF7B3).w
		lea	$900000+(Art_GhzFlower1).l,a1 ;	load big flower	patterns
		lea	($FFFF9400).w,a2
		move.b	($FFFFF7B2).w,d0
		addq.b	#1,($FFFFF7B2).w
		andi.w	#1,d0
		beq.s	loc_1C2CE
		lea	$200(a1),a1
		lea	$200(a2),a2

loc_1C2CE:				; ...
		move.l	#$6B800001,($C00004).l
		move.w	#$F,d1
		bsr.w	LoadTiles
		movea.l	a2,a1
		move.l	#$72000001,($C00004).l
		move.w	#$F,d1
		bra.w	LoadTiles

loc_1C2F4:				; ...
		subq.b	#1,($FFFFF7B5).w
		bpl.s	loc_1C33C
		move.b	#7,($FFFFF7B5).w
		move.b	($FFFFF7B4).w,d0
		addq.b	#1,($FFFFF7B4).w
		andi.w	#7,d0
		move.b	byte_1C334(pc,d0.w),d0
		lsl.w	#7,d0
		move.w	d0,d1
		add.w	d0,d0
		add.w	d1,d0
		move.l	#$6D800001,($C00004).l
		lea	$900000+(Art_GhzFlower2).l,a1 ;	load small flower patterns
		lea	(a1,d0.w),a1
		move.w	#$B,d1
		bra.w	LoadTiles
byte_1C334:	dc.b 0,	0, 0, 1, 2, 2, 2, 1

loc_1C33C:				; ...
		subq.b	#1,($FFFFF7B9).w
		bpl.s	loc_1C37A
		move.b	#$E,($FFFFF7B9).w
		move.b	($FFFFF7B8).w,d0
		addq.b	#1,($FFFFF7B8).w
		andi.w	#3,d0
		move.b	byte_1C376(pc,d0.w),d0
		lsl.w	#8,d0
		add.w	d0,d0
		move.l	#$70000001,($C00004).l
		lea	($FFFF9800).w,a1 ; load	special	flower patterns	(from RAM)
		lea	(a1,d0.w),a1
		move.w	#$F,d1
		bra.w	LoadTiles
byte_1C376:	dc.b 0,	1, 2, 1

loc_1C37A:				; ...
		subq.b	#1,($FFFFF7BB).w
		bpl.s	locret_1C3B4
		move.b	#$B,($FFFFF7BB).w
		move.b	($FFFFF7BA).w,d0
		addq.b	#1,($FFFFF7BA).w
		andi.w	#3,d0
		move.b	byte_1C376(pc,d0.w),d0
		lsl.w	#8,d0
		add.w	d0,d0
		move.l	#$68000001,($C00004).l
		lea	($FFFF9E00).w,a1 ; load	special	flower patterns	(from RAM)
		lea	(a1,d0.w),a1
		move.w	#$F,d1
		bra.w	LoadTiles

locret_1C3B4:				; ...
		rts	

AniArt_none:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	load (d1 - 1) 8x8 tiles
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


LoadTiles:				; ...
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		move.l	(a1)+,(a6)
		dbf	d1,LoadTiles
		rts	
; End of function LoadTiles

; ---------------------------------------------------------------------------
; Animated pattern routine - more Marble Zone
; ---------------------------------------------------------------------------
AniArt_MZextra:	dc.w loc_1C3EE-AniArt_MZextra, loc_1C3FA-AniArt_MZextra	; ...
		dc.w loc_1C410-AniArt_MZextra, loc_1C41E-AniArt_MZextra
		dc.w loc_1C434-AniArt_MZextra, loc_1C442-AniArt_MZextra
		dc.w loc_1C458-AniArt_MZextra, loc_1C466-AniArt_MZextra
		dc.w loc_1C47C-AniArt_MZextra, loc_1C48A-AniArt_MZextra
		dc.w loc_1C4A0-AniArt_MZextra, loc_1C4AE-AniArt_MZextra
		dc.w loc_1C4C4-AniArt_MZextra, loc_1C4D2-AniArt_MZextra
		dc.w loc_1C4E8-AniArt_MZextra, loc_1C4FA-AniArt_MZextra

loc_1C3EE:				; ...
		move.l	(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C3EE
		rts	

loc_1C3FA:				; ...
		move.l	2(a1),d0
		move.b	1(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C3FA
		rts	

loc_1C410:				; ...
		move.l	2(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C410
		rts	

loc_1C41E:				; ...
		move.l	4(a1),d0
		move.b	3(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C41E
		rts	

loc_1C434:				; ...
		move.l	4(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C434
		rts	

loc_1C442:				; ...
		move.l	6(a1),d0
		move.b	5(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C442
		rts	

loc_1C458:				; ...
		move.l	6(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C458
		rts	

loc_1C466:				; ...
		move.l	8(a1),d0
		move.b	7(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C466
		rts	

loc_1C47C:				; ...
		move.l	8(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C47C
		rts	

loc_1C48A:				; ...
		move.l	$A(a1),d0
		move.b	9(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C48A
		rts	

loc_1C4A0:				; ...
		move.l	$A(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4A0
		rts	

loc_1C4AE:				; ...
		move.l	$C(a1),d0
		move.b	$B(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4AE
		rts	

loc_1C4C4:				; ...
		move.l	$C(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4C4
		rts	

loc_1C4D2:				; ...
		move.l	$C(a1),d0
		rol.l	#8,d0
		move.b	0(a1),d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4D2
		rts	

loc_1C4E8:				; ...
		move.w	$E(a1),(a6)
		move.w	0(a1),(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4E8
		rts	

loc_1C4FA:				; ...
		move.l	0(a1),d0
		move.b	$F(a1),d0
		ror.l	#8,d0
		move.l	d0,(a6)
		lea	$10(a1),a1
		dbf	d1,loc_1C4FA
		rts	
; ---------------------------------------------------------------------------
; Animated pattern routine - giant ring
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


AniArt_GiantRing:			; ...
		tst.w	($FFFFF7BE).w
		bne.s	loc_1C518
		rts	

loc_1C518:				; ...
		subi.w	#$1C0,($FFFFF7BE).w
		lea	$900000+(Art_BigRing).l,a1 ; load giant	ring patterns
		moveq	#0,d0
		move.w	($FFFFF7BE).w,d0
		lea	(a1,d0.w),a1
		addi.w	#$8000,d0
		lsl.l	#2,d0
		lsr.w	#2,d0
		ori.w	#$4000,d0
		swap	d0
		move.l	d0,4(a6)
		move.w	#$D,d1
		bra.w	LoadTiles
; End of function AniArt_GiantRing

; ---------------------------------------------------------------------------
; Object 11 - GHZ bridge
; ---------------------------------------------------------------------------

Obj11:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj11_Index(pc,d0.w),d1
		jmp	Obj11_Index(pc,d1.w)
Obj11_Index:	dc.w Obj11_Main-Obj11_Index, Obj11_Action-Obj11_Index ;	...
		dc.w Obj11_Action2-Obj11_Index,	Obj11_Delete2-Obj11_Index
		dc.w Obj11_Delete2-Obj11_Index,	Obj11_Display2-Obj11_Index

Obj11_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj11,4(a0)
		move.w	#$438E,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$80,$19(a0)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		move.b	0(a0),d4	; copy object number ($11) to d4
		lea	$28(a0),a2	; copy bridge subtype to a2
		moveq	#0,d1
		move.b	(a2),d1		; copy a2 to d1
		move.b	#0,(a2)+
		move.w	d1,d0
		lsr.w	#1,d0
		lsl.w	#4,d0
		sub.w	d0,d3
		subq.b	#2,d1
		bcs.s	Obj11_Action

Obj11_MakeBdg:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	Obj11_Action
		addq.b	#1,$28(a0)
		cmp.w	8(a0),d3
		bne.s	loc_73B8
		addi.w	#$10,d3
		move.w	d2,$C(a0)
		move.w	d2,$3C(a0)
		move.w	a0,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		addq.b	#1,$28(a0)

loc_73B8:				; ...
		move.w	a1,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	#$A,$24(a1)
		move.b	d4,0(a1)	; load bridge object (d4 = $11)
		move.w	d2,$C(a1)
		move.w	d2,$3C(a1)
		move.w	d3,8(a1)
		move.l	#$880000+Map_obj11,4(a1)
		move.w	#$438E,2(a1)
		move.b	#4,1(a1)
		move.b	#3,$18(a1)
		move.b	#8,$19(a1)
		addi.w	#$10,d3
		dbf	d1,Obj11_MakeBdg ; repeat d1 times (length of bridge)

Obj11_Action:				; ...
		bsr.s	Obj11_Solid
		tst.b	$3E(a0)
		beq.s	Obj11_Display
		subq.b	#4,$3E(a0)
		bsr.w	Obj11_Bend

Obj11_Display:				; ...
		jsr	$880000+DisplaySprite
		bra.w	Obj11_ChkDel

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj11_Solid:				; ...
		moveq	#0,d1
		move.b	$28(a0),d1
		lsl.w	#3,d1
		move.w	d1,d2
		addq.w	#8,d1
		add.w	d2,d2
		lea	($FFFFD000).w,a1
		tst.w	$12(a1)
		bmi.w	locret_751E
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.w	locret_751E
		cmp.w	d2,d0
		bcc.w	locret_751E
		bra.s	Platform2
; End of function Obj11_Solid

; ---------------------------------------------------------------------------
; Platform subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


PlatformObject:				; ...
		lea	($FFFFD000).w,a1
		tst.w	$12(a1)
		bmi.w	locret_751E
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.w	locret_751E
		add.w	d1,d1
		cmp.w	d1,d0
		bcc.w	locret_751E

Platform2:				; ...
		move.w	$C(a0),d0
		subq.w	#8,d0

Platform3:				; ...
		move.w	$C(a1),d2
		move.b	$16(a1),d1
		ext.w	d1
		add.w	d2,d1
		addq.w	#4,d1
		sub.w	d1,d0
		bhi.w	locret_751E
		cmpi.w	#-$10,d0
		bcs.w	locret_751E
		tst.b	($FFFFF7C8).w
		bmi.w	locret_751E
		cmpi.b	#6,$24(a1)
		bcc.w	locret_751E
		add.w	d0,d2
		addq.w	#3,d2
		move.w	d2,$C(a1)
		addq.b	#2,$24(a0)

loc_74AE:				; ...
		btst	#3,$22(a1)
		beq.s	loc_74DC
		moveq	#0,d0
		move.b	$3D(a1),d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a2
		bclr	#3,$22(a2)
		clr.b	$25(a2)
		cmpi.b	#4,$24(a2)
		bne.s	loc_74DC
		subq.b	#2,$24(a2)

loc_74DC:				; ...
		move.w	a0,d0
		subi.w	#-$3000,d0
		lsr.w	#6,d0
		andi.w	#$7F,d0
		move.b	d0,$3D(a1)
		move.b	#0,$26(a1)
		move.w	#0,$12(a1)
		move.w	$10(a1),$14(a1)
		btst	#1,$22(a1)
		beq.s	loc_7512
		move.l	a0,-(sp)
		movea.l	a1,a0
		jsr	$880000+Sonic_ResetOnFloor
		movea.l	(sp)+,a0

loc_7512:				; ...
		bset	#3,$22(a1)
		bset	#3,$22(a0)

locret_751E:				; ...
		rts	
; End of function PlatformObject

; ---------------------------------------------------------------------------
; Sloped platform subroutine (GHZ collapsing ledges and	SLZ seesaws)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SlopeObject:				; ...
		lea	($FFFFD000).w,a1
		tst.w	$12(a1)
		bmi.w	locret_751E
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	locret_751E
		add.w	d1,d1
		cmp.w	d1,d0
		bcc.s	locret_751E
		btst	#0,1(a0)
		beq.s	loc_754A
		not.w	d0
		add.w	d1,d0

loc_754A:				; ...
		lsr.w	#1,d0
		moveq	#0,d3
		move.b	(a2,d0.w),d3
		move.w	$C(a0),d0
		sub.w	d3,d0
		bra.w	Platform3
; End of function SlopeObject


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj15_Solid:				; ...
		lea	($FFFFD000).w,a1
		tst.w	$12(a1)
		bmi.w	locret_751E
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.w	locret_751E
		add.w	d1,d1
		cmp.w	d1,d0
		bcc.w	locret_751E
		move.w	$C(a0),d0
		sub.w	d3,d0
		bra.w	Platform3
; End of function Obj15_Solid


Obj11_Action2:				; ...
		bsr.s	Obj11_WalkOff
		jsr	$880000+DisplaySprite
		bra.w	Obj11_ChkDel

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj11_WalkOff:				; ...
		moveq	#0,d1
		move.b	$28(a0),d1
		lsl.w	#3,d1
		move.w	d1,d2
		addq.w	#8,d1
		bsr.s	ExitPlatform2
		bcc.s	locret_75BE
		lsr.w	#4,d0
		move.b	d0,$3F(a0)
		move.b	$3E(a0),d0
		cmpi.b	#$40,d0
		beq.s	loc_75B6
		addq.b	#4,$3E(a0)

loc_75B6:				; ...
		bsr.w	Obj11_Bend
		bsr.w	Obj11_MoveSonic

locret_75BE:				; ...
		rts	
; End of function Obj11_WalkOff

; ---------------------------------------------------------------------------
; Subroutine allowing Sonic to walk or jump off	a platform
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ExitPlatform:				; ...
		move.w	d1,d2

ExitPlatform2:				; ...
		add.w	d2,d2
		lea	($FFFFD000).w,a1
		btst	#1,$22(a1)
		bne.s	loc_75E0
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_75E0
		cmp.w	d2,d0
		bcs.s	locret_75F2

loc_75E0:				; ...
		bclr	#3,$22(a1)
		move.b	#2,$24(a0)
		bclr	#3,$22(a0)

locret_75F2:				; ...
		rts	
; End of function ExitPlatform


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj11_MoveSonic:			; ...
		moveq	#0,d0
		move.b	$3F(a0),d0
		move.b	$29(a0,d0.w),d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a2
		lea	($FFFFD000).w,a1
		move.w	$C(a2),d0
		subq.w	#8,d0
		moveq	#0,d1
		move.b	$16(a1),d1
		sub.w	d1,d0
		move.w	d0,$C(a1)	; change Sonic's position on y-axis
		rts	
; End of function Obj11_MoveSonic


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj11_Bend:				; ...
		move.b	$3E(a0),d0
		bsr.w	CalcSine
		move.w	d0,d4
		lea	(Obj11_BendData2)(pc),a4
		moveq	#0,d0
		move.b	$28(a0),d0
		lsl.w	#4,d0
		moveq	#0,d3
		move.b	$3F(a0),d3
		move.w	d3,d2
		add.w	d0,d3
		moveq	#0,d5
		lea	(Obj11_BendData)(pc),a5
		move.b	(a5,d3.w),d5
		andi.w	#$F,d3
		lsl.w	#4,d3
		lea	(a4,d3.w),a3
		lea	$29(a0),a2

loc_765C:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		moveq	#0,d0
		move.b	(a3)+,d0
		addq.w	#1,d0
		mulu.w	d5,d0
		mulu.w	d4,d0
		swap	d0
		add.w	$3C(a1),d0
		move.w	d0,$C(a1)
		dbf	d2,loc_765C
		moveq	#0,d0
		move.b	$28(a0),d0
		moveq	#0,d3
		move.b	$3F(a0),d3
		addq.b	#1,d3
		sub.b	d0,d3
		neg.b	d3
		bmi.s	locret_76CA
		move.w	d3,d2
		lsl.w	#4,d3
		lea	(a4,d3.w),a3
		adda.w	d2,a3
		subq.w	#1,d2
		bcs.s	locret_76CA

loc_76A4:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		moveq	#0,d0
		move.b	-(a3),d0
		addq.w	#1,d0
		mulu.w	d5,d0
		mulu.w	d4,d0
		swap	d0
		add.w	$3C(a1),d0
		move.w	d0,$C(a1)
		dbf	d2,loc_76A4

locret_76CA:				; ...
		rts	
; End of function Obj11_Bend

; ---------------------------------------------------------------------------
; GHZ bridge-bending data
; (Defines how the bridge bends	when Sonic walks across	it)
; ---------------------------------------------------------------------------
Obj11_BendData:	dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0 ; ...
		dc.b 2,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	2, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 2, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 4, 2, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 4, 2, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 6, 4, 2, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 8, 6, 4, 2, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 8, 8, 6, 4, 2, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 8, $A, 8,	6, 4, 2, 0, 0, 0, 0, 0,	0, 0
		dc.b 2,	4, 6, 8, $A, $A, 8, 6, 4, 2, 0,	0, 0, 0, 0, 0
		dc.b 2,	4, 6, 8, $A, $C, $A, 8,	6, 4, 2, 0, 0, 0, 0, 0
		dc.b 2,	4, 6, 8, $A, $C, $C, $A, 8, 6, 4, 2, 0,	0, 0, 0
		dc.b 2,	4, 6, 8, $A, $C, $E, $C, $A, 8,	6, 4, 2, 0, 0, 0
		dc.b 2,	4, 6, 8, $A, $C, $E, $E, $C, $A, 8, 6, 4, 2, 0,	0
		dc.b 2,	4, 6, 8, $A, $C, $E, $10, $E, $C, $A, 8, 6, 4, 2, 0
		dc.b 2,	4, 6, 8, $A, $C, $E, $10, $10, $E, $C, $A, 8, 6, 4, 2
Obj11_BendData2:dc.b $FF, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0 ;	...
		dc.b $B5, $FF, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b $7E, $DB, $FF, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b $61, $B5, $EC, $FF, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b $4A, $93, $CD, $F3, $FF, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0
		dc.b $3E, $7E, $B0, $DB, $F6, $FF, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0
		dc.b $38, $6D, $9D, $C5, $E4, $F8, $FF,	0, 0, 0, 0, 0, 0, 0, 0,	0
		dc.b $31, $61, $8E, $B5, $D4, $EC, $FB,	$FF, 0,	0, 0, 0, 0, 0, 0, 0
		dc.b $2B, $56, $7E, $A2, $C1, $DB, $EE,	$FB, $FF, 0, 0,	0, 0, 0, 0, 0
		dc.b $25, $4A, $73, $93, $B0, $CD, $E1,	$F3, $FC, $FF, 0, 0, 0,	0, 0, 0
		dc.b $1F, $44, $67, $88, $A7, $BD, $D4,	$E7, $F4, $FD, $FF, 0, 0, 0, 0,	0
		dc.b $1F, $3E, $5C, $7E, $98, $B0, $C9,	$DB, $EA, $F6, $FD, $FF, 0, 0, 0, 0
		dc.b $19, $38, $56, $73, $8E, $A7, $BD,	$D1, $E1, $EE, $F8, $FE, $FF, 0, 0, 0
		dc.b $19, $38, $50, $6D, $83, $9D, $B0,	$C5, $D8, $E4, $F1, $F8, $FE, $FF, 0, 0
		dc.b $19, $31, $4A, $67, $7E, $93, $A7,	$BD, $CD, $DB, $E7, $F3, $F9, $FE, $FF,	0
		dc.b $19, $31, $4A, $61, $78, $8E, $A2,	$B5, $C5, $D4, $E1, $EC, $F4, $FB, $FE,	$FF

Obj11_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj11_DelAll
		rts	

Obj11_DelAll:				; ...
		moveq	#0,d2
		lea	$28(a0),a2	; load bridge length
		move.b	(a2)+,d2	; move bridge length to	d2
		subq.b	#1,d2		; subtract 1
		bcs.s	Obj11_Delete

Obj11_DelLoop:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		cmp.w	a0,d0
		beq.s	loc_791E
		jsr	$880000+DeleteObject2

loc_791E:				; ...
		dbf	d2,Obj11_DelLoop ; repeat d2 times (bridge length)

Obj11_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj11_Delete2:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj11_Display2:				; ...
		jsr	$880000+DisplaySprite
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - GHZ	bridge
; ---------------------------------------------------------------------------
Map_obj11:	dc.w byte_793A-Map_obj11, byte_7940-Map_obj11 ;	...
		dc.w byte_794B-Map_obj11
byte_793A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_7940:	dc.b 2			; ...
		dc.b $F8, 4, 0,	4, $F0
		dc.b 0,	$C, 0, 6, $F0
byte_794B:	dc.b 1			; ...
		dc.b $FC, 4, 0,	8, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 15 - swinging platforms (GHZ, MZ, SLZ)
;	    - spiked ball on a chain (SBZ)
; ---------------------------------------------------------------------------

Obj15:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj15_Index(pc,d0.w),d1
		jmp	Obj15_Index(pc,d1.w)
Obj15_Index:	dc.w Obj15_Main-Obj15_Index, Obj15_SetSolid-Obj15_Index	; ...
		dc.w Obj15_Action2-Obj15_Index,	Obj15_Delete-Obj15_Index
		dc.w Obj15_Delete-Obj15_Index, Obj15_Display-Obj15_Index
		dc.w Obj15_Action-Obj15_Index

Obj15_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj15,4(a0) ; GHZ and MZ specific code
		move.w	#$4380,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$18,$19(a0)
		move.b	#8,$16(a0)
		move.w	$C(a0),$38(a0)
		move.w	8(a0),$3A(a0)
		cmpi.b	#3,($FFFFFE10).w ; check if level is SLZ
		bne.s	Obj15_NotSLZ
		move.l	#$880000+Map_obj15a,4(a0) ; SLZ	specific code
		move.w	#$43DC,2(a0)
		move.b	#$20,$19(a0)
		move.b	#$10,$16(a0)
		move.b	#$99,$20(a0)

Obj15_NotSLZ:				; ...
		cmpi.b	#5,($FFFFFE10).w ; check if level is SBZ
		bne.s	Obj15_SetLength
		move.l	#$880000+Map_obj15b,4(a0) ; SBZ	specific code
		move.w	#$391,2(a0)
		move.b	#$18,$19(a0)
		move.b	#$18,$16(a0)
		move.b	#$86,$20(a0)
		move.b	#$C,$24(a0)

Obj15_SetLength:			; ...
		move.b	0(a0),d4
		moveq	#0,d1
		lea	$28(a0),a2	; move chain length to a2
		move.b	(a2),d1		; move a2 to d1
		move.w	d1,-(sp)
		andi.w	#$F,d1
		move.b	#0,(a2)+
		move.w	d1,d3
		lsl.w	#4,d3
		addq.b	#8,d3
		move.b	d3,$3C(a0)
		subq.b	#8,d3
		tst.b	$1A(a0)
		beq.s	Obj15_MakeChain
		addq.b	#8,d3
		subq.w	#1,d1

Obj15_MakeChain:			; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_7A92
		addq.b	#1,$28(a0)
		move.w	a1,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	#$A,$24(a1)
		move.b	d4,0(a1)	; load swinging	object
		move.l	4(a0),4(a1)
		move.w	2(a0),2(a1)
		bclr	#6,2(a1)
		move.b	#4,1(a1)
		move.b	#4,$18(a1)
		move.b	#8,$19(a1)
		move.b	#1,$1A(a1)
		move.b	d3,$3C(a1)
		subi.b	#$10,d3
		bcc.s	loc_7A8E
		move.b	#2,$1A(a1)
		move.b	#3,$18(a1)
		bset	#6,2(a1)

loc_7A8E:				; ...
		dbf	d1,Obj15_MakeChain ; repeat d1 times (chain length)

loc_7A92:				; ...
		move.w	a0,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.w	#$4080,$26(a0)
		move.w	#-$200,$3E(a0)
		move.w	(sp)+,d1
		btst	#4,d1		; is object type $8X ?
		beq.s	loc_7AD4	; if not, branch
		move.l	#$880000+Map_obj48,4(a0) ; use GHZ ball	mappings
		move.w	#$43AA,2(a0)
		move.b	#1,$1A(a0)
		move.b	#2,$18(a0)
		move.b	#$81,$20(a0)	; make object hurt when	touched

loc_7AD4:				; ...
		cmpi.b	#5,($FFFFFE10).w ; is zone SBZ?
		beq.s	Obj15_Action	; if yes, branch

Obj15_SetSolid:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		moveq	#0,d3
		move.b	$16(a0),d3
		bsr.w	Obj15_Solid

Obj15_Action:				; ...
		bsr.w	Obj15_Move
		jsr	$880000+DisplaySprite
		bra.w	Obj15_ChkDel

Obj15_Action2:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		bsr.w	ExitPlatform
		move.w	8(a0),-(sp)
		bsr.w	Obj15_Move
		move.w	(sp)+,d2
		moveq	#0,d3
		move.b	$16(a0),d3
		addq.b	#1,d3
		jsr	$880000+MvSonicOnPtfm
		jsr	$880000+DisplaySprite
		bra.w	Obj15_ChkDel
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's position with a platform
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


MvSonicOnPtfm:				; ...
		lea	($FFFFD000).w,a1
		move.w	$C(a0),d0
		sub.w	d3,d0
		bra.s	MvSonic2
; End of function MvSonicOnPtfm

; ---------------------------------------------------------------------------
; Subroutine to	change Sonic's position with a platform
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


MvSonicOnPtfm2:				; ...
		lea	($FFFFD000).w,a1
		move.w	$C(a0),d0
		subi.w	#9,d0

MvSonic2:				; ...
		tst.b	($FFFFF7C8).w
		bmi.s	locret_7B62
		cmpi.b	#6,($FFFFD024).w
		bcc.s	locret_7B62
		tst.w	($FFFFFE08).w
		bne.s	locret_7B62
		moveq	#0,d1
		move.b	$16(a1),d1
		sub.w	d1,d0
		move.w	d0,$C(a1)
		sub.w	8(a0),d2
		sub.w	d2,8(a1)

locret_7B62:				; ...
		rts	
; End of function MvSonicOnPtfm2


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj15_Move:				; ...
		move.b	($FFFFFE78).w,d0
		move.w	#$80,d1
		btst	#0,$22(a0)
		beq.s	loc_7B78
		neg.w	d0
		add.w	d1,d0

loc_7B78:				; ...
		bra.s	Obj15_Move2
; End of function Obj15_Move


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj48_Move:				; ...
		tst.b	$3D(a0)
		bne.s	loc_7B9C
		move.w	$3E(a0),d0
		addq.w	#8,d0
		move.w	d0,$3E(a0)
		add.w	d0,$26(a0)
		cmpi.w	#$200,d0
		bne.s	loc_7BB6
		move.b	#1,$3D(a0)
		bra.s	loc_7BB6

loc_7B9C:				; ...
		move.w	$3E(a0),d0
		subq.w	#8,d0
		move.w	d0,$3E(a0)
		add.w	d0,$26(a0)
		cmpi.w	#-$200,d0
		bne.s	loc_7BB6
		move.b	#0,$3D(a0)

loc_7BB6:				; ...
		move.b	$26(a0),d0
; End of function Obj48_Move


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj15_Move2:				; ...
		bsr.w	CalcSine
		move.w	$38(a0),d2
		move.w	$3A(a0),d3
		lea	$28(a0),a2
		moveq	#0,d6
		move.b	(a2)+,d6

loc_7BCE:				; ...
		moveq	#0,d4
		move.b	(a2)+,d4
		lsl.w	#6,d4
		addi.l	#$FFD000,d4
		movea.l	d4,a1
		moveq	#0,d4
		move.b	$3C(a1),d4
		move.l	d4,d5
		muls.w	d0,d4
		asr.l	#8,d4
		muls.w	d1,d5
		asr.l	#8,d5
		add.w	d2,d4
		add.w	d3,d5
		move.w	d4,$C(a1)
		move.w	d5,8(a1)
		dbf	d6,loc_7BCE
		rts	
; End of function Obj15_Move2


Obj15_ChkDel:				; ...
		move.w	$3A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj15_DelAll
		rts	

Obj15_DelAll:				; ...
		moveq	#0,d2
		lea	$28(a0),a2
		move.b	(a2)+,d2

Obj15_DelLoop:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		jsr	$880000+DeleteObject2
		dbf	d2,Obj15_DelLoop ; repeat for length of	chain
		rts	

Obj15_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj15_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - GHZ	and MZ swinging	platforms
; ---------------------------------------------------------------------------
Map_obj15:	dc.w byte_7C4E-Map_obj15, byte_7C59-Map_obj15 ;	...
		dc.w byte_7C5F-Map_obj15
byte_7C4E:	dc.b 2			; ...
		dc.b $F8, 9, 0,	4, $E8
		dc.b $F8, 9, 0,	4, 0
byte_7C59:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_7C5F:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$A, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - SLZ	swinging platforms
; ---------------------------------------------------------------------------
Map_obj15a:	dc.w byte_7C6C-Map_obj15a, byte_7C95-Map_obj15a	; ...
		dc.w byte_7C9B-Map_obj15a
byte_7C6C:	dc.b 8			; ...
		dc.b $F0, $F, 0, 4, $E0
		dc.b $F0, $F, 8, 4, 0
		dc.b $F0, 5, 0,	$14, $D0
		dc.b $F0, 5, 8,	$14, $20
		dc.b $10, 4, 0,	$18, $E0
		dc.b $10, 4, 8,	$18, $10
		dc.b $10, 1, 0,	$1A, $F8
		dc.b $10, 1, 8,	$1A, 0
byte_7C95:	dc.b 1			; ...
		dc.b $F8, 5, $40, 0, $F8
byte_7C9B:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$1C, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 17 - helix of spikes on a pole	(GHZ)
; ---------------------------------------------------------------------------

Obj17:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj17_Index(pc,d0.w),d1
		jmp	Obj17_Index(pc,d1.w)
Obj17_Index:	dc.w Obj17_Main-Obj17_Index ; ...
		dc.w Obj17_Action-Obj17_Index
		dc.w Obj17_Action-Obj17_Index
		dc.w Obj17_Delete-Obj17_Index
		dc.w Obj17_Display-Obj17_Index

Obj17_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj17,4(a0)
		move.w	#$4398,2(a0)
		move.b	#7,$22(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#8,$19(a0)
		move.w	$C(a0),d2
		move.w	8(a0),d3
		move.b	0(a0),d4
		lea	$28(a0),a2	; move helix length to a2
		moveq	#0,d1
		move.b	(a2),d1		; move a2 to d1
		move.b	#0,(a2)+
		move.w	d1,d0
		lsr.w	#1,d0
		lsl.w	#4,d0
		sub.w	d0,d3
		subq.b	#2,d1
		bcs.s	Obj17_Action
		moveq	#0,d6

Obj17_MakeHelix:			; ...
		jsr	$880000+SingleObjLoad
		bne.s	Obj17_Action
		addq.b	#1,$28(a0)
		move.w	a1,d5
		subi.w	#$D000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	#8,$24(a1)
		move.b	d4,0(a1)
		move.w	d2,$C(a1)
		move.w	d3,8(a1)
		move.l	4(a0),4(a1)
		move.w	#$4398,2(a1)
		move.b	#4,1(a1)
		move.b	#3,$18(a1)
		move.b	#8,$19(a1)
		move.b	d6,$3E(a1)
		addq.b	#1,d6
		andi.b	#7,d6
		addi.w	#$10,d3
		cmp.w	8(a0),d3
		bne.s	loc_7D78
		move.b	d6,$3E(a0)
		addq.b	#1,d6
		andi.b	#7,d6
		addi.w	#$10,d3
		addq.b	#1,$28(a0)

loc_7D78:				; ...
		dbf	d1,Obj17_MakeHelix ; repeat d1 times (helix length)

Obj17_Action:				; ...
		bsr.w	Obj17_RotateSpikes
		jsr	$880000+DisplaySprite
		bra.w	Obj17_ChkDel

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj17_RotateSpikes:			; ...
		move.b	($FFFFFEC1).w,d0
		move.b	#0,$20(a0)	; make object harmless
		add.b	$3E(a0),d0
		andi.b	#7,d0
		move.b	d0,$1A(a0)	; change current frame
		bne.s	locret_7DA6
		move.b	#$84,$20(a0)	; make object harmful

locret_7DA6:				; ...
		rts	
; End of function Obj17_RotateSpikes


Obj17_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj17_DelAll
		rts	

Obj17_DelAll:				; ...
		moveq	#0,d2
		lea	$28(a0),a2	; move helix length to a2
		move.b	(a2)+,d2	; move a2 to d2
		subq.b	#2,d2
		bcs.s	Obj17_Delete

Obj17_DelLoop:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		jsr	$880000+DeleteObject2	; delete object
		dbf	d2,Obj17_DelLoop ; repeat d2 times (helix length)

Obj17_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj17_Display:				; ...
		bsr.w	Obj17_RotateSpikes
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - helix of spikes on a pole (GHZ)
; ---------------------------------------------------------------------------
Map_obj17:	dc.w byte_7E08-Map_obj17, byte_7E0E-Map_obj17 ;	...
		dc.w byte_7E14-Map_obj17, byte_7E1A-Map_obj17
		dc.w byte_7E20-Map_obj17, byte_7E26-Map_obj17
		dc.w byte_7E2D+1-Map_obj17, byte_7E2C-Map_obj17
byte_7E08:	dc.b 1			; ...
		dc.b $F0, 1, 0,	0, $FC
byte_7E0E:	dc.b 1			; ...
		dc.b $F5, 5, 0,	2, $F8
byte_7E14:	dc.b 1			; ...
		dc.b $F8, 5, 0,	6, $F8
byte_7E1A:	dc.b 1			; ...
		dc.b $FB, 5, 0,	$A, $F8
byte_7E20:	dc.b 1			; ...
		dc.b 0,	1, 0, $E, $FC
byte_7E26:	dc.b 1			; ...
		dc.b 4,	0, 0, $10, $FD
byte_7E2C:	dc.b 1			; ...
byte_7E2D:	dc.b $F4, 0, 0,	$11, $FD ; ...
; ---------------------------------------------------------------------------
; Object 18 - platforms	(GHZ, SYZ, SLZ)
; ---------------------------------------------------------------------------

Obj18:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj18_Index(pc,d0.w),d1
		jmp	Obj18_Index(pc,d1.w)
Obj18_Index:	dc.w Obj18_Main-Obj18_Index ; ...
		dc.w Obj18_Solid-Obj18_Index
		dc.w Obj18_Action2-Obj18_Index
		dc.w Obj18_Delete-Obj18_Index
		dc.w Obj18_Action-Obj18_Index

Obj18_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$4000,2(a0)
		move.l	#$880000+Map_obj18,4(a0)
		move.b	#$20,$19(a0)
		cmpi.b	#4,($FFFFFE10).w ; check if level is SYZ
		bne.s	Obj18_NotSYZ
		move.l	#$880000+Map_obj18a,4(a0) ; SYZ	specific code
		move.b	#$20,$19(a0)

Obj18_NotSYZ:				; ...
		cmpi.b	#3,($FFFFFE10).w ; check if level is SLZ
		bne.s	Obj18_NotSLZ
		move.l	#$880000+Map_obj18b,4(a0) ; SLZ	specific code
		move.b	#$20,$19(a0)
		move.w	#$4000,2(a0)
		move.b	#3,$28(a0)

Obj18_NotSLZ:				; ...
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.w	$C(a0),$2C(a0)
		move.w	$C(a0),$34(a0)
		move.w	8(a0),$32(a0)
		move.w	#$80,$26(a0)
		moveq	#0,d1
		move.b	$28(a0),d0
		cmpi.b	#$A,d0		; is object type $A (large platform)?
		bne.s	Obj18_SetFrame	; if not, branch
		addq.b	#1,d1		; use frame #1
		move.b	#$20,$19(a0)	; set width

Obj18_SetFrame:				; ...
		move.b	d1,$1A(a0)	; set frame to d1

Obj18_Solid:				; ...
		tst.b	$38(a0)
		beq.s	loc_7EE0
		subq.b	#4,$38(a0)

loc_7EE0:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		bsr.w	PlatformObject

Obj18_Action:				; ...
		bsr.w	Obj18_Move
		bsr.w	Obj18_Nudge
		jsr	$880000+DisplaySprite
		bra.w	Obj18_ChkDel

Obj18_Action2:				; ...
		cmpi.b	#$40,$38(a0)
		beq.s	loc_7F06
		addq.b	#4,$38(a0)

loc_7F06:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		bsr.w	ExitPlatform
		move.w	8(a0),-(sp)
		bsr.w	Obj18_Move
		bsr.w	Obj18_Nudge
		move.w	(sp)+,d2
		jsr	$880000+MvSonicOnPtfm2
		jsr	$880000+DisplaySprite
		bra.w	Obj18_ChkDel
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	move platform slightly when you	stand on it
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj18_Nudge:				; ...
		move.b	$38(a0),d0
		bsr.w	CalcSine
		move.w	#$400,d1
		muls.w	d1,d0
		swap	d0
		add.w	$2C(a0),d0
		move.w	d0,$C(a0)
		rts	
; End of function Obj18_Nudge

; ---------------------------------------------------------------------------
; Subroutine to	move platforms
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj18_Move:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj18_TypeIndex(pc,d0.w),d1
		jmp	Obj18_TypeIndex(pc,d1.w)
; End of function Obj18_Move

Obj18_TypeIndex:dc.w Obj18_Type00-Obj18_TypeIndex, Obj18_Type01-Obj18_TypeIndex	; ...
		dc.w Obj18_Type02-Obj18_TypeIndex, Obj18_Type03-Obj18_TypeIndex
		dc.w Obj18_Type04-Obj18_TypeIndex, Obj18_Type05-Obj18_TypeIndex
		dc.w Obj18_Type06-Obj18_TypeIndex, Obj18_Type07-Obj18_TypeIndex
		dc.w Obj18_Type08-Obj18_TypeIndex, Obj18_Type00-Obj18_TypeIndex
		dc.w Obj18_Type0A-Obj18_TypeIndex, Obj18_Type0B-Obj18_TypeIndex
		dc.w Obj18_Type0C-Obj18_TypeIndex

Obj18_Type00:				; ...
		rts			; platform 00 doesn't move

Obj18_Type05:				; ...
		move.w	$32(a0),d0
		move.b	$26(a0),d1	; load platform-motion variable
		neg.b	d1		; reverse platform-motion
		addi.b	#$40,d1
		bra.s	Obj18_01_Move

Obj18_Type01:				; ...
		move.w	$32(a0),d0
		move.b	$26(a0),d1	; load platform-motion variable
		subi.b	#$40,d1

Obj18_01_Move:				; ...
		ext.w	d1
		add.w	d1,d0
		move.w	d0,8(a0)	; change position on x-axis
		bra.w	Obj18_ChgMotion

Obj18_Type0C:				; ...
		move.w	$34(a0),d0
		move.b	($FFFFFE6C).w,d1 ; load	platform-motion	variable
		neg.b	d1		; reverse platform-motion
		addi.b	#$30,d1
		bra.s	Obj18_02_Move

Obj18_Type0B:				; ...
		move.w	$34(a0),d0
		move.b	($FFFFFE6C).w,d1 ; load	platform-motion	variable
		subi.b	#$30,d1
		bra.s	Obj18_02_Move

Obj18_Type06:				; ...
		move.w	$34(a0),d0
		move.b	$26(a0),d1	; load platform-motion variable
		neg.b	d1		; reverse platform-motion
		addi.b	#$40,d1
		bra.s	Obj18_02_Move

Obj18_Type02:				; ...
		move.w	$34(a0),d0
		move.b	$26(a0),d1	; load platform-motion variable
		subi.b	#$40,d1

Obj18_02_Move:				; ...
		ext.w	d1
		add.w	d1,d0
		move.w	d0,$2C(a0)	; change position on y-axis
		bra.w	Obj18_ChgMotion

Obj18_Type03:				; ...
		tst.w	$3A(a0)		; is time delay	set?
		bne.s	Obj18_03_Wait	; if yes, branch
		btst	#3,$22(a0)	; is Sonic standing on the platform?
		beq.s	Obj18_03_NoMove	; if not, branch
		move.w	#30,$3A(a0)	; set time delay to 0.5	seconds

Obj18_03_NoMove:			; ...
		rts	

Obj18_03_Wait:				; ...
		subq.w	#1,$3A(a0)	; subtract 1 from time
		bne.s	Obj18_03_NoMove	; if time is > 0, branch
		move.w	#32,$3A(a0)
		addq.b	#1,$28(a0)	; change to type 04 (falling)
		rts	

Obj18_Type04:				; ...
		tst.w	$3A(a0)
		beq.s	loc_8048
		subq.w	#1,$3A(a0)
		bne.s	loc_8048
		btst	#3,$22(a0)
		beq.s	loc_8042
		bset	#1,$22(a1)
		bclr	#3,$22(a1)
		move.b	#2,$24(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		move.w	$12(a0),$12(a1)

loc_8042:				; ...
		move.b	#8,$24(a0)

loc_8048:				; ...
		move.l	$2C(a0),d3
		move.w	$12(a0),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d3
		move.l	d3,$2C(a0)
		addi.w	#$38,$12(a0)
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$2C(a0),d0
		bcc.s	locret_8074
		move.b	#6,$24(a0)

locret_8074:				; ...
		rts	

Obj18_Type07:				; ...
		tst.w	$3A(a0)		; is time delay	set?
		bne.s	Obj18_07_Wait	; if yes, branch
		lea	($FFFFF7E0).w,a2 ; load	switch statuses
		moveq	#0,d0
		move.b	$28(a0),d0	; move object type ($x7) to d0
		lsr.w	#4,d0		; divide d0 by 8, round	down
		tst.b	(a2,d0.w)	; has switch no. d0 been pressed?
		beq.s	Obj18_07_NoMove	; if not, branch
		move.w	#60,$3A(a0)	; set time delay to 1 second

Obj18_07_NoMove:			; ...
		rts	

Obj18_07_Wait:				; ...
		subq.w	#1,$3A(a0)	; subtract 1 from time delay
		bne.s	Obj18_07_NoMove	; if time is > 0, branch
		addq.b	#1,$28(a0)	; change to type 08
		rts	

Obj18_Type08:				; ...
		subq.w	#2,$2C(a0)	; move platform	up
		move.w	$34(a0),d0
		subi.w	#$200,d0
		cmp.w	$2C(a0),d0	; has platform moved $200 pixels?
		bne.s	Obj18_08_NoStop	; if not, branch
		clr.b	$28(a0)		; change to type 00 (stop moving)

Obj18_08_NoStop:			; ...
		rts	

Obj18_Type0A:				; ...
		move.w	$34(a0),d0
		move.b	$26(a0),d1	; load platform-motion variable
		subi.b	#$40,d1
		ext.w	d1
		asr.w	#1,d1
		add.w	d1,d0
		move.w	d0,$2C(a0)	; change position on y-axis

Obj18_ChgMotion:			; ...
		move.b	($FFFFFE78).w,$26(a0) ;	update platform-movement variable
		rts	

Obj18_ChkDel:				; ...
		move.w	$32(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj18_Delete
		rts	

Obj18_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - unused
; ---------------------------------------------------------------------------
Map_obj18x:	dc.w byte_80FE-Map_obj18x ; ...
		dc.w byte_8109-Map_obj18x
byte_80FE:	dc.b 2			; ...
		dc.b $F4, $B, 0, $3C, $E8
		dc.b $F4, $B, 0, $48, 0
byte_8109:	dc.b $A			; ...
		dc.b $F4, $F, 0, $CA, $E0
		dc.b 4,	$F, 0, $DA, $E0
		dc.b $24, $F, 0, $DA, $E0
		dc.b $44, $F, 0, $DA, $E0
		dc.b $64, $F, 0, $DA, $E0
		dc.b $F4, $F, 8, $CA, 0
		dc.b 4,	$F, 8, $DA, 0
		dc.b $24, $F, 8, $DA, 0
		dc.b $44, $F, 8, $DA, 0
		dc.b $64, $F, 8, $DA, 0
; ---------------------------------------------------------------------------
; Sprite mappings - GHZ	platforms
; ---------------------------------------------------------------------------
Map_obj18:	dc.w byte_8140-Map_obj18 ; ...
		dc.w byte_8155-Map_obj18
byte_8140:	dc.b 4			; ...
		dc.b $F4, $B, 0, $3B, $E0 ; small platform
		dc.b $F4, 7, 0,	$3F, $F8
		dc.b $F4, 7, 0,	$3F, 8
		dc.b $F4, 3, 0,	$47, $18
byte_8155:	dc.b $A			; ...
		dc.b $F4, $F, 0, $C5, $E0 ; large column platform
		dc.b 4,	$F, 0, $D5, $E0
		dc.b $24, $F, 0, $D5, $E0
		dc.b $44, $F, 0, $D5, $E0
		dc.b $64, $F, 0, $D5, $E0
		dc.b $F4, $F, 8, $C5, 0
		dc.b 4,	$F, 8, $D5, 0
		dc.b $24, $F, 8, $D5, 0
		dc.b $44, $F, 8, $D5, 0
		dc.b $64, $F, 8, $D5, 0
; ---------------------------------------------------------------------------
; Sprite mappings - SYZ	platforms
; ---------------------------------------------------------------------------
Map_obj18a:	dc.w byte_818A-Map_obj18a ; ...
byte_818A:	dc.b 3			; ...
		dc.b $F6, $B, 0, $49, $E0
		dc.b $F6, 7, 0,	$51, $F8
		dc.b $F6, $B, 0, $55, 8
; ---------------------------------------------------------------------------
; Sprite mappings - SLZ	platforms
; ---------------------------------------------------------------------------
Map_obj18b:	dc.w byte_819C-Map_obj18b ; ...
byte_819C:	dc.b 2			; ...
		dc.b $F8, $F, 0, $21, $E0
		dc.b $F8, $F, 0, $21, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 19 - blank
; ---------------------------------------------------------------------------

Obj19:					; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - swinging ball on a chain from GHZ boss
; ---------------------------------------------------------------------------
Map_obj48:	dc.w byte_81B2-Map_obj48, byte_81D1-Map_obj48 ;	...
		dc.w byte_81E6-Map_obj48, byte_81FB-Map_obj48
byte_81B2:	dc.b 6			; ...
		dc.b $F0, 4, 0,	$24, $F0
		dc.b $F8, 4, $10, $24, $F0
		dc.b $E8, $A, 0, 0, $E8
		dc.b $E8, $A, 8, 0, 0
		dc.b 0,	$A, $10, 0, $E8
		dc.b 0,	$A, $18, 0, 0
byte_81D1:	dc.b 4			; ...
		dc.b $E8, $A, 0, 9, $E8
		dc.b $E8, $A, 8, 9, 0
		dc.b 0,	$A, $10, 9, $E8
		dc.b 0,	$A, $18, 9, 0
byte_81E6:	dc.b 4			; ...
		dc.b $E8, $A, 0, $12, $E8
		dc.b $E8, $A, 0, $1B, 0
		dc.b 0,	$A, $18, $1B, $E8
		dc.b 0,	$A, $18, $12, 0
byte_81FB:	dc.b 4			; ...
		dc.b $E8, $A, 8, $1B, $E8
		dc.b $E8, $A, 8, $12, 0
		dc.b 0,	$A, $10, $12, $E8
		dc.b 0,	$A, $10, $1B, 0
; ---------------------------------------------------------------------------
; Object 1A - GHZ collapsing ledge
; ---------------------------------------------------------------------------

Obj1A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1A_Index(pc,d0.w),d1
		jmp	Obj1A_Index(pc,d1.w)
Obj1A_Index:	dc.w Obj1A_Main-Obj1A_Index, Obj1A_ChkTouch-Obj1A_Index	; ...
		dc.w Obj1A_Touch-Obj1A_Index, Obj1A_Display-Obj1A_Index
		dc.w Obj1A_Delete-Obj1A_Index, Obj1A_WalkOff-Obj1A_Index

Obj1A_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj1A,4(a0)
		move.w	#$4000,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#7,$38(a0)	; set time delay for collapse
		move.b	#$64,$19(a0)
		move.b	$28(a0),$1A(a0)
		move.b	#$38,$16(a0)
		bset	#4,1(a0)

Obj1A_ChkTouch:				; ...
		tst.b	$3A(a0)		; has Sonic touched the	platform?
		beq.s	Obj1A_Slope	; if not, branch
		tst.b	$38(a0)		; has time reached zero?
		beq.w	Obj1A_Collapse	; if yes, branch
		subq.b	#1,$38(a0)	; subtract 1 from time

Obj1A_Slope:				; ...
		move.w	#$30,d1
		lea	(Obj1A_SlopeData)(pc),a2
		bsr.w	SlopeObject
		bra.w	MarkObjGone

Obj1A_Touch:				; ...
		tst.b	$38(a0)
		beq.w	loc_847A
		move.b	#1,$3A(a0)	; set object as	"touched"
		subq.b	#1,$38(a0)

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj1A_WalkOff:				; ...
		move.w	#$30,d1
		bsr.w	ExitPlatform
		move.w	#$30,d1
		lea	(Obj1A_SlopeData)(pc),a2
		move.w	8(a0),d2
		bsr.w	SlopeObject2
		bra.w	MarkObjGone
; End of function Obj1A_WalkOff


Obj1A_Display:				; ...
		tst.b	$38(a0)		; has time delay reached zero?
		beq.s	Obj1A_TimeZero	; if yes, branch
		tst.b	$3A(a0)		; has Sonic touched the	object?
		bne.w	loc_82D0	; if yes, branch
		subq.b	#1,$38(a0)	; subtract 1 from time
		jmp	$880000+DisplaySprite

loc_82D0:				; ...
		subq.b	#1,$38(a0)
		bsr.w	Obj1A_WalkOff
		lea	($FFFFD000).w,a1
		btst	#3,$22(a1)
		beq.s	loc_82FC
		tst.b	$38(a0)
		bne.s	locret_8308
		bclr	#3,$22(a1)
		bclr	#5,$22(a1)
		move.b	#1,$1D(a1)

loc_82FC:				; ...
		move.b	#0,$3A(a0)
		move.b	#6,$24(a0)	; run "Obj1A_Display" routine

locret_8308:				; ...
		rts	

Obj1A_TimeZero:				; ...
		jsr	$880000+ObjectFall
		jsr	$880000+DisplaySprite
		tst.b	1(a0)
		bpl.s	Obj1A_Delete
		rts	

Obj1A_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Object 53 - collapsing floors	(MZ, SLZ, SBZ)
; ---------------------------------------------------------------------------

Obj53:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj53_Index(pc,d0.w),d1
		jmp	Obj53_Index(pc,d1.w)
Obj53_Index:	dc.w Obj53_Main-Obj53_Index, Obj53_ChkTouch-Obj53_Index	; ...
		dc.w Obj53_Touch-Obj53_Index, Obj53_Display-Obj53_Index
		dc.w Obj53_Delete-Obj53_Index, Obj53_WalkOff-Obj53_Index

Obj53_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj53,4(a0)
		move.w	#$42B8,2(a0)
		cmpi.b	#3,($FFFFFE10).w ; check if level is SLZ
		bne.s	Obj53_NotSLZ
		move.w	#$44E0,2(a0)	; SLZ specific code
		addq.b	#2,$1A(a0)

Obj53_NotSLZ:				; ...
		cmpi.b	#5,($FFFFFE10).w ; check if level is SBZ
		bne.s	Obj53_NotSBZ
		move.w	#$43F5,2(a0)	; SBZ specific code

Obj53_NotSBZ:				; ...
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#7,$38(a0)
		move.b	#$44,$19(a0)

Obj53_ChkTouch:				; ...
		tst.b	$3A(a0)		; has Sonic touched the	object?
		beq.s	Obj53_Solid	; if not, branch
		tst.b	$38(a0)		; has time delay reached zero?
		beq.w	Obj53_Collapse	; if yes, branch
		subq.b	#1,$38(a0)	; subtract 1 from time

Obj53_Solid:				; ...
		move.w	#$20,d1
		bsr.w	PlatformObject
		tst.b	$28(a0)
		bpl.s	Obj53_MarkAsGone
		btst	#3,$22(a1)
		beq.s	Obj53_MarkAsGone
		bclr	#0,1(a0)
		move.w	8(a1),d0
		sub.w	8(a0),d0
		bcc.s	Obj53_MarkAsGone
		bset	#0,1(a0)

Obj53_MarkAsGone:			; ...
		bra.w	MarkObjGone

Obj53_Touch:				; ...
		tst.b	$38(a0)
		beq.w	loc_8458
		move.b	#1,$3A(a0)	; set object as	"touched"
		subq.b	#1,$38(a0)

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj53_WalkOff:				; ...
		move.w	#$20,d1
		bsr.w	ExitPlatform
		move.w	8(a0),d2
		jsr	$880000+MvSonicOnPtfm2
		bra.w	MarkObjGone
; End of function Obj53_WalkOff


Obj53_Display:				; ...
		tst.b	$38(a0)		; has time delay reached zero?
		beq.s	Obj53_TimeZero	; if yes, branch
		tst.b	$3A(a0)		; has Sonic touched the	object?
		bne.w	loc_8402	; if yes, branch
		subq.b	#1,$38(a0)	; subtract 1 from time
		jmp	$880000+DisplaySprite

loc_8402:				; ...
		subq.b	#1,$38(a0)
		bsr.w	Obj53_WalkOff
		lea	($FFFFD000).w,a1
		btst	#3,$22(a1)
		beq.s	loc_842E
		tst.b	$38(a0)
		bne.s	locret_843A
		bclr	#3,$22(a1)
		bclr	#5,$22(a1)
		move.b	#1,$1D(a1)

loc_842E:				; ...
		move.b	#0,$3A(a0)
		move.b	#6,$24(a0)	; run "Obj53_Display" routine

locret_843A:				; ...
		rts	

Obj53_TimeZero:				; ...
		jsr	$880000+ObjectFall
		jsr	$880000+DisplaySprite
		tst.b	1(a0)
		bpl.s	Obj53_Delete
		rts	

Obj53_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj53_Collapse:				; ...
		move.b	#0,$3A(a0)

loc_8458:				; ...
		lea	(Obj53_Data2)(pc),a4
		btst	#0,$28(a0)
		beq.s	loc_846C
		lea	(Obj53_Data3)(pc),a4

loc_846C:				; ...
		moveq	#7,d1
		addq.b	#1,$1A(a0)
		bra.s	loc_8486

Obj1A_Collapse:				; ...
		move.b	#0,$3A(a0)

loc_847A:				; ...
		lea	(Obj53_Data1)(pc),a4
		moveq	#$18,d1
		addq.b	#2,$1A(a0)

loc_8486:				; ...
		moveq	#0,d0
		move.b	$1A(a0),d0
		add.w	d0,d0
		movea.l	4(a0),a3
		adda.w	(a3,d0.w),a3
		addq.w	#1,a3
		bset	#5,1(a0)
		move.b	0(a0),d4
		move.b	1(a0),d5
		movea.l	a0,a1
		bra.s	loc_84B2

loc_84AA:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_84F2
		addq.w	#5,a3

loc_84B2:				; ...
		move.b	#6,$24(a1)
		move.b	d4,0(a1)
		move.l	a3,4(a1)
		move.b	d5,1(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	2(a0),2(a1)
		move.b	$18(a0),$18(a1)
		move.b	$19(a0),$19(a1)
		move.b	(a4)+,$38(a1)
		cmpa.l	a0,a1
		bcc.s	loc_84EE
		jsr	$880000+DisplaySprite2

loc_84EE:				; ...
		dbf	d1,loc_84AA

loc_84F2:				; ...
		jsr	$880000+DisplaySprite
		move.w	#$B9,d0
		jmp	$880000+(PlaySound_Special).l ;	play collapsing	sound
; ---------------------------------------------------------------------------
; Disintegration data for collapsing ledges (MZ, SLZ, SBZ)
; ---------------------------------------------------------------------------
Obj53_Data1:	dc.b $1C, $18, $14, $10, $1A, $16, $12,	$E, $A,	6, $18,	$14, $10, $C, 8, 4 ; ...
		dc.b $16, $12, $E, $A, 6, 2, $14, $10, $C, 0
Obj53_Data2:	dc.b $1E, $16, $E, 6, $1A, $12,	$A, 2 ;	...
Obj53_Data3:	dc.b $16, $1E, $1A, $12, 6, $E,	$A, 2 ;	...
; ---------------------------------------------------------------------------
; Sloped platform subroutine (GHZ collapsing ledges and	MZ platforms)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SlopeObject2:				; ...
		lea	($FFFFD000).w,a1
		btst	#3,$22(a1)
		beq.s	locret_856E
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		lsr.w	#1,d0
		btst	#0,1(a0)
		beq.s	loc_854E
		not.w	d0
		add.w	d1,d0

loc_854E:				; ...
		moveq	#0,d1
		move.b	(a2,d0.w),d1
		move.w	$C(a0),d0
		sub.w	d1,d0
		moveq	#0,d1
		move.b	$16(a1),d1
		sub.w	d1,d0
		move.w	d0,$C(a1)
		sub.w	8(a0),d2
		sub.w	d2,8(a1)

locret_856E:				; ...
		rts	
; End of function SlopeObject2

; ---------------------------------------------------------------------------
; Collision data for GHZ collapsing ledge
; ---------------------------------------------------------------------------
Obj1A_SlopeData:dc.b $20, $20, $20, $20, $20, $20, $20,	$20, $21, $21, $22, $22, $23, $23, $24,	$24 ; ...
		dc.b $25, $25, $26, $26, $27, $27, $28,	$28, $29, $29, $2A, $2A, $2B, $2B, $2C,	$2C
		dc.b $2D, $2D, $2E, $2E, $2F, $2F, $30,	$30, $30, $30, $30, $30, $30, $30, $30,	$30
; ---------------------------------------------------------------------------
; Sprite mappings - GHZ	collapsing ledge
; ---------------------------------------------------------------------------
Map_obj1A:	dc.w byte_85A8-Map_obj1A, byte_85F9-Map_obj1A ;	...
		dc.w byte_864A-Map_obj1A, byte_86C8-Map_obj1A
byte_85A8:	dc.b $10		; ...
		dc.b $C8, $E, 0, $57, $10 ; ledge facing left
		dc.b $D0, $D, 0, $63, $F0
		dc.b $E0, $D, 0, $6B, $10
		dc.b $E0, $D, 0, $73, $F0
		dc.b $D8, 6, 0,	$7B, $E0
		dc.b $D8, 6, 0,	$81, $D0
		dc.b $F0, $D, 0, $87, $10
		dc.b $F0, $D, 0, $8F, $F0
		dc.b $F0, 5, 0,	$97, $E0
		dc.b $F0, 5, 0,	$9B, $D0
		dc.b 0,	$D, 0, $9F, $10
		dc.b 0,	5, 0, $A7, 0
		dc.b 0,	$D, 0, $AB, $E0
		dc.b 0,	5, 0, $B3, $D0
		dc.b $10, $D, 0, $AB, $10
		dc.b $10, 5, 0,	$B7, 0
byte_85F9:	dc.b $10		; ...
		dc.b $C8, $E, 0, $57, $10 ; ledge facing right
		dc.b $D0, $D, 0, $63, $F0
		dc.b $E0, $D, 0, $6B, $10
		dc.b $E0, $D, 0, $73, $F0
		dc.b $D8, 6, 0,	$7B, $E0
		dc.b $D8, 6, 0,	$BB, $D0
		dc.b $F0, $D, 0, $87, $10
		dc.b $F0, $D, 0, $8F, $F0
		dc.b $F0, 5, 0,	$97, $E0
		dc.b $F0, 5, 0,	$C1, $D0
		dc.b 0,	$D, 0, $9F, $10
		dc.b 0,	5, 0, $A7, 0
		dc.b 0,	$D, 0, $AB, $E0
		dc.b 0,	5, 0, $B7, $D0
		dc.b $10, $D, 0, $AB, $10
		dc.b $10, 5, 0,	$B7, 0
byte_864A:	dc.b $19		; ...
		dc.b $C8, 6, 0,	$5D, $20 ; ledge facing	left in	pieces
		dc.b $C8, 6, 0,	$57, $10
		dc.b $D0, 5, 0,	$67, 0
		dc.b $D0, 5, 0,	$63, $F0
		dc.b $E0, 5, 0,	$6F, $20
		dc.b $E0, 5, 0,	$6B, $10
		dc.b $E0, 5, 0,	$77, 0
		dc.b $E0, 5, 0,	$73, $F0
		dc.b $D8, 6, 0,	$7B, $E0
		dc.b $D8, 6, 0,	$81, $D0
		dc.b $F0, 5, 0,	$8B, $20
		dc.b $F0, 5, 0,	$87, $10
		dc.b $F0, 5, 0,	$93, 0
		dc.b $F0, 5, 0,	$8F, $F0
		dc.b $F0, 5, 0,	$97, $E0
		dc.b $F0, 5, 0,	$9B, $D0
		dc.b 0,	5, 0, $8B, $20
		dc.b 0,	5, 0, $8B, $10
		dc.b 0,	5, 0, $A7, 0
		dc.b 0,	5, 0, $AB, $F0
		dc.b 0,	5, 0, $AB, $E0
		dc.b 0,	5, 0, $B3, $D0
		dc.b $10, 5, 0,	$AB, $20
		dc.b $10, 5, 0,	$AB, $10
		dc.b $10, 5, 0,	$B7, 0
byte_86C8:	dc.b $19		; ...
		dc.b $C8, 6, 0,	$5D, $20 ; ledge facing	right in pieces
		dc.b $C8, 6, 0,	$57, $10
		dc.b $D0, 5, 0,	$67, 0
		dc.b $D0, 5, 0,	$63, $F0
		dc.b $E0, 5, 0,	$6F, $20
		dc.b $E0, 5, 0,	$6B, $10
		dc.b $E0, 5, 0,	$77, 0
		dc.b $E0, 5, 0,	$73, $F0
		dc.b $D8, 6, 0,	$7B, $E0
		dc.b $D8, 6, 0,	$BB, $D0
		dc.b $F0, 5, 0,	$8B, $20
		dc.b $F0, 5, 0,	$87, $10
		dc.b $F0, 5, 0,	$93, 0
		dc.b $F0, 5, 0,	$8F, $F0
		dc.b $F0, 5, 0,	$97, $E0
		dc.b $F0, 5, 0,	$C1, $D0
		dc.b 0,	5, 0, $8B, $20
		dc.b 0,	5, 0, $8B, $10
		dc.b 0,	5, 0, $A7, 0
		dc.b 0,	5, 0, $AB, $F0
		dc.b 0,	5, 0, $AB, $E0
		dc.b 0,	5, 0, $B7, $D0
		dc.b $10, 5, 0,	$AB, $20
		dc.b $10, 5, 0,	$AB, $10
		dc.b $10, 5, 0,	$B7, 0
; ---------------------------------------------------------------------------
; Sprite mappings - collapsing floors (MZ, SLZ,	SBZ)
; ---------------------------------------------------------------------------
Map_obj53:	dc.w byte_874E-Map_obj53, byte_8763-Map_obj53 ;	...
		dc.w byte_878C-Map_obj53, byte_87A1-Map_obj53
byte_874E:	dc.b 4			; ...
		dc.b $F8, $D, 0, 0, $E0	; MZ and SBZ blocks
		dc.b 8,	$D, 0, 0, $E0
		dc.b $F8, $D, 0, 0, 0
		dc.b 8,	$D, 0, 0, 0
byte_8763:	dc.b 8			; ...
		dc.b $F8, 5, 0,	0, $E0
		dc.b $F8, 5, 0,	0, $F0
		dc.b $F8, 5, 0,	0, 0
		dc.b $F8, 5, 0,	0, $10
		dc.b 8,	5, 0, 0, $E0
		dc.b 8,	5, 0, 0, $F0
		dc.b 8,	5, 0, 0, 0
		dc.b 8,	5, 0, 0, $10
byte_878C:	dc.b 4			; ...
		dc.b $F8, $D, 0, 0, $E0	; SLZ blocks
		dc.b 8,	$D, 0, 8, $E0
		dc.b $F8, $D, 0, 0, 0
		dc.b 8,	$D, 0, 8, 0
byte_87A1:	dc.b 8			; ...
		dc.b $F8, 5, 0,	0, $E0
		dc.b $F8, 5, 0,	4, $F0
		dc.b $F8, 5, 0,	0, 0
		dc.b $F8, 5, 0,	4, $10
		dc.b 8,	5, 0, 8, $E0
		dc.b 8,	5, 0, $C, $F0
		dc.b 8,	5, 0, 8, 0
		dc.b 8,	5, 0, $C, $10
		
; ---------------------------------------------------------------------------
; Object 12 - lamp (SYZ)
; ---------------------------------------------------------------------------

Obj12:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj12_Index(pc,d0.w),d1
		jmp	Obj12_Index(pc,d1.w)
Obj12_Index:	dc.w Obj12_Main-Obj12_Index ; ...
		dc.w Obj12_Animate-Obj12_Index

Obj12_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj12,4(a0)
		move.w	#0,2(a0)
		move.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#6,$18(a0)

Obj12_Animate:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	Obj12_ChkDel
		move.b	#7,$1E(a0)
		addq.b	#1,$1A(a0)
		cmpi.b	#6,$1A(a0)
		bcs.s	Obj12_ChkDel
		move.b	#0,$1A(a0)

Obj12_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj14_Delete
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - lamp (SYZ)
; ---------------------------------------------------------------------------
Map_obj12:	dc.w byte_E98E-Map_obj12, byte_E999-Map_obj12 ;	...
		dc.w byte_E9A4-Map_obj12, byte_E9AF-Map_obj12
		dc.w byte_E9BA-Map_obj12, byte_E9C5-Map_obj12
byte_E98E:	dc.b 2			; ...
		dc.b $F8, $C, 0, $31, $F0
		dc.b 0,	$C, $10, $31, $F0
byte_E999:	dc.b 2			; ...
		dc.b $F8, $C, 0, $35, $F0
		dc.b 0,	$C, $10, $35, $F0
byte_E9A4:	dc.b 2			; ...
		dc.b $F8, $C, 0, $39, $F0
		dc.b 0,	$C, $10, $39, $F0
byte_E9AF:	dc.b 2			; ...
		dc.b $F8, $C, 0, $3D, $F0
		dc.b 0,	$C, $10, $3D, $F0
byte_E9BA:	dc.b 2			; ...
		dc.b $F8, $C, 0, $41, $F0
		dc.b 0,	$C, $10, $41, $F0
byte_E9C5:	dc.b 2			; ...
		dc.b $F8, $C, 0, $45, $F0
		dc.b 0,	$C, $10, $45, $F0

; ---------------------------------------------------------------------------
; Object 13 - lava ball	producer (MZ, SLZ)
; ---------------------------------------------------------------------------

Obj13:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj13_Index(pc,d0.w),d1
		jsr	Obj13_Index(pc,d1.w)
		bra.w	Obj14_ChkDel
Obj13_Index:	dc.w Obj13_Main-Obj13_Index ; ...
		dc.w Obj13_MakeLava-Obj13_Index
; ---------------------------------------------------------------------------
;
; Lava ball production rates
;
Obj13_Rates:	dc.b 30, 60, 90, 120, 150, 180

Obj13_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	$28(a0),d0
		lsr.w	#4,d0
		andi.w	#$F,d0
		move.b	Obj13_Rates(pc,d0.w),$1F(a0)
		move.b	$1F(a0),$1E(a0)	; set time delay for lava balls
		andi.b	#$F,$28(a0)

Obj13_MakeLava:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from time delay
		bne.s	locret_E302	; if time still	remains, branch
		move.b	$1F(a0),$1E(a0)	; reset	time delay
		jsr	$880000+ChkObjOnScreen
		bne.s	locret_E302
		jsr	$880000+SingleObjLoad
		bne.s	locret_E302
		move.b	#$14,0(a1)	; load lava ball object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$28(a0),$28(a1)

locret_E302:				; ...
		rts	
; ---------------------------------------------------------------------------
; Object 14 - lava balls (MZ, SLZ)
; ---------------------------------------------------------------------------

Obj14:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj14_Index(pc,d0.w),d1
		jsr	Obj14_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj14_Index:	dc.w Obj14_Main-Obj14_Index ; ...
		dc.w Obj14_Action-Obj14_Index
		dc.w Obj14_Delete-Obj14_Index

Obj14_Speeds:	dc.w $FC00, $FB00, $FA00, $F900, $FE00
		dc.w $200, $FE00, $200,	0

Obj14_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#8,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj14,4(a0)
		move.w	#$345,2(a0)
		cmpi.b	#3,($FFFFFE10).w ; check if level is SLZ
		bne.s	loc_E35A
		move.w	#$480,2(a0)	; SLZ specific code

loc_E35A:				; ...
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$8B,$20(a0)
		move.w	$C(a0),$30(a0)
		tst.b	$29(a0)
		beq.s	Obj14_SetSpeed
		addq.b	#2,$18(a0)

Obj14_SetSpeed:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj14_Speeds(pc,d0.w),$12(a0) ;	load object speed (vertical)
		move.b	#8,$19(a0)
		cmpi.b	#6,$28(a0)	; is object type below $6 ?
		bcs.s	Obj14_PlaySnd	; if yes, branch
		move.b	#$10,$19(a0)
		move.b	#2,$1C(a0)	; use horizontal animation
		move.w	$12(a0),$10(a0)	; set horizontal speed
		move.w	#0,$12(a0)	; delete vertical speed

Obj14_PlaySnd:				; ...
		move.w	#$AE,d0
		jsr	$880000+(PlaySound_Special).l ;	play lava ball sound

Obj14_Action:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj14_TypeIndex(pc,d0.w),d1
		jsr	Obj14_TypeIndex(pc,d1.w)
		jsr	$880000+SpeedToPos
		lea	$880000+(Ani_obj14).l,a1
		jsr	$880000+AnimateSprite

Obj14_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj14_Delete
		rts	
		

Obj14_TypeIndex:dc.w Obj14_Type00-Obj14_TypeIndex, Obj14_Type00-Obj14_TypeIndex	; ...
		dc.w Obj14_Type00-Obj14_TypeIndex, Obj14_Type00-Obj14_TypeIndex
		dc.w Obj14_Type04-Obj14_TypeIndex, Obj14_Type05-Obj14_TypeIndex
		dc.w Obj14_Type06-Obj14_TypeIndex, Obj14_Type07-Obj14_TypeIndex
		dc.w Obj14_Type08-Obj14_TypeIndex
; lavaball types 00-03 fly up and fall back down

Obj14_Type00:				; ...
		addi.w	#$18,$12(a0)	; increase object's downward speed
		move.w	$30(a0),d0
		cmp.w	$C(a0),d0	; has object fallen back to its	original position?
		bcc.s	loc_E41E	; if not, branch
		addq.b	#2,$24(a0)	; goto "Obj14_Delete" routine

loc_E41E:				; ...
		bclr	#1,$22(a0)
		tst.w	$12(a0)
		bpl.s	locret_E430
		bset	#1,$22(a0)

locret_E430:				; ...
		rts	
; lavaball type	04 flies up until it hits the ceiling

Obj14_Type04:				; ...
		bset	#1,$22(a0)
		jsr	$880000+ObjHitCeiling
		tst.w	d1
		bpl.s	locret_E452
		move.b	#8,$28(a0)
		move.b	#1,$1C(a0)
		move.w	#0,$12(a0)	; stop the object when it touches the ceiling

locret_E452:				; ...
		rts	
; lavaball type	05 falls down until it hits the	floor

Obj14_Type05:				; ...
		bclr	#1,$22(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_E474
		move.b	#8,$28(a0)
		move.b	#1,$1C(a0)
		move.w	#0,$12(a0)	; stop the object when it touches the floor

locret_E474:				; ...
		rts	
; lavaball types 06-07 move sideways

Obj14_Type06:				; ...
		bset	#0,$22(a0)
		moveq	#-8,d3
		jsr	$880000+ObjHitWallLeft
		tst.w	d1
		bpl.s	locret_E498
		move.b	#8,$28(a0)
		move.b	#3,$1C(a0)
		move.w	#0,$10(a0)	; stop object when it touches a	wall

locret_E498:				; ...
		rts	

Obj14_Type07:				; ...
		bclr	#0,$22(a0)
		moveq	#8,d3
		jsr	$880000+ObjHitWallRight
		tst.w	d1
		bpl.s	locret_E4BC
		move.b	#8,$28(a0)
		move.b	#3,$1C(a0)
		move.w	#0,$10(a0)	; stop object when it touches a	wall

locret_E4BC:				; ...
		rts	

Obj14_Type08:				; ...
		rts	

Obj14_Delete:				; ...
		jmp	$880000+DeleteObject
Ani_obj14:	dc.w byte_E4CC-Ani_obj14, byte_E4D2-Ani_obj14, byte_E4D6-Ani_obj14 ; ...
		dc.w byte_E4DC-Ani_obj14
byte_E4CC:	dc.b 5,	0, $20,	1, $21,	$FF ; ...
byte_E4D2:	dc.b 5,	2, $FC,	0	; ...
byte_E4D6:	dc.b 5,	3, $43,	4, $44,	$FF ; ...
byte_E4DC:	dc.b 5,	5, $FC,	0	; ...

; ---------------------------------------------------------------------------
; Object 1B - water surface (LZ)
; ---------------------------------------------------------------------------

Obj1B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1B_Index(pc,d0.w),d1
		jmp	Obj1B_Index(pc,d1.w)
Obj1B_Index:	dc.w Obj1B_Main-Obj1B_Index ; ...
		dc.w Obj1B_Action-Obj1B_Index

Obj1B_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj1B,4(a0)
		move.w	#$C300,2(a0)
		move.b	#4,1(a0)
		move.b	#$80,$19(a0)
		move.w	8(a0),$30(a0)

Obj1B_Action:				; ...
		move.w	($FFFFF700).w,d1
		andi.w	#$FFE0,d1
		add.w	$30(a0),d1
		btst	#0,($FFFFFE05).w
		beq.s	loc_11114
		addi.w	#$20,d1

loc_11114:				; ...
		move.w	d1,8(a0)	; match	obj x-position to screen position
		move.w	($FFFFF646).w,d1
		move.w	d1,$C(a0)	; match	obj y-position to water	height
		tst.b	$32(a0)
		bne.s	Obj1B_Animate
		btst	#7,($FFFFF605).w ; is Start button pressed?
		beq.s	loc_1114A	; if not, branch
		addq.b	#3,$1A(a0)	; use different	frames
		move.b	#1,$32(a0)	; stop animation
		bra.s	Obj1B_Display

Obj1B_Animate:				; ...
		tst.w	($FFFFF63A).w	; is the game paused?
		bne.s	Obj1B_Display	; if yes, branch
		move.b	#0,$32(a0)	; resume animation
		subq.b	#3,$1A(a0)	; use normal frames

loc_1114A:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	Obj1B_Display
		move.b	#7,$1E(a0)
		addq.b	#1,$1A(a0)
		cmpi.b	#3,$1A(a0)
		bcs.s	Obj1B_Display
		move.b	#0,$1A(a0)

Obj1B_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - water surface (LZ)
; ---------------------------------------------------------------------------
Map_obj1B:	dc.w byte_11178-Map_obj1B, byte_11188-Map_obj1B	; ...
		dc.w byte_11198-Map_obj1B, byte_111A8-Map_obj1B
		dc.w byte_111C7-Map_obj1B, byte_111E6-Map_obj1B
byte_11178:	dc.b 3			; ...
		dc.b $FD, $D, 0, 0, $A0
		dc.b $FD, $D, 0, 0, $E0
		dc.b $FD, $D, 0, 0, $20
byte_11188:	dc.b 3			; ...
		dc.b $FD, $D, 0, 8, $A0
		dc.b $FD, $D, 0, 8, $E0
		dc.b $FD, $D, 0, 8, $20
byte_11198:	dc.b 3			; ...
		dc.b $FD, $D, 8, 0, $A0
		dc.b $FD, $D, 8, 0, $E0
		dc.b $FD, $D, 8, 0, $20
byte_111A8:	dc.b 6			; ...
		dc.b $FD, $D, 0, 0, $A0
		dc.b $FD, $D, 0, 0, $C0
		dc.b $FD, $D, 0, 0, $E0
		dc.b $FD, $D, 0, 0, 0
		dc.b $FD, $D, 0, 0, $20
		dc.b $FD, $D, 0, 0, $40
byte_111C7:	dc.b 6			; ...
		dc.b $FD, $D, 0, 8, $A0
		dc.b $FD, $D, 0, 8, $C0
		dc.b $FD, $D, 0, 8, $E0
		dc.b $FD, $D, 0, 8, 0
		dc.b $FD, $D, 0, 8, $20
		dc.b $FD, $D, 0, 8, $40
byte_111E6:	dc.b 6			; ...
		dc.b $FD, $D, 8, 0, $A0
		dc.b $FD, $D, 8, 0, $C0
		dc.b $FD, $D, 8, 0, $E0
		dc.b $FD, $D, 8, 0, 0
		dc.b $FD, $D, 8, 0, $20
		dc.b $FD, $D, 8, 0, $40
		dc.b 0
; ---------------------------------------------------------------------------
; Object 1C - scenery (GHZ bridge stump, SLZ lava thrower)
; ---------------------------------------------------------------------------

Obj1C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1C_Index(pc,d0.w),d1
		jmp	Obj1C_Index(pc,d1.w)
Obj1C_Index:	dc.w Obj1C_Main-Obj1C_Index ; ...
		dc.w Obj1C_ChkDel-Obj1C_Index

Obj1C_Main:				; ...
		addq.b	#2,$24(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; copy object type to d0
		mulu.w	#$A,d0		; multiply by $A
		lea	Obj1C_Var(pc,d0.w),a1
		move.l	(a1)+,4(a0)
		move.w	(a1)+,2(a0)
		ori.b	#4,1(a0)
		move.b	(a1)+,$1A(a0)
		move.b	(a1)+,$19(a0)
		move.b	(a1)+,$18(a0)
		move.b	(a1)+,$20(a0)

Obj1C_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj1D_Delete
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Variables for	object $1C are stored in an array
; ---------------------------------------------------------------------------
Obj1C_Var:	dc.l $880000+Map_obj1C		; mappings address
		dc.w $44D8		; VRAM setting
		dc.b 0,	8, 2, 0		; frame, width,	priority, collision response
		dc.l $880000+Map_obj1C
		dc.w $44D8
		dc.b 0,	8, 2, 0
		dc.l $880000+Map_obj1C
		dc.w $44D8
		dc.b 0,	8, 2, 0
		dc.l $880000+Map_obj11
		dc.w $438E
		dc.b 1,	$10, 1,	0
; ---------------------------------------------------------------------------
; Sprite mappings - SLZ	lava thrower
; ---------------------------------------------------------------------------
Map_obj1C:	dc.w byte_8858-Map_obj1C ; ...
byte_8858:	dc.b 1			; ...
		dc.b $F0, 7, 0,	0, $F8
; ---------------------------------------------------------------------------
; Object 1D - switch that activates when Sonic touches it
; (this	is not used anywhere in	the game)
; ---------------------------------------------------------------------------

Obj1D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1D_Index(pc,d0.w),d1
		jmp	Obj1D_Index(pc,d1.w)
Obj1D_Index:	dc.w Obj1D_Main-Obj1D_Index ; ...
		dc.w Obj1D_Action-Obj1D_Index
		dc.w Obj1D_Delete-Obj1D_Index

Obj1D_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj1D,4(a0)
		move.w	#$4000,2(a0)
		move.b	#4,1(a0)
		move.w	$C(a0),$30(a0)	; save position	on y-axis
		move.b	#$10,$19(a0)
		move.b	#5,$18(a0)

Obj1D_Action:				; ...
		move.w	$30(a0),$C(a0)	; restore position on y-axis
		move.w	#$10,d1
		bsr.w	Obj1D_ChkTouch
		beq.s	Obj1D_ChkDel
		addq.w	#2,$C(a0)	; move object 2	pixels
		moveq	#1,d0
		move.w	d0,($FFFFF7E0).w ; set switch 0	as "pressed"

Obj1D_ChkDel:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj1D_Delete
		rts	

Obj1D_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	check if Sonic touches the object
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj1D_ChkTouch:				; ...
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_8918
		add.w	d1,d1
		cmp.w	d1,d0
		bcc.s	loc_8918
		move.w	$C(a1),d2
		move.b	$16(a1),d1
		ext.w	d1
		add.w	d2,d1
		move.w	$C(a0),d0
		subi.w	#$10,d0
		sub.w	d1,d0
		bhi.s	loc_8918
		cmpi.w	#-$10,d0
		bcs.s	loc_8918
		moveq	#-1,d0
		rts	

loc_8918:				; ...
		moveq	#0,d0
		rts	
; End of function Obj1D_ChkTouch

; ---------------------------------------------------------------------------
; Sprite mappings - object 1D
; ---------------------------------------------------------------------------
Map_obj1D:	dc.w byte_891E-Map_obj1D ; ...
byte_891E:	dc.b 4			; ...
		dc.b $E8, 7, 0,	$54, $F0
		dc.b 8,	5, 0, $5C, $F0
		dc.b $E8, 7, 0,	$54, 0
		dc.b 8,	5, 0, $5C, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 21 - SCORE, TIME, RINGS
; ---------------------------------------------------------------------------

Obj21:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj21_Index(pc,d0.w),d1
		jmp	Obj21_Index(pc,d1.w)
Obj21_Index:	dc.w Obj21_Main-Obj21_Index ; ...
		dc.w Obj21_Flash-Obj21_Index

Obj21_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$90,8(a0)
		move.w	#$108,$A(a0)
		move.l	#$880000+Map_obj21,4(a0)
		move.w	#$6CA,2(a0)
		move.b	#0,1(a0)
		move.b	#0,$18(a0)

Obj21_Flash:				; ...
		tst.w	($FFFFFE20).w	; do you have any rings?
		beq.s	Obj21_Flash2	; if not, branch
		clr.b	$1A(a0)		; make all counters yellow
		jmp	$880000+DisplaySprite

Obj21_Flash2:				; ...
		moveq	#0,d0
		btst	#3,($FFFFFE05).w
		bne.s	Obj21_Display
		addq.w	#1,d0		; make ring counter flash red
		cmpi.b	#9,($FFFFFE23).w ; have	9 minutes elapsed?
		bne.s	Obj21_Display	; if not, branch
		addq.w	#2,d0		; make time counter flash red

Obj21_Display:				; ...
		move.b	d0,$1A(a0)
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - SCORE, TIME, RINGS
; ---------------------------------------------------------------------------
Map_obj21:	dc.w byte_1C5BC-Map_obj21, byte_1C5F0-Map_obj21	; ...
		dc.w byte_1C624-Map_obj21, byte_1C658-Map_obj21
byte_1C5BC:	dc.b $A			; ...
		dc.b $80, $D, $80, 0, 0
		dc.b $80, $D, $80, $18,	$20
		dc.b $80, $D, $80, $20,	$40
		dc.b $90, $D, $80, $10,	0
		dc.b $90, $D, $80, $28,	$28
		dc.b $A0, $D, $80, 8, 0
		dc.b $A0, 1, $80, 0, $20
		dc.b $A0, 9, $80, $30, $30
		dc.b $40, 5, $81, $A, 0
		dc.b $40, $D, $81, $E, $10
		dc.b 0
byte_1C5F0:	dc.b $A			; ...
		dc.b $80, $D, $80, 0, 0
		dc.b $80, $D, $80, $18,	$20
		dc.b $80, $D, $80, $20,	$40
		dc.b $90, $D, $80, $10,	0
		dc.b $90, $D, $80, $28,	$28
		dc.b $A0, $D, $A0, 8, 0
		dc.b $A0, 1, $A0, 0, $20
		dc.b $A0, 9, $80, $30, $30
		dc.b $40, 5, $81, $A, 0
		dc.b $40, $D, $81, $E, $10
		dc.b 0
byte_1C624:	dc.b $A			; ...
		dc.b $80, $D, $80, 0, 0
		dc.b $80, $D, $80, $18,	$20
		dc.b $80, $D, $80, $20,	$40
		dc.b $90, $D, $A0, $10,	0
		dc.b $90, $D, $80, $28,	$28
		dc.b $A0, $D, $80, 8, 0
		dc.b $A0, 1, $80, 0, $20
		dc.b $A0, 9, $80, $30, $30
		dc.b $40, 5, $81, $A, 0
		dc.b $40, $D, $81, $E, $10
		dc.b 0
byte_1C658:	dc.b $A			; ...
		dc.b $80, $D, $80, 0, 0
		dc.b $80, $D, $80, $18,	$20
		dc.b $80, $D, $80, $20,	$40
		dc.b $90, $D, $A0, $10,	0
		dc.b $90, $D, $80, $28,	$28
		dc.b $A0, $D, $A0, 8, 0
		dc.b $A0, 1, $A0, 0, $20
		dc.b $A0, 9, $80, $30, $30
		dc.b $40, 5, $81, $A, 0
		dc.b $40, $D, $81, $E, $10
		dc.b 0

; ---------------------------------------------------------------------------
; Object 25 - rings
; ---------------------------------------------------------------------------

Obj25:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj25_Index(pc,d0.w),d1
		jmp	Obj25_Index(pc,d1.w)
Obj25_Index:	dc.w Obj25_Main-Obj25_Index ; ...
		dc.w Obj25_Animate-Obj25_Index
		dc.w Obj25_Collect-Obj25_Index
		dc.w Obj25_Sparkle-Obj25_Index
		dc.w Obj25_Delete-Obj25_Index
; ---------------------------------------------------------------------------
; Distances between rings (format: horizontal, vertical)
; ---------------------------------------------------------------------------
Obj25_PosData:	dc.b $10, 0		; horizontal tight
		dc.b $18, 0		; horizontal normal
		dc.b $20, 0		; horizontal wide
		dc.b 0,	$10		; vertical tight
		dc.b 0,	$18		; vertical normal
		dc.b 0,	$20		; vertical wide
		dc.b $10, $10		; diagonal
		dc.b $18, $18
		dc.b $20, $20
		dc.b $F0, $10
		dc.b $E8, $18
		dc.b $E0, $20
		dc.b $10, 8
		dc.b $18, $10
		dc.b $F0, 8
		dc.b $E8, $10

Obj25_Main:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		lea	2(a2,d0.w),a2
		move.b	(a2),d4
		move.b	$28(a0),d1
		move.b	d1,d0
		andi.w	#7,d1
		cmpi.w	#7,d1
		bne.s	loc_9B80
		moveq	#6,d1

loc_9B80:				; ...
		swap	d1
		move.w	#0,d1
		lsr.b	#4,d0
		add.w	d0,d0
		move.b	Obj25_PosData(pc,d0.w),d5 ; load ring spacing data
		ext.w	d5
		move.b	Obj25_PosData+1(pc,d0.w),d6
		ext.w	d6
		movea.l	a0,a1
		move.w	8(a0),d2
		move.w	$C(a0),d3
		lsr.b	#1,d4
		bcs.s	loc_9C02
		bclr	#7,(a2)
		bra.s	loc_9BBA

Obj25_MakeRings:			; ...
		swap	d1
		lsr.b	#1,d4
		bcs.s	loc_9C02
		bclr	#7,(a2)
		jsr	$880000+SingleObjLoad
		bne.s	loc_9C0E

loc_9BBA:				; ...
		move.b	#$25,0(a1)	; load ring object
		addq.b	#2,$24(a1)
		move.w	d2,8(a1)	; set x-axis position based on d2
		move.w	8(a0),$32(a1)
		move.w	d3,$C(a1)	; set y-axis position based on d3
		move.l	#$880000+Map_obj25,4(a1)
		move.w	#$27B2,2(a1)
		move.b	#4,1(a1)
		move.b	#2,$18(a1)
		move.b	#$47,$20(a1)
		move.b	#8,$19(a1)
		move.b	$23(a0),$23(a1)
		move.b	d1,$34(a1)

loc_9C02:				; ...
		addq.w	#1,d1
		add.w	d5,d2		; add ring spacing value to d2
		add.w	d6,d3		; add ring spacing value to d3
		swap	d1
		dbf	d1,Obj25_MakeRings ; repeat for	number of rings

loc_9C0E:				; ...
		btst	#0,(a2)
		bne.w	Obj36_Delete

Obj25_Animate:				; ...
		move.b	($FFFFFEC3).w,$1A(a0) ;	set frame
		jsr	$880000+DisplaySprite
		move.w	$32(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj25_Delete
		rts	

Obj25_Collect:				; ...
		addq.b	#2,$24(a0)
		move.b	#0,$20(a0)
		move.b	#1,$18(a0)
		bsr.w	CollectRing
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		move.b	$34(a0),d1
		bset	d1,2(a2,d0.w)

Obj25_Sparkle:				; ...
		lea	(Ani_obj25)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj25_Delete:				; ...
		jmp	$880000+DeleteObject

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


CollectRing:				; ...
		addq.w	#1,($FFFFFE20).w ; add 1 to rings
		ori.b	#1,($FFFFFE1D).w ; update the rings counter
		move.w	#$B5,d0		; play ring sound
		cmpi.w	#100,($FFFFFE20).w ; do	you have < 100 rings?
		bcs.s	Obj25_PlaySnd	; if yes, branch
		bset	#1,($FFFFFE1B).w ; update lives	counter
		beq.s	loc_9CA4
		cmpi.w	#200,($FFFFFE20).w ; do	you have < 200 rings?
		bcs.s	Obj25_PlaySnd	; if yes, branch
		bset	#2,($FFFFFE1B).w ; update lives	counter
		bne.s	Obj25_PlaySnd

loc_9CA4:				; ...
		addq.b	#1,($FFFFFE12).w ; add 1 to the	number of lives	you have
		addq.b	#1,($FFFFFE1C).w ; add 1 to the	lives counter
		move.w	#$88,d0		; play extra life music

Obj25_PlaySnd:				; ...
		jmp	$880000+(PlaySound_Special).l
; End of function CollectRing

; ---------------------------------------------------------------------------
; Object 36 - spikes
; ---------------------------------------------------------------------------

Obj36:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj36_Index(pc,d0.w),d1
		jmp	Obj36_Index(pc,d1.w)
Obj36_Index:	dc.w Obj36_Main-Obj36_Index ; ...
		dc.w Obj36_Solid-Obj36_Index

Obj36_Var:	dc.b 0,	$14		; ...
		dc.b 1,	$10		; frame	number,	object width
		dc.b 2,	4
		dc.b 3,	$1C
		dc.b 4,	$40
		dc.b 5,	$10

Obj36_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj36,4(a0)
		move.w	#$51B,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	$28(a0),d0
		andi.b	#$F,$28(a0)
		andi.w	#$F0,d0
		lea	(Obj36_Var)(pc),a1
		lsr.w	#3,d0
		adda.w	d0,a1
		move.b	(a1)+,$1A(a0)
		move.b	(a1)+,$19(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$32(a0)

Obj36_Solid:				; ...
		bsr.w	Obj36_Type0x	; make the object move
		move.w	#4,d2
		cmpi.b	#5,$1A(a0)	; is object type $5x ?
		beq.s	Obj36_SideWays	; if yes, branch
		cmpi.b	#1,$1A(a0)	; is object type $1x ?
		bne.s	Obj36_Upright	; if not, branch
		move.w	#$14,d2

; Spikes types $1x and $5x face	sideways

Obj36_SideWays:				; ...
		move.w	#$1B,d1
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#3,$22(a0)
		bne.s	Obj36_Display
		cmpi.w	#1,d4
		beq.s	Obj36_Hurt
		bra.s	Obj36_Display

; Spikes types $0x, $2x, $3x and $4x face up or	down

Obj36_Upright:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#3,$22(a0)
		bne.s	Obj36_Hurt
		tst.w	d4
		bpl.s	Obj36_Display

Obj36_Hurt:				; ...
		tst.b	($FFFFFE2D).w	; is Sonic invincible?
		bne.s	Obj36_Display	; if yes, branch
		move.l	a0,-(sp)
		movea.l	a0,a2
		lea	($FFFFD000).w,a0
		cmpi.b	#4,$24(a0)
		bcc.s	loc_CF20
		move.l	$C(a0),d3
		move.w	$12(a0),d0
		ext.l	d0
		asl.l	#8,d0
		sub.l	d0,d3
		move.l	d3,$C(a0)
		jsr	$880000+HurtSonic

loc_CF20:				; ...
		movea.l	(sp)+,a0

Obj36_Display:				; ...
		jsr	$880000+DisplaySprite
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj36_Delete
		rts	
		
Obj36_Delete:
		jmp	$880000+DeleteObject

Obj36_Type0x:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj36_TypeIndex(pc,d0.w),d1
		jmp	Obj36_TypeIndex(pc,d1.w)
Obj36_TypeIndex:dc.w Obj36_Type00-Obj36_TypeIndex ; ...
		dc.w Obj36_Type01-Obj36_TypeIndex
		dc.w Obj36_Type02-Obj36_TypeIndex

Obj36_Type00:				; ...
		rts			; don't move the object

Obj36_Type01:				; ...
		bsr.w	Obj36_Wait
		moveq	#0,d0
		move.b	$34(a0),d0
		add.w	$32(a0),d0
		move.w	d0,$C(a0)	; move the object vertically
		rts	

Obj36_Type02:				; ...
		bsr.w	Obj36_Wait
		moveq	#0,d0
		move.b	$34(a0),d0
		add.w	$30(a0),d0
		move.w	d0,8(a0)	; move the object horizontally
		rts	

Obj36_Wait:				; ...
		tst.w	$38(a0)		; is time delay	= zero?
		beq.s	loc_CFA4	; if yes, branch
		subq.w	#1,$38(a0)	; subtract 1 from time delay
		bne.s	locret_CFE6
		tst.b	1(a0)
		bpl.s	locret_CFE6
		move.w	#$B6,d0
		jsr	$880000+(PlaySound_Special).l ;	play "spikes moving" sound
		bra.s	locret_CFE6

loc_CFA4:				; ...
		tst.w	$36(a0)
		beq.s	loc_CFC6
		subi.w	#$800,$34(a0)
		bcc.s	locret_CFE6
		move.w	#0,$34(a0)
		move.w	#0,$36(a0)
		move.w	#60,$38(a0)	; set time delay to 1 second
		bra.s	locret_CFE6

loc_CFC6:				; ...
		addi.w	#$800,$34(a0)
		cmpi.w	#$2000,$34(a0)
		bcs.s	locret_CFE6
		move.w	#$2000,$34(a0)
		move.w	#1,$36(a0)
		move.w	#60,$38(a0)	; set time delay to 1 second

locret_CFE6:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - spikes
; ---------------------------------------------------------------------------
Map_obj36:	dc.w byte_CFF4-Map_obj36 ; ...
		dc.w byte_D004-Map_obj36
		dc.w byte_D014-Map_obj36
		dc.w byte_D01A-Map_obj36
		dc.w byte_D02A-Map_obj36
		dc.w byte_D049-Map_obj36
byte_CFF4:	dc.b 3			; ...
		dc.b $F0, 3, 0,	4, $EC	; 3 spikes
		dc.b $F0, 3, 0,	4, $FC
		dc.b $F0, 3, 0,	4, $C
byte_D004:	dc.b 3			; ...
		dc.b $EC, $C, 0, 0, $F0	; 3 spikes facing sideways
		dc.b $FC, $C, 0, 0, $F0
		dc.b $C, $C, 0,	0, $F0
byte_D014:	dc.b 1			; ...
		dc.b $F0, 3, 0,	4, $FC	; 1 spike
byte_D01A:	dc.b 3			; ...
		dc.b $F0, 3, 0,	4, $E4	; 3 spikes widely spaced
		dc.b $F0, 3, 0,	4, $FC
		dc.b $F0, 3, 0,	4, $14
byte_D02A:	dc.b 6			; ...
		dc.b $F0, 3, 0,	4, $C0	; 6 spikes
		dc.b $F0, 3, 0,	4, $D8
		dc.b $F0, 3, 0,	4, $F0
		dc.b $F0, 3, 0,	4, 8
		dc.b $F0, 3, 0,	4, $20
		dc.b $F0, 3, 0,	4, $38
byte_D049:	dc.b 1			; ...
		dc.b $FC, $C, 0, 0, $F0	; 1 spike facing sideways
		dc.b 0


; ---------------------------------------------------------------------------
; Object 37 - rings flying out of Sonic	when he's hit
; ---------------------------------------------------------------------------

Obj37:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj37_Index(pc,d0.w),d1
		jmp	Obj37_Index(pc,d1.w)
Obj37_Index:	dc.w Obj37_CountRings-Obj37_Index ; ...
		dc.w Obj37_Bounce-Obj37_Index
		dc.w Obj37_Collect-Obj37_Index
		dc.w Obj37_Sparkle-Obj37_Index
		dc.w Obj37_Delete-Obj37_Index

Obj37_CountRings:			; ...
		movea.l	a0,a1
		moveq	#0,d5
		move.w	($FFFFFE20).w,d5 ; check number	of rings you have
		moveq	#32,d0
		cmp.w	d0,d5		; do you have 32 or more?
		bcs.s	loc_9CDE	; if not, branch
		move.w	d0,d5		; if yes, set d5 to 32

loc_9CDE:				; ...
		subq.w	#1,d5
		move.w	#$288,d4
		bra.s	Obj37_MakeRings

Obj37_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.w	Obj37_ResetCounter

Obj37_MakeRings:			; ...
		move.b	#$37,0(a1)	; load bouncing	ring object
		addq.b	#2,$24(a1)
		move.b	#8,$16(a1)
		move.b	#8,$17(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.l	#$880000+Map_obj25,4(a1)
		move.w	#$27B2,2(a1)
		move.b	#4,1(a1)
		move.b	#3,$18(a1)
		move.b	#$47,$20(a1)
		move.b	#8,$19(a1)
		move.b	#-1,($FFFFFEC6).w
		tst.w	d4
		bmi.s	loc_9D62
		move.w	d4,d0
		jsr	$880000+CalcSine
		move.w	d4,d2
		lsr.w	#8,d2
		asl.w	d2,d0
		asl.w	d2,d1
		move.w	d0,d2
		move.w	d1,d3
		addi.b	#$10,d4
		bcc.s	loc_9D62
		subi.w	#$80,d4
		bcc.s	loc_9D62
		move.w	#$288,d4

loc_9D62:				; ...
		move.w	d2,$10(a1)
		move.w	d3,$12(a1)
		neg.w	d2
		neg.w	d4
		dbf	d5,Obj37_Loop	; repeat for number of rings (max 31)

Obj37_ResetCounter:			; ...
		move.w	#0,($FFFFFE20).w ; reset number	of rings to zero
		move.b	#$80,($FFFFFE1D).w ; update ring counter
		move.b	#0,($FFFFFE1B).w
		move.w	#$C6,d0
		jsr	$880000+(PlaySound_Special).l ;	play ring loss sound

Obj37_Bounce:				; ...
		move.b	($FFFFFEC7).w,$1A(a0)
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		bmi.s	Obj37_ChkDel
		move.b	($FFFFFE0F).w,d0
		add.b	d7,d0
		andi.b	#3,d0
		bne.s	Obj37_ChkDel
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	Obj37_ChkDel
		add.w	d1,$C(a0)
		move.w	$12(a0),d0
		asr.w	#2,d0
		sub.w	d0,$12(a0)
		neg.w	$12(a0)

Obj37_ChkDel:				; ...
		tst.b	($FFFFFEC6).w
		beq.s	Obj37_Delete
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0	; has object moved below level boundary?
		bcs.s	Obj37_Delete	; if yes, branch
		jmp	$880000+DisplaySprite

Obj37_Collect:				; ...
		addq.b	#2,$24(a0)
		move.b	#0,$20(a0)
		move.b	#1,$18(a0)
		bsr.w	CollectRing

Obj37_Sparkle:				; ...
		lea	(Ani_obj25)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj37_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 4B - giant ring for entry to special stage
; ---------------------------------------------------------------------------

Obj4B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj4B_Index(pc,d0.w),d1
		jmp	Obj4B_Index(pc,d1.w)
Obj4B_Index:	dc.w Obj4B_Main-Obj4B_Index ; ...
		dc.w Obj4B_Animate-Obj4B_Index
		dc.w Obj4B_Collect-Obj4B_Index
		dc.w Obj4B_Delete-Obj4B_Index

Obj4B_Main:				; ...
		move.l	#$880000+Map_obj4B,4(a0)
		move.w	#$2400,2(a0)
		ori.b	#4,1(a0)
		move.b	#$40,$19(a0)
		tst.b	1(a0)
		bpl.s	Obj4B_Animate
		cmpi.b	#6,($FFFFFE57).w ; do you have 6 emeralds?
		beq.w	Obj4B_Delete	; if yes, branch
		cmpi.w	#50,($FFFFFE20).w ; do you have	at least 50 rings?
		bcc.s	Obj4B_Okay	; if yes, branch
		rts	

Obj4B_Okay:				; ...
		addq.b	#2,$24(a0)
		move.b	#2,$18(a0)
		move.b	#$52,$20(a0)
		move.w	#$C40,($FFFFF7BE).w

Obj4B_Animate:				; ...
		move.b	($FFFFFEC3).w,$1A(a0)
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj7C_Delete
		jmp	$880000+DisplaySprite

Obj4B_Collect:				; ...
		subq.b	#2,$24(a0)
		move.b	#0,$20(a0)
		jsr	$880000+SingleObjLoad
		bne.w	Obj4B_PlaySnd
		move.b	#$7C,0(a1)	; load giant ring flash	object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.l	a0,$3C(a1)
		move.w	($FFFFD008).w,d0
		cmp.w	8(a0),d0	; has Sonic come from the left?
		bcs.s	Obj4B_PlaySnd	; if yes, branch
		bset	#0,1(a1)	; reverse flash	object

Obj4B_PlaySnd:				; ...
		move.w	#$C3,d0
		jsr	$880000+(PlaySound_Special).l ;	play giant ring	sound
		bra.s	Obj4B_Animate

Obj4B_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 7C - flash effect when	you collect the	giant ring
; ---------------------------------------------------------------------------

Obj7C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7C_Index(pc,d0.w),d1
		jmp	Obj7C_Index(pc,d1.w)
Obj7C_Index:	dc.w Obj7C_Main-Obj7C_Index ; ...
		dc.w Obj7C_ChkDel-Obj7C_Index
		dc.w Obj7C_Delete-Obj7C_Index

Obj7C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj7C,4(a0)
		move.w	#$2462,2(a0)
		ori.b	#4,1(a0)
		move.b	#0,$18(a0)
		move.b	#$20,$19(a0)
		move.b	#$FF,$1A(a0)

Obj7C_ChkDel:				; ...
		bsr.s	Obj7C_Collect
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj7C_Delete
		jmp	$880000+DisplaySprite

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj7C_Collect:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	locret_9F76
		move.b	#1,$1E(a0)
		addq.b	#1,$1A(a0)
		cmpi.b	#8,$1A(a0)	; has animation	finished?
		bcc.s	Obj7C_End	; if yes, branch
		cmpi.b	#3,$1A(a0)	; is 3rd frame displayed?
		bne.s	locret_9F76	; if not, branch
		movea.l	$3C(a0),a1
		move.b	#6,$24(a1)	; delete giant ring object (Obj4B)
		move.b	#$1C,($FFFFD01C).w ; make Sonic	invisible
		move.b	#1,($FFFFF7CD).w ; stop	Sonic getting bonuses
		clr.b	($FFFFFE2D).w	; remove invincibility
		clr.b	($FFFFFE2C).w	; remove shield

locret_9F76:				; ...
		rts	

Obj7C_End:				; ...
		addq.b	#2,$24(a0)
		move.w	#0,($FFFFD000).w ; remove Sonic	object
		addq.l	#4,sp
		rts	
; End of function Obj7C_Collect


Obj7C_Delete:				; ...
		jmp	$880000+DeleteObject
Ani_obj25:	dc.w byte_9F8C-Ani_obj25 ; ...
byte_9F8C:	dc.b 5,	4, 5, 6, 7, $FC	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - rings
; ---------------------------------------------------------------------------
Map_obj25:	dc.w byte_9FA2-Map_obj25, byte_9FA8-Map_obj25 ;	...
		dc.w byte_9FAE-Map_obj25, byte_9FB4-Map_obj25
		dc.w byte_9FBA-Map_obj25, byte_9FC0-Map_obj25
		dc.w byte_9FC6-Map_obj25, byte_9FCC-Map_obj25
byte_9FA2:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_9FA8:	dc.b 1			; ...
		dc.b $F8, 5, 0,	4, $F8
byte_9FAE:	dc.b 1			; ...
		dc.b $F8, 1, 0,	8, $FC
byte_9FB4:	dc.b 1			; ...
		dc.b $F8, 5, 8,	4, $F8
byte_9FBA:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$A, $F8
byte_9FC0:	dc.b 1			; ...
		dc.b $F8, 5, $18, $A, $F8
byte_9FC6:	dc.b 1			; ...
		dc.b $F8, 5, 8,	$A, $F8
byte_9FCC:	dc.b 1			; ...
		dc.b $F8, 5, $10, $A, $F8
; ---------------------------------------------------------------------------
; Sprite mappings - giant ring
; ---------------------------------------------------------------------------
Map_obj4B:	dc.w byte_9FDA-Map_obj4B, byte_A00D-Map_obj4B ;	...
		dc.w byte_A036-Map_obj4B, byte_A04B-Map_obj4B
byte_9FDA:	dc.b $A			; ...
		dc.b $E0, 8, 0,	0, $E8
		dc.b $E0, 8, 0,	3, 0
		dc.b $E8, $C, 0, 6, $E0
		dc.b $E8, $C, 0, $A, 0
		dc.b $F0, 7, 0,	$E, $E0
		dc.b $F0, 7, 0,	$16, $10
		dc.b $10, $C, 0, $1E, $E0
		dc.b $10, $C, 0, $22, 0
		dc.b $18, 8, 0,	$26, $E8
		dc.b $18, 8, 0,	$29, 0
byte_A00D:	dc.b 8			; ...
		dc.b $E0, $C, 0, $2C, $F0
		dc.b $E8, 8, 0,	$30, $E8
		dc.b $E8, 9, 0,	$33, 0
		dc.b $F0, 7, 0,	$39, $E8
		dc.b $F8, 5, 0,	$41, 8
		dc.b 8,	9, 0, $45, 0
		dc.b $10, 8, 0,	$4B, $E8
		dc.b $18, $C, 0, $4E, $F0
byte_A036:	dc.b 4			; ...
		dc.b $E0, 7, 0,	$52, $F4
		dc.b $E0, 3, 8,	$52, 4
		dc.b 0,	7, 0, $5A, $F4
		dc.b 0,	3, 8, $5A, 4
byte_A04B:	dc.b 8			; ...
		dc.b $E0, $C, 8, $2C, $F0
		dc.b $E8, 8, 8,	$30, 0
		dc.b $E8, 9, 8,	$33, $E8
		dc.b $F0, 7, 8,	$39, 8
		dc.b $F8, 5, 8,	$41, $E8
		dc.b 8,	9, 8, $45, $E8
		dc.b $10, 8, 8,	$4B, 0
		dc.b $18, $C, 8, $4E, $F0
; ---------------------------------------------------------------------------
; Sprite mappings - flash effect when you collect the giant ring
; ---------------------------------------------------------------------------
Map_obj7C:	dc.w byte_A084-Map_obj7C, byte_A08F-Map_obj7C ;	...
		dc.w byte_A0A4-Map_obj7C, byte_A0B9-Map_obj7C
		dc.w byte_A0CE-Map_obj7C, byte_A0E3-Map_obj7C
		dc.w byte_A0F8-Map_obj7C, byte_A103-Map_obj7C
byte_A084:	dc.b 2			; ...
		dc.b $E0, $F, 0, 0, 0
		dc.b 0,	$F, $10, 0, 0
byte_A08F:	dc.b 4			; ...
		dc.b $E0, $F, 0, $10, $F0
		dc.b $E0, 7, 0,	$20, $10
		dc.b 0,	$F, $10, $10, $F0
		dc.b 0,	7, $10,	$20, $10
byte_A0A4:	dc.b 4			; ...
		dc.b $E0, $F, 0, $28, $E8
		dc.b $E0, $B, 0, $38, 8
		dc.b 0,	$F, $10, $28, $E8
		dc.b 0,	$B, $10, $38, 8
byte_A0B9:	dc.b 4			; ...
		dc.b $E0, $F, 8, $34, $E0
		dc.b $E0, $F, 0, $34, 0
		dc.b 0,	$F, $18, $34, $E0
		dc.b 0,	$F, $10, $34, 0
byte_A0CE:	dc.b 4			; ...
		dc.b $E0, $B, 8, $38, $E0
		dc.b $E0, $F, 8, $28, $F8
		dc.b 0,	$B, $18, $38, $E0
		dc.b 0,	$F, $18, $28, $F8
byte_A0E3:	dc.b 4			; ...
		dc.b $E0, 7, 8,	$20, $E0
		dc.b $E0, $F, 8, $10, $F0
		dc.b 0,	7, $18,	$20, $E0
		dc.b 0,	$F, $18, $10, $F0
byte_A0F8:	dc.b 2			; ...
		dc.b $E0, $F, 8, 0, $E0
		dc.b 0,	$F, $18, 0, $E0
byte_A103:	dc.b 4			; ...
		dc.b $E0, $F, 0, $44, $E0
		dc.b $E0, $F, 8, $44, 0
		dc.b 0,	$F, $10, $44, $E0
		dc.b 0,	$F, $18, $44, 0
; ---------------------------------------------------------------------------
; Object 26 - monitors
; ---------------------------------------------------------------------------

Obj26:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj26_Index(pc,d0.w),d1
		jmp	Obj26_Index(pc,d1.w)
Obj26_Index:	dc.w Obj26_Main-Obj26_Index ; ...
		dc.w Obj26_Solid-Obj26_Index
		dc.w Obj26_BreakOpen-Obj26_Index
		dc.w Obj26_Animate-Obj26_Index
		dc.w Obj26_Display-Obj26_Index

Obj26_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$E,$16(a0)
		move.b	#$E,$17(a0)
		move.l	#$880000+Map_obj26,4(a0)
		move.w	#$680,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$F,$19(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bclr	#7,2(a2,d0.w)
		btst	#0,2(a2,d0.w)	; has monitor been broken?
		beq.s	Obj26_NotBroken	; if not, branch
		move.b	#8,$24(a0)	; run "Obj26_Display" routine
		move.b	#$B,$1A(a0)	; use broken monitor frame
		rts	

Obj26_NotBroken:			; ...
		move.b	#$46,$20(a0)
		move.b	$28(a0),$1C(a0)

Obj26_Solid:				; ...
		move.b	$25(a0),d0	; is monitor set to fall?
		beq.s	loc_A1EC	; if not, branch
		subq.b	#2,d0
		bne.s	Obj26_Fall
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		bsr.w	ExitPlatform
		btst	#3,$22(a1)
		bne.w	loc_A1BC
		clr.b	$25(a0)
		bra.w	Obj26_Animate

loc_A1BC:				; ...
		move.w	#$10,d3
		move.w	8(a0),d2
		bsr.w	MvSonicOnPtfm
		bra.w	Obj26_Animate

Obj26_Fall:				; ...
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.w	Obj26_Animate
		add.w	d1,$C(a0)
		clr.w	$12(a0)
		clr.b	$25(a0)
		bra.w	Obj26_Animate

loc_A1EC:				; ...
		move.w	#$1A,d1
		move.w	#$F,d2
		bsr.w	Obj26_SolidSides
		beq.w	loc_A25C
		tst.w	$12(a1)
		bmi.s	loc_A20A
		cmpi.b	#2,$1C(a1)	; is Sonic rolling?
		beq.s	loc_A25C	; if yes, branch

loc_A20A:				; ...
		tst.w	d1
		bpl.s	loc_A220
		sub.w	d3,$C(a1)
		bsr.w	loc_74AE
		move.b	#2,$25(a0)
		bra.w	Obj26_Animate

loc_A220:				; ...
		tst.w	d0
		beq.w	loc_A246
		bmi.s	loc_A230
		tst.w	$10(a1)
		bmi.s	loc_A246
		bra.s	loc_A236

loc_A230:				; ...
		tst.w	$10(a1)
		bpl.s	loc_A246

loc_A236:				; ...
		sub.w	d0,8(a1)
		move.w	#0,$14(a1)
		move.w	#0,$10(a1)

loc_A246:				; ...
		btst	#1,$22(a1)
		bne.s	loc_A26A
		bset	#5,$22(a1)
		bset	#5,$22(a0)
		bra.s	Obj26_Animate

loc_A25C:				; ...
		btst	#5,$22(a0)
		beq.s	Obj26_Animate
		move.w	#1,$1C(a1)

loc_A26A:				; ...
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)

Obj26_Animate:				; ...
		lea	$880000+(Ani_obj26).l,a1
		jsr	$880000+AnimateSprite

Obj26_Display:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj2E_Delete2
		rts	

Obj26_BreakOpen:			; ...
		addq.b	#2,$24(a0)
		move.b	#0,$20(a0)
		jsr	$880000+SingleObjLoad
		bne.s	Obj26_Explode
		move.b	#$2E,0(a1)	; load monitor contents	object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$1C(a0),$1C(a1)

Obj26_Explode:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	Obj26_SetBroken
		move.b	#$27,0(a1)	; load explosion object
		addq.b	#2,$24(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Obj26_SetBroken:			; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bset	#0,2(a2,d0.w)
		move.b	#9,$1C(a0)	; set monitor type to broken
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Object 2E - contents of monitors
; ---------------------------------------------------------------------------

Obj2E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2E_Index(pc,d0.w),d1
		jsr	Obj2E_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj2E_Index:	dc.w Obj2E_Main-Obj2E_Index ; ...
		dc.w Obj2E_Move-Obj2E_Index
		dc.w Obj2E_Delete-Obj2E_Index

Obj2E_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$680,2(a0)
		move.b	#$24,1(a0)
		move.b	#3,$18(a0)
		move.b	#8,$19(a0)
		move.w	#-$300,$12(a0)
		moveq	#0,d0
		move.b	$1C(a0),d0
		addq.b	#2,d0
		move.b	d0,$1A(a0)
		movea.l	#$880000+Map_obj26,a1
		add.b	d0,d0
		adda.w	(a1,d0.w),a1
		addq.w	#1,a1
		move.l	a1,4(a0)

Obj2E_Move:				; ...
		tst.w	$12(a0)		; is object moving?
		bpl.w	Obj2E_ChkEggman	; if not, branch
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; reduce object	speed
		rts	

Obj2E_ChkEggman:			; ...
		addq.b	#2,$24(a0)
		move.w	#29,$1E(a0)
		move.b	$1C(a0),d0
		cmpi.b	#1,d0		; does monitor contain Eggman?
		bne.s	Obj2E_ChkSonic
		rts			; Eggman monitor does nothing

Obj2E_ChkSonic:				; ...
		cmpi.b	#2,d0		; does monitor contain Sonic?
		bne.s	Obj2E_ChkShoes

ExtraLife:				; ...
		addq.b	#1,($FFFFFE12).w ; add 1 to the	number of lives	you have
		addq.b	#1,($FFFFFE1C).w ; add 1 to the	lives counter
		move.w	#$88,d0
		jmp	$880000+(PlaySound).l	; play extra life music

Obj2E_ChkShoes:				; ...
		cmpi.b	#3,d0		; does monitor contain speed shoes?
		bne.s	Obj2E_ChkShield
		move.b	#1,($FFFFFE2E).w ; speed up the	BG music
		move.w	#$4B0,($FFFFD034).w ; time limit for the power-up
		move.w	#$C00,($FFFFF760).w ; change Sonic's top speed
		move.w	#$18,($FFFFF762).w
		move.w	#$80,($FFFFF764).w
		move.w	#$E2,d0
		jmp	$880000+(PlaySound).l	; Speed	up the music

Obj2E_ChkShield:			; ...
		cmpi.b	#4,d0		; does monitor contain a shield?
		bne.s	Obj2E_ChkInvinc
		move.b	#1,($FFFFFE2C).w ; give	Sonic a	shield
		move.b	#$38,($FFFFD180).w ; load shield object	($38)
		move.w	#$AF,d0
		jmp	$880000+(PlaySound).l	; play shield sound

Obj2E_ChkInvinc:			; ...
		cmpi.b	#5,d0		; does monitor contain invincibility?
		bne.s	Obj2E_ChkRings
		move.b	#1,($FFFFFE2D).w ; make	Sonic invincible
		move.w	#$4B0,($FFFFD032).w ; time limit for the power-up
		move.b	#$38,($FFFFD200).w ; load stars	object ($3801)
		move.b	#1,($FFFFD21C).w
		move.b	#$38,($FFFFD240).w ; load stars	object ($3802)
		move.b	#2,($FFFFD25C).w
		move.b	#$38,($FFFFD280).w ; load stars	object ($3803)
		move.b	#3,($FFFFD29C).w
		move.b	#$38,($FFFFD2C0).w ; load stars	object ($3804)
		move.b	#4,($FFFFD2DC).w
		tst.b	($FFFFF7AA).w	; is boss mode on?
		bne.s	Obj2E_NoMusic	; if yes, branch
		move.w	#$87,d0
		jmp	$880000+(PlaySound).l	; play invincibility music

Obj2E_NoMusic:				; ...
		rts	

Obj2E_ChkRings:				; ...
		cmpi.b	#6,d0		; does monitor contain 10 rings?
		bne.s	Obj2E_ChkS
		addi.w	#$A,($FFFFFE20).w ; add	10 rings to the	number of rings	you have
		ori.b	#1,($FFFFFE1D).w ; update the ring counter
		cmpi.w	#100,($FFFFFE20).w ; check if you have 100 rings
		bcs.s	Obj2E_RingSound
		bset	#1,($FFFFFE1B).w
		beq.w	ExtraLife
		cmpi.w	#200,($FFFFFE20).w ; check if you have 200 rings
		bcs.s	Obj2E_RingSound
		bset	#2,($FFFFFE1B).w
		beq.w	ExtraLife

Obj2E_RingSound:			; ...
		move.w	#$B5,d0
		jmp	$880000+(PlaySound).l	; play ring sound

Obj2E_ChkS:				; ...
		cmpi.b	#7,d0		; does monitor contain 'S'
		bne.s	Obj2E_ChkEnd
		nop	

Obj2E_ChkEnd:				; ...
		rts			; 'S' and goggles monitors do nothing

Obj2E_Delete:				; ...
		subq.w	#1,$1E(a0)
		bmi.w	Obj2E_Delete2
		rts	
		
Obj2E_Delete2:
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Subroutine to	make the sides of a monitor solid
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj26_SolidSides:			; ...
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_A4E6
		move.w	d1,d3
		add.w	d3,d3
		cmp.w	d3,d0
		bhi.s	loc_A4E6
		move.b	$16(a1),d3
		ext.w	d3
		add.w	d3,d2
		move.w	$C(a1),d3
		sub.w	$C(a0),d3
		add.w	d2,d3
		bmi.s	loc_A4E6
		add.w	d2,d2
		cmp.w	d2,d3
		bcc.s	loc_A4E6
		tst.b	($FFFFF7C8).w
		bmi.s	loc_A4E6
		cmpi.b	#6,($FFFFD024).w
		bcc.s	loc_A4E6
		tst.w	($FFFFFE08).w
		bne.s	loc_A4E6
		cmp.w	d0,d1
		bcc.s	loc_A4DC
		add.w	d1,d1
		sub.w	d1,d0

loc_A4DC:				; ...
		cmpi.w	#$10,d3
		bcs.s	loc_A4EA

loc_A4E2:				; ...
		moveq	#1,d1
		rts	

loc_A4E6:				; ...
		moveq	#0,d1
		rts	

loc_A4EA:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		addq.w	#4,d1
		move.w	d1,d2
		add.w	d2,d2
		add.w	8(a1),d1
		sub.w	8(a0),d1
		bmi.s	loc_A4E2
		cmp.w	d2,d1
		bcc.s	loc_A4E2
		moveq	#-1,d1
		rts	
; End of function Obj26_SolidSides

Ani_obj26:	dc.w byte_A51C-Ani_obj26, byte_A522-Ani_obj26, byte_A52E-Ani_obj26 ; ...
		dc.w byte_A53A-Ani_obj26, byte_A546-Ani_obj26, byte_A552-Ani_obj26
		dc.w byte_A55E-Ani_obj26, byte_A56A-Ani_obj26, byte_A576-Ani_obj26
		dc.w byte_A582-Ani_obj26
byte_A51C:	dc.b 1,	0, 1, 2, $FF, 0	; ...
byte_A522:	dc.b 1,	0, 3, 3, 1, 3, 3, 2, 3,	3, $FF,	0 ; ...
byte_A52E:	dc.b 1,	0, 4, 4, 1, 4, 4, 2, 4,	4, $FF,	0 ; ...
byte_A53A:	dc.b 1,	0, 5, 5, 1, 5, 5, 2, 5,	5, $FF,	0 ; ...
byte_A546:	dc.b 1,	0, 6, 6, 1, 6, 6, 2, 6,	6, $FF,	0 ; ...
byte_A552:	dc.b 1,	0, 7, 7, 1, 7, 7, 2, 7,	7, $FF,	0 ; ...
byte_A55E:	dc.b 1,	0, 8, 8, 1, 8, 8, 2, 8,	8, $FF,	0 ; ...
byte_A56A:	dc.b 1,	0, 9, 9, 1, 9, 9, 2, 9,	9, $FF,	0 ; ...
byte_A576:	dc.b 1,	0, $A, $A, 1, $A, $A, 2, $A, $A, $FF, 0	; ...
byte_A582:	dc.b 2,	0, 1, 2, $B, $FE, 1, 0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - monitors
; ---------------------------------------------------------------------------
Map_obj26:	dc.w byte_A5A2-Map_obj26, byte_A5A8-Map_obj26 ;	...
		dc.w byte_A5B3-Map_obj26, byte_A5BE-Map_obj26
		dc.w byte_A5C9-Map_obj26, byte_A5D4-Map_obj26
		dc.w byte_A5DF-Map_obj26, byte_A5EA-Map_obj26
		dc.w byte_A5F5-Map_obj26, byte_A600-Map_obj26
		dc.w byte_A60B-Map_obj26, byte_A616-Map_obj26
byte_A5A2:	dc.b 1			; ...
					; static monitor
		dc.b $EF, $F, 0, 0, $F0
byte_A5A8:	dc.b 2			; ...
					; static monitor
		dc.b $F5, 5, 0,	$10, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5B3:	dc.b 2			; ...
					; static monitor
		dc.b $F5, 5, 0,	$14, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5BE:	dc.b 2			; ...
					; Eggman monitor
		dc.b $F5, 5, 0,	$18, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5C9:	dc.b 2			; ...
					; Sonic	monitor
		dc.b $F5, 5, 0,	$1C, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5D4:	dc.b 2			; ...
					; speed	shoes monitor
		dc.b $F5, 5, 0,	$24, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5DF:	dc.b 2			; ...
					; shield monitor
		dc.b $F5, 5, 0,	$28, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5EA:	dc.b 2			; ...
					; invincibility	monitor
		dc.b $F5, 5, 0,	$2C, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A5F5:	dc.b 2			; ...
					; 10 rings monitor
		dc.b $F5, 5, 0,	$30, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A600:	dc.b 2			; ...
					; 'S' monitor
byte_A601:	dc.b $F5, 5, 0,	$34, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A60B:	dc.b 2			; ...
					; goggles monitor
		dc.b $F5, 5, 0,	$20, $F8
		dc.b $EF, $F, 0, 0, $F0
byte_A616:	dc.b 1			; ...
					; broken monitor
		dc.b $FF, $D, 0, $38, $F0

		
; ---------------------------------------------------------------------------
; Object 1E - Ball Hog enemy (SBZ)
; ---------------------------------------------------------------------------

Obj1E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1E_Index(pc,d0.w),d1
		jmp	Obj1E_Index(pc,d1.w)
Obj1E_Index:	dc.w Obj1E_Main-Obj1E_Index ; ...
		dc.w Obj1E_Action-Obj1E_Index

Obj1E_Main:				; ...
		move.b	#$13,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj1E,4(a0)
		move.w	#$2302,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#5,$20(a0)
		move.b	#$C,$19(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_8BAC
		add.w	d1,$C(a0)
		move.w	#0,$12(a0)
		addq.b	#2,$24(a0)

locret_8BAC:				; ...
		rts	

Obj1E_Action:				; ...
		lea	$880000+(Ani_obj1E).l,a1
		jsr	$880000+AnimateSprite
		cmpi.b	#1,$1A(a0)	; is final frame (01) displayed?
		bne.s	Obj1E_SetBall	; if not, branch
		tst.b	$32(a0)		; is it	set to launch cannonball?
		beq.s	Obj1E_MakeBall	; if yes, branch
		bra.s	Obj1E_MarkAsGone

Obj1E_SetBall:				; ...
		clr.b	$32(a0)		; set to launch	cannonball

Obj1E_MarkAsGone:			; ...
		bra.w	MarkObjGone

Obj1E_MakeBall:				; ...
		move.b	#1,$32(a0)
		jsr	$880000+SingleObjLoad
		bne.s	loc_8C1A
		move.b	#$20,0(a1)	; load cannonball object ($20)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	#-$100,$10(a1)	; cannonball bounces to	the left
		move.w	#0,$12(a1)
		moveq	#-4,d0
		btst	#0,$22(a0)	; is Ball Hog facing right?
		beq.s	loc_8C0A	; if not, branch
		neg.w	d0
		neg.w	$10(a1)		; cannonball bounces to	the right

loc_8C0A:				; ...
		add.w	d0,8(a1)
		addi.w	#$C,$C(a1)
		move.b	$28(a0),$28(a1)	; copy object type from	Ball Hog

loc_8C1A:				; ...
		bra.s	Obj1E_MarkAsGone
; ---------------------------------------------------------------------------
; Object 20 - cannonball that Ball Hog throws (SBZ)
; ---------------------------------------------------------------------------

Obj20:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj20_Index(pc,d0.w),d1
		jmp	Obj20_Index(pc,d1.w)
Obj20_Index:	dc.w Obj20_Main-Obj20_Index ; ...
		dc.w Obj20_Bounce-Obj20_Index

Obj20_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#7,$16(a0)
		move.l	#$880000+Map_obj1E,4(a0)
		move.w	#$2302,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$87,$20(a0)
		move.b	#8,$19(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; move object type to d0
		mulu.w	#60,d0		; multiply by 60 frames	(1 second)
		move.w	d0,$30(a0)	; set explosion	time
		move.b	#4,$1A(a0)

Obj20_Bounce:				; ...
		jsr	$880000+ObjectFall
		tst.w	$12(a0)
		bmi.s	Obj20_ChkExplode
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	Obj20_ChkExplode
		add.w	d1,$C(a0)
		move.w	#-$300,$12(a0)
		tst.b	d3
		beq.s	Obj20_ChkExplode
		bmi.s	loc_8CA4
		tst.w	$10(a0)
		bpl.s	Obj20_ChkExplode
		neg.w	$10(a0)
		bra.s	Obj20_ChkExplode

loc_8CA4:				; ...
		tst.w	$10(a0)
		bmi.s	Obj20_ChkExplode
		neg.w	$10(a0)

Obj20_ChkExplode:			; ...
		subq.w	#1,$30(a0)	; subtract 1 from explosion time
		bpl.s	Obj20_Animate	; if time is > 0, branch
		move.b	#$24,0(a0)
		move.b	#$3F,0(a0)	; change object	to an explosion	($3F)
		move.b	#0,$24(a0)	; reset	routine	counter
		bra.w	Obj3F		; jump to explosion code

Obj20_Animate:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	Obj20_Display
		move.b	#5,$1E(a0)	; set frame duration to	5 frames
		bchg	#0,$1A(a0)	; change frame

Obj20_Display:				; ...
		jsr	$880000+DisplaySprite
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0	; has object fallen off	the level?
		bcs.w	Obj27_Delete	; if yes, branch
		rts	
; ---------------------------------------------------------------------------
; Object 24 - explosion	from a destroyed monitor
; ---------------------------------------------------------------------------

Obj24:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj24_Index(pc,d0.w),d1
		jmp	Obj24_Index(pc,d1.w)
Obj24_Index:	dc.w Obj24_Main-Obj24_Index ; ...
		dc.w Obj24_Animate-Obj24_Index

Obj24_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj24,4(a0)
		move.w	#$41C,2(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#0,$20(a0)
		move.b	#$C,$19(a0)
		move.b	#9,$1E(a0)
		move.b	#0,$1A(a0)
		move.w	#$A5,d0
		jsr	$880000+(PlaySound_Special).l ;	play explosion sound

Obj24_Animate:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	Obj24_Display
		move.b	#9,$1E(a0)	; set frame duration to	9 frames
		addq.b	#1,$1A(a0)	; next frame
		cmpi.b	#4,$1A(a0)	; is the final frame (04) displayed?
		beq.w	Obj27_Delete	; if yes, branch

Obj24_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Object 27 - explosion	from a destroyed enemy
; ---------------------------------------------------------------------------

Obj27:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj27_Index(pc,d0.w),d1
		jmp	Obj27_Index(pc,d1.w)
Obj27_Index:	dc.w Obj27_LoadAnimal-Obj27_Index ; ...
		dc.w Obj27_Main-Obj27_Index
		dc.w Obj27_Animate-Obj27_Index

Obj27_LoadAnimal:			; ...
		addq.b	#2,$24(a0)
		jsr	$880000+SingleObjLoad
		bne.s	Obj27_Main
		move.b	#$28,0(a1)	; load animal object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	$3E(a0),$3E(a1)

Obj27_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj27,4(a0)
		move.w	#$5A0,2(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#0,$20(a0)
		move.b	#$C,$19(a0)
		move.b	#7,$1E(a0)	; set frame duration to	7 frames
		move.b	#0,$1A(a0)
		move.w	#$C1,d0
		jsr	$880000+(PlaySound_Special).l ;	play breaking enemy sound

Obj27_Animate:				; ...
		subq.b	#1,$1E(a0)	; subtract 1 from frame	duration
		bpl.s	Obj27_Display
		move.b	#7,$1E(a0)	; set frame duration to	7 frames
		addq.b	#1,$1A(a0)	; next frame
		cmpi.b	#5,$1A(a0)	; is the final frame (05) displayed?
		beq.w	Obj27_Delete	; if yes, branch

Obj27_Display:				; ...
		jmp	$880000+DisplaySprite
		
Obj27_Delete:
		jmp	$880000+DeleteObject
		
; ---------------------------------------------------------------------------
; Object 3E - prison capsule
; ---------------------------------------------------------------------------

Obj3E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3E_Index(pc,d0.w),d1
		jsr	Obj3E_Index(pc,d1.w)
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj3E_Delete
		jmp	$880000+DisplaySprite

Obj3E_Delete:				; ...
		jmp	$880000+DeleteObject
Obj3E_Index:	dc.w Obj3E_Main-Obj3E_Index ; ...
		dc.w Obj3E_BodyMain-Obj3E_Index
		dc.w Obj3E_Switched-Obj3E_Index
		dc.w Obj3E_Explosion-Obj3E_Index
		dc.w Obj3E_Explosion-Obj3E_Index
		dc.w Obj3E_Explosion-Obj3E_Index
		dc.w Obj3E_Animals-Obj3E_Index
		dc.w Obj3E_EndAct-Obj3E_Index

Obj3E_Var:	dc.b 2,	$20, 4,	0	; routine, width, priority, frame
		dc.b 4,	$C, 5, 1
		dc.b 6,	$10, 4,	3
		dc.b 8,	$10, 3,	5

Obj3E_Main:				; ...
		move.l	#$880000+Map_obj3E,4(a0)
		move.w	#$49D,2(a0)
		move.b	#4,1(a0)
		move.w	$C(a0),$30(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsl.w	#2,d0
		lea	Obj3E_Var(pc,d0.w),a1
		move.b	(a1)+,$24(a0)
		move.b	(a1)+,$19(a0)
		move.b	(a1)+,$18(a0)
		move.b	(a1)+,$1A(a0)
		cmpi.w	#8,d0		; is object type number	02?
		bne.s	Obj3E_Not02	; if not, branch
		move.b	#6,$20(a0)
		move.b	#8,$21(a0)

Obj3E_Not02:				; ...
		rts	

Obj3E_BodyMain:				; ...
		cmpi.b	#2,($FFFFF7A7).w
		beq.s	Obj3E_ChkOpened
		move.w	#$2B,d1
		move.w	#$18,d2
		move.w	#$18,d3
		move.w	8(a0),d4
		jmp	$880000+SolidObject

Obj3E_ChkOpened:			; ...
		tst.b	$25(a0)		; has the prison been opened?
		beq.s	Obj3E_DoOpen	; if yes, branch
		clr.b	$25(a0)
		bclr	#3,($FFFFD022).w
		bset	#1,($FFFFD022).w

Obj3E_DoOpen:				; ...
		move.b	#2,$1A(a0)	; use frame number 2 (destroyed	prison)
		rts	

Obj3E_Switched:				; ...
		move.w	#$17,d1
		move.w	#8,d2
		move.w	#8,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		lea	$880000+(Ani_obj3E).l,a1
		jsr	$880000+AnimateSprite
		move.w	$30(a0),$C(a0)
		tst.b	$25(a0)
		beq.s	locret_1AC60
		addq.w	#8,$C(a0)
		move.b	#$A,$24(a0)
		move.w	#$3C,$1E(a0)
		clr.b	($FFFFFE1E).w	; stop time counter
		clr.b	($FFFFF7AA).w	; lock screen position
		move.b	#1,($FFFFF7CC).w ; lock	controls
		move.w	#$800,($FFFFF602).w ; make Sonic run to	the right
		clr.b	$25(a0)
		bclr	#3,($FFFFD022).w
		bset	#1,($FFFFD022).w

locret_1AC60:				; ...
		rts	

Obj3E_Explosion:			; ...
		moveq	#7,d0
		and.b	($FFFFFE0F).w,d0
		bne.s	loc_1ACA0
		jsr	$880000+SingleObjLoad
		bne.s	loc_1ACA0
		move.b	#$3F,0(a1)	; load explosion object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		jsr	$880000+(RandomNumber).l
		moveq	#0,d1
		move.b	d0,d1
		lsr.b	#2,d1
		subi.w	#$20,d1
		add.w	d1,8(a1)
		lsr.w	#8,d0
		lsr.b	#3,d0
		add.w	d0,$C(a1)

loc_1ACA0:				; ...
		subq.w	#1,$1E(a0)
		beq.s	Obj3E_MakeAnimal
		rts	

Obj3E_MakeAnimal:			; ...
		move.b	#2,($FFFFF7A7).w
		move.b	#$C,$24(a0)	; replace explosions with animals
		move.b	#6,$1A(a0)
		move.w	#$96,$1E(a0)
		addi.w	#$20,$C(a0)
		moveq	#7,d6
		move.w	#$9A,d5
		moveq	#-$1C,d4

Obj3E_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	locret_1ACF8
		move.b	#$28,0(a1)	; load animal object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		add.w	d4,8(a1)
		addq.w	#7,d4
		move.w	d5,$36(a1)
		subq.w	#8,d5
		dbf	d6,Obj3E_Loop	; repeat 7 more	times

locret_1ACF8:				; ...
		rts	

Obj3E_Animals:				; ...
		moveq	#7,d0
		and.b	($FFFFFE0F).w,d0
		bne.s	loc_1AD38
		jsr	$880000+SingleObjLoad
		bne.s	loc_1AD38
		move.b	#$28,0(a1)	; load animal object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		jsr	$880000+(RandomNumber).l
		andi.w	#$1F,d0
		subq.w	#6,d0
		tst.w	d1
		bpl.s	loc_1AD2E
		neg.w	d0

loc_1AD2E:				; ...
		add.w	d0,8(a1)
		move.w	#$C,$36(a1)

loc_1AD38:				; ...
		subq.w	#1,$1E(a0)
		bne.s	locret_1AD48
		addq.b	#2,$24(a0)
		move.w	#180,$1E(a0)

locret_1AD48:				; ...
		rts	

Obj3E_EndAct:				; ...
		moveq	#$3E,d0
		moveq	#$28,d1
		moveq	#$40,d2
		lea	($FFFFD040).w,a1 ; load	object RAM

Obj3E_FindObj28:			; ...
		cmp.b	(a1),d1		; is object $28	(animal) loaded?
		beq.s	Obj3E_Obj28Found ; if yes, branch
		adda.w	d2,a1		; next object RAM
		dbf	d0,Obj3E_FindObj28 ; repeat $3E	times
		jsr	$880000+GotThroughAct
		jmp	$880000+DeleteObject

Obj3E_Obj28Found:			; ...
		rts	
Ani_obj3E:	dc.w byte_1AD70-Ani_obj3E, byte_1AD70-Ani_obj3E	; ...
byte_1AD70:	dc.b 2,	1, 3, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - prison capsule
; ---------------------------------------------------------------------------
Map_obj3E:	dc.w byte_1AD82-Map_obj3E, byte_1ADA6-Map_obj3E	; ...
		dc.w byte_1ADAC-Map_obj3E, byte_1ADCB-Map_obj3E
		dc.w byte_1ADD1-Map_obj3E, byte_1ADDC-Map_obj3E
		dc.w byte_1ADE2-Map_obj3E
byte_1AD82:	dc.b 7			; ...
		dc.b $E0, $C, $20, 0, $F0
		dc.b $E8, $D, $20, 4, $E0
		dc.b $E8, $D, $20, $C, 0
		dc.b $F8, $E, $20, $14,	$E0
		dc.b $F8, $E, $20, $20,	0
		dc.b $10, $D, $20, $2C,	$E0
		dc.b $10, $D, $20, $34,	0
byte_1ADA6:	dc.b 1			; ...
		dc.b $F8, 9, 0,	$3C, $F4
byte_1ADAC:	dc.b 6			; ...
		dc.b 0,	8, $20,	$42, $E0
		dc.b 8,	$C, $20, $45, $E0
		dc.b 0,	4, $20,	$49, $10
		dc.b 8,	$C, $20, $4B, 0
		dc.b $10, $D, $20, $2C,	$E0
		dc.b $10, $D, $20, $34,	0
byte_1ADCB:	dc.b 1			; ...
		dc.b $F8, 9, 0,	$4F, $F4
byte_1ADD1:	dc.b 2			; ...
		dc.b $E8, $E, $20, $55,	$F0
		dc.b 0,	$E, $20, $61, $F0
byte_1ADDC:	dc.b 1			; ...
		dc.b $F0, 7, $20, $6D, $F8
byte_1ADE2:	dc.b 0			; ...
		dc.b 0
		
; ---------------------------------------------------------------------------
; Object 3F - explosion	from a destroyed boss, bomb or cannonball
; ---------------------------------------------------------------------------

Obj3F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3F_Index(pc,d0.w),d1
		jmp	Obj3F_Index(pc,d1.w)
Obj3F_Index:	dc.w Obj3F_Main-Obj3F_Index ; ...
		dc.w Obj27_Animate-Obj3F_Index

Obj3F_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj3F,4(a0)
		move.w	#$5A0,2(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#0,$20(a0)
		move.b	#$C,$19(a0)
		move.b	#7,$1E(a0)
		move.b	#0,$1A(a0)
		move.w	#$C4,d0
		jmp	$880000+(PlaySound_Special).l ;	play exploding bomb sound
; ---------------------------------------------------------------------------
; Ball Hog animation script
; ---------------------------------------------------------------------------
Ani_obj1E:	dc.w byte_8E4A-Ani_obj1E ; ...
byte_8E4A:	dc.b 9,	0, 0, 2, 2, 3, 2, 0, 0,	2, 2, 3, 2, 0, 0, 2, 2 ; ...
		dc.b 3,	2, 0, 0, 1, $FF, 0
; ---------------------------------------------------------------------------
; Sprite mappings - Ball Hog enemy (SBZ)
; ---------------------------------------------------------------------------
Map_obj1E:	dc.w byte_8E6E-Map_obj1E, byte_8E79-Map_obj1E ;	...
		dc.w byte_8E84-Map_obj1E, byte_8E8F-Map_obj1E
		dc.w byte_8E9A-Map_obj1E, byte_8EA0-Map_obj1E
byte_8E6E:	dc.b 2			; ...
		dc.b $EF, 9, 0,	0, $F4
		dc.b $FF, $A, 0, 6, $F4
byte_8E79:	dc.b 2			; ...
		dc.b $EF, 9, 0,	0, $F4
		dc.b $FF, $A, 0, $F, $F4
byte_8E84:	dc.b 2			; ...
		dc.b $F4, 9, 0,	0, $F4
		dc.b 4,	9, 0, $18, $F4
byte_8E8F:	dc.b 2			; ...
		dc.b $E4, 9, 0,	0, $F4
		dc.b $F4, $A, 0, $1E, $F4
byte_8E9A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$27, $F8
byte_8EA0:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$2B, $F8
; ---------------------------------------------------------------------------
; Sprite mappings - explosion
; ---------------------------------------------------------------------------
Map_obj24:	dc.w byte_8EAE-Map_obj24, byte_8EB4-Map_obj24 ;	...
		dc.w byte_8EBA-Map_obj24, byte_8EC0-Map_obj24
byte_8EAE:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_8EB4:	dc.b 1			; ...
		dc.b $F4, $A, 0, 9, $F4
byte_8EBA:	dc.b 1			; ...
		dc.b $F4, $A, 0, $12, $F4
byte_8EC0:	dc.b 1			; ...
		dc.b $F4, $A, 0, $1B, $F4
; ---------------------------------------------------------------------------
; Sprite mappings - explosion
; ---------------------------------------------------------------------------
Map_obj27:	dc.w byte_8ED0-Map_obj27, byte_8ED6-Map_obj27 ;	...
		dc.w byte_8EDC-Map_obj27, byte_8EE2-Map_obj27
		dc.w byte_8EF7-Map_obj27
byte_8ED0:	dc.b 1			; ...
		dc.b $F8, 9, 0,	0, $F4
byte_8ED6:	dc.b 1			; ...
		dc.b $F0, $F, 0, 6, $F0
byte_8EDC:	dc.b 1			; ...
		dc.b $F0, $F, 0, $16, $F0
byte_8EE2:	dc.b 4			; ...
		dc.b $EC, $A, 0, $26, $EC
		dc.b $EC, 5, 0,	$2F, 4
		dc.b 4,	5, $18,	$2F, $EC
		dc.b $FC, $A, $18, $26,	$FC
byte_8EF7:	dc.b 4			; ...
		dc.b $EC, $A, 0, $33, $EC
		dc.b $EC, 5, 0,	$3C, 4
		dc.b 4,	5, $18,	$3C, $EC
		dc.b $FC, $A, $18, $33,	$FC
; ---------------------------------------------------------------------------
; Sprite mappings - explosion from when	a boss is destroyed
; ---------------------------------------------------------------------------
Map_obj3F:	dc.w byte_8ED0-Map_obj3F ; ...
		dc.w byte_8F16-Map_obj3F
		dc.w byte_8F1C-Map_obj3F
		dc.w byte_8EE2-Map_obj3F
		dc.w byte_8EF7-Map_obj3F
byte_8F16:	dc.b 1			; ...
		dc.b $F0, $F, 0, $40, $F0
byte_8F1C:	dc.b 1			; ...
		dc.b $F0, $F, 0, $50, $F0
; ---------------------------------------------------------------------------
; Object 28 - animals
; ---------------------------------------------------------------------------

Obj28:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj28_Index(pc,d0.w),d1
		jmp	Obj28_Index(pc,d1.w)
Obj28_Index:	dc.w Obj28_Ending-Obj28_Index, loc_912A-Obj28_Index ; ...
		dc.w loc_9184-Obj28_Index, loc_91C0-Obj28_Index
		dc.w loc_9184-Obj28_Index, loc_9184-Obj28_Index
		dc.w loc_9184-Obj28_Index, loc_91C0-Obj28_Index
		dc.w loc_9184-Obj28_Index, loc_9240-Obj28_Index
		dc.w loc_9260-Obj28_Index, loc_9260-Obj28_Index
		dc.w loc_9280-Obj28_Index, loc_92BA-Obj28_Index
		dc.w loc_9314-Obj28_Index, loc_9332-Obj28_Index
		dc.w loc_9314-Obj28_Index, loc_9332-Obj28_Index
		dc.w loc_9314-Obj28_Index, loc_9370-Obj28_Index
		dc.w loc_92D6-Obj28_Index
		
Obj28_Delete:
		jmp	$880000+DeleteObject

Obj28_VarIndex:	dc.b 0,	5, 2, 3, 6, 3, 4, 5, 4,	1, 0, 1	; ...
Obj28_Variables:dc.w $FE00, $FC00	; ...
		dc.l $880000+Map_obj28
		dc.w $FE00, $FD00	; horizontal speed, vertical speed
		dc.l $880000+Map_obj28a		; mappings address
		dc.w $FE80, $FD00
		dc.l $880000+Map_obj28
		dc.w $FEC0, $FE80
		dc.l $880000+Map_obj28a
		dc.w $FE40, $FD00
		dc.l $880000+Map_obj28b
		dc.w $FD00, $FC00
		dc.l $880000+Map_obj28a
		dc.w $FD80, $FC80
		dc.l $880000+Map_obj28b

Obj28_EndSpeed:	dc.w $FBC0, $FC00, $FBC0, $FC00, $FBC0,	$FC00, $FD00, $FC00 ; ...
		dc.w $FD00, $FC00, $FE80, $FD00, $FE80,	$FD00, $FEC0, $FE80
		dc.w $FE40, $FD00, $FE00, $FD00, $FD80,	$FC80
Obj28_EndMap:	dc.l $880000+Map_obj28a, $880000+Map_obj28a, $880000+Map_obj28a, $880000+Map_obj28, $880000+Map_obj28
		dc.l $880000+Map_obj28,	$880000+Map_obj28, $880000+Map_obj28a, $880000+Map_obj28b, $880000+Map_obj28a
		dc.l $880000+Map_obj28b
Obj28_EndVram:	dc.w $5A5, $5A5, $5A5, $553, $553, $573, $573, $585, $593
		dc.w $565, $5B3

Obj28_Ending:				; ...
		tst.b	$28(a0)		; did animal come from a destroyed enemy?
		beq.w	Obj28_FromEnemy	; if yes, branch
		moveq	#0,d0
		move.b	$28(a0),d0	; move object type to d0
		add.w	d0,d0		; multiply d0 by 2
		move.b	d0,$24(a0)	; move d0 to routine counter
		subi.w	#$14,d0
		move.w	Obj28_EndVram(pc,d0.w),2(a0)
		add.w	d0,d0
		move.l	Obj28_EndMap(pc,d0.w),4(a0)
		lea	Obj28_EndSpeed(pc),a1
		move.w	(a1,d0.w),$32(a0) ; load horizontal speed
		move.w	(a1,d0.w),$10(a0)
		move.w	2(a1,d0.w),$34(a0) ; load vertical speed
		move.w	2(a1,d0.w),$12(a0)
		move.b	#$C,$16(a0)
		move.b	#4,1(a0)
		bset	#0,1(a0)
		move.b	#6,$18(a0)
		move.b	#8,$19(a0)
		move.b	#7,$1E(a0)
		jmp	$880000+DisplaySprite

Obj28_FromEnemy:			; ...
		addq.b	#2,$24(a0)
		jsr	$880000+RandomNumber
		andi.w	#1,d0
		moveq	#0,d1
		move.b	($FFFFFE10).w,d1
		add.w	d1,d1
		add.w	d0,d1
		lea	Obj28_VarIndex(pc),a1
		move.b	(a1,d1.w),d0
		move.b	d0,$30(a0)
		lsl.w	#3,d0
		lea	Obj28_Variables(pc),a1
		adda.w	d0,a1
		move.w	(a1)+,$32(a0)	; load horizontal speed
		move.w	(a1)+,$34(a0)	; load vertical	speed
		move.l	(a1)+,4(a0)	; load mappings
		move.w	#$580,2(a0)	; VRAM setting for 1st animal
		btst	#0,$30(a0)	; is 1st animal	used?
		beq.s	loc_90C0	; if yes, branch
		move.w	#$592,2(a0)	; VRAM setting for 2nd animal

loc_90C0:				; ...
		move.b	#$C,$16(a0)
		move.b	#4,1(a0)
		bset	#0,1(a0)
		move.b	#6,$18(a0)
		move.b	#8,$19(a0)
		move.b	#7,$1E(a0)
		move.b	#2,$1A(a0)
		move.w	#-$400,$12(a0)
		tst.b	($FFFFF7A7).w
		bne.s	loc_911C
		jsr	$880000+SingleObjLoad
		bne.s	Obj28_Display
		move.b	#$29,0(a1)	; load points object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	$3E(a0),d0
		lsr.w	#1,d0
		move.b	d0,$1A(a1)

Obj28_Display:				; ...
		jmp	$880000+DisplaySprite

loc_911C:				; ...
		move.b	#$12,$24(a0)
		clr.w	$10(a0)
		jmp	$880000+DisplaySprite

loc_912A:				; ...
		tst.b	1(a0)
		bpl.w	Obj28_Delete
		jsr	$880000+ObjectFall
		tst.w	$12(a0)
		bmi.s	loc_9180
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_9180
		add.w	d1,$C(a0)
		move.w	$32(a0),$10(a0)
		move.w	$34(a0),$12(a0)
		move.b	#1,$1A(a0)
		move.b	$30(a0),d0
		add.b	d0,d0
		addq.b	#4,d0
		move.b	d0,$24(a0)
		tst.b	($FFFFF7A7).w
		beq.s	loc_9180
		btst	#4,($FFFFFE0F).w
		beq.s	loc_9180
		neg.w	$10(a0)
		bchg	#0,1(a0)

loc_9180:				; ...
		jmp	$880000+DisplaySprite

loc_9184:				; ...
		jsr	$880000+ObjectFall
		move.b	#1,$1A(a0)
		tst.w	$12(a0)
		bmi.s	loc_91AE
		move.b	#0,$1A(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_91AE
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)

loc_91AE:				; ...
		tst.b	$28(a0)
		bne.s	loc_9224
		tst.b	1(a0)
		bpl.w	Obj28_Delete
		jmp	$880000+DisplaySprite

loc_91C0:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		tst.w	$12(a0)
		bmi.s	loc_91FC
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_91FC
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)
		tst.b	$28(a0)
		beq.s	loc_91FC
		cmpi.b	#$A,$28(a0)
		beq.s	loc_91FC
		neg.w	$10(a0)
		bchg	#0,1(a0)

loc_91FC:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	loc_9212
		move.b	#1,$1E(a0)
		addq.b	#1,$1A(a0)
		andi.b	#1,$1A(a0)

loc_9212:				; ...
		tst.b	$28(a0)
		bne.s	loc_9224
		tst.b	1(a0)
		bpl.w	Obj28_Delete
		jmp	$880000+DisplaySprite

loc_9224:				; ...
		move.w	8(a0),d0
		sub.w	($FFFFD008).w,d0
		bcs.s	loc_923C
		subi.w	#$180,d0
		bpl.s	loc_923C
		tst.b	1(a0)
		bpl.w	Obj28_Delete

loc_923C:				; ...
		jmp	$880000+DisplaySprite

loc_9240:				; ...
		tst.b	1(a0)
		bpl.w	Obj28_Delete
		subq.w	#1,$36(a0)
		bne.w	loc_925C
		move.b	#2,$24(a0)
		move.b	#3,$18(a0)

loc_925C:				; ...
		jmp	$880000+DisplaySprite

loc_9260:				; ...
		bsr.w	sub_9404
		bcc.s	loc_927C
		move.w	$32(a0),$10(a0)
		move.w	$34(a0),$12(a0)
		move.b	#$E,$24(a0)
		bra.w	loc_91C0

loc_927C:				; ...
		bra.w	loc_9224

loc_9280:				; ...
		bsr.w	sub_9404
		bpl.s	loc_92B6
		clr.w	$10(a0)
		clr.w	$32(a0)
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		bsr.w	loc_93C4
		bsr.w	loc_93EC
		subq.b	#1,$1E(a0)
		bpl.s	loc_92B6
		move.b	#1,$1E(a0)
		addq.b	#1,$1A(a0)
		andi.b	#1,$1A(a0)

loc_92B6:				; ...
		bra.w	loc_9224

loc_92BA:				; ...
		bsr.w	sub_9404
		bpl.s	loc_9310
		move.w	$32(a0),$10(a0)
		move.w	$34(a0),$12(a0)
		move.b	#4,$24(a0)
		bra.w	loc_9184

loc_92D6:				; ...
		jsr	$880000+ObjectFall
		move.b	#1,$1A(a0)
		tst.w	$12(a0)
		bmi.s	loc_9310
		move.b	#0,$1A(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_9310
		not.b	$29(a0)
		bne.s	loc_9306
		neg.w	$10(a0)
		bchg	#0,1(a0)

loc_9306:				; ...
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)

loc_9310:				; ...
		bra.w	loc_9224

loc_9314:				; ...
		bsr.w	sub_9404
		bpl.s	loc_932E
		clr.w	$10(a0)
		clr.w	$32(a0)
		jsr	$880000+ObjectFall
		bsr.w	loc_93C4
		bsr.w	loc_93EC

loc_932E:				; ...
		bra.w	loc_9224

loc_9332:				; ...
		bsr.w	sub_9404
		bpl.s	loc_936C
		jsr	$880000+ObjectFall
		move.b	#1,$1A(a0)
		tst.w	$12(a0)
		bmi.s	loc_936C
		move.b	#0,$1A(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_936C
		neg.w	$10(a0)
		bchg	#0,1(a0)
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)

loc_936C:				; ...
		bra.w	loc_9224

loc_9370:				; ...
		bsr.w	sub_9404
		bpl.s	loc_93C0
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		tst.w	$12(a0)
		bmi.s	loc_93AA
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_93AA
		not.b	$29(a0)
		bne.s	loc_93A0
		neg.w	$10(a0)
		bchg	#0,1(a0)

loc_93A0:				; ...
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)

loc_93AA:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	loc_93C0
		move.b	#1,$1E(a0)
		addq.b	#1,$1A(a0)
		andi.b	#1,$1A(a0)

loc_93C0:				; ...
		bra.w	loc_9224

loc_93C4:				; ...
		move.b	#1,$1A(a0)
		tst.w	$12(a0)
		bmi.s	locret_93EA
		move.b	#0,$1A(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_93EA
		add.w	d1,$C(a0)
		move.w	$34(a0),$12(a0)

locret_93EA:				; ...
		rts	

loc_93EC:				; ...
		bset	#0,1(a0)
		move.w	8(a0),d0
		sub.w	($FFFFD008).w,d0
		bcc.s	locret_9402
		bclr	#0,1(a0)

locret_9402:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_9404:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		subi.w	#$B8,d0
		rts	
; End of function sub_9404

; ---------------------------------------------------------------------------
; Object 29 - points that appear when you destroy something
; ---------------------------------------------------------------------------

Obj29:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj29_Index(pc,d0.w),d1
		jsr	Obj29_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj29_Index:	dc.w Obj29_Main-Obj29_Index ; ...
		dc.w Obj29_Slower-Obj29_Index

Obj29_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj29,4(a0)
		move.w	#$2797,2(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#8,$19(a0)
		move.w	#-$300,$12(a0)	; move object upwards

Obj29_Slower:				; ...
		tst.w	$12(a0)		; is object moving?
		bpl.w	Obj29_Delete	; if not, branch
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; reduce object	speed
		rts	
		
Obj29_Delete:
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - animals
; ---------------------------------------------------------------------------
Map_obj28:	dc.w byte_9472-Map_obj28 ; ...
		dc.w byte_9478-Map_obj28
		dc.w byte_946C-Map_obj28
byte_946C:	dc.b 1			; ...
		dc.b $F4, 6, 0,	0, $F8
byte_9472:	dc.b 1			; ...
		dc.b $F4, 6, 0,	6, $F8
byte_9478:	dc.b 1			; ...
		dc.b $F4, 6, 0,	$C, $F8

Map_obj28a:	dc.w byte_948A-Map_obj28a ; ...
		dc.w byte_9490-Map_obj28a
		dc.w byte_9484-Map_obj28a
byte_9484:	dc.b 1			; ...
		dc.b $F4, 6, 0,	0, $F8
byte_948A:	dc.b 1			; ...
		dc.b $FC, 5, 0,	6, $F8
byte_9490:	dc.b 1			; ...
		dc.b $FC, 5, 0,	$A, $F8

Map_obj28b:	dc.w byte_94A2-Map_obj28b ; ...
		dc.w byte_94A8-Map_obj28b
		dc.w byte_949C-Map_obj28b
byte_949C:	dc.b 1			; ...
		dc.b $F4, 6, 0,	0, $F8
byte_94A2:	dc.b 1			; ...
		dc.b $FC, 9, 0,	6, $F4
byte_94A8:	dc.b 1			; ...
		dc.b $FC, 9, 0,	$C, $F4
; ---------------------------------------------------------------------------
; Sprite mappings - points that	appear when you	destroy	something
; ---------------------------------------------------------------------------
Map_obj29:	dc.w byte_94BC-Map_obj29, byte_94C2-Map_obj29 ;	...
		dc.w byte_94C8-Map_obj29, byte_94CE-Map_obj29
		dc.w byte_94D4-Map_obj29, byte_94DA-Map_obj29
		dc.w byte_94E5-Map_obj29
byte_94BC:	dc.b 1			; ...
		dc.b $FC, 4, 0,	0, $F8	; 100 points
byte_94C2:	dc.b 1			; ...
		dc.b $FC, 4, 0,	2, $F8	; 200 points
byte_94C8:	dc.b 1			; ...
		dc.b $FC, 4, 0,	4, $F8	; 500 points
byte_94CE:	dc.b 1			; ...
		dc.b $FC, 8, 0,	6, $F8	; 1000 points
byte_94D4:	dc.b 1			; ...
		dc.b $FC, 0, 0,	6, $FC	; 10 points
byte_94DA:	dc.b 2			; ...
		dc.b $FC, 8, 0,	6, $F4	; 10,000 points
		dc.b $FC, 4, 0,	7, 1
byte_94E5:	dc.b 2			; ...
		dc.b $FC, 8, 0,	6, $F4	; 100,000 points
		dc.b $FC, 4, 0,	7, 6
; ---------------------------------------------------------------------------
; Object 1F - Crabmeat enemy (GHZ, SYZ)
; ---------------------------------------------------------------------------

Obj1F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj1F_Index(pc,d0.w),d1
		jmp	Obj1F_Index(pc,d1.w)
Obj1F_Index:	dc.w Obj1F_Main-Obj1F_Index ; ...
		dc.w Obj1F_Action-Obj1F_Index
		dc.w Obj1F_Delete-Obj1F_Index
		dc.w Obj1F_BallMain-Obj1F_Index
		dc.w Obj1F_BallMove-Obj1F_Index

Obj1F_Main:				; ...
		move.b	#$10,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj1F,4(a0)
		move.w	#$400,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#6,$20(a0)
		move.b	#$15,$19(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_955A
		add.w	d1,$C(a0)
		move.b	d3,$26(a0)
		move.w	#0,$12(a0)
		addq.b	#2,$24(a0)

locret_955A:				; ...
		rts	

Obj1F_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj1F_Index2(pc,d0.w),d1
		jsr	Obj1F_Index2(pc,d1.w)
		lea	$880000+(Ani_obj1F).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj1F_Index2:	dc.w Obj1F_WaitFire-Obj1F_Index2 ; ...
		dc.w Obj1F_WalkOnFloor-Obj1F_Index2

Obj1F_WaitFire:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from time delay
		bpl.s	locret_95B6
		tst.b	1(a0)
		bpl.s	Obj1F_Move
		bchg	#1,$32(a0)
		bne.s	Obj1F_MakeFire

Obj1F_Move:				; ...
		addq.b	#2,$25(a0)
		move.w	#127,$30(a0)	; set time delay to approx 2 seconds
		move.w	#$80,$10(a0)	; move Crabmeat	to the right
		bsr.w	Obj1F_SetAni
		addq.b	#3,d0
		move.b	d0,$1C(a0)
		bchg	#0,$22(a0)
		bne.s	locret_95B6
		neg.w	$10(a0)		; change direction

locret_95B6:				; ...
		rts	

Obj1F_MakeFire:				; ...
		move.w	#$3B,$30(a0)
		move.b	#6,$1C(a0)	; use firing animation
		jsr	$880000+SingleObjLoad
		bne.s	Obj1F_MakeFire2
		move.b	#$1F,0(a1)	; load left fireball
		move.b	#6,$24(a1)
		move.w	8(a0),8(a1)
		subi.w	#$10,8(a1)
		move.w	$C(a0),$C(a1)
		move.w	#-$100,$10(a1)

Obj1F_MakeFire2:			; ...
		jsr	$880000+SingleObjLoad
		bne.s	locret_9618
		move.b	#$1F,0(a1)	; load right fireball
		move.b	#6,$24(a1)
		move.w	8(a0),8(a1)
		addi.w	#$10,8(a1)
		move.w	$C(a0),$C(a1)
		move.w	#$100,$10(a1)

locret_9618:				; ...
		rts	

Obj1F_WalkOnFloor:			; ...
		subq.w	#1,$30(a0)
		bmi.s	loc_966E
		jsr	$880000+SpeedToPos
		bchg	#0,$32(a0)
		bne.s	loc_9654
		move.w	8(a0),d3
		addi.w	#$10,d3
		btst	#0,$22(a0)
		beq.s	loc_9640
		subi.w	#$20,d3

loc_9640:				; ...
		jsr	$880000+ObjHitFloor2
		cmpi.w	#-8,d1
		blt.s	loc_966E
		cmpi.w	#$C,d1
		bge.s	loc_966E
		rts	

loc_9654:				; ...
		jsr	$880000+ObjHitFloor
		add.w	d1,$C(a0)
		move.b	d3,$26(a0)
		bsr.w	Obj1F_SetAni
		addq.b	#3,d0
		move.b	d0,$1C(a0)
		rts	

loc_966E:				; ...
		subq.b	#2,$25(a0)
		move.w	#59,$30(a0)
		move.w	#0,$10(a0)
		bsr.w	Obj1F_SetAni
		move.b	d0,$1C(a0)
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	set the	correct	animation for a	Crabmeat
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj1F_SetAni:				; ...
		moveq	#0,d0
		move.b	$26(a0),d3
		bmi.s	loc_96A4
		cmpi.b	#6,d3
		bcs.s	locret_96A2
		moveq	#1,d0
		btst	#0,$22(a0)
		bne.s	locret_96A2
		moveq	#2,d0

locret_96A2:				; ...
		rts	

loc_96A4:				; ...
		cmpi.b	#-6,d3
		bhi.s	locret_96B6
		moveq	#2,d0
		btst	#0,$22(a0)
		bne.s	locret_96B6
		moveq	#1,d0

locret_96B6:				; ...
		rts	
; End of function Obj1F_SetAni


Obj1F_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Sub-object - missile that the	Crabmeat throws
; ---------------------------------------------------------------------------

Obj1F_BallMain:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj1F,4(a0)
		move.w	#$400,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$87,$20(a0)
		move.b	#8,$19(a0)
		move.w	#-$400,$12(a0)
		move.b	#7,$1C(a0)

Obj1F_BallMove:				; ...
		lea	$880000+(Ani_obj1F).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+ObjectFall
		jsr	$880000+DisplaySprite
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0	; has object moved below the level boundary?
		bcs.s	Obj1F_Delete2	; if yes, branch
		rts	

Obj1F_Delete2:				; ...
		jmp	$880000+DeleteObject
Ani_obj1F:	dc.w byte_972A-Ani_obj1F, byte_972E-Ani_obj1F, byte_9732-Ani_obj1F ; ...
		dc.w byte_9736-Ani_obj1F, byte_973C-Ani_obj1F, byte_9742-Ani_obj1F
		dc.w byte_9748-Ani_obj1F, byte_974C-Ani_obj1F
byte_972A:	dc.b $F, 0, $FF, 0	; ...
byte_972E:	dc.b $F, 2, $FF, 0	; ...
byte_9732:	dc.b $F, $22, $FF, 0	; ...
byte_9736:	dc.b $F, 1, $21, 0, $FF, 0 ; ...
byte_973C:	dc.b $F, $21, 3, 2, $FF, 0 ; ...
byte_9742:	dc.b $F, 1, $23, $22, $FF, 0 ; ...
byte_9748:	dc.b $F, 4, $FF, 0	; ...
byte_974C:	dc.b 1,	5, 6, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Crabmeat enemy (GHZ, SYZ)
; ---------------------------------------------------------------------------
Map_obj1F:	dc.w byte_975E-Map_obj1F, byte_9773-Map_obj1F ;	...
		dc.w byte_9788-Map_obj1F, byte_979D-Map_obj1F
		dc.w byte_97B2-Map_obj1F, byte_97D1-Map_obj1F
		dc.w byte_97D7-Map_obj1F
byte_975E:	dc.b 4			; ...
		dc.b $F0, 9, 0,	0, $E8
		dc.b $F0, 9, 8,	0, 0
		dc.b 0,	5, 0, 6, $F0
		dc.b 0,	5, 8, 6, 0
byte_9773:	dc.b 4			; ...
		dc.b $F0, 9, 0,	$A, $E8
		dc.b $F0, 9, 0,	$10, 0
		dc.b 0,	5, 0, $16, $F0
		dc.b 0,	9, 0, $1A, 0
byte_9788:	dc.b 4			; ...
		dc.b $EC, 9, 0,	0, $E8
		dc.b $EC, 9, 8,	0, 0
		dc.b $FC, 5, 8,	6, 0
		dc.b $FC, 6, 0,	$20, $F0
byte_979D:	dc.b 4			; ...
		dc.b $EC, 9, 0,	$A, $E8
		dc.b $EC, 9, 0,	$10, 0
		dc.b $FC, 9, 0,	$26, 0
		dc.b $FC, 6, 0,	$2C, $F0
byte_97B2:	dc.b 6			; ...
		dc.b $F0, 4, 0,	$32, $F0
		dc.b $F0, 4, 8,	$32, 0
		dc.b $F8, 9, 0,	$34, $E8
		dc.b $F8, 9, 8,	$34, 0
		dc.b 8,	4, 0, $3A, $F0
		dc.b 8,	4, 8, $3A, 0
byte_97D1:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$3C, $F8
byte_97D7:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$40, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 22 - Buzz Bomber enemy	(GHZ, MZ, SYZ)
; ---------------------------------------------------------------------------

Obj22:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj22_Index(pc,d0.w),d1
		jmp	Obj22_Index(pc,d1.w)
Obj22_Index:	dc.w Obj22_Main-Obj22_Index ; ...
		dc.w Obj22_Action-Obj22_Index
		dc.w Obj22_Delete-Obj22_Index

Obj22_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj22,4(a0)
		move.w	#$444,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#8,$20(a0)
		move.b	#$18,$19(a0)

Obj22_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj22_Index2(pc,d0.w),d1
		jsr	Obj22_Index2(pc,d1.w)
		lea	$880000+(Ani_obj22).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj22_Index2:	dc.w Obj22_Move-Obj22_Index2 ; ...
		dc.w Obj22_ChkNrSonic-Obj22_Index2

Obj22_Move:				; ...
		subq.w	#1,$32(a0)	; subtract 1 from time delay
		bpl.s	locret_986C	; if time remains, branch
		btst	#1,$34(a0)	; is Buzz Bomber near Sonic?
		bne.s	Obj22_Fire	; if yes, branch
		addq.b	#2,$25(a0)
		move.w	#127,$32(a0)	; set time delay to just over 2	seconds
		move.w	#$400,$10(a0)	; move Buzz Bomber to the right
		move.b	#1,$1C(a0)	; use "flying" animation
		btst	#0,$22(a0)	; is Buzz Bomber facing	left?
		bne.s	locret_986C	; if not, branch
		neg.w	$10(a0)		; move Buzz Bomber to the left

locret_986C:				; ...
		rts	

Obj22_Fire:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	locret_98D0
		move.b	#$23,0(a1)	; load missile object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		addi.w	#$1C,$C(a1)
		move.w	#$200,$12(a1)	; move missile downwards
		move.w	#$200,$10(a1)	; move missile to the right
		move.w	#$18,d0
		btst	#0,$22(a0)	; is Buzz Bomber facing	left?
		bne.s	loc_98AA	; if not, branch
		neg.w	d0
		neg.w	$10(a1)		; move missile to the left

loc_98AA:				; ...
		add.w	d0,8(a1)
		move.b	$22(a0),$22(a1)
		move.w	#$E,$32(a1)
		move.l	a0,$3C(a1)
		move.b	#1,$34(a0)	; set to "already fired" to prevent refiring
		move.w	#$3B,$32(a0)
		move.b	#2,$1C(a0)	; use "firing" animation

locret_98D0:				; ...
		rts	

Obj22_ChkNrSonic:			; ...
		subq.w	#1,$32(a0)	; subtract 1 from time delay
		bmi.s	Obj22_ChgDir
		jsr	$880000+SpeedToPos
		tst.b	$34(a0)
		bne.s	locret_992A
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bpl.s	Obj22_SetNrSonic
		neg.w	d0

Obj22_SetNrSonic:			; ...
		cmpi.w	#$60,d0		; is Buzz Bomber within	$60 pixels of Sonic?
		bcc.s	locret_992A	; if not, branch
		tst.b	1(a0)
		bpl.s	locret_992A
		move.b	#2,$34(a0)	; set Buzz Bomber to "near Sonic"
		move.w	#29,$32(a0)	; set time delay to half a second
		bra.s	Obj22_Stop

Obj22_ChgDir:				; ...
		move.b	#0,$34(a0)	; set Buzz Bomber to "normal"
		bchg	#0,$22(a0)	; change direction
		move.w	#59,$32(a0)

Obj22_Stop:				; ...
		subq.b	#2,$25(a0)	; run "Obj22_Fire" routine
		move.w	#0,$10(a0)	; stop Buzz Bomber moving
		move.b	#0,$1C(a0)	; use "hovering" animation

locret_992A:				; ...
		rts	

Obj22_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Object 23 - missile that Buzz	Bomber throws
; ---------------------------------------------------------------------------

Obj23:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj23_Index(pc,d0.w),d1
		jmp	Obj23_Index(pc,d1.w)
Obj23_Index:	dc.w Obj23_Main-Obj23_Index ; ...
		dc.w Obj23_Animate-Obj23_Index
		dc.w Obj23_FromBuzz-Obj23_Index
		dc.w Obj23_Delete-Obj23_Index
		dc.w Obj23_FromNewt-Obj23_Index

Obj23_Main:				; ...
		subq.w	#1,$32(a0)
		bpl.s	Obj23_ChkCancel
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj23,4(a0)
		move.w	#$2444,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#8,$19(a0)
		andi.b	#3,$22(a0)
		tst.b	$28(a0)		; was object created by	a Newtron?
		beq.s	Obj23_Animate	; if not, branch
		move.b	#8,$24(a0)	; run "Obj23_FromNewt" routine
		move.b	#$87,$20(a0)
		move.b	#1,$1C(a0)
		bra.w	Obj23_Animate2

Obj23_Animate:				; ...
		bsr.s	Obj23_ChkCancel
		lea	$880000+(Ani_obj23).l,a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Subroutine to	check if the Buzz Bomber which fired the missile has been
; destroyed, and if it has, then cancel	the missile
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj23_ChkCancel:			; ...
		movea.l	$3C(a0),a1
		cmpi.b	#$27,0(a1)	; has Buzz Bomber been destroyed?
		beq.s	Obj23_Delete	; if yes, branch
		rts	
; End of function Obj23_ChkCancel


Obj23_FromBuzz:				; ...
		btst	#7,$22(a0)
		bne.s	Obj23_Explode
		move.b	#$87,$20(a0)
		move.b	#1,$1C(a0)
		jsr	$880000+SpeedToPos
		lea	$880000+(Ani_obj23).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+DisplaySprite
		move.w	($FFFFF72E).w,d0
		addi.w	#$E0,d0
		cmp.w	$C(a0),d0	; has object moved below the level boundary?
		bcs.s	Obj23_Delete	; if yes, branch
		rts	

Obj23_Explode:				; ...
		move.b	#$24,0(a0)	; change object	to an explosion	(Obj24)
		move.b	#0,$24(a0)
		bra.w	Obj24

Obj23_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

Obj23_FromNewt:				; ...
		tst.b	1(a0)
		bpl.s	Obj23_Delete
		jsr	$880000+SpeedToPos

Obj23_Animate2:				; ...
		lea	$880000+(Ani_obj23).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+DisplaySprite
		rts	
Ani_obj22:	dc.w byte_9A1E-Ani_obj22, byte_9A22-Ani_obj22, byte_9A26-Ani_obj22 ; ...
byte_9A1E:	dc.b 1,	0, 1, $FF	; ...
byte_9A22:	dc.b 1,	2, 3, $FF	; ...
byte_9A26:	dc.b 1,	4, 5, $FF	; ...

Ani_obj23:	dc.w byte_9A2E-Ani_obj23, byte_9A32-Ani_obj23 ;	...
byte_9A2E:	dc.b 7,	0, 1, $FC	; ...
byte_9A32:	dc.b 1,	2, 3, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Buzz Bomber	enemy
; ---------------------------------------------------------------------------
Map_obj22:	dc.w byte_9A42-Map_obj22, byte_9A61-Map_obj22 ;	...
		dc.w byte_9A80-Map_obj22, byte_9AA4-Map_obj22
		dc.w byte_9AC8-Map_obj22, byte_9AE7-Map_obj22
byte_9A42:	dc.b 6			; ...
		dc.b $F4, 9, 0,	0, $E8
		dc.b $F4, 9, 0,	$F, 0
		dc.b 4,	8, 0, $15, $E8
		dc.b 4,	4, 0, $18, 0
		dc.b $F1, 8, 0,	$1A, $EC
		dc.b $F1, 4, 0,	$1D, 4
byte_9A61:	dc.b 6			; ...
		dc.b $F4, 9, 0,	0, $E8
		dc.b $F4, 9, 0,	$F, 0
		dc.b 4,	8, 0, $15, $E8
		dc.b 4,	4, 0, $18, 0
		dc.b $F4, 8, 0,	$1F, $EC
		dc.b $F4, 4, 0,	$22, 4
byte_9A80:	dc.b 7			; ...
		dc.b 4,	0, 0, $30, $C
		dc.b $F4, 9, 0,	0, $E8
		dc.b $F4, 9, 0,	$F, 0
		dc.b 4,	8, 0, $15, $E8
		dc.b 4,	4, 0, $18, 0
		dc.b $F1, 8, 0,	$1A, $EC
		dc.b $F1, 4, 0,	$1D, 4
byte_9AA4:	dc.b 7			; ...
		dc.b 4,	4, 0, $31, $C
		dc.b $F4, 9, 0,	0, $E8
		dc.b $F4, 9, 0,	$F, 0
		dc.b 4,	8, 0, $15, $E8
		dc.b 4,	4, 0, $18, 0
		dc.b $F4, 8, 0,	$1F, $EC
		dc.b $F4, 4, 0,	$22, 4
byte_9AC8:	dc.b 6			; ...
		dc.b $F4, $D, 0, 0, $EC
		dc.b 4,	$C, 0, 8, $EC
		dc.b 4,	0, 0, $C, $C
		dc.b $C, 4, 0, $D, $F4
		dc.b $F1, 8, 0,	$1A, $EC
		dc.b $F1, 4, 0,	$1D, 4
byte_9AE7:	dc.b 4			; ...
		dc.b $F4, $D, 0, 0, $EC
		dc.b 4,	$C, 0, 8, $EC
		dc.b 4,	0, 0, $C, $C
		dc.b $C, 4, 0, $D, $F4
		dc.b $F4, 8, 0,	$1F, $EC
		dc.b $F4, 4, 0,	$22, 4
; ---------------------------------------------------------------------------
; Sprite mappings - missile that Buzz Bomber throws
; ---------------------------------------------------------------------------
Map_obj23:	dc.w byte_9B0E-Map_obj23, byte_9B14-Map_obj23 ;	...
		dc.w byte_9B1A-Map_obj23, byte_9B20-Map_obj23
byte_9B0E:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$24, $F8
byte_9B14:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$28, $F8
byte_9B1A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$2C, $F8
byte_9B20:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$33, $F8
; ---------------------------------------------------------------------------
; Object 2A - doors (SBZ)
; ---------------------------------------------------------------------------

Obj2A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2A_Index(pc,d0.w),d1
		jmp	Obj2A_Index(pc,d1.w)
Obj2A_Index:	dc.w Obj2A_Main-Obj2A_Index ; ...
		dc.w Obj2A_OpenShut-Obj2A_Index

Obj2A_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj2A,4(a0)
		move.w	#$42E8,2(a0)
		ori.b	#4,1(a0)
		move.b	#8,$19(a0)
		move.b	#4,$18(a0)

Obj2A_OpenShut:				; ...
		move.w	#$40,d1
		clr.b	$1C(a0)		; use "closing"	animation
		move.w	($FFFFD008).w,d0
		add.w	d1,d0
		cmp.w	8(a0),d0
		bcs.s	Obj2A_Animate
		sub.w	d1,d0
		sub.w	d1,d0
		cmp.w	8(a0),d0
		bcc.s	Obj2A_Animate
		add.w	d1,d0
		cmp.w	8(a0),d0
		bcc.s	loc_899A
		btst	#0,$22(a0)
		bne.s	Obj2A_Animate
		bra.s	Obj2A_Open

loc_899A:				; ...
		btst	#0,$22(a0)
		beq.s	Obj2A_Animate

Obj2A_Open:				; ...
		move.b	#1,$1C(a0)	; use "opening"	animation

Obj2A_Animate:				; ...
		lea	$880000+(Ani_obj2A).l,a1
		jsr	$880000+AnimateSprite
		tst.b	$1A(a0)		; is the door open?
		bne.s	Obj2A_MarkAsUsed ; if yes, branch
		move.w	#$11,d1
		move.w	#$20,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject

Obj2A_MarkAsUsed:			; ...
		bra.w	MarkObjGone
Ani_obj2A:	dc.w Ani_obj2A_Shut-Ani_obj2A ;	...
		dc.w Ani_obj2A_Open-Ani_obj2A
Ani_obj2A_Shut:	dc.b 0,	8, 7, 6, 5, 4, 3, 2, 1,	0, $FE,	1 ; ...
Ani_obj2A_Open:	dc.b 0,	0, 1, 2, 3, 4, 5, 6, 7,	8, $FE,	1 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - doors (SBZ)
; ---------------------------------------------------------------------------
Map_obj2A:	dc.w byte_89FE-Map_obj2A, byte_8A09-Map_obj2A ;	...
		dc.w byte_8A14-Map_obj2A, byte_8A1F-Map_obj2A
		dc.w byte_8A2A-Map_obj2A, byte_8A35-Map_obj2A
		dc.w byte_8A40-Map_obj2A, byte_8A4B-Map_obj2A
		dc.w byte_8A56-Map_obj2A
byte_89FE:	dc.b 2			; ...
		dc.b $E0, 7, 8,	0, $F8	; door closed
		dc.b 0,	7, 8, 0, $F8
byte_8A09:	dc.b 2			; ...
		dc.b $DC, 7, 8,	0, $F8
		dc.b 4,	7, 8, 0, $F8
byte_8A14:	dc.b 2			; ...
		dc.b $D8, 7, 8,	0, $F8
		dc.b 8,	7, 8, 0, $F8
byte_8A1F:	dc.b 2			; ...
		dc.b $D4, 7, 8,	0, $F8
		dc.b $C, 7, 8, 0, $F8
byte_8A2A:	dc.b 2			; ...
		dc.b $D0, 7, 8,	0, $F8
		dc.b $10, 7, 8,	0, $F8
byte_8A35:	dc.b 2			; ...
		dc.b $CC, 7, 8,	0, $F8
		dc.b $14, 7, 8,	0, $F8
byte_8A40:	dc.b 2			; ...
		dc.b $C8, 7, 8,	0, $F8
		dc.b $18, 7, 8,	0, $F8
byte_8A4B:	dc.b 2			; ...
		dc.b $C4, 7, 8,	0, $F8
		dc.b $1C, 7, 8,	0, $F8
byte_8A56:	dc.b 2			; ...
		dc.b $C0, 7, 8,	0, $F8	; door fully open
		dc.b $20, 7, 8,	0, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 2B - Chopper enemy (GHZ)
; ---------------------------------------------------------------------------

Obj2B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2B_Index(pc,d0.w),d1
		jsr	Obj2B_Index(pc,d1.w)
		bra.w	MarkObjGone
Obj2B_Index:	dc.w Obj2B_Main-Obj2B_Index ; ...
		dc.w Obj2B_ChgSpeed-Obj2B_Index

Obj2B_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj2B,4(a0)
		move.w	#$47B,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#9,$20(a0)
		move.b	#$10,$19(a0)
		move.w	#$F900,$12(a0)	; set vertical speed
		move.w	$C(a0),$30(a0)

Obj2B_ChgSpeed:				; ...
		lea	$880000+(Ani_obj2B).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; reduce speed
		move.w	$30(a0),d0
		cmp.w	$C(a0),d0
		bcc.s	Obj2B_ChgAni
		move.w	d0,$C(a0)
		move.w	#-$700,$12(a0)	; set vertical speed

Obj2B_ChgAni:				; ...
		move.b	#1,$1C(a0)	; use fast animation
		subi.w	#$C0,d0
		cmp.w	$C(a0),d0
		bcc.s	locret_ABB6
		move.b	#0,$1C(a0)	; use slow animation
		tst.w	$12(a0)		; is Chopper at	its highest point?
		bmi.s	locret_ABB6	; if not, branch
		move.b	#2,$1C(a0)	; use stationary animation

locret_ABB6:				; ...
		rts	
Ani_obj2B:	dc.w byte_ABBE-Ani_obj2B, byte_ABC2-Ani_obj2B, byte_ABC6-Ani_obj2B ; ...
byte_ABBE:	dc.b 7,	0, 1, $FF	; ...
byte_ABC2:	dc.b 3,	0, 1, $FF	; ...
byte_ABC6:	dc.b 7,	0, $FF,	0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Chopper enemy (GHZ)
; ---------------------------------------------------------------------------
Map_obj2B:	dc.w byte_ABCE-Map_obj2B ; ...
		dc.w byte_ABD4-Map_obj2B
byte_ABCE:	dc.b 1			; ...
		dc.b $F0, $F, 0, 0, $F0
byte_ABD4:	dc.b 1			; ...
		dc.b $F0, $F, 0, $10, $F0
; ---------------------------------------------------------------------------
; Object 2C - Jaws enemy (LZ)
; ---------------------------------------------------------------------------

Obj2C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2C_Index(pc,d0.w),d1
		jmp	Obj2C_Index(pc,d1.w)
Obj2C_Index:	dc.w Obj2C_Main-Obj2C_Index ; ...
		dc.w Obj2C_Turn-Obj2C_Index

Obj2C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj2C,4(a0)
		move.w	#$2486,2(a0)
		ori.b	#4,1(a0)
		move.b	#$A,$20(a0)
		move.b	#4,$18(a0)
		move.b	#$10,$19(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; load object subtype number
		lsl.w	#6,d0		; multiply d0 by 64
		subq.w	#1,d0
		move.w	d0,$30(a0)	; set turn delay time
		move.w	d0,$32(a0)
		move.w	#-$40,$10(a0)	; move Jaws to the left
		btst	#0,$22(a0)	; is Jaws facing left?
		beq.s	Obj2C_Turn	; if yes, branch
		neg.w	$10(a0)		; move Jaws to the right

Obj2C_Turn:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from turn delay time
		bpl.s	Obj2C_Animate	; if time remains, branch
		move.w	$32(a0),$30(a0)	; reset	turn delay time
		neg.w	$10(a0)		; change speed direction
		bchg	#0,$22(a0)	; change Jaws facing direction
		move.b	#1,$1D(a0)	; reset	animation

Obj2C_Animate:				; ...
		lea	$880000+(Ani_obj2C).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+SpeedToPos
		bra.w	MarkObjGone
Ani_obj2C:	dc.w byte_AC6A-Ani_obj2C ; ...
byte_AC6A:	dc.b 7,	0, 1, 2, 3, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Jaws enemy (LZ)
; ---------------------------------------------------------------------------
Map_obj2C:	dc.w byte_AC78-Map_obj2C ; ...
		dc.w byte_AC83-Map_obj2C
		dc.w byte_AC8E-Map_obj2C
		dc.w byte_AC99-Map_obj2C
byte_AC78:	dc.b 2			; ...
		dc.b $F4, $E, 0, 0, $F0
		dc.b $F5, 5, 0,	$18, $10
byte_AC83:	dc.b 2			; ...
		dc.b $F4, $E, 0, $C, $F0
		dc.b $F5, 5, 0,	$1C, $10
byte_AC8E:	dc.b 2			; ...
		dc.b $F4, $E, 0, 0, $F0
		dc.b $F5, 5, $10, $18, $10
byte_AC99:	dc.b 2			; ...
		dc.b $F4, $E, 0, $C, $F0
		dc.b $F5, 5, $10, $1C, $10
; ---------------------------------------------------------------------------
; Object 2D - Burrobot enemy (LZ)
; ---------------------------------------------------------------------------

Obj2D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2D_Index(pc,d0.w),d1
		jmp	Obj2D_Index(pc,d1.w)
Obj2D_Index:	dc.w Obj2D_Main-Obj2D_Index ; ...
		dc.w Obj2D_Action-Obj2D_Index

Obj2D_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$13,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj2D,4(a0)
		move.w	#$4A6,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#5,$20(a0)
		move.b	#$C,$19(a0)
		addq.b	#6,$25(a0)	; run "Obj2D_ChkSonic" routine
		move.b	#2,$1C(a0)

Obj2D_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj2D_Index2(pc,d0.w),d1
		jsr	Obj2D_Index2(pc,d1.w)
		lea	$880000+(Ani_obj2D).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj2D_Index2:	dc.w Obj2D_ChgDir-Obj2D_Index2 ; ...
		dc.w Obj2D_Move-Obj2D_Index2
		dc.w Obj2D_Jump-Obj2D_Index2
		dc.w Obj2D_ChkSonic-Obj2D_Index2

Obj2D_ChgDir:				; ...
		subq.w	#1,$30(a0)
		bpl.s	locret_AD42
		addq.b	#2,$25(a0)
		move.w	#$FF,$30(a0)
		move.w	#$80,$10(a0)
		move.b	#1,$1C(a0)
		bchg	#0,$22(a0)	; change direction the Burrobot	is facing
		beq.s	locret_AD42
		neg.w	$10(a0)		; change direction the Burrobot	is moving

locret_AD42:				; ...
		rts	

Obj2D_Move:				; ...
		subq.w	#1,$30(a0)
		bmi.s	loc_AD84
		jsr	$880000+SpeedToPos
		bchg	#0,$32(a0)
		bne.s	loc_AD78
		move.w	8(a0),d3
		addi.w	#$C,d3
		btst	#0,$22(a0)
		bne.s	loc_AD6A
		subi.w	#$18,d3

loc_AD6A:				; ...
		jsr	$880000+ObjHitFloor2
		cmpi.w	#$C,d1
		bge.s	loc_AD84
		rts	

loc_AD78:				; ...
		jsr	$880000+ObjHitFloor
		add.w	d1,$C(a0)
		rts	

loc_AD84:				; ...
		btst	#2,($FFFFFE0F).w
		beq.s	loc_ADA4
		subq.b	#2,$25(a0)
		move.w	#$3B,$30(a0)
		move.w	#0,$10(a0)
		move.b	#0,$1C(a0)
		rts	

loc_ADA4:				; ...
		addq.b	#2,$25(a0)
		move.w	#-$400,$12(a0)
		move.b	#2,$1C(a0)
		rts	

Obj2D_Jump:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		bmi.s	locret_ADF0
		move.b	#3,$1C(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_ADF0
		add.w	d1,$C(a0)
		move.w	#0,$12(a0)
		move.b	#1,$1C(a0)
		move.w	#$FF,$30(a0)
		subq.b	#2,$25(a0)
		bsr.w	Obj2D_ChkSonic2

locret_ADF0:				; ...
		rts	

Obj2D_ChkSonic:				; ...
		move.w	#$60,d2
		bsr.w	Obj2D_ChkSonic2
		bcc.s	locret_AE20
		move.w	($FFFFD00C).w,d0
		sub.w	$C(a0),d0
		bcc.s	locret_AE20
		cmpi.w	#-$80,d0
		bcs.s	locret_AE20
		tst.w	($FFFFFE08).w
		bne.s	locret_AE20
		subq.b	#2,$25(a0)
		move.w	d1,$10(a0)
		move.w	#-$400,$12(a0)

locret_AE20:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj2D_ChkSonic2:			; ...
		move.w	#$80,d1
		bset	#0,$22(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_AE40
		neg.w	d0
		neg.w	d1
		bclr	#0,$22(a0)

loc_AE40:				; ...
		cmp.w	d2,d0
		rts	
; End of function Obj2D_ChkSonic2

Ani_obj2D:	dc.w byte_AE4C-Ani_obj2D ; ...
		dc.w byte_AE50-Ani_obj2D
		dc.w byte_AE54-Ani_obj2D
		dc.w byte_AE58-Ani_obj2D
byte_AE4C:	dc.b 3,	0, 6, $FF	; ...
byte_AE50:	dc.b 3,	0, 1, $FF	; ...
byte_AE54:	dc.b 3,	2, 3, $FF	; ...
byte_AE58:	dc.b 3,	4, $FF,	0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Burrobot enemy (LZ)
; ---------------------------------------------------------------------------
Map_obj2D:	dc.w byte_AE6A-Map_obj2D ; ...
		dc.w byte_AE75-Map_obj2D
		dc.w byte_AE80-Map_obj2D
		dc.w byte_AE8B-Map_obj2D
		dc.w byte_AE96-Map_obj2D
		dc.w byte_AEA1-Map_obj2D
		dc.w byte_AEAC-Map_obj2D
byte_AE6A:	dc.b 2			; ...
		dc.b $EC, $A, 0, 0, $F0
		dc.b 4,	9, 0, 9, $F4
byte_AE75:	dc.b 2			; ...
		dc.b $EC, $A, 0, $F, $F0
		dc.b 4,	9, 0, $18, $F4
byte_AE80:	dc.b 2			; ...
		dc.b $E8, $A, 0, $1E, $F4
		dc.b 0,	$A, 0, $27, $F4
byte_AE8B:	dc.b 2			; ...
		dc.b $E8, $A, 0, $30, $F4
		dc.b 0,	$A, 0, $39, $F4
byte_AE96:	dc.b 2			; ...
		dc.b $E8, $A, 0, $F, $F0
		dc.b 0,	$A, 0, $42, $F4
byte_AEA1:	dc.b 2			; ...
		dc.b $F4, 6, 0,	$4B, $E8
		dc.b $F4, $A, 0, $51, $F8
byte_AEAC:	dc.b 2			; ...
		dc.b $EC, $A, 0, $F, $F0
		dc.b 4,	9, 0, 9, $F4
		dc.b 0

; ---------------------------------------------------------------------------
; Object 2F - large moving platforms (MZ)
; ---------------------------------------------------------------------------

Obj2F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj2F_Index(pc,d0.w),d1
		jmp	Obj2F_Index(pc,d1.w)
Obj2F_Index:	dc.w Obj2F_Main-Obj2F_Index ; ...
		dc.w Obj2F_Action-Obj2F_Index

Obj2F_Data:	dc.w Obj2F_Data1-Obj2F_Data ; ...
		dc.b 0,	$40
		dc.w Obj2F_Data3-Obj2F_Data ; collision	angle data
		dc.b 1,	$40		; frame	number,	platform width
		dc.w Obj2F_Data2-Obj2F_Data
		dc.b 2,	$20

Obj2F_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj2F,4(a0)
		move.w	#$C000,2(a0)
		move.b	#4,1(a0)
		move.b	#5,$18(a0)
		move.w	$C(a0),$2C(a0)
		move.w	8(a0),$2A(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#2,d0
		andi.w	#$1C,d0
		lea	Obj2F_Data(pc,d0.w),a1
		move.w	(a1)+,d0
		lea	Obj2F_Data(pc,d0.w),a2
		move.l	a2,$30(a0)
		move.b	(a1)+,$1A(a0)
		move.b	(a1),$19(a0)
		andi.b	#$F,$28(a0)
		move.b	#$40,$16(a0)
		bset	#4,1(a0)

Obj2F_Action:				; ...
		bsr.w	Obj2F_Types
		tst.b	$25(a0)
		beq.s	Obj2F_Solid
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		bsr.w	ExitPlatform
		btst	#3,$22(a1)
		bne.w	Obj2F_Slope
		clr.b	$25(a0)
		bra.s	Obj2F_Display

Obj2F_Slope:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		movea.l	$30(a0),a2
		move.w	8(a0),d2
		bsr.w	SlopeObject2
		bra.s	Obj2F_Display

Obj2F_Solid:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$20,d2
		cmpi.b	#2,$1A(a0)
		bne.s	loc_AF8E
		move.w	#$30,d2

loc_AF8E:				; ...
		movea.l	$30(a0),a2
		jsr	$880000+SolidObject2F

Obj2F_Display:				; ...
		jsr	$880000+DisplaySprite
		bra.w	Obj2F_ChkDel

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj2F_Types:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#7,d0
		add.w	d0,d0
		move.w	Obj2F_TypeIndex(pc,d0.w),d1
		jmp	Obj2F_TypeIndex(pc,d1.w)
; End of function Obj2F_Types

Obj2F_TypeIndex:dc.w Obj2F_Type00-Obj2F_TypeIndex ; ...
		dc.w Obj2F_Type01-Obj2F_TypeIndex
		dc.w Obj2F_Type02-Obj2F_TypeIndex
		dc.w Obj2F_Type03-Obj2F_TypeIndex
		dc.w Obj2F_Type04-Obj2F_TypeIndex
		dc.w Obj2F_Type05-Obj2F_TypeIndex

Obj2F_Type00:				; ...
		rts			; type 00 platform doesn't move

Obj2F_Type01:				; ...
		move.b	($FFFFFE60).w,d0
		move.w	#$20,d1
		bra.s	Obj2F_Move

Obj2F_Type02:				; ...
		move.b	($FFFFFE64).w,d0
		move.w	#$30,d1
		bra.s	Obj2F_Move

Obj2F_Type03:				; ...
		move.b	($FFFFFE68).w,d0
		move.w	#$40,d1
		bra.s	Obj2F_Move

Obj2F_Type04:				; ...
		move.b	($FFFFFE6C).w,d0
		move.w	#$60,d1

Obj2F_Move:				; ...
		btst	#3,$28(a0)
		beq.s	loc_AFF2
		neg.w	d0
		add.w	d1,d0

loc_AFF2:				; ...
		move.w	$2C(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; update position on y-axis
		rts	

Obj2F_Type05:				; ...
		move.b	$34(a0),d0
		tst.b	$25(a0)
		bne.s	loc_B010
		subq.b	#2,d0
		bcc.s	loc_B01C
		moveq	#0,d0
		bra.s	loc_B01C

loc_B010:				; ...
		addq.b	#4,d0
		cmpi.b	#$40,d0
		bcs.s	loc_B01C
		move.b	#$40,d0

loc_B01C:				; ...
		move.b	d0,$34(a0)
		jsr	$880000+(CalcSine).l
		lsr.w	#4,d0
		move.w	d0,d1
		add.w	$2C(a0),d0
		move.w	d0,$C(a0)
		cmpi.b	#$20,$34(a0)
		bne.s	loc_B07A
		tst.b	$35(a0)
		bne.s	loc_B07A
		move.b	#1,$35(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	loc_B07A
		move.b	#$35,0(a1)	; load sitting flame object
		move.w	8(a0),8(a1)
		move.w	$2C(a0),$2C(a1)
		addq.w	#8,$2C(a1)
		subq.w	#3,$2C(a1)
		subi.w	#$40,8(a1)
		move.l	$30(a0),$30(a1)
		move.l	a0,$38(a1)
		movea.l	a0,a2
		bsr.s	sub_B09C

loc_B07A:				; ...
		moveq	#0,d2
		lea	$36(a0),a2
		move.b	(a2)+,d2
		subq.b	#1,d2
		bcs.s	locret_B09A

loc_B086:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.w	#-$3000,d0
		movea.w	d0,a1
		move.w	d1,$3C(a1)
		dbf	d2,loc_B086

locret_B09A:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_B09C:				; ...
		lea	$36(a2),a2
		moveq	#0,d0
		move.b	(a2),d0
		addq.b	#1,(a2)
		lea	1(a2,d0.w),a2
		move.w	a1,d0
		subi.w	#-$3000,d0
		lsr.w	#6,d0
		andi.w	#$7F,d0
		move.b	d0,(a2)
		rts	
; End of function sub_B09C


Obj2F_ChkDel:				; ...
		tst.b	$35(a0)
		beq.s	loc_B0C6
		tst.b	1(a0)
		bpl.s	Obj2F_DelFlames

loc_B0C6:				; ...
		move.w	$2A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj2F_Delete
		rts
		
Obj2F_Delete:
		jmp	$880000+DeleteObject

Obj2F_DelFlames:			; ...
		moveq	#0,d2

loc_B0E8:
		lea	$36(a0),a2
		move.b	(a2),d2
		clr.b	(a2)+
		subq.b	#1,d2
		bcs.s	locret_B116

loc_B0F4:				; ...
		moveq	#0,d0
		move.b	(a2),d0
		clr.b	(a2)+
		lsl.w	#6,d0
		addi.w	#-$3000,d0
		movea.w	d0,a1
		jsr	$880000+DeleteObject2
		dbf	d2,loc_B0F4
		move.b	#0,$35(a0)
		move.b	#0,$34(a0)

locret_B116:				; ...
		rts	
; ---------------------------------------------------------------------------
; Collision data for large moving platforms (MZ)
; ---------------------------------------------------------------------------
Obj2F_Data1:	dc.b $20, $20, $20, $20, $20, $20, $20,	$20, $20, $20, $20, $20, $20, $20, $21,	$22 ; ...
		dc.b $23, $24, $25, $26, $27, $28, $29,	$2A, $2B, $2C, $2D, $2E, $2F, $30, $30,	$30
		dc.b $30, $30, $30, $30, $30, $30, $30,	$30, $30, $30, $30, $30, $30, $30, $30,	$2F
		dc.b $2E, $2D, $2C, $2B, $2A, $29, $28,	$27, $26, $25, $24, $23, $22, $21, $20,	$20
		dc.b $20, $20, $20, $20, $20, $20, $20,	$20, $20, $20, $20, $20
Obj2F_Data2:	dc.b $30, $30, $30, $30, $30, $30, $30,	$30, $30, $30, $30, $30, $30, $30, $30,	$30 ; ...
		dc.b $30, $30, $30, $30, $30, $30, $30,	$30, $30, $30, $30, $30, $30, $30, $30,	$30
		dc.b $30, $30, $30, $30, $30, $30, $30,	$30, $30, $30, $30, $30
Obj2F_Data3:	dc.b $20, $20, $20, $20, $20, $20, $21,	$22, $23, $24, $25, $26, $27, $28, $29,	$2A ; ...
		dc.b $2B, $2C, $2D, $2E, $2F, $30, $31,	$32, $33, $34, $35, $36, $37, $38, $39,	$3A
		dc.b $3B, $3C, $3D, $3E, $3F, $40, $40,	$40, $40, $40, $40, $40, $40, $40, $40,	$40
		dc.b $40, $40, $40, $40, $40, $40, $40,	$3F, $3E, $3D, $3C, $3B, $3A, $39, $38,	$37
		dc.b $36, $35, $34, $33, $32, $31, $30,	$30, $30, $30, $30, $30
; ---------------------------------------------------------------------------
; Object 35 - fireball that sits on the	floor (MZ)
; (appears when	you walk on sinking platforms)
; ---------------------------------------------------------------------------

Obj35:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj35_Index(pc,d0.w),d1
		jmp	Obj35_Index(pc,d1.w)
Obj35_Index:	dc.w Obj35_Main-Obj35_Index ; ...
		dc.w loc_B238-Obj35_Index
		dc.w Obj35_Move-Obj35_Index

Obj35_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj14,4(a0)
		move.w	#$345,2(a0)
		move.w	8(a0),$2A(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#$8B,$20(a0)
		move.b	#8,$19(a0)
		move.w	#$C8,d0
		jsr	$880000+(PlaySound_Special).l ;	play flame sound
		tst.b	$28(a0)
		beq.s	loc_B238
		addq.b	#2,$24(a0)
		bra.w	Obj35_Move

loc_B238:				; ...
		movea.l	$30(a0),a1
		move.w	8(a0),d1
		sub.w	$2A(a0),d1
		addi.w	#$C,d1
		move.w	d1,d0
		lsr.w	#1,d0
		move.b	(a1,d0.w),d0
		neg.w	d0
		add.w	$2C(a0),d0
		move.w	d0,d2
		add.w	$3C(a0),d0
		move.w	d0,$C(a0)
		cmpi.w	#$84,d1
		bcc.s	loc_B2B0
		addi.l	#$10000,8(a0)
		cmpi.w	#$80,d1
		bcc.s	loc_B2B0
		move.l	8(a0),d0
		addi.l	#$80000,d0
		andi.l	#$FFFFF,d0
		bne.s	loc_B2B0
		jsr	$880000+SingleObjLoad2
		bne.s	loc_B2B0
		move.b	#$35,0(a1)
		move.w	8(a0),8(a1)
		move.w	d2,$2C(a1)
		move.w	$3C(a0),$3C(a1)
		move.b	#1,$28(a1)
		movea.l	$38(a0),a2
		bsr.w	sub_B09C

loc_B2B0:				; ...
		bra.s	Obj35_Animate

Obj35_Move:				; ...
		move.w	$2C(a0),d0
		add.w	$3C(a0),d0
		move.w	d0,$C(a0)

Obj35_Animate:				; ...
		lea	$880000+(Ani_obj35).l,a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite
Ani_obj35:	dc.w byte_B2CE-Ani_obj35 ; ...
byte_B2CE:	dc.b 5,	0, $20,	1, $21,	$FF ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - large moving platforms (MZ)
; ---------------------------------------------------------------------------
Map_obj2F:	dc.w byte_B2DA-Map_obj2F ; ...
		dc.w byte_B31C-Map_obj2F
		dc.w byte_B34F-Map_obj2F
byte_B2DA:	dc.b $D			; ...
		dc.b $D8, 6, 0,	$57, $C0
		dc.b $F0, 5, 0,	$53, $C0
		dc.b 0,	$F, 0, 1, $C0
		dc.b $D0, $F, 0, $27, $D0
		dc.b $F0, $D, 0, $37, $D0
		dc.b $F0, $F, 0, 1, $E0
		dc.b $D0, $F, 0, $11, $F0
		dc.b $D0, $F, 0, $3F, $10
		dc.b $F0, $D, 0, $4F, $10
		dc.b $F0, $F, 0, 1, 0
		dc.b 0,	$F, 0, 1, $20
		dc.b $D8, 6, 0,	$57, $30
		dc.b $F0, 5, 0,	$53, $30
byte_B31C:	dc.b $A			; ...
		dc.b $D0, $F, 0, $27, $C0
		dc.b $F0, $D, 0, $37, $C0
		dc.b 0,	$F, 0, 1, $C0
		dc.b $C0, $F, 0, $27, $E0
		dc.b $E0, $D, 0, $37, $E0
		dc.b $F0, $F, 0, 1, $E0
		dc.b $C0, $F, 0, $11, 0
		dc.b $E0, $F, 0, 1, 0
		dc.b $C0, $F, 0, $3F, $20
		dc.b $E0, $D, 0, $4F, $20
byte_B34F:	dc.b 6			; ...
		dc.b $D0, $F, 0, $11, $E0
		dc.b $F0, $F, 0, 1, $E0
		dc.b $10, $F, 0, 1, $E0
		dc.b $D0, $F, 0, $11, 0
		dc.b $F0, $F, 0, 1, 0
		dc.b $10, $F, 0, 1, 0
; ---------------------------------------------------------------------------
; Sprite mappings - lava balls (MZ, SLZ)
; ---------------------------------------------------------------------------
Map_obj14:	dc.w byte_B37A-Map_obj14 ; ...
		dc.w byte_B380-Map_obj14
		dc.w byte_B386-Map_obj14
		dc.w byte_B38C-Map_obj14
		dc.w byte_B392-Map_obj14
		dc.w byte_B398-Map_obj14
byte_B37A:	dc.b 1			; ...
		dc.b $E8, 7, 0,	0, $F8
byte_B380:	dc.b 1			; ...
		dc.b $E8, 7, 0,	8, $F8
byte_B386:	dc.b 1			; ...
		dc.b $F0, 6, 0,	$10, $F8
byte_B38C:	dc.b 1			; ...
		dc.b $F8, $D, 0, $16, $E8
byte_B392:	dc.b 1			; ...
		dc.b $F8, $D, 0, $1E, $E8
byte_B398:	dc.b 1			; ...
		dc.b $F8, 9, 0,	$26, $F0
; ---------------------------------------------------------------------------
; Object 30 - large green glassy blocks	(MZ)
; ---------------------------------------------------------------------------

Obj30:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj30_Index(pc,d0.w),d1
		jsr	Obj30_Index(pc,d1.w)
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj30_Delete
		jmp	$880000+DisplaySprite

Obj30_Delete:				; ...
		jmp	$880000+DeleteObject
Obj30_Index:	dc.w Obj30_Main-Obj30_Index ; ...
		dc.w Obj30_Block012-Obj30_Index
		dc.w Obj30_Reflect012-Obj30_Index
		dc.w Obj30_Block34-Obj30_Index
		dc.w Obj30_Reflect34-Obj30_Index
Obj30_Vars1:	dc.b 2,	0, 0		; ...
		dc.b 4,	0, 1		; routine num, y-axis dist from	origin,	frame num
Obj30_Vars2:	dc.b 6,	0, 2		; ...
		dc.b 8,	0, 1

Obj30_Main:				; ...
		lea	(Obj30_Vars1)(pc),a2
		moveq	#1,d1
		move.b	#$48,$16(a0)
		cmpi.b	#3,$28(a0)	; is object type 0/1/2 ?
		bcs.s	loc_B40C	; if yes, branch
		lea	(Obj30_Vars2)(pc),a2
		moveq	#1,d1
		move.b	#$38,$16(a0)

loc_B40C:				; ...
		movea.l	a0,a1
		bra.s	Obj30_Load	; load main object

Obj30_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_B480

Obj30_Load:				; ...
		move.b	(a2)+,$24(a1)
		move.b	#$30,0(a1)
		move.w	8(a0),8(a1)
		move.b	(a2)+,d0
		ext.w	d0
		add.w	$C(a0),d0
		move.w	d0,$C(a1)
		move.l	#$880000+Map_obj30,4(a1)
		move.w	#$C38E,2(a1)
		move.b	#4,1(a1)
		move.w	$C(a1),$30(a1)
		move.b	$28(a0),$28(a1)
		move.b	#$20,$19(a1)
		move.b	#4,$18(a1)
		move.b	(a2)+,$1A(a1)
		move.l	a0,$3C(a1)
		dbf	d1,Obj30_Loop	; repeat once to load "reflection object"
		move.b	#$10,$19(a1)
		move.b	#3,$18(a1)
		addq.b	#8,$28(a1)
		andi.b	#$F,$28(a1)

loc_B480:				; ...
		move.w	#$90,$32(a0)
		bset	#4,1(a0)

Obj30_Block012:				; ...
		bsr.w	Obj30_Types
		move.w	#$2B,d1
		move.w	#$48,d2
		move.w	#$49,d3
		move.w	8(a0),d4
		jmp	$880000+SolidObject

Obj30_Reflect012:			; ...
		movea.l	$3C(a0),a1
		move.w	$32(a1),$32(a0)
		bra.w	Obj30_Types

Obj30_Block34:				; ...
		bsr.w	Obj30_Types
		move.w	#$2B,d1
		move.w	#$38,d2
		move.w	#$39,d3
		move.w	8(a0),d4
		jmp	$880000+SolidObject

Obj30_Reflect34:			; ...
		movea.l	$3C(a0),a1
		move.w	$32(a1),$32(a0)
		move.w	$C(a1),$30(a0)
		bra.w	*+4

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj30_Types:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#7,d0
		add.w	d0,d0
		move.w	Obj30_TypeIndex(pc,d0.w),d1
		jmp	Obj30_TypeIndex(pc,d1.w)
; End of function Obj30_Types

Obj30_TypeIndex:dc.w Obj30_Type00-Obj30_TypeIndex ; ...
		dc.w Obj30_Type01-Obj30_TypeIndex
		dc.w Obj30_Type02-Obj30_TypeIndex
		dc.w Obj30_Type03-Obj30_TypeIndex
		dc.w Obj30_Type04-Obj30_TypeIndex

Obj30_Type00:				; ...
		rts	

Obj30_Type01:				; ...
		move.b	($FFFFFE70).w,d0
		move.w	#$40,d1
		bra.s	loc_B514

Obj30_Type02:				; ...
		move.b	($FFFFFE70).w,d0
		move.w	#$40,d1
		neg.w	d0
		add.w	d1,d0

loc_B514:				; ...
		btst	#3,$28(a0)
		beq.s	loc_B526
		neg.w	d0
		add.w	d1,d0
		lsr.b	#1,d0
		addi.w	#$20,d0

loc_B526:				; ...
		bra.w	loc_B5EE

Obj30_Type03:				; ...
		btst	#3,$28(a0)
		beq.s	loc_B53E
		move.b	($FFFFFE70).w,d0
		subi.w	#$10,d0
		bra.w	loc_B5EE

loc_B53E:				; ...
		btst	#3,$22(a0)
		bne.s	loc_B54E
		bclr	#0,$34(a0)
		bra.s	loc_B582

loc_B54E:				; ...
		tst.b	$34(a0)
		bne.s	loc_B582
		move.b	#1,$34(a0)
		bset	#0,$35(a0)
		beq.s	loc_B582
		bset	#7,$34(a0)
		move.w	#$10,$36(a0)
		move.b	#$A,$38(a0)
		cmpi.w	#$40,$32(a0)
		bne.s	loc_B582
		move.w	#$40,$36(a0)

loc_B582:				; ...
		tst.b	$34(a0)
		bpl.s	loc_B5AA
		tst.b	$38(a0)
		beq.s	loc_B594
		subq.b	#1,$38(a0)
		bne.s	loc_B5AA

loc_B594:				; ...
		tst.w	$32(a0)
		beq.s	loc_B5A4
		subq.w	#1,$32(a0)
		subq.w	#1,$36(a0)
		bne.s	loc_B5AA

loc_B5A4:				; ...
		bclr	#7,$34(a0)

loc_B5AA:				; ...
		move.w	$32(a0),d0
		bra.s	loc_B5EE

Obj30_Type04:				; ...
		btst	#3,$28(a0)
		beq.s	Obj30_ChkSwitch
		move.b	($FFFFFE70).w,d0
		subi.w	#$10,d0
		bra.s	loc_B5EE

Obj30_ChkSwitch:			; ...
		tst.b	$34(a0)
		bne.s	loc_B5E0
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$28(a0),d0	; load object type number
		lsr.w	#4,d0		; read only the	first nybble
		tst.b	(a2,d0.w)	; has switch number d0 been pressed?
		beq.s	loc_B5EA	; if not, branch
		move.b	#1,$34(a0)

loc_B5E0:				; ...
		tst.w	$32(a0)
		beq.s	loc_B5EA
		subq.w	#2,$32(a0)

loc_B5EA:				; ...
		move.w	$32(a0),d0

loc_B5EE:				; ...
		move.w	$30(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - large green	glassy blocks (MZ)
; ---------------------------------------------------------------------------
Map_obj30:	dc.w byte_B600-Map_obj30 ; ...
		dc.w byte_B63D-Map_obj30
		dc.w byte_B648-Map_obj30
byte_B600:	dc.b $C			; ...
		dc.b $B8, $C, 0, 0, $E0
		dc.b $B8, $C, 8, 0, 0
		dc.b $C0, $F, 0, 4, $E0
		dc.b $C0, $F, 8, 4, 0
		dc.b $E0, $F, 0, 4, $E0
		dc.b $E0, $F, 8, 4, 0
		dc.b 0,	$F, 0, 4, $E0
		dc.b 0,	$F, 8, 4, 0
		dc.b $20, $F, 0, 4, $E0
		dc.b $20, $F, 8, 4, 0
		dc.b $40, $C, $10, 0, $E0
		dc.b $40, $C, $18, 0, 0
byte_B63D:	dc.b 2			; ...
		dc.b 8,	6, 0, $14, $F0
		dc.b 0,	6, 0, $14, 0
byte_B648:	dc.b $A			; ...
		dc.b $C8, $C, 0, 0, $E0
		dc.b $C8, $C, 8, 0, 0
		dc.b $D0, $F, 0, 4, $E0
		dc.b $D0, $F, 8, 4, 0
		dc.b $F0, $F, 0, 4, $E0
		dc.b $F0, $F, 8, 4, 0
		dc.b $10, $F, 0, 4, $E0
		dc.b $10, $F, 8, 4, 0
		dc.b $30, $C, $10, 0, $E0
		dc.b $30, $C, $18, 0, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 31 - stomping metal blocks on chains (MZ)
; ---------------------------------------------------------------------------

Obj31:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj31_Index(pc,d0.w),d1
		jmp	Obj31_Index(pc,d1.w)
Obj31_Index:	dc.w Obj31_Main-Obj31_Index ; ...
		dc.w loc_B798-Obj31_Index
		dc.w loc_B7FE-Obj31_Index
		dc.w Obj31_Display2-Obj31_Index
		dc.w loc_B7E2-Obj31_Index

Obj31_SwchNums:	dc.b 0,	0		; switch number, obj number
		dc.b 1,	0

Obj31_Var:	dc.b 2,	0, 0		; ...
		dc.b 4,	$1C, 1		; routine number, y-position, frame number
		dc.b 8,	$CC, 3
		dc.b 6,	$F0, 2

word_B6A4:	dc.w $7000, $A000
		dc.w $5000, $7800
		dc.w $3800, $5800
		dc.w $B800

Obj31_Main:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		bpl.s	loc_B6CE
		andi.w	#$7F,d0
		add.w	d0,d0
		lea	Obj31_SwchNums(pc,d0.w),a2
		move.b	(a2)+,$3A(a0)
		move.b	(a2)+,d0
		move.b	d0,$28(a0)

loc_B6CE:				; ...
		andi.b	#$F,d0
		add.w	d0,d0
		move.w	word_B6A4(pc,d0.w),d2
		tst.w	d0
		bne.s	loc_B6E0
		move.w	d2,$32(a0)

loc_B6E0:				; ...
		lea	(Obj31_Var)(pc),a2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj31_MakeStomper

Obj31_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.w	Obj31_SetSize

Obj31_MakeStomper:			; ...
		move.b	(a2)+,$24(a1)
		move.b	#$31,0(a1)
		move.w	8(a0),8(a1)
		move.b	(a2)+,d0
		ext.w	d0
		add.w	$C(a0),d0
		move.w	d0,$C(a1)
		move.l	#$880000+Map_obj31,4(a1)
		move.w	#$300,2(a1)
		move.b	#4,1(a1)
		move.w	$C(a1),$30(a1)
		move.b	$28(a0),$28(a1)
		move.b	#$10,$19(a1)
		move.w	d2,$34(a1)
		move.b	#4,$18(a1)
		move.b	(a2)+,$1A(a1)
		cmpi.b	#1,$1A(a1)
		bne.s	loc_B76A
		subq.w	#1,d1
		move.b	$28(a0),d0
		andi.w	#$F0,d0
		cmpi.w	#$20,d0
		beq.s	Obj31_MakeStomper
		move.b	#$38,$19(a1)
		move.b	#$90,$20(a1)
		addq.w	#1,d1

loc_B76A:				; ...
		move.l	a0,$3C(a1)
		dbf	d1,Obj31_Loop
		move.b	#3,$18(a1)

Obj31_SetSize:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#3,d0
		andi.b	#$E,d0
		lea	Obj31_Var2(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2)+,$1A(a0)
		bra.s	loc_B798
Obj31_Var2:	dc.b $38, 0		; width, frame number
		dc.b $30, 9
		dc.b $10, $A

loc_B798:				; ...
		bsr.w	Obj31_Types
		move.w	$C(a0),($FFFFF7A4).w
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$C,d2
		move.w	#$D,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#3,$22(a0)
		beq.s	Obj31_Display
		cmpi.b	#$10,$32(a0)
		bcc.s	Obj31_Display
		movea.l	a0,a2
		lea	($FFFFD000).w,a0
		jsr	$880000+KillSonic
		movea.l	a2,a0

Obj31_Display:				; ...
		jsr	$880000+DisplaySprite
		bra.w	Obj31_ChkDel

loc_B7E2:				; ...
		move.b	#$80,$16(a0)
		bset	#4,1(a0)
		movea.l	$3C(a0),a1
		move.b	$32(a1),d0
		lsr.b	#5,d0
		addq.b	#3,d0
		move.b	d0,$1A(a0)

loc_B7FE:				; ...
		movea.l	$3C(a0),a1
		moveq	#0,d0
		move.b	$32(a1),d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)

Obj31_Display2:				; ...
		jsr	$880000+DisplaySprite

Obj31_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj31_Delete
		rts	
		
Obj31_Delete:
		jmp	$880000+DeleteObject

Obj31_Types:				; ...
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj31_TypeIndex(pc,d0.w),d1
		jmp	Obj31_TypeIndex(pc,d1.w)
Obj31_TypeIndex:dc.w Obj31_Type00-Obj31_TypeIndex ; ...
		dc.w Obj31_Type01-Obj31_TypeIndex
		dc.w Obj31_Type01-Obj31_TypeIndex
		dc.w Obj31_Type03-Obj31_TypeIndex
		dc.w Obj31_Type01-Obj31_TypeIndex
		dc.w Obj31_Type03-Obj31_TypeIndex
		dc.w Obj31_Type01-Obj31_TypeIndex

Obj31_Type00:				; ...
		lea	($FFFFF7E0).w,a2 ; load	switch statuses
		moveq	#0,d0
		move.b	$3A(a0),d0	; move number 0	or 1 to	d0
		tst.b	(a2,d0.w)	; has switch (d0) been pressed?
		beq.s	loc_B8A8	; if not, branch
		tst.w	($FFFFF7A4).w
		bpl.s	loc_B872
		cmpi.b	#$10,$32(a0)
		beq.s	loc_B8A0

loc_B872:				; ...
		tst.w	$32(a0)
		beq.s	loc_B8A0
		move.b	($FFFFFE0F).w,d0
		andi.b	#$F,d0
		bne.s	loc_B892
		tst.b	1(a0)
		bpl.s	loc_B892
		move.w	#$C7,d0
		jsr	$880000+(PlaySound_Special).l ;	play rising chain sound

loc_B892:				; ...
		subi.w	#$80,$32(a0)
		bcc.s	Obj31_Restart
		move.w	#0,$32(a0)

loc_B8A0:				; ...
		move.w	#0,$12(a0)
		bra.s	Obj31_Restart

loc_B8A8:				; ...
		move.w	$34(a0),d1
		cmp.w	$32(a0),d1
		beq.s	Obj31_Restart
		move.w	$12(a0),d0
		addi.w	#$70,$12(a0)	; make object fall
		add.w	d0,$32(a0)
		cmp.w	$32(a0),d1
		bhi.s	Obj31_Restart
		move.w	d1,$32(a0)
		move.w	#0,$12(a0)	; stop object falling
		tst.b	1(a0)
		bpl.s	Obj31_Restart
		move.w	#$BD,d0
		jsr	$880000+(PlaySound_Special).l ;	play stomping sound

Obj31_Restart:				; ...
		moveq	#0,d0
		move.b	$32(a0),d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		rts	

Obj31_Type01:				; ...
		tst.w	$36(a0)
		beq.s	loc_B938
		tst.w	$38(a0)
		beq.s	loc_B902
		subq.w	#1,$38(a0)
		bra.s	loc_B97C

loc_B902:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#$F,d0
		bne.s	loc_B91C
		tst.b	1(a0)
		bpl.s	loc_B91C
		move.w	#$C7,d0
		jsr	$880000+(PlaySound_Special).l ;	play rising chain sound

loc_B91C:				; ...
		subi.w	#$80,$32(a0)
		bcc.s	loc_B97C
		move.w	#0,$32(a0)
		move.w	#0,$12(a0)
		move.w	#0,$36(a0)
		bra.s	loc_B97C

loc_B938:				; ...
		move.w	$34(a0),d1
		cmp.w	$32(a0),d1
		beq.s	loc_B97C
		move.w	$12(a0),d0
		addi.w	#$70,$12(a0)	; make object fall
		add.w	d0,$32(a0)
		cmp.w	$32(a0),d1
		bhi.s	loc_B97C
		move.w	d1,$32(a0)
		move.w	#0,$12(a0)	; stop object falling
		move.w	#1,$36(a0)
		move.w	#$3C,$38(a0)
		tst.b	1(a0)
		bpl.s	loc_B97C
		move.w	#$BD,d0
		jsr	$880000+(PlaySound_Special).l ;	play stomping sound

loc_B97C:				; ...
		bra.w	Obj31_Restart

Obj31_Type03:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_B98C
		neg.w	d0

loc_B98C:				; ...
		cmpi.w	#$90,d0
		bcc.s	loc_B996
		addq.b	#1,$28(a0)

loc_B996:				; ...
		bra.w	Obj31_Restart
; ---------------------------------------------------------------------------
; Object 45 - spiked metal block from beta version (MZ)
; ---------------------------------------------------------------------------

Obj45:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj45_Index(pc,d0.w),d1
		jmp	Obj45_Index(pc,d1.w)
Obj45_Index:	dc.w Obj45_Main-Obj45_Index ; ...
		dc.w Obj45_Solid-Obj45_Index
		dc.w loc_BA8E-Obj45_Index
		dc.w Obj45_Display-Obj45_Index
		dc.w loc_BA7A-Obj45_Index

Obj45_Var:	dc.b	2,   4,	  0	; ...
		dc.b	4, $E4,	  1	; routine number, x-position, frame number
		dc.b	8, $34,	  3
		dc.b	6, $28,	  2

word_B9BE:	dc.w $3800
		dc.w -$6000
		dc.w $5000

Obj45_Main:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	word_B9BE(pc,d0.w),d2
		lea	(Obj45_Var)(pc),a2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj45_Load

Obj45_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_BA52

Obj45_Load:				; ...
		move.b	(a2)+,$24(a1)
		move.b	#$45,0(a1)
		move.w	$C(a0),$C(a1)
		move.b	(a2)+,d0
		ext.w	d0
		add.w	8(a0),d0
		move.w	d0,8(a1)
		move.l	#$880000+Map_obj45,4(a1)
		move.w	#$300,2(a1)
		move.b	#4,1(a1)
		move.w	8(a1),$30(a1)
		move.w	8(a0),$3A(a1)
		move.b	$28(a0),$28(a1)
		move.b	#$20,$19(a1)
		move.w	d2,$34(a1)
		move.b	#4,$18(a1)
		cmpi.b	#1,(a2)
		bne.s	loc_BA40
		move.b	#$91,$20(a1)

loc_BA40:				; ...
		move.b	(a2)+,$1A(a1)
		move.l	a0,$3C(a1)
		dbf	d1,Obj45_Loop	; repeat 3 times
		move.b	#3,$18(a1)

loc_BA52:				; ...
		move.b	#$10,$19(a0)

Obj45_Solid:				; ...
		move.w	8(a0),-(sp)
		bsr.w	Obj45_Move
		move.w	#$17,d1
		move.w	#$20,d2
		move.w	#$20,d3
		move.w	(sp)+,d4
		jsr	$880000+SolidObject
		jsr	$880000+DisplaySprite
		bra.w	Obj45_ChkDel

loc_BA7A:				; ...
		movea.l	$3C(a0),a1
		move.b	$32(a1),d0
		addi.b	#$10,d0
		lsr.b	#5,d0
		addq.b	#3,d0
		move.b	d0,$1A(a0)

loc_BA8E:				; ...
		movea.l	$3C(a0),a1
		moveq	#0,d0
		move.b	$32(a1),d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,8(a0)

Obj45_Display:				; ...
		jsr	$880000+DisplaySprite

Obj45_ChkDel:				; ...
		move.w	$3A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj45_Delete
		rts	
		
Obj45_Delete:
		jmp	$880000+DeleteObject

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj45_Move:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	off_BAD6(pc,d0.w),d1
		jmp	off_BAD6(pc,d1.w)
; End of function Obj45_Move

off_BAD6:	dc.w loc_BADA-off_BAD6	; ...
		dc.w loc_BADA-off_BAD6

loc_BADA:				; ...
		tst.w	$36(a0)
		beq.s	loc_BB08
		tst.w	$38(a0)
		beq.s	loc_BAEC
		subq.w	#1,$38(a0)
		bra.s	loc_BB3C

loc_BAEC:				; ...
		subi.w	#$80,$32(a0)
		bcc.s	loc_BB3C
		move.w	#0,$32(a0)
		move.w	#0,$10(a0)
		move.w	#0,$36(a0)
		bra.s	loc_BB3C

loc_BB08:				; ...
		move.w	$34(a0),d1
		cmp.w	$32(a0),d1
		beq.s	loc_BB3C
		move.w	$10(a0),d0
		addi.w	#$70,$10(a0)
		add.w	d0,$32(a0)
		cmp.w	$32(a0),d1
		bhi.s	loc_BB3C
		move.w	d1,$32(a0)
		move.w	#0,$10(a0)
		move.w	#1,$36(a0)
		move.w	#$3C,$38(a0)

loc_BB3C:				; ...
		moveq	#0,d0
		move.b	$32(a0),d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,8(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - metal stomping blocks on chains (MZ)
; ---------------------------------------------------------------------------
Map_obj31:	dc.w byte_BB64-Map_obj31 ; ...
		dc.w byte_BB7E-Map_obj31
		dc.w byte_BB98-Map_obj31
		dc.w byte_BB9E-Map_obj31
		dc.w byte_BBA9-Map_obj31
		dc.w byte_BBBE-Map_obj31
		dc.w byte_BBDD-Map_obj31
		dc.w byte_BC06-Map_obj31
		dc.w byte_BC06-Map_obj31
		dc.w byte_BC39-Map_obj31
		dc.w byte_BC53-Map_obj31
byte_BB64:	dc.b 5			; ...
		dc.b $F4, 6, 0,	0, $C8
		dc.b $F4, $A, 0, 6, $D8
		dc.b $EC, $F, 0, $F, $F0
		dc.b $F4, $A, 8, 6, $10
		dc.b $F4, 6, 8,	0, $28
byte_BB7E:	dc.b 5			; ...
		dc.b $F0, 3, $12, $1F, $D4
		dc.b $F0, 3, $12, $1F, $E8
		dc.b $F0, 3, $12, $1F, $FC
		dc.b $F0, 3, $12, $1F, $10
		dc.b $F0, 3, $12, $1F, $24
byte_BB98:	dc.b 1			; ...
		dc.b $DC, $F, $10, $F, $F0
byte_BB9E:	dc.b 2			; ...
		dc.b 0,	1, 0, $3F, $FC
		dc.b $10, 1, 0,	$3F, $FC
byte_BBA9:	dc.b 4			; ...
		dc.b $E0, 1, 0,	$3F, $FC
		dc.b $F0, 1, 0,	$3F, $FC
		dc.b 0,	1, 0, $3F, $FC
		dc.b $10, 1, 0,	$3F, $FC
byte_BBBE:	dc.b 6			; ...
		dc.b $C0, 1, 0,	$3F, $FC
		dc.b $D0, 1, 0,	$3F, $FC
		dc.b $E0, 1, 0,	$3F, $FC
		dc.b $F0, 1, 0,	$3F, $FC
		dc.b 0,	1, 0, $3F, $FC
		dc.b $10, 1, 0,	$3F, $FC
byte_BBDD:	dc.b 8			; ...
		dc.b $A0, 1, 0,	$3F, $FC
		dc.b $B0, 1, 0,	$3F, $FC
		dc.b $C0, 1, 0,	$3F, $FC
		dc.b $D0, 1, 0,	$3F, $FC
		dc.b $E0, 1, 0,	$3F, $FC
		dc.b $F0, 1, 0,	$3F, $FC
		dc.b 0,	1, 0, $3F, $FC
		dc.b $10, 1, 0,	$3F, $FC
byte_BC06:	dc.b $A			; ...
		dc.b $80, 1, 0,	$3F, $FC
		dc.b $90, 1, 0,	$3F, $FC
		dc.b $A0, 1, 0,	$3F, $FC
		dc.b $B0, 1, 0,	$3F, $FC
		dc.b $C0, 1, 0,	$3F, $FC
		dc.b $D0, 1, 0,	$3F, $FC
		dc.b $E0, 1, 0,	$3F, $FC
		dc.b $F0, 1, 0,	$3F, $FC
		dc.b 0,	1, 0, $3F, $FC
		dc.b $10, 1, 0,	$3F, $FC
byte_BC39:	dc.b 5			; ...
		dc.b $F4, 6, 0,	0, $D0
		dc.b $F4, $A, 0, 6, $E0
		dc.b $F4, $A, 8, 6, 8
		dc.b $F4, 6, 8,	0, $20
		dc.b $EC, $F, 0, $F, $F0
byte_BC53:	dc.b 1			; ...
		dc.b $EC, $F, 0, $2F, $F0
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - spiked metal block from beta version (MZ)
; ---------------------------------------------------------------------------
Map_obj45:	dc.w byte_BC6C-Map_obj45 ; ...
		dc.w byte_BC7C-Map_obj45
		dc.w byte_BC8C-Map_obj45
		dc.w byte_BC92-Map_obj45
		dc.w byte_BC9D-Map_obj45
		dc.w byte_BCB2-Map_obj45
		dc.w byte_BCD1-Map_obj45
		dc.w byte_BCFA-Map_obj45
		dc.w byte_BCFA-Map_obj45
byte_BC6C:	dc.b 3			; ...
		dc.b $E0, $B, 0, $1F, $F4
		dc.b 0,	$B, $10, $1F, $F4
		dc.b $F0, 3, 0,	$2B, $C
byte_BC7C:	dc.b 3			; ...
		dc.b $E8, $C, $12, $1B,	$F0
		dc.b $FC, $C, $12, $1B,	$F0
		dc.b $10, $C, $12, $1B,	$F0
byte_BC8C:	dc.b 1			; ...
		dc.b $F0, 3, 8,	$2B, $FC
byte_BC92:	dc.b 2			; ...
		dc.b $F8, 5, 0,	$41, $E0
		dc.b $F8, 5, 0,	$41, $F0
byte_BC9D:	dc.b 4			; ...
		dc.b $F8, 5, 0,	$41, $E0
		dc.b $F8, 5, 0,	$41, $F0
		dc.b $F8, 5, 0,	$41, 0
		dc.b $F8, 5, 0,	$41, $10
byte_BCB2:	dc.b 6			; ...
		dc.b $F8, 5, 0,	$41, $E0
		dc.b $F8, 5, 0,	$41, $F0
		dc.b $F8, 5, 0,	$41, 0
		dc.b $F8, 5, 0,	$41, $10
		dc.b $F8, 5, 0,	$41, $20
		dc.b $F8, 5, 0,	$41, $30
byte_BCD1:	dc.b 8			; ...
		dc.b $F8, 5, 0,	$41, $E0
		dc.b $F8, 5, 0,	$41, $F0
		dc.b $F8, 5, 0,	$41, 0
		dc.b $F8, 5, 0,	$41, $10
		dc.b $F8, 5, 0,	$41, $20
		dc.b $F8, 5, 0,	$41, $30
		dc.b $F8, 5, 0,	$41, $40
		dc.b $F8, 5, 0,	$41, $50
byte_BCFA:	dc.b 8			; ...
		dc.b $F8, 5, 0,	$41, $E0
		dc.b $F8, 5, 0,	$41, $F0
		dc.b $F8, 5, 0,	$41, 0
		dc.b $F8, 5, 0,	$41, $10
		dc.b $F8, 5, 0,	$41, $20
		dc.b $F8, 5, 0,	$41, $30
		dc.b $F8, 5, 0,	$41, $40
		dc.b $F8, 5, 0,	$41, $50
		dc.b $F8, 5, 0,	$41, $60
		dc.b $F8, 5, 0,	$41, $70
		dc.b 0
		
; ---------------------------------------------------------------------------
; Object 32 - switches (MZ, SYZ, LZ, SBZ)
; ---------------------------------------------------------------------------

Obj32:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj32_Index(pc,d0.w),d1
		jmp	Obj32_Index(pc,d1.w)
Obj32_Index:	dc.w Obj32_Main-Obj32_Index ; ...
		dc.w Obj32_Pressed-Obj32_Index

Obj32_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj32,4(a0)
		move.w	#$4513,2(a0)	; MZ specific code
		cmpi.b	#2,($FFFFFE10).w
		beq.s	loc_BD60
		move.w	#$513,2(a0)	; SYZ, LZ and SBZ specific code

loc_BD60:				; ...
		move.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		addq.w	#3,$C(a0)

Obj32_Pressed:				; ...
		tst.b	1(a0)
		bpl.s	Obj32_Display
		move.w	#$1B,d1
		move.w	#5,d2
		move.w	#5,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		bclr	#0,$1A(a0)	; use "unpressed" frame
		move.b	$28(a0),d0
		andi.w	#$F,d0
		lea	($FFFFF7E0).w,a3
		lea	(a3,d0.w),a3
		moveq	#0,d3
		btst	#6,$28(a0)
		beq.s	loc_BDB2
		moveq	#7,d3

loc_BDB2:				; ...
		tst.b	$28(a0)
		bpl.s	loc_BDBE
		bsr.w	Obj32_MZBlock
		bne.s	loc_BDC8

loc_BDBE:				; ...
		tst.b	$25(a0)
		bne.s	loc_BDC8
		bclr	d3,(a3)
		bra.s	loc_BDDE

loc_BDC8:				; ...
		tst.b	(a3)
		bne.s	loc_BDD6
		move.w	#$CD,d0
		jsr	$880000+(PlaySound_Special).l ;	play switch sound

loc_BDD6:				; ...
		bset	d3,(a3)
		bset	#0,$1A(a0)	; use "pressed"	frame

loc_BDDE:				; ...
		btst	#5,$28(a0)
		beq.s	Obj32_Display
		subq.b	#1,$1E(a0)
		bpl.s	Obj32_Display
		move.b	#7,$1E(a0)
		bchg	#1,$1A(a0)

Obj32_Display:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj32_Delete
		rts	

Obj32_Delete:				; ...
		jsr	$880000+DeleteObject
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj32_MZBlock:				; ...
		move.w	d3,-(sp)
		move.w	8(a0),d2
		move.w	$C(a0),d3
		subi.w	#$10,d2
		subq.w	#8,d3
		move.w	#$20,d4
		move.w	#$10,d5
		lea	($FFFFD800).w,a1 ; begin checking object RAM
		move.w	#$5F,d6

Obj32_MZLoop:				; ...
		tst.b	1(a1)
		bpl.s	loc_BE4E
		cmpi.b	#$33,(a1)	; is the object	a green	MZ block?
		beq.s	loc_BE5E	; if yes, branch

loc_BE4E:				; ...
		lea	$40(a1),a1	; check	next object
		dbf	d6,Obj32_MZLoop	; repeat $5F times
		move.w	(sp)+,d3
		moveq	#0,d0

locret_BE5A:
		rts	
Obj32_MZData:	dc.b $10, $10		; ...

loc_BE5E:				; ...
		moveq	#1,d0
		andi.w	#$3F,d0
		add.w	d0,d0
		lea	Obj32_MZData-2(pc,d0.w),a2
		move.b	(a2)+,d1
		ext.w	d1
		move.w	8(a1),d0
		sub.w	d1,d0
		sub.w	d2,d0
		bcc.s	loc_BE80
		add.w	d1,d1
		add.w	d1,d0
		bcs.s	loc_BE84
		bra.s	loc_BE4E

loc_BE80:				; ...
		cmp.w	d4,d0
		bhi.s	loc_BE4E

loc_BE84:				; ...
		move.b	(a2)+,d1
		ext.w	d1
		move.w	$C(a1),d0
		sub.w	d1,d0
		sub.w	d3,d0
		bcc.s	loc_BE9A
		add.w	d1,d1
		add.w	d1,d0
		bcs.s	loc_BE9E
		bra.s	loc_BE4E

loc_BE9A:				; ...
		cmp.w	d5,d0
		bhi.s	loc_BE4E

loc_BE9E:				; ...
		move.w	(sp)+,d3
		moveq	#1,d0
		rts	
; End of function Obj32_MZBlock

; ---------------------------------------------------------------------------
; Sprite mappings - switches (MZ, SYZ, LZ, SBZ)
; ---------------------------------------------------------------------------
Map_obj32:	dc.w byte_BEAC-Map_obj32 ; ...
		dc.w byte_BEB7-Map_obj32
		dc.w byte_BEC2-Map_obj32
		dc.w byte_BEB7-Map_obj32
byte_BEAC:	dc.b 2			; ...
		dc.b $F5, 5, 0,	0, $F0
		dc.b $F5, 5, 8,	0, 0
byte_BEB7:	dc.b 2			; ...
		dc.b $F5, 5, 0,	4, $F0
		dc.b $F5, 5, 8,	4, 0
byte_BEC2:	dc.b 2			; ...
		dc.b $F5, 5, $FF, $FC, $F0
		dc.b $F5, 5, 7,	$FC, 0
		dc.b $F8, 5, 0,	0, $F8
; ---------------------------------------------------------------------------
; Object 33 - pushable blocks (MZ, LZ)
; ---------------------------------------------------------------------------

Obj33:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj33_Index(pc,d0.w),d1
		jmp	Obj33_Index(pc,d1.w)
Obj33_Index:	dc.w Obj33_Main-Obj33_Index ; ...
		dc.w loc_BF6E-Obj33_Index
		dc.w loc_C02C-Obj33_Index
Obj33_Var:	dc.b $10, 0		; object width,	frame number
		dc.b $40, 1

Obj33_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$F,$16(a0)
		move.b	#$F,$17(a0)
		move.l	#$880000+Map_obj33,4(a0)
		move.w	#$42B8,2(a0)	; MZ specific code
		cmpi.b	#1,($FFFFFE10).w
		bne.s	loc_BF16
		move.w	#$43DE,2(a0)	; LZ specific code

loc_BF16:				; ...
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.w	8(a0),$34(a0)
		move.w	$C(a0),$36(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		andi.w	#$E,d0
		lea	Obj33_Var(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2)+,$1A(a0)
		tst.b	$28(a0)
		beq.s	Obj33_ChkGone
		move.w	#$C2B8,2(a0)

Obj33_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_BF6E
		bclr	#7,2(a2,d0.w)
		bset	#0,2(a2,d0.w)
		bne.w	loc_C028

loc_BF6E:				; ...
		tst.b	$32(a0)
		bne.w	loc_C046
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		bsr.w	loc_C186
		cmpi.w	#$200,($FFFFFE10).w ; is the level MZ act 1?
		bne.s	loc_BFC6	; if not, branch
		bclr	#7,$28(a0)
		move.w	8(a0),d0
		cmpi.w	#$A20,d0
		bcs.s	loc_BFC6
		cmpi.w	#$AA1,d0
		bcc.s	loc_BFC6
		move.w	($FFFFF7A4).w,d0
		subi.w	#$1C,d0
		move.w	d0,$C(a0)
		bset	#7,($FFFFF7A4).w
		bset	#7,$28(a0)

loc_BFC6:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	loc_BFE6
		jmp	$880000+DisplaySprite

loc_BFE6:				; ...
		move.w	$34(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	loc_C016
		move.w	$34(a0),8(a0)
		move.w	$36(a0),$C(a0)
		move.b	#4,$24(a0)
		bra.s	loc_C02C

loc_C016:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_C028
		bclr	#0,2(a2,d0.w)

loc_C028:				; ...
		jmp	$880000+DeleteObject

loc_C02C:				; ...
		jsr	$880000+ChkObjOnScreen2
		beq.s	locret_C044
		move.b	#2,$24(a0)
		clr.b	$32(a0)
		clr.w	$10(a0)
		clr.w	$12(a0)

locret_C044:				; ...
		rts	

loc_C046:				; ...
		move.w	8(a0),-(sp)
		cmpi.b	#4,$25(a0)
		bcc.s	loc_C056
		jsr	$880000+SpeedToPos

loc_C056:				; ...
		btst	#1,$22(a0)
		beq.s	loc_C0A0
		addi.w	#$18,$12(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.w	loc_C09E
		add.w	d1,$C(a0)
		clr.w	$12(a0)
		bclr	#1,$22(a0)
		move.w	(a1),d0
		andi.w	#$3FF,d0
		cmpi.w	#$16A,d0
		bcs.s	loc_C09E
		move.w	$30(a0),d0
		asr.w	#3,d0
		move.w	d0,$10(a0)
		move.b	#1,$32(a0)
		clr.w	$E(a0)

loc_C09E:				; ...
		bra.s	loc_C0E6

loc_C0A0:				; ...
		tst.w	$10(a0)
		beq.w	loc_C0D6
		bmi.s	loc_C0BC
		moveq	#0,d3
		move.b	$19(a0),d3
		jsr	$880000+ObjHitWallRight
		tst.w	d1		; has block touched a wall?
		bmi.s	Obj33_StopPush	; if yes, branch
		bra.s	loc_C0E6

loc_C0BC:				; ...
		moveq	#0,d3
		move.b	$19(a0),d3
		not.w	d3
		jsr	$880000+ObjHitWallLeft
		tst.w	d1		; has block touched a wall?
		bmi.s	Obj33_StopPush	; if yes, branch
		bra.s	loc_C0E6

Obj33_StopPush:				; ...
		clr.w	$10(a0)		; stop block moving
		bra.s	loc_C0E6

loc_C0D6:				; ...
		addi.l	#$2001,$C(a0)
		cmpi.b	#-$60,$F(a0)
		bcc.s	loc_C104

loc_C0E6:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	(sp)+,d4
		bsr.w	loc_C186
		bsr.s	Obj33_ChkLava
		bra.w	loc_BFC6

loc_C104:				; ...
		move.w	(sp)+,d4
		lea	($FFFFD000).w,a1
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		bra.w	loc_BFE6

Obj33_ChkLava:				; ...
		cmpi.w	#$201,($FFFFFE10).w ; is the level MZ act 2?
		bne.s	Obj33_ChkLava2	; if not, branch
		move.w	#-$20,d2
		cmpi.w	#$DD0,8(a0)
		beq.s	Obj33_LoadLava
		cmpi.w	#$CC0,8(a0)
		beq.s	Obj33_LoadLava
		cmpi.w	#$BA0,8(a0)
		beq.s	Obj33_LoadLava
		rts	

Obj33_ChkLava2:				; ...
		cmpi.w	#$202,($FFFFFE10).w ; is the level MZ act 3?
		bne.s	Obj33_NoLava	; if not, branch
		move.w	#$20,d2
		cmpi.w	#$560,8(a0)
		beq.s	Obj33_LoadLava
		cmpi.w	#$5C0,8(a0)
		beq.s	Obj33_LoadLava

Obj33_NoLava:				; ...
		rts	

Obj33_LoadLava:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	locret_C184
		move.b	#$4C,0(a1)	; load lava geyser object
		move.w	8(a0),8(a1)
		add.w	d2,8(a1)
		move.w	$C(a0),$C(a1)
		addi.w	#$10,$C(a1)
		move.l	a0,$3C(a1)

locret_C184:				; ...
		rts	

loc_C186:				; ...
		move.b	$25(a0),d0
		beq.w	loc_C218
		subq.b	#2,d0
		bne.s	loc_C1AA
		bsr.w	ExitPlatform
		btst	#3,$22(a1)
		bne.s	loc_C1A4
		clr.b	$25(a0)
		rts	

loc_C1A4:				; ...
		move.w	d4,d2
		bra.w	MvSonicOnPtfm

loc_C1AA:				; ...
		subq.b	#2,d0
		bne.s	loc_C1F2
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.w	locret_C1F0
		add.w	d1,$C(a0)
		clr.w	$12(a0)
		clr.b	$25(a0)
		move.w	(a1),d0
		andi.w	#$3FF,d0
		cmpi.w	#$16A,d0
		bcs.s	locret_C1F0
		move.w	$30(a0),d0
		asr.w	#3,d0
		move.w	d0,$10(a0)
		move.b	#1,$32(a0)
		clr.w	$E(a0)

locret_C1F0:				; ...
		rts	

loc_C1F2:				; ...
		jsr	$880000+SpeedToPos
		move.w	8(a0),d0
		andi.w	#$C,d0
		bne.w	locret_C2E4
		andi.w	#-$10,8(a0)
		move.w	$10(a0),$30(a0)
		clr.w	$10(a0)
		subq.b	#2,$25(a0)
		rts	

loc_C218:				; ...
		jsr	$880000+loc_FAC8
		tst.w	d4
		beq.w	locret_C2E4
		bmi.w	locret_C2E4
		tst.b	$32(a0)
		beq.s	loc_C230
		bra.w	locret_C2E4

loc_C230:				; ...
		tst.w	d0
		beq.w	locret_C2E4
		bmi.s	loc_C268
		btst	#0,$22(a1)
		bne.w	locret_C2E4
		move.w	d0,-(sp)
		moveq	#0,d3
		move.b	$19(a0),d3
		jsr	$880000+ObjHitWallRight
		move.w	(sp)+,d0
		tst.w	d1
		bmi.w	locret_C2E4
		addi.l	#$10000,8(a0)
		moveq	#1,d0
		move.w	#$40,d1
		bra.s	loc_C294

loc_C268:				; ...
		btst	#0,$22(a1)
		beq.s	locret_C2E4
		move.w	d0,-(sp)
		moveq	#0,d3
		move.b	$19(a0),d3
		not.w	d3
		jsr	$880000+ObjHitWallLeft
		move.w	(sp)+,d0
		tst.w	d1
		bmi.s	locret_C2E4
		subi.l	#$10000,8(a0)
		moveq	#-1,d0
		move.w	#-$40,d1

loc_C294:				; ...
		lea	($FFFFD000).w,a1
		add.w	d0,8(a1)
		move.w	d1,$14(a1)
		move.w	#0,$10(a1)
		move.w	d0,-(sp)
		move.w	#$A7,d0
		jsr	$880000+(PlaySound_Special).l ;	play pushing sound
		move.w	(sp)+,d0
		tst.b	$28(a0)
		bmi.s	locret_C2E4
		move.w	d0,-(sp)
		jsr	$880000+ObjHitFloor
		move.w	(sp)+,d0
		cmpi.w	#4,d1
		ble.s	loc_C2E0
		move.w	#$400,$10(a0)
		tst.w	d0
		bpl.s	loc_C2D8
		neg.w	$10(a0)

loc_C2D8:				; ...
		move.b	#6,$25(a0)
		bra.s	locret_C2E4

loc_C2E0:				; ...
		add.w	d1,$C(a0)

locret_C2E4:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - pushable blocks (MZ, LZ)
; ---------------------------------------------------------------------------
Map_obj33:	dc.w byte_C2EA-Map_obj33 ; ...
		dc.w byte_C2F0-Map_obj33
byte_C2EA:	dc.b 1			; ...
		dc.b $F0, $F, 0, 8, $F0	; single block
byte_C2F0:	dc.b 4			; ...
		dc.b $F0, $F, 0, 8, $C0	; row of 4 blocks
		dc.b $F0, $F, 0, 8, $E0
		dc.b $F0, $F, 0, 8, 0
		dc.b $F0, $F, 0, 8, $20
		dc.b 0
; ---------------------------------------------------------------------------
; Object 34 - zone title cards
; ---------------------------------------------------------------------------

Obj34:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj34_Index(pc,d0.w),d1
		jmp	Obj34_Index(pc,d1.w)
Obj34_Index:	dc.w Obj34_CheckSBZ3-Obj34_Index ; ...
		dc.w Obj34_ChkPos-Obj34_Index
		dc.w Obj34_Wait-Obj34_Index
		dc.w Obj34_Wait-Obj34_Index

Obj34_CheckSBZ3:			; ...
		movea.l	a0,a1
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		cmpi.w	#$103,($FFFFFE10).w ; check if level is	SBZ 3
		bne.s	Obj34_CheckFZ
		moveq	#5,d0		; load title card number 5 (SBZ)

Obj34_CheckFZ:				; ...
		move.w	d0,d2
		cmpi.w	#$502,($FFFFFE10).w ; check if level is	FZ
		bne.s	Obj34_LoadConfig
		moveq	#6,d0		; load title card number 6 (FZ)
		moveq	#$B,d2		; use "FINAL" mappings

Obj34_LoadConfig:			; ...
		lea	(Obj34_ConData)(pc),a3
		lsl.w	#4,d0
		adda.w	d0,a3
		lea	(Obj34_ItemData)(pc),a2
		moveq	#3,d1

Obj34_Loop:				; ...
		move.b	#$34,0(a1)
		move.w	(a3),8(a1)	; load start x-position
		move.w	(a3)+,$32(a1)	; load finish x-position (same as start)
		move.w	(a3)+,$30(a1)	; load main x-position
		move.w	(a2)+,$A(a1)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,d0
		bne.s	Obj34_ActNumber
		move.b	d2,d0

Obj34_ActNumber:			; ...
		cmpi.b	#7,d0
		bne.s	Obj34_MakeSprite
		add.b	($FFFFFE11).w,d0
		cmpi.b	#3,($FFFFFE11).w
		bne.s	Obj34_MakeSprite
		subq.b	#1,d0

Obj34_MakeSprite:			; ...
		move.b	d0,$1A(a1)	; display frame	number d0
		move.l	#$880000+Map_obj34,4(a1)
		move.w	#$8580,2(a1)
		move.b	#$78,$19(a1)
		move.b	#0,1(a1)
		move.b	#0,$18(a1)
		move.w	#60,$1E(a1)	; set time delay to 1 second
		lea	$40(a1),a1	; next object
		dbf	d1,Obj34_Loop	; repeat sequence another 3 times

Obj34_ChkPos:				; ...
		moveq	#$10,d1		; set horizontal speed
		move.w	$30(a0),d0
		cmp.w	8(a0),d0	; has item reached the target position?
		beq.s	loc_C3C8	; if yes, branch
		bge.s	Obj34_Move
		neg.w	d1

Obj34_Move:				; ...
		add.w	d1,8(a0)	; change item's position

loc_C3C8:				; ...
		move.w	8(a0),d0
		bmi.s	locret_C3D8
		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
		bcc.s	locret_C3D8	; if yes, branch
		jmp	$880000+DisplaySprite

locret_C3D8:				; ...
		rts	

Obj34_Wait:				; ...
		tst.w	$1E(a0)		; is time remaining zero?
		beq.s	Obj34_ChkPos2	; if yes, branch
		subq.w	#1,$1E(a0)	; subtract 1 from time
		jmp	$880000+DisplaySprite

Obj34_ChkPos2:				; ...
		tst.b	1(a0)
		bpl.s	Obj34_ChangeArt
		moveq	#$20,d1
		move.w	$32(a0),d0
		cmp.w	8(a0),d0	; has item reached the finish position?
		beq.s	Obj34_ChangeArt	; if yes, branch
		bge.s	Obj34_Move2
		neg.w	d1

Obj34_Move2:				; ...
		add.w	d1,8(a0)	; change item's position
		move.w	8(a0),d0
		bmi.s	locret_C412
		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
		bcc.s	locret_C412	; if yes, branch
		jmp	$880000+DisplaySprite

locret_C412:				; ...
		rts	

Obj34_ChangeArt:			; ...
		cmpi.b	#4,$24(a0)
		bne.s	Obj34_Delete
		moveq	#2,d0
		jsr	$880000+(LoadPLC).l	; load explosion patterns
		moveq	#0,d0
		move.b	($FFFFFE10).w,d0
		addi.w	#$15,d0
		jsr	$880000+(LoadPLC).l	; load animal patterns

Obj34_Delete:				; ...
		jmp	$880000+DeleteObject
Obj34_ItemData:	dc.w $D0		; ...
		dc.b 2,	0
		dc.w $E4		; y-axis position
		dc.b 2,	6		; routine number, frame	number (changes)
		dc.w $EA
		dc.b 2,	7
		dc.w $E0
		dc.b 2,	$A
; ---------------------------------------------------------------------------
; Title	card configuration data
; Format:
; 4 bytes per item (YYYY XXXX)
; 4 items per level (GREEN HILL, ZONE, ACT X, oval)
; ---------------------------------------------------------------------------
Obj34_ConData:	dc.w 0,	$120, $FEFC, $13C, $414, $154, $214, $154 ; ...
					; GHZ
		dc.w 0,	$120, $FEF4, $134, $40C, $14C, $20C, $14C ; LZ
		dc.w 0,	$120, $FEE0, $120, $3F8, $138, $1F8, $138 ; MZ
		dc.w 0,	$120, $FEFC, $13C, $414, $154, $214, $154 ; SLZ
		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SYZ
		dc.w 0,	$120, $FF04, $144, $41C, $15C, $21C, $15C ; SBZ
		dc.w 0,	$120, $FEE4, $124, $3EC, $3EC, $1EC, $12C ; FZ
; ---------------------------------------------------------------------------
; Object 39 - "GAME OVER" and "TIME OVER"
; ---------------------------------------------------------------------------

Obj39:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj39_Index(pc,d0.w),d1
		jmp	Obj39_Index(pc,d1.w)
Obj39_Index:	dc.w Obj39_ChkPLC-Obj39_Index ;	...
		dc.w loc_C50C-Obj39_Index
		dc.w Obj39_Wait-Obj39_Index

Obj39_ChkPLC:				; ...
		tst.l	($FFFFF680).w	; are the pattern load cues empty?
		beq.s	Obj39_Main	; if yes, branch
		rts	

Obj39_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$50,8(a0)	; set x-position
		btst	#0,$1A(a0)	; is the object	"OVER"?
		beq.s	loc_C4EC	; if not, branch
		move.w	#$1F0,8(a0)	; set x-position for "OVER"

loc_C4EC:				; ...
		move.w	#$F0,$A(a0)
		move.l	#$880000+Map_obj39,4(a0)
		move.w	#$855E,2(a0)
		move.b	#0,1(a0)
		move.b	#0,$18(a0)

loc_C50C:				; ...
		moveq	#$10,d1		; set horizontal speed
		cmpi.w	#$120,8(a0)	; has item reached its target position?
		beq.s	Obj39_SetWait	; if yes, branch
		bcs.s	Obj39_Move
		neg.w	d1

Obj39_Move:				; ...
		add.w	d1,8(a0)	; change item's position
		jmp	$880000+DisplaySprite

Obj39_SetWait:				; ...
		move.w	#720,$1E(a0)	; set time delay to 12 seconds
		addq.b	#2,$24(a0)
		rts	

Obj39_Wait:				; ...
		move.b	($FFFFF605).w,d0
		andi.b	#$70,d0		; is button A, B or C pressed?
		bne.s	Obj39_ChgMode	; if yes, branch
		btst	#0,$1A(a0)
		bne.s	Obj39_Display
		tst.w	$1E(a0)		; has time delay reached zero?
		beq.s	Obj39_ChgMode	; if yes, branch
		subq.w	#1,$1E(a0)	; subtract 1 from time delay
		jmp	$880000+DisplaySprite

Obj39_ChgMode:				; ...
		tst.b	($FFFFFE1A).w	; is time over flag set?
		bne.s	Obj39_ResetLvl	; if yes, branch
		move.b	#$14,($FFFFF600).w ; set mode to $14 (continue screen)
		tst.b	($FFFFFE18).w	; do you have any continues?
		bne.s	Obj39_Display	; if yes, branch
		move.b	#0,($FFFFF600).w ; set mode to 0 (Sega screen)
		bra.s	Obj39_Display

Obj39_ResetLvl:				; ...
		move.w	#1,($FFFFFE02).w ; restart level

Obj39_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Object 3A - "SONIC GOT THROUGH" title	card
; ---------------------------------------------------------------------------

Obj3A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3A_Index(pc,d0.w),d1
		jmp	Obj3A_Index(pc,d1.w)
Obj3A_Index:	dc.w Obj3A_ChkPLC-Obj3A_Index ;	...
		dc.w Obj3A_ChkPos-Obj3A_Index
		dc.w Obj3A_Wait-Obj3A_Index
		dc.w Obj3A_TimeBonus-Obj3A_Index
		dc.w Obj3A_Wait-Obj3A_Index
		dc.w Obj3A_NextLevel-Obj3A_Index
		dc.w Obj3A_Wait-Obj3A_Index
		dc.w Obj3A_ChkPos2-Obj3A_Index
		dc.w loc_C766-Obj3A_Index

Obj3A_ChkPLC:				; ...
		tst.l	($FFFFF680).w	; are the pattern load cues empty?
		beq.s	Obj3A_Main	; if yes, branch
		rts	

Obj3A_Main:				; ...
		movea.l	a0,a1
		lea	(Obj3A_Config)(pc),a2
		moveq	#6,d1

Obj3A_Loop:				; ...
		move.b	#$3A,0(a1)
		move.w	(a2),8(a1)	; load start x-position
		move.w	(a2)+,$32(a1)	; load finish x-position (same as start)
		move.w	(a2)+,$30(a1)	; load main x-position
		move.w	(a2)+,$A(a1)	; load y-position
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,d0
		cmpi.b	#6,d0
		bne.s	loc_C5CA
		add.b	($FFFFFE11).w,d0 ; add act number to frame number

loc_C5CA:				; ...
		move.b	d0,$1A(a1)
		move.l	#$880000+Map_obj3A,4(a1)
		move.w	#$8580,2(a1)
		move.b	#0,1(a1)
		lea	$40(a1),a1
		dbf	d1,Obj3A_Loop	; repeat 6 times

Obj3A_ChkPos:				; ...
		moveq	#$10,d1		; set horizontal speed
		move.w	$30(a0),d0
		cmp.w	8(a0),d0	; has item reached its target position?
		beq.s	loc_C61A	; if yes, branch
		bge.s	Obj3A_Move
		neg.w	d1

Obj3A_Move:				; ...
		add.w	d1,8(a0)	; change item's position

loc_C5FE:				; ...
		move.w	8(a0),d0
		bmi.s	locret_C60E
		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
		bcc.s	locret_C60E	; if yes, branch
		jmp	$880000+DisplaySprite

locret_C60E:				; ...
		rts	

loc_C610:				; ...
		move.b	#$E,$24(a0)
		bra.w	Obj3A_ChkPos2

loc_C61A:				; ...
		cmpi.b	#$E,($FFFFD724).w
		beq.s	loc_C610
		cmpi.b	#4,$1A(a0)
		bne.s	loc_C5FE
		addq.b	#2,$24(a0)
		move.w	#180,$1E(a0)	; set time delay to 3 seconds

Obj3A_Wait:				; ...
		subq.w	#1,$1E(a0)	; subtract 1 from time delay
		bne.s	Obj3A_Display
		addq.b	#2,$24(a0)

Obj3A_Display:				; ...
		jmp	$880000+DisplaySprite

Obj3A_TimeBonus:			; ...
		jsr	$880000+DisplaySprite
		move.b	#1,($FFFFF7D6).w ; set time/ring bonus update flag
		moveq	#0,d0
		tst.w	($FFFFF7D2).w	; is time bonus	= zero?
		beq.s	Obj3A_RingBonus	; if yes, branch
		addi.w	#10,d0		; add 10 to score
		subi.w	#10,($FFFFF7D2).w ; subtract 10	from time bonus

Obj3A_RingBonus:			; ...
		tst.w	($FFFFF7D4).w	; is ring bonus	= zero?
		beq.s	Obj3A_ChkBonus	; if yes, branch
		addi.w	#10,d0		; add 10 to score
		subi.w	#10,($FFFFF7D4).w ; subtract 10	from ring bonus

Obj3A_ChkBonus:				; ...
		tst.w	d0		; is there any bonus?
		bne.s	Obj3A_AddBonus	; if yes, branch
		move.w	#$C5,d0
		jsr	$880000+(PlaySound_Special).l ;	play "ker-ching" sound
		addq.b	#2,$24(a0)
		cmpi.w	#$501,($FFFFFE10).w
		bne.s	Obj3A_SetDelay
		addq.b	#4,$24(a0)

Obj3A_SetDelay:				; ...
		move.w	#180,$1E(a0)	; set time delay to 3 seconds

locret_C692:				; ...
		rts	

Obj3A_AddBonus:				; ...
		jsr	$880000+AddPoints
		move.b	($FFFFFE0F).w,d0
		andi.b	#3,d0
		bne.s	locret_C692
		move.w	#$CD,d0
		jmp	$880000+(PlaySound_Special).l ;	play "blip" sound

Obj3A_NextLevel:			; ...
		move.b	($FFFFFE10).w,d0
		andi.w	#7,d0
		lsl.w	#3,d0
		move.b	($FFFFFE11).w,d1
		andi.w	#3,d1
		add.w	d1,d1
		add.w	d1,d0
		move.w	LevelOrder(pc,d0.w),d0 ; load level from level order array
		move.w	d0,($FFFFFE10).w ; set level number
		tst.w	d0
		bne.s	Obj3A_ChkSS
		move.b	#0,($FFFFF600).w ; set game mode to level (00)
		bra.s	Obj3A_Display2

Obj3A_ChkSS:				; ...
		clr.b	($FFFFFE30).w	; clear	lamppost counter
		tst.b	($FFFFF7CD).w	; has Sonic jumped into	a giant	ring?
		beq.s	loc_C6EA	; if not, branch
		move.b	#$10,($FFFFF600).w ; set game mode to Special Stage (10)
		bra.s	Obj3A_Display2

loc_C6EA:				; ...
		move.w	#1,($FFFFFE02).w ; restart level

Obj3A_Display2:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Level	order array
; ---------------------------------------------------------------------------
LevelOrder:	dc.w	 1,    2, $200,	   0
		dc.w  $101, $102, $300,	$502
		dc.w  $201, $202, $400,	   0
		dc.w  $301, $302, $500,	   0
		dc.w  $401, $402, $100,	   0
		dc.w  $501, $103,    0,	   0

Obj3A_ChkPos2:				; ...
		moveq	#$20,d1		; set horizontal speed
		move.w	$32(a0),d0
		cmp.w	8(a0),d0	; has item reached its finish position?
		beq.s	Obj3A_SBZ2	; if yes, branch
		bge.s	Obj3A_Move2
		neg.w	d1

Obj3A_Move2:				; ...
		add.w	d1,8(a0)	; change item's position
		move.w	8(a0),d0
		bmi.s	locret_C748
		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
		bcc.s	locret_C748	; if yes, branch
		jmp	$880000+DisplaySprite

locret_C748:				; ...
		rts	

Obj3A_SBZ2:				; ...
		cmpi.b	#4,$1A(a0)
		bne.w	Obj3A_Delete
		addq.b	#2,$24(a0)
		clr.b	($FFFFF7CC).w	; unlock controls
		move.w	#$8D,d0
		jmp	$880000+(PlaySound).l	; play FZ music

loc_C766:				; ...
		addq.w	#2,($FFFFF72A).w
		cmpi.w	#$2100,($FFFFF72A).w
		beq.w	Obj3A_Delete
		rts	
		
Obj3A_Delete:
		jmp	$880000+DeleteObject
Obj3A_Config:	dc.w 4,	$124, $BC	; ...
		dc.b 2,	0
		dc.w $FEE0, $120, $D0	; x-start, x-main, y-main
		dc.b 2,	1		; routine number, frame	number (changes)
		dc.w $40C, $14C, $D6
		dc.b 2,	6
		dc.w $520, $120, $EC
		dc.b 2,	2
		dc.w $540, $120, $FC
		dc.b 2,	3
		dc.w $560, $120, $10C
		dc.b 2,	4
		dc.w $20C, $14C, $CC
		dc.b 2,	5
; ---------------------------------------------------------------------------
; Object 7E - special stage results screen
; ---------------------------------------------------------------------------

Obj7E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7E_Index(pc,d0.w),d1
		jmp	Obj7E_Index(pc,d1.w)
Obj7E_Index:	dc.w Obj7E_ChkPLC-Obj7E_Index ;	...
		dc.w Obj7E_ChkPos-Obj7E_Index
		dc.w Obj7E_Wait-Obj7E_Index
		dc.w Obj7E_RingBonus-Obj7E_Index
		dc.w Obj7E_Wait-Obj7E_Index
		dc.w Obj7E_Exit-Obj7E_Index
		dc.w Obj7E_Wait-Obj7E_Index
		dc.w Obj7E_Continue-Obj7E_Index
		dc.w Obj7E_Wait-Obj7E_Index
		dc.w Obj7E_Exit-Obj7E_Index
		dc.w loc_C91A-Obj7E_Index

Obj7E_ChkPLC:				; ...
		tst.l	($FFFFF680).w	; are the pattern load cues empty?
		beq.s	Obj7E_Main	; if yes, branch
		rts	

Obj7E_Main:				; ...
		movea.l	a0,a1
		lea	(Obj7E_Config)(pc),a2
		moveq	#3,d1
		cmpi.w	#50,($FFFFFE20).w ; do you have	50 or more rings?
		bcs.s	Obj7E_Loop	; if no, branch
		addq.w	#1,d1		; if yes, add 1	to d1 (number of sprites)

Obj7E_Loop:				; ...
		move.b	#$7E,0(a1)
		move.w	(a2)+,8(a1)	; load start x-position
		move.w	(a2)+,$30(a1)	; load main x-position
		move.w	(a2)+,$A(a1)	; load y-position
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1A(a1)
		move.l	#$880000+Map_obj7E,4(a1)
		move.w	#$8580,2(a1)
		move.b	#0,1(a1)
		lea	$40(a1),a1
		dbf	d1,Obj7E_Loop	; repeat sequence 3 or 4 times
		moveq	#7,d0
		move.b	($FFFFFE57).w,d1
		beq.s	loc_C842
		moveq	#0,d0
		cmpi.b	#6,d1		; do you have all chaos	emeralds?
		bne.s	loc_C842	; if not, branch
		moveq	#8,d0		; load "Sonic got them all" text
		move.w	#$18,8(a0)
		move.w	#$118,$30(a0)	; change position of text

loc_C842:				; ...
		move.b	d0,$1A(a0)

Obj7E_ChkPos:				; ...
		moveq	#$10,d1		; set horizontal speed
		move.w	$30(a0),d0
		cmp.w	8(a0),d0	; has item reached its target position?
		beq.s	loc_C86C	; if yes, branch
		bge.s	Obj7E_Move
		neg.w	d1

Obj7E_Move:				; ...
		add.w	d1,8(a0)	; change item's position

loc_C85A:				; ...
		move.w	8(a0),d0
		bmi.s	locret_C86A
		cmpi.w	#$200,d0	; has item moved beyond	$200 on	x-axis?
		bcc.s	locret_C86A	; if yes, branch
		jmp	$880000+DisplaySprite

locret_C86A:				; ...
		rts	

loc_C86C:				; ...
		cmpi.b	#2,$1A(a0)
		bne.s	loc_C85A
		addq.b	#2,$24(a0)
		move.w	#180,$1E(a0)	; set time delay to 3 seconds
		move.b	#$7F,($FFFFD800).w ; load chaos	emerald	object

Obj7E_Wait:				; ...
		subq.w	#1,$1E(a0)	; subtract 1 from time delay
		bne.s	Obj7E_Display
		addq.b	#2,$24(a0)

Obj7E_Display:				; ...
		jmp	$880000+DisplaySprite

Obj7E_RingBonus:			; ...
		jsr	$880000+DisplaySprite
		move.b	#1,($FFFFF7D6).w ; set ring bonus update flag
		tst.w	($FFFFF7D4).w	; is ring bonus	= zero?
		beq.s	loc_C8C4	; if yes, branch
		subi.w	#10,($FFFFF7D4).w ; subtract 10	from ring bonus
		moveq	#10,d0		; add 10 to score
		jsr	$880000+AddPoints
		move.b	($FFFFFE0F).w,d0
		andi.b	#3,d0
		bne.s	locret_C8EA
		move.w	#$CD,d0
		jmp	$880000+(PlaySound_Special).l ;	play "blip" sound

loc_C8C4:				; ...
		move.w	#$C5,d0
		jsr	$880000+(PlaySound_Special).l ;	play "ker-ching" sound
		addq.b	#2,$24(a0)
		move.w	#180,$1E(a0)	; set time delay to 3 seconds
		cmpi.w	#50,($FFFFFE20).w ; do you have	at least 50 rings?
		bcs.s	locret_C8EA	; if not, branch
		move.w	#60,$1E(a0)	; set time delay to 1 second
		addq.b	#4,$24(a0)	; goto "Obj7E_Continue"	routine

locret_C8EA:				; ...
		rts	

Obj7E_Exit:				; ...
		move.w	#1,($FFFFFE02).w ; restart level
		jmp	$880000+DisplaySprite

Obj7E_Continue:				; ...
		move.b	#4,($FFFFD6DA).w
		move.b	#$14,($FFFFD6E4).w
		move.w	#$BF,d0
		jsr	$880000+(PlaySound_Special).l ;	play continues music
		addq.b	#2,$24(a0)
		move.w	#360,$1E(a0)	; set time delay to 6 seconds
		jmp	$880000+DisplaySprite

loc_C91A:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#$F,d0
		bne.s	Obj7E_Display2
		bchg	#0,$1A(a0)

Obj7E_Display2:				; ...
		jmp	$880000+DisplaySprite
Obj7E_Config:	dc.w $20, $120,	$C4	; ...
		dc.b 2,	0
		dc.w $320, $120, $118	; start	x-pos, main x-pos, y-pos
		dc.b 2,	1		; rountine number, frame number
		dc.w $360, $120, $128
		dc.b 2,	2
		dc.w $1EC, $11C, $C4
		dc.b 2,	3
		dc.w $3A0, $120, $138
		dc.b 2,	6
; ---------------------------------------------------------------------------
; Object 7F - chaos emeralds from the special stage results screen
; ---------------------------------------------------------------------------

Obj7F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7F_Index(pc,d0.w),d1
		jmp	Obj7F_Index(pc,d1.w)
Obj7F_Index:	dc.w Obj7F_Main-Obj7F_Index ; ...
		dc.w Obj7F_Flash-Obj7F_Index
; ---------------------------------------------------------------------------
; X-axis positions for chaos emeralds
; ---------------------------------------------------------------------------
Obj7F_PosData:	dc.w $110, $128, $F8, $140, $E0, $158 ;	...

Obj7F_Main:				; ...
		movea.l	a0,a1
		lea	(Obj7F_PosData)(pc),a2
		moveq	#0,d2
		moveq	#0,d1
		move.b	($FFFFFE57).w,d1 ; d1 is number	of emeralds
		subq.b	#1,d1		; subtract 1 from d1
		bcs.w	Obj7F_Delete	; if you have 0	emeralds, branch

Obj7F_Loop:				; ...
		move.b	#$7F,0(a1)
		move.w	(a2)+,8(a1)	; set x-position
		move.w	#$F0,$A(a1)	; set y-position
		lea	($FFFFFE58).w,a3 ; check which emeralds	you have
		move.b	(a3,d2.w),d3
		move.b	d3,$1A(a1)
		move.b	d3,$1C(a1)
		addq.b	#1,d2
		addq.b	#2,$24(a1)
		move.l	#$880000+Map_obj7F,4(a1)
		move.w	#$8541,2(a1)
		move.b	#0,1(a1)
		lea	$40(a1),a1	; next object
		dbf	d1,Obj7F_Loop	; loop for d1 number of	emeralds

Obj7F_Flash:				; ...
		move.b	$1A(a0),d0
		move.b	#6,$1A(a0)	; load 6th frame (blank)
		cmpi.b	#6,d0
		bne.s	Obj7F_Display
		move.b	$1C(a0),$1A(a0)	; load visible frame

Obj7F_Display:				; ...
		jmp	$880000+DisplaySprite
		
Obj7F_Delete:
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - zone title cards
; ---------------------------------------------------------------------------
Map_obj34:	dc.w byte_C9FE-Map_obj34 ; ...
		dc.w byte_CA2C-Map_obj34
		dc.w byte_CA5A-Map_obj34
		dc.w byte_CA7A-Map_obj34
		dc.w byte_CAA8-Map_obj34
		dc.w byte_CADC-Map_obj34
		dc.w byte_CB10-Map_obj34
		dc.w byte_CB26-Map_obj34
		dc.w byte_CB31-Map_obj34
		dc.w byte_CB3C-Map_obj34
		dc.w byte_CB47-Map_obj34
		dc.w byte_CB8A-Map_obj34
byte_C9FE:	dc.b 9			; ...
		dc.b $F8, 5, 0,	$18, $B4 ; GREEN HILL
		dc.b $F8, 5, 0,	$3A, $C4
		dc.b $F8, 5, 0,	$10, $D4
		dc.b $F8, 5, 0,	$10, $E4
		dc.b $F8, 5, 0,	$2E, $F4
		dc.b $F8, 5, 0,	$1C, $14
		dc.b $F8, 1, 0,	$20, $24
		dc.b $F8, 5, 0,	$26, $2C
		dc.b $F8, 5, 0,	$26, $3C
byte_CA2C:	dc.b 9			; ...
		dc.b $F8, 5, 0,	$26, $BC ; LABYRINTH
		dc.b $F8, 5, 0,	0, $CC
		dc.b $F8, 5, 0,	4, $DC
		dc.b $F8, 5, 0,	$4A, $EC
		dc.b $F8, 5, 0,	$3A, $FC
		dc.b $F8, 1, 0,	$20, $C
		dc.b $F8, 5, 0,	$2E, $14
		dc.b $F8, 5, 0,	$42, $24
		dc.b $F8, 5, 0,	$1C, $34
byte_CA5A:	dc.b 6			; ...
		dc.b $F8, 5, 0,	$2A, $CF ; MARBLE
		dc.b $F8, 5, 0,	0, $E0
		dc.b $F8, 5, 0,	$3A, $F0
		dc.b $F8, 5, 0,	4, 0
		dc.b $F8, 5, 0,	$26, $10
		dc.b $F8, 5, 0,	$10, $20
		dc.b 0
byte_CA7A:	dc.b 9			; ...
		dc.b $F8, 5, 0,	$3E, $B4 ; STAR	LIGHT
		dc.b $F8, 5, 0,	$42, $C4
		dc.b $F8, 5, 0,	0, $D4
		dc.b $F8, 5, 0,	$3A, $E4
		dc.b $F8, 5, 0,	$26, 4
		dc.b $F8, 1, 0,	$20, $14
		dc.b $F8, 5, 0,	$18, $1C
		dc.b $F8, 5, 0,	$1C, $2C
		dc.b $F8, 5, 0,	$42, $3C
byte_CAA8:	dc.b $A			; ...
		dc.b $F8, 5, 0,	$3E, $AC ; SPRING YARD
		dc.b $F8, 5, 0,	$36, $BC
		dc.b $F8, 5, 0,	$3A, $CC
		dc.b $F8, 1, 0,	$20, $DC
		dc.b $F8, 5, 0,	$2E, $E4
		dc.b $F8, 5, 0,	$18, $F4
		dc.b $F8, 5, 0,	$4A, $14
		dc.b $F8, 5, 0,	0, $24
		dc.b $F8, 5, 0,	$3A, $34
		dc.b $F8, 5, 0,	$C, $44
		dc.b 0
byte_CADC:	dc.b $A			; ...
		dc.b $F8, 5, 0,	$3E, $AC ; SCRAP BRAIN
		dc.b $F8, 5, 0,	8, $BC
		dc.b $F8, 5, 0,	$3A, $CC
		dc.b $F8, 5, 0,	0, $DC
		dc.b $F8, 5, 0,	$36, $EC
		dc.b $F8, 5, 0,	4, $C
		dc.b $F8, 5, 0,	$3A, $1C
		dc.b $F8, 5, 0,	0, $2C
		dc.b $F8, 1, 0,	$20, $3C
		dc.b $F8, 5, 0,	$2E, $44
		dc.b 0
byte_CB10:	dc.b 4			; ...
		dc.b $F8, 5, 0,	$4E, $E0 ; ZONE
		dc.b $F8, 5, 0,	$32, $F0
		dc.b $F8, 5, 0,	$2E, 0
		dc.b $F8, 5, 0,	$10, $10
		dc.b 0
byte_CB26:	dc.b 2			; ...
		dc.b 4,	$C, 0, $53, $EC	; ACT 1
		dc.b $F4, 2, 0,	$57, $C
byte_CB31:	dc.b 2			; ...
		dc.b 4,	$C, 0, $53, $EC	; ACT 2
		dc.b $F4, 6, 0,	$5A, 8
byte_CB3C:	dc.b 2			; ...
		dc.b 4,	$C, 0, $53, $EC	; ACT 3
		dc.b $F4, 6, 0,	$60, 8
byte_CB47:	dc.b $D			; ...
		dc.b $E4, $C, 0, $70, $F4 ; Oval
		dc.b $E4, 2, 0,	$74, $14
		dc.b $EC, 4, 0,	$77, $EC
		dc.b $F4, 5, 0,	$79, $E4
		dc.b $14, $C, $18, $70,	$EC
		dc.b 4,	2, $18,	$74, $E4
		dc.b $C, 4, $18, $77, 4
		dc.b $FC, 5, $18, $79, $C
		dc.b $EC, 8, 0,	$7D, $FC
		dc.b $F4, $C, 0, $7C, $F4
		dc.b $FC, 8, 0,	$7C, $F4
		dc.b 4,	$C, 0, $7C, $EC
		dc.b $C, 8, 0, $7C, $EC
		dc.b 0
byte_CB8A:	dc.b 5			; ...
		dc.b $F8, 5, 0,	$14, $DC ; FINAL
		dc.b $F8, 1, 0,	$20, $EC
		dc.b $F8, 5, 0,	$2E, $F4
		dc.b $F8, 5, 0,	0, 4
		dc.b $F8, 5, 0,	$26, $14
; ---------------------------------------------------------------------------
; Sprite mappings - "GAME OVER"	and "TIME OVER"
; ---------------------------------------------------------------------------
Map_obj39:	dc.w byte_CBAC-Map_obj39 ; ...
		dc.w byte_CBB7-Map_obj39
		dc.w byte_CBC2-Map_obj39
		dc.w byte_CBCD-Map_obj39
byte_CBAC:	dc.b 2			; ...
		dc.b $F8, $D, 0, 0, $B8
		dc.b $F8, $D, 0, 8, $D8
byte_CBB7:	dc.b 2			; ...
		dc.b $F8, $D, 0, $14, 8
		dc.b $F8, $D, 0, $C, $28
byte_CBC2:	dc.b 2			; ...
		dc.b $F8, 9, 0,	$1C, $C4
		dc.b $F8, $D, 0, 8, $DC
byte_CBCD:	dc.b 2			; ...
		dc.b $F8, $D, 0, $14, $C
		dc.b $F8, $D, 0, $C, $2C
; ---------------------------------------------------------------------------
; Sprite mappings - "SONIC HAS PASSED" title card
; ---------------------------------------------------------------------------
Map_obj3A:	dc.w byte_CBEA-Map_obj3A ; ...
		dc.w byte_CC13-Map_obj3A
		dc.w byte_CC32-Map_obj3A
		dc.w byte_CC51-Map_obj3A
		dc.w byte_CC75-Map_obj3A
		dc.w byte_CB47-Map_obj3A
		dc.w byte_CB26-Map_obj3A
		dc.w byte_CB31-Map_obj3A
		dc.w byte_CB3C-Map_obj3A
byte_CBEA:	dc.b 8			; ...
		dc.b $F8, 5, 0,	$3E, $B8 ; SONIC HAS
		dc.b $F8, 5, 0,	$32, $C8
		dc.b $F8, 5, 0,	$2E, $D8
		dc.b $F8, 1, 0,	$20, $E8
		dc.b $F8, 5, 0,	8, $F0
		dc.b $F8, 5, 0,	$1C, $10
		dc.b $F8, 5, 0,	0, $20
		dc.b $F8, 5, 0,	$3E, $30
byte_CC13:	dc.b 6			; ...
		dc.b $F8, 5, 0,	$36, $D0 ; PASSED
		dc.b $F8, 5, 0,	0, $E0
		dc.b $F8, 5, 0,	$3E, $F0
		dc.b $F8, 5, 0,	$3E, 0
		dc.b $F8, 5, 0,	$10, $10
		dc.b $F8, 5, 0,	$C, $20
byte_CC32:	dc.b 6			; ...
		dc.b $F8, $D, 1, $4A, $B0 ; SCORE
		dc.b $F8, 1, 1,	$62, $D0
		dc.b $F8, 9, 1,	$64, $18
		dc.b $F8, $D, 1, $6A, $30
		dc.b $F7, 4, 0,	$6E, $CD
		dc.b $FF, 4, $18, $6E, $CD
byte_CC51:	dc.b 7			; ...
		dc.b $F8, $D, 1, $5A, $B0 ; TIME BONUS
		dc.b $F8, $D, 0, $66, $D9
		dc.b $F8, 1, 1,	$4A, $F9
		dc.b $F7, 4, 0,	$6E, $F6
		dc.b $FF, 4, $18, $6E, $F6
		dc.b $F8, $D, $FF, $F0,	$28
		dc.b $F8, 1, 1,	$70, $48
byte_CC75:	dc.b 7			; ...
		dc.b $F8, $D, 1, $52, $B0 ; RING BONUS
		dc.b $F8, $D, 0, $66, $D9
		dc.b $F8, 1, 1,	$4A, $F9
		dc.b $F7, 4, 0,	$6E, $F6
		dc.b $FF, 4, $18, $6E, $F6
		dc.b $F8, $D, $FF, $F8,	$28
		dc.b $F8, 1, 1,	$70, $48
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - special stage results screen
; ---------------------------------------------------------------------------
Map_obj7E:	dc.w byte_CCAC-Map_obj7E ; ...
		dc.w byte_CCEE-Map_obj7E
		dc.w byte_CD0D-Map_obj7E
		dc.w byte_CB47-Map_obj7E
		dc.w byte_CD31-Map_obj7E
		dc.w byte_CD46-Map_obj7E
		dc.w byte_CD5B-Map_obj7E
		dc.w byte_CD6B-Map_obj7E
		dc.w byte_CDA8-Map_obj7E
byte_CCAC:	dc.b $D			; ...
		dc.b $F8, 5, 0,	8, $90	; "CHAOS EMERALDS"
		dc.b $F8, 5, 0,	$1C, $A0
		dc.b $F8, 5, 0,	0, $B0
		dc.b $F8, 5, 0,	$32, $C0
		dc.b $F8, 5, 0,	$3E, $D0
		dc.b $F8, 5, 0,	$10, $F0
		dc.b $F8, 5, 0,	$2A, 0
		dc.b $F8, 5, 0,	$10, $10
		dc.b $F8, 5, 0,	$3A, $20
		dc.b $F8, 5, 0,	0, $30
		dc.b $F8, 5, 0,	$26, $40
		dc.b $F8, 5, 0,	$C, $50
		dc.b $F8, 5, 0,	$3E, $60
byte_CCEE:	dc.b 6			; ...
		dc.b $F8, $D, 1, $4A, $B0 ; "SCORE"
		dc.b $F8, 1, 1,	$62, $D0
		dc.b $F8, 9, 1,	$64, $18
		dc.b $F8, $D, 1, $6A, $30
		dc.b $F7, 4, 0,	$6E, $CD
		dc.b $FF, 4, $18, $6E, $CD
byte_CD0D:	dc.b 7			; ...
		dc.b $F8, $D, 1, $52, $B0
		dc.b $F8, $D, 0, $66, $D9
		dc.b $F8, 1, 1,	$4A, $F9
		dc.b $F7, 4, 0,	$6E, $F6
		dc.b $FF, 4, $18, $6E, $F6
		dc.b $F8, $D, $FF, $F8,	$28
		dc.b $F8, 1, 1,	$70, $48
byte_CD31:	dc.b 4			; ...
		dc.b $F8, $D, $FF, $D1,	$B0
		dc.b $F8, $D, $FF, $D9,	$D0
		dc.b $F8, 1, $FF, $E1, $F0
		dc.b $F8, 6, $1F, $E3, $40
byte_CD46:	dc.b 4			; ...
		dc.b $F8, $D, $FF, $D1,	$B0
		dc.b $F8, $D, $FF, $D9,	$D0
		dc.b $F8, 1, $FF, $E1, $F0
		dc.b $F8, 6, $1F, $E9, $40
byte_CD5B:	dc.b 3			; ...
		dc.b $F8, $D, $FF, $D1,	$B0
		dc.b $F8, $D, $FF, $D9,	$D0
		dc.b $F8, 1, $FF, $E1, $F0
byte_CD6B:	dc.b $C			; ...
		dc.b $F8, 5, 0,	$3E, $9C ; "SPECIAL STAGE"
		dc.b $F8, 5, 0,	$36, $AC
		dc.b $F8, 5, 0,	$10, $BC
		dc.b $F8, 5, 0,	8, $CC
		dc.b $F8, 1, 0,	$20, $DC
		dc.b $F8, 5, 0,	0, $E4
		dc.b $F8, 5, 0,	$26, $F4
		dc.b $F8, 5, 0,	$3E, $14
		dc.b $F8, 5, 0,	$42, $24
		dc.b $F8, 5, 0,	0, $34
		dc.b $F8, 5, 0,	$18, $44
		dc.b $F8, 5, 0,	$10, $54
byte_CDA8:	dc.b $F			; ...
		dc.b $F8, 5, 0,	$3E, $88 ; "SONIC GOT THEM ALL"
		dc.b $F8, 5, 0,	$32, $98
		dc.b $F8, 5, 0,	$2E, $A8
		dc.b $F8, 1, 0,	$20, $B8
		dc.b $F8, 5, 0,	8, $C0
		dc.b $F8, 5, 0,	$18, $D8
		dc.b $F8, 5, 0,	$32, $E8
		dc.b $F8, 5, 0,	$42, $F8
		dc.b $F8, 5, 0,	$42, $10
		dc.b $F8, 5, 0,	$1C, $20
		dc.b $F8, 5, 0,	$10, $30
		dc.b $F8, 5, 0,	$2A, $40
		dc.b $F8, 5, 0,	0, $58
		dc.b $F8, 5, 0,	$26, $68
		dc.b $F8, 5, 0,	$26, $78
; ---------------------------------------------------------------------------
; Sprite mappings - chaos emeralds from	the special stage results screen
; ---------------------------------------------------------------------------
Map_obj7F:	dc.w byte_CE02-Map_obj7F ; ...
		dc.w byte_CE08-Map_obj7F
		dc.w byte_CE0E-Map_obj7F
		dc.w byte_CE14-Map_obj7F
		dc.w byte_CE1A-Map_obj7F
		dc.w byte_CE20-Map_obj7F
		dc.w byte_CE26-Map_obj7F
byte_CE02:	dc.b 1			; ...
		dc.b $F8, 5, $20, 4, $F8
byte_CE08:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_CE0E:	dc.b 1			; ...
		dc.b $F8, 5, $40, 4, $F8
byte_CE14:	dc.b 1			; ...
		dc.b $F8, 5, $60, 4, $F8
byte_CE1A:	dc.b 1			; ...
		dc.b $F8, 5, $20, 8, $F8
byte_CE20:	dc.b 1			; ...
		dc.b $F8, 5, $20, $C, $F8
byte_CE26:	dc.b 0			; ...
		dc.b 0

; ---------------------------------------------------------------------------
; Object 3B - purple rock (GHZ)
; ---------------------------------------------------------------------------

Obj3B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3B_Index(pc,d0.w),d1
		jmp	Obj3B_Index(pc,d1.w)
Obj3B_Index:	dc.w Obj3B_Main-Obj3B_Index ; ...
		dc.w Obj3B_Solid-Obj3B_Index

Obj3B_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj3B,4(a0)
		move.w	#$63D0,2(a0)
		move.b	#4,1(a0)
		move.b	#$13,$19(a0)
		move.b	#4,$18(a0)

Obj3B_Solid:				; ...
		move.w	#$1B,d1
		move.w	#$10,d2
		move.w	#$10,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj3C_Delete
		rts	
; ---------------------------------------------------------------------------
; Object 49 - waterfall	sound effect (GHZ)
; ---------------------------------------------------------------------------

Obj49:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj49_Index(pc,d0.w),d1
		jmp	Obj49_Index(pc,d1.w)
Obj49_Index:	dc.w Obj49_Main-Obj49_Index ; ...
		dc.w Obj49_PlaySnd-Obj49_Index

Obj49_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#4,1(a0)

Obj49_PlaySnd:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#$3F,d0
		bne.s	Obj49_ChkDel
		move.w	#$D0,d0
		jsr	$880000+(PlaySound_Special).l ;	play waterfall sound

Obj49_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj3C_Delete
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - purple rock	(GHZ)
; ---------------------------------------------------------------------------
Map_obj3B:	dc.w byte_D110-Map_obj3B ; ...
byte_D110:	dc.b 2			; ...
		dc.b $F0, $B, 0, 0, $E8
		dc.b $F0, $B, 0, $C, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 3C - smashable	wall (GHZ, SLZ)
; ---------------------------------------------------------------------------

Obj3C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3C_Index(pc,d0.w),d1
		jsr	Obj3C_Index(pc,d1.w)
		bra.w	MarkObjGone
Obj3C_Index:	dc.w Obj3C_Main-Obj3C_Index ; ...
		dc.w Obj3C_Solid-Obj3C_Index
		dc.w Obj3C_FragMove-Obj3C_Index

Obj3C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj3C,4(a0)
		move.w	#$450F,2(a0)
		move.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		move.b	$28(a0),$1A(a0)

Obj3C_Solid:				; ...
		move.w	($FFFFD010).w,$30(a0) ;	load Sonic's horizontal speed
		move.w	#$1B,d1
		move.w	#$20,d2
		move.w	#$20,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#5,$22(a0)
		bne.s	Obj3C_ChkRoll

locret_D180:				; ...
		rts	

Obj3C_ChkRoll:				; ...
		cmpi.b	#2,$1C(a1)	; is Sonic rolling?
		bne.s	locret_D180	; if not, branch
		move.w	$30(a0),d0
		bpl.s	Obj3C_ChkSpeed
		neg.w	d0

Obj3C_ChkSpeed:				; ...
		cmpi.w	#$480,d0	; is Sonic's speed $480 or higher?
		bcs.s	locret_D180	; if not, branch
		move.w	$30(a0),$10(a1)
		addq.w	#4,8(a1)
		lea	(Obj3C_FragSpd1)(pc),a4 ;	use fragments that move	right
		move.w	8(a0),d0
		cmp.w	8(a1),d0	; is Sonic to the right	of the block?
		bcs.s	Obj3C_Smash	; if yes, branch
		subq.w	#8,8(a1)
		lea	(Obj3C_FragSpd2)(pc),a4 ;	use fragments that move	left

Obj3C_Smash:				; ...
		move.w	$10(a1),$14(a1)
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)
		moveq	#7,d1		; load 8 fragments
		move.w	#$70,d2
		bsr.s	SmashObject

Obj3C_FragMove:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$70,$12(a0)	; make fragment	fall faster
		jsr	$880000+DisplaySprite
		tst.b	1(a0)
		bpl.w	Obj3C_Delete
		rts	

Obj3C_Delete:
		jsr	$880000+DeleteObject
		rts

; ---------------------------------------------------------------------------
; Subroutine to	smash a	block (GHZ walls and MZ	blocks)
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SmashObject:				; ...
		moveq	#0,d0
		move.b	$1A(a0),d0
		add.w	d0,d0
		movea.l	4(a0),a3
		adda.w	(a3,d0.w),a3
		addq.w	#1,a3
		bset	#5,1(a0)
		move.b	0(a0),d4
		move.b	1(a0),d5
		movea.l	a0,a1
		bra.s	Smash_LoadFrag

Smash_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	Smash_PlaySnd
		addq.w	#5,a3

Smash_LoadFrag:				; ...
		move.b	#4,$24(a1)
		move.b	d4,0(a1)
		move.l	a3,4(a1)
		move.b	d5,1(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	2(a0),2(a1)
		move.b	$18(a0),$18(a1)
		move.b	$19(a0),$19(a1)
		move.w	(a4)+,$10(a1)
		move.w	(a4)+,$12(a1)
		cmpa.l	a0,a1
		bcc.s	loc_D268
		move.l	a0,-(sp)
		movea.l	a1,a0
		jsr	$880000+SpeedToPos
		add.w	d2,$12(a0)
		movea.l	(sp)+,a0
		jsr	$880000+DisplaySprite2

loc_D268:				; ...
		dbf	d1,Smash_Loop

Smash_PlaySnd:				; ...
		move.w	#$CB,d0
		jmp	$880000+(PlaySound_Special).l ;	play smashing sound
; End of function SmashObject

; Smashed block	fragment speeds
;
Obj3C_FragSpd1:	dc.w $400, $FB00	; ...
		dc.w $600, $FF00	; x-move speed,	y-move speed
		dc.w $600, $100
		dc.w $400, $500
		dc.w $600, $FA00
		dc.w $800, $FE00
		dc.w $800, $200
		dc.w $600, $600

Obj3C_FragSpd2:	dc.w $FA00, $FA00	; ...
		dc.w $F800, $FE00
		dc.w $F800, $200
		dc.w $FA00, $600
		dc.w $FC00, $FB00
		dc.w $FA00, $FF00
		dc.w $FA00, $100
		dc.w $FC00, $500
; ---------------------------------------------------------------------------
; Sprite mappings - smashable walls (GHZ, SLZ)
; ---------------------------------------------------------------------------
Map_obj3C:	dc.w byte_D2BC-Map_obj3C ; ...
		dc.w byte_D2E5-Map_obj3C
		dc.w byte_D30E-Map_obj3C
byte_D2BC:	dc.b 8			; ...
		dc.b $E0, 5, 0,	0, $F0
		dc.b $F0, 5, 0,	0, $F0
		dc.b 0,	5, 0, 0, $F0
		dc.b $10, 5, 0,	0, $F0
		dc.b $E0, 5, 0,	4, 0
		dc.b $F0, 5, 0,	4, 0
		dc.b 0,	5, 0, 4, 0
		dc.b $10, 5, 0,	4, 0
byte_D2E5:	dc.b 8			; ...
		dc.b $E0, 5, 0,	4, $F0
		dc.b $F0, 5, 0,	4, $F0
		dc.b 0,	5, 0, 4, $F0
		dc.b $10, 5, 0,	4, $F0
		dc.b $E0, 5, 0,	4, 0
		dc.b $F0, 5, 0,	4, 0
		dc.b 0,	5, 0, 4, 0
		dc.b $10, 5, 0,	4, 0
byte_D30E:	dc.b 8			; ...
		dc.b $E0, 5, 0,	4, $F0
		dc.b $F0, 5, 0,	4, $F0
		dc.b 0,	5, 0, 4, $F0
		dc.b $10, 5, 0,	4, $F0
		dc.b $E0, 5, 0,	8, 0
		dc.b $F0, 5, 0,	8, 0
		dc.b 0,	5, 0, 8, 0
		dc.b $10, 5, 0,	8, 0
		dc.b 0

; ---------------------------------------------------------------------------
; Object 40 - Moto Bug enemy (GHZ)
; ---------------------------------------------------------------------------

Obj40:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj40_Index(pc,d0.w),d1
		jmp	Obj40_Index(pc,d1.w)
Obj40_Index:	dc.w Obj40_Main-Obj40_Index ; ...
		dc.w Obj40_Action-Obj40_Index
		dc.w Obj40_Animate-Obj40_Index
		dc.w Obj40_Delete-Obj40_Index

Obj40_Main:				; ...
		move.l	#($880000+Map_obj40),4(a0)
		move.w	#$4F0,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$14,$19(a0)
		tst.b	$1C(a0)		; is object a smoke trail?
		bne.s	Obj40_SetSmoke	; if yes, branch
		move.b	#$E,$16(a0)
		move.b	#8,$17(a0)
		move.b	#$C,$20(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_F68A
		add.w	d1,$C(a0)	; match	object's position with the floor
		move.w	#0,$12(a0)
		addq.b	#2,$24(a0)
		bchg	#0,$22(a0)

locret_F68A:				; ...
		rts	

Obj40_SetSmoke:				; ...
		addq.b	#4,$24(a0)
		bra.w	Obj40_Animate

Obj40_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj40_Index2(pc,d0.w),d1
		jsr	Obj40_Index2(pc,d1.w)
		lea	(Ani_obj40)(pc),a1
		jsr	$880000+AnimateSprite
; ---------------------------------------------------------------------------
; Routine to mark an enemy/monitor/ring	as destroyed
; ---------------------------------------------------------------------------

MarkObjGone:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Mark_ChkGone
		jmp	$880000+DisplaySprite

Mark_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Mark_Delete
		bclr	#7,2(a2,d0.w)

Mark_Delete:				; ...
		jmp	$880000+DeleteObject
Obj40_Index2:	dc.w Obj40_Move-Obj40_Index2 ; ...
		dc.w Obj40_FixToFloor-Obj40_Index2

Obj40_Move:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from pause	time
		bpl.s	locret_F70A	; if time remains, branch
		addq.b	#2,$25(a0)
		move.w	#-$100,$10(a0)	; move object to the left
		move.b	#1,$1C(a0)
		bchg	#0,$22(a0)
		bne.s	locret_F70A
		neg.w	$10(a0)		; change direction

locret_F70A:				; ...
		rts	

Obj40_FixToFloor:			; ...
		jsr	$880000+SpeedToPos
		jsr	$880000+ObjHitFloor
		cmpi.w	#-8,d1
		blt.s	Obj40_Pause
		cmpi.w	#$C,d1
		bge.s	Obj40_Pause
		add.w	d1,$C(a0)	; match	object's position with the floor
		subq.b	#1,$33(a0)
		bpl.s	locret_F756
		move.b	#$F,$33(a0)
		jsr	$880000+SingleObjLoad
		bne.s	locret_F756
		move.b	#$40,0(a1)	; load exhaust smoke object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$22(a0),$22(a1)
		move.b	#2,$1C(a1)

locret_F756:				; ...
		rts	

Obj40_Pause:				; ...
		subq.b	#2,$25(a0)
		move.w	#59,$30(a0)	; set pause time to 1 second
		move.w	#0,$10(a0)	; stop the object moving
		move.b	#0,$1C(a0)
		rts	

Obj40_Animate:				; ...
		lea	(Ani_obj40)(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj40_Delete:				; ...
		jmp	$880000+DeleteObject
Ani_obj40:	dc.w byte_F788-Ani_obj40, byte_F78C-Ani_obj40, byte_F792-Ani_obj40 ; ...
byte_F788:	dc.b $F, 2, $FF, 0	; ...
byte_F78C:	dc.b 7,	0, 1, 0, 2, $FF	; ...
byte_F792:	dc.b 1,	3, 6, 3, 6, 4, 6, 4, 6,	4, 6, 5, $FC, 0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Moto Bug enemy (GHZ)
; ---------------------------------------------------------------------------
Map_obj40:	dc.w byte_F7AE-Map_obj40, byte_F7C3-Map_obj40 ;	...
		dc.w byte_F7D8-Map_obj40, byte_F7F2-Map_obj40
		dc.w byte_F7F8-Map_obj40, byte_F7FE-Map_obj40
		dc.w byte_F804-Map_obj40
byte_F7AE:	dc.b 4			; ...
		dc.b $F0, $D, 0, 0, $EC
		dc.b 0,	$C, 0, 8, $EC
		dc.b $F8, 1, 0,	$C, $C
		dc.b 8,	8, 0, $E, $F4
byte_F7C3:	dc.b 4			; ...
		dc.b $F1, $D, 0, 0, $EC
		dc.b 1,	$C, 0, 8, $EC
		dc.b $F9, 1, 0,	$C, $C
		dc.b 9,	8, 0, $11, $F4
byte_F7D8:	dc.b 5			; ...
		dc.b $F0, $D, 0, 0, $EC
		dc.b 0,	$C, 0, $14, $EC
		dc.b $F8, 1, 0,	$C, $C
		dc.b 8,	4, 0, $18, $EC
		dc.b 8,	4, 0, $12, $FC
byte_F7F2:	dc.b 1			; ...
		dc.b $FA, 0, 0,	$1A, $10
byte_F7F8:	dc.b 1			; ...
		dc.b $FA, 0, 0,	$1B, $10
byte_F7FE:	dc.b 1			; ...
		dc.b $FA, 0, 0,	$1C, $10
byte_F804:	dc.b 0			; ...
		dc.b 0
; ---------------------------------------------------------------------------
; Object 41 - springs
; ---------------------------------------------------------------------------

Obj41:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj41_Index(pc,d0.w),d1
		jsr	Obj41_Index(pc,d1.w)
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj41_Delete
		rts	
Obj41_Delete:
		jmp	$880000+DeleteObject
Obj41_Index:	dc.w Obj41_Main-Obj41_Index ; ...
		dc.w Obj41_Up-Obj41_Index
		dc.w Obj41_AniUp-Obj41_Index
		dc.w Obj41_ResetUp-Obj41_Index
		dc.w Obj41_LR-Obj41_Index
		dc.w Obj41_AniLR-Obj41_Index
		dc.w Obj41_ResetLR-Obj41_Index
		dc.w Obj41_Dwn-Obj41_Index
		dc.w Obj41_AniDwn-Obj41_Index
		dc.w Obj41_ResetDwn-Obj41_Index

Obj41_Powers:	dc.w -$1000		; power	of red spring
		dc.w -$A00		; power	of yellow spring

Obj41_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj41,4(a0)
		move.w	#$523,2(a0)
		ori.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		move.b	$28(a0),d0
		btst	#4,d0		; does the spring face left/right?
		beq.s	loc_DB54	; if not, branch
		move.b	#8,$24(a0)	; use "Obj41_LR" routine
		move.b	#1,$1C(a0)
		move.b	#3,$1A(a0)
		move.w	#$533,2(a0)
		move.b	#8,$19(a0)

loc_DB54:				; ...
		btst	#5,d0		; does the spring face downwards?
		beq.s	loc_DB66	; if not, branch
		move.b	#$E,$24(a0)	; use "Obj41_Dwn" routine
		bset	#1,$22(a0)

loc_DB66:				; ...
		btst	#1,d0
		beq.s	loc_DB72
		bset	#5,2(a0)

loc_DB72:				; ...
		andi.w	#$F,d0
		move.w	Obj41_Powers(pc,d0.w),$30(a0)
		rts	

Obj41_Up:				; ...
		move.w	#$1B,d1
		move.w	#8,d2
		move.w	#$10,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		tst.b	$25(a0)		; is Sonic on top of the spring?
		bne.s	Obj41_BounceUp	; if yes, branch
		rts	

Obj41_BounceUp:				; ...
		addq.b	#2,$24(a0)
		addq.w	#8,$C(a1)
		move.w	$30(a0),$12(a1)	; move Sonic upwards
		bset	#1,$22(a1)
		bclr	#3,$22(a1)
		move.b	#$10,$1C(a1)	; use "bouncing" animation
		move.b	#2,$24(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		move.w	#$CC,d0
		jsr	$880000+(PlaySound_Special).l ;	play spring sound

Obj41_AniUp:				; ...
		lea	$880000+(Ani_obj41).l,a1
		jmp	$880000+AnimateSprite

Obj41_ResetUp:				; ...
		move.b	#1,$1D(a0)	; reset	animation
		subq.b	#4,$24(a0)	; goto "Obj41_Up" routine
		rts	

Obj41_LR:				; ...
		move.w	#$13,d1
		move.w	#$E,d2
		move.w	#$F,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		cmpi.b	#2,$24(a0)
		bne.s	loc_DC0C
		move.b	#8,$24(a0)

loc_DC0C:				; ...
		btst	#5,$22(a0)
		bne.s	Obj41_BounceLR
		rts	

Obj41_BounceLR:				; ...
		addq.b	#2,$24(a0)
		move.w	$30(a0),$10(a1)	; move Sonic to	the left
		addq.w	#8,8(a1)
		btst	#0,$22(a0)	; is object flipped?
		bne.s	loc_DC36	; if yes, branch
		subi.w	#$10,8(a1)
		neg.w	$10(a1)		; move Sonic to	the right

loc_DC36:				; ...
		move.w	#$F,$3E(a1)
		move.w	$10(a1),$14(a1)
		bchg	#0,$22(a1)
		btst	#2,$22(a1)
		bne.s	loc_DC56
		move.b	#0,$1C(a1)	; use running animation

loc_DC56:				; ...
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)
		move.w	#$CC,d0
		jsr	$880000+(PlaySound_Special).l ;	play spring sound

Obj41_AniLR:				; ...
		lea	$880000+(Ani_obj41).l,a1
		jmp	$880000+AnimateSprite

Obj41_ResetLR:				; ...
		move.b	#2,$1D(a0)	; reset	animation
		subq.b	#4,$24(a0)	; goto "Obj41_LR" routine
		rts	

Obj41_Dwn:				; ...
		move.w	#$1B,d1
		move.w	#8,d2
		move.w	#$10,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		cmpi.b	#2,$24(a0)
		bne.s	loc_DCA4
		move.b	#$E,$24(a0)

loc_DCA4:				; ...
		tst.b	$25(a0)
		bne.s	locret_DCAE
		tst.w	d4
		bmi.s	Obj41_BounceDwn

locret_DCAE:				; ...
		rts	

Obj41_BounceDwn:			; ...
		addq.b	#2,$24(a0)
		subq.w	#8,$C(a1)
		move.w	$30(a0),$12(a1)
		neg.w	$12(a1)		; move Sonic downwards
		bset	#1,$22(a1)
		bclr	#3,$22(a1)
		move.b	#2,$24(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		move.w	#$CC,d0
		jsr	$880000+(PlaySound_Special).l ;	play spring sound

Obj41_AniDwn:				; ...
		lea	$880000+(Ani_obj41).l,a1
		jmp	$880000+AnimateSprite

Obj41_ResetDwn:				; ...
		move.b	#1,$1D(a0)	; reset	animation
		subq.b	#4,$24(a0)	; goto "Obj41_Dwn" routine
		rts	
Ani_obj41:	dc.w byte_DD02-Ani_obj41, byte_DD0E-Ani_obj41 ;	...
byte_DD02:	dc.b 0,	1, 0, 0, 2, 2, 2, 2, 2,	2, 0, $FC ; ...
byte_DD0E:	dc.b 0,	4, 3, 3, 5, 5, 5, 5, 5,	5, 3, $FC ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - springs
; ---------------------------------------------------------------------------
Map_obj41:	dc.w byte_DD26-Map_obj41 ; ...
		dc.w byte_DD31-Map_obj41
		dc.w byte_DD37-Map_obj41
		dc.w byte_DD47-Map_obj41
		dc.w byte_DD4D-Map_obj41
		dc.w byte_DD53-Map_obj41
byte_DD26:	dc.b 2			; ...
		dc.b $F8, $C, 0, 0, $F0
		dc.b 0,	$C, 0, 4, $F0
byte_DD31:	dc.b 1			; ...
		dc.b 0,	$C, 0, 0, $F0
byte_DD37:	dc.b 3			; ...
		dc.b $E8, $C, 0, 0, $F0
		dc.b $F0, 5, 0,	8, $F8
		dc.b 0,	$C, 0, $C, $F0
byte_DD47:	dc.b 1			; ...
		dc.b $F0, 7, 0,	0, $F8
byte_DD4D:	dc.b 1			; ...
		dc.b $F0, 3, 0,	4, $F8
byte_DD53:	dc.b 4			; ...
		dc.b $F0, 3, 0,	4, $10
		dc.b $F8, 9, 0,	8, $F8
		dc.b $F0, 0, 0,	0, $F8
		dc.b 8,	0, 0, 3, $F8
; ---------------------------------------------------------------------------
; Object 42 - Newtron enemy (GHZ)
; ---------------------------------------------------------------------------

Obj42:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj42_Index(pc,d0.w),d1
		jmp	Obj42_Index(pc,d1.w)
Obj42_Index:	dc.w Obj42_Main-Obj42_Index ; ...
		dc.w Obj42_Action-Obj42_Index
		dc.w Obj42_Delete-Obj42_Index

Obj42_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj42,4(a0)
		move.w	#$49B,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$14,$19(a0)
		move.b	#$10,$16(a0)
		move.b	#8,$17(a0)

Obj42_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj42_Index2(pc,d0.w),d1
		jsr	Obj42_Index2(pc,d1.w)
		lea	$880000+(Ani_obj42).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj42_Index2:	dc.w Obj42_ChkDist-Obj42_Index2	; ...
		dc.w Obj42_Type00-Obj42_Index2
		dc.w Obj42_MatchFloor-Obj42_Index2
		dc.w Obj42_Speed-Obj42_Index2
		dc.w Obj42_Type01-Obj42_Index2

Obj42_ChkDist:				; ...
		bset	#0,$22(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_DDEA
		neg.w	d0
		bclr	#0,$22(a0)

loc_DDEA:				; ...
		cmpi.w	#$80,d0		; is Sonic within $80 pixels of	the newtron?
		bcc.s	locret_DE12	; if not, branch
		addq.b	#2,$25(a0)
		move.b	#1,$1C(a0)
		tst.b	$28(a0)		; check	object type
		beq.s	locret_DE12	; if type is 00, branch
		move.w	#$249B,2(a0)
		move.b	#8,$25(a0)	; run type 01 newtron subroutine
		move.b	#4,$1C(a0)	; use different	animation

locret_DE12:				; ...
		rts	

Obj42_Type00:				; ...
		cmpi.b	#4,$1A(a0)	; has "appearing" animation finished?
		bcc.s	Obj42_Fall	; is yes, branch
		bset	#0,$22(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	locret_DE32
		bclr	#0,$22(a0)

locret_DE32:				; ...
		rts	

Obj42_Fall:				; ...
		cmpi.b	#1,$1A(a0)
		bne.s	loc_DE42
		move.b	#$C,$20(a0)

loc_DE42:				; ...
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1		; has newtron hit the floor?
		bpl.s	locret_DE86	; if not, branch
		add.w	d1,$C(a0)
		move.w	#0,$12(a0)	; stop newtron falling
		addq.b	#2,$25(a0)
		move.b	#2,$1C(a0)
		btst	#5,2(a0)
		beq.s	Obj42_Move
		addq.b	#1,$1C(a0)

Obj42_Move:				; ...
		move.b	#$D,$20(a0)
		move.w	#$200,$10(a0)	; move newtron horizontally
		btst	#0,$22(a0)
		bne.s	locret_DE86
		neg.w	$10(a0)

locret_DE86:				; ...
		rts	

Obj42_MatchFloor:			; ...
		jsr	$880000+SpeedToPos
		jsr	$880000+ObjHitFloor
		cmpi.w	#-8,d1
		blt.s	loc_DEA2
		cmpi.w	#$C,d1
		bge.s	loc_DEA2
		add.w	d1,$C(a0)	; match	newtron's position with floor
		rts	

loc_DEA2:				; ...
		addq.b	#2,$25(a0)
		rts	

Obj42_Speed:				; ...
		jsr	$880000+SpeedToPos
		rts	

Obj42_Type01:				; ...
		cmpi.b	#1,$1A(a0)
		bne.s	Obj42_FireMissile
		move.b	#$C,$20(a0)

Obj42_FireMissile:			; ...
		cmpi.b	#2,$1A(a0)
		bne.s	locret_DF14
		tst.b	$32(a0)
		bne.s	locret_DF14
		move.b	#1,$32(a0)
		jsr	$880000+SingleObjLoad
		bne.s	locret_DF14
		move.b	#$23,0(a1)	; load missile object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		subq.w	#8,$C(a1)
		move.w	#$200,$10(a1)
		move.w	#$14,d0
		btst	#0,$22(a0)
		bne.s	loc_DF04
		neg.w	d0
		neg.w	$10(a1)

loc_DF04:				; ...
		add.w	d0,8(a1)
		move.b	$22(a0),$22(a1)
		move.b	#1,$28(a1)

locret_DF14:				; ...
		rts	

Obj42_Delete:				; ...
		jmp	$880000+DeleteObject
Ani_obj42:	dc.w byte_DF24-Ani_obj42 ; ...
		dc.w byte_DF28-Ani_obj42
		dc.w byte_DF30-Ani_obj42
		dc.w byte_DF34-Ani_obj42
		dc.w byte_DF38-Ani_obj42
byte_DF24:	dc.b $F, $A, $FF, 0	; ...
byte_DF28:	dc.b $13, 0, 1,	3, 4, 5, $FE, 1	; ...
byte_DF30:	dc.b 2,	6, 7, $FF	; ...
byte_DF34:	dc.b 2,	8, 9, $FF	; ...
byte_DF38:	dc.b $13, 0, 1,	1, 2, 1, 1, 0, $FC, 0 ;	...
; ---------------------------------------------------------------------------
; Sprite mappings - Newtron enemy (GHZ)
; ---------------------------------------------------------------------------
Map_obj42:	dc.w byte_DF58-Map_obj42, byte_DF68-Map_obj42 ;	...
		dc.w byte_DF78-Map_obj42, byte_DF88-Map_obj42
		dc.w byte_DF9D-Map_obj42, byte_DFAD-Map_obj42
		dc.w byte_DFB8-Map_obj42, byte_DFC8-Map_obj42
		dc.w byte_DFD8-Map_obj42, byte_DFE8-Map_obj42
		dc.w byte_DFF8-Map_obj42
byte_DF58:	dc.b 3			; ...
		dc.b $EC, $D, 0, 0, $EC
		dc.b $F4, 0, 0,	8, $C
		dc.b $FC, $E, 0, 9, $F4
byte_DF68:	dc.b 3			; ...
		dc.b $EC, 6, 0,	$15, $EC
		dc.b $EC, 9, 0,	$1B, $FC
		dc.b $FC, $A, 0, $21, $FC
byte_DF78:	dc.b 3			; ...
		dc.b $EC, 6, 0,	$2A, $EC
		dc.b $EC, 9, 0,	$1B, $FC
		dc.b $FC, $A, 0, $21, $FC
byte_DF88:	dc.b 4			; ...
		dc.b $EC, 6, 0,	$30, $EC
		dc.b $EC, 9, 0,	$1B, $FC
		dc.b $FC, 9, 0,	$36, $FC
		dc.b $C, 0, 0, $3C, $C
byte_DF9D:	dc.b 3			; ...
		dc.b $F4, $D, 0, $3D, $EC
		dc.b $FC, 0, 0,	$20, $C
		dc.b 4,	8, 0, $45, $FC
byte_DFAD:	dc.b 2			; ...
		dc.b $F8, $D, 0, $48, $EC
		dc.b $F8, 1, 0,	$50, $C
byte_DFB8:	dc.b 3			; ...
		dc.b $F8, $D, 0, $48, $EC
		dc.b $F8, 1, 0,	$50, $C
		dc.b $FE, 0, 0,	$52, $14
byte_DFC8:	dc.b 3			; ...
		dc.b $F8, $D, 0, $48, $EC
		dc.b $F8, 1, 0,	$50, $C
		dc.b $FE, 4, 0,	$53, $14
byte_DFD8:	dc.b 3			; ...
		dc.b $F8, $D, 0, $48, $EC
		dc.b $F8, 1, 0,	$50, $C
		dc.b $FE, 0, $E0, $52, $14
byte_DFE8:	dc.b 3			; ...
		dc.b $F8, $D, 0, $48, $EC
		dc.b $F8, 1, 0,	$50, $C
		dc.b $FE, 4, $E0, $53, $14
byte_DFF8:	dc.b 0			; ...
		dc.b 0
; ---------------------------------------------------------------------------
; Object 43 - Roller enemy (SYZ)
; ---------------------------------------------------------------------------

Obj43:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj43_Index(pc,d0.w),d1
		jmp	Obj43_Index(pc,d1.w)
Obj43_Index:	dc.w Obj43_Main-Obj43_Index ; ...
		dc.w Obj43_Action-Obj43_Index

Obj43_Main:				; ...
		move.b	#$E,$16(a0)
		move.b	#8,$17(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_E052
		add.w	d1,$C(a0)	; match	roller's position with the floor
		move.w	#0,$12(a0)
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj43,4(a0)
		move.w	#$4B8,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$10,$19(a0)

locret_E052:				; ...
		rts	

Obj43_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj43_Index2(pc,d0.w),d1
		jsr	Obj43_Index2(pc,d1.w)
		lea	$880000+(Ani_obj43).l,a1
		jsr	$880000+AnimateSprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bgt.w	Obj43_ChkGone
		jmp	$880000+DisplaySprite

Obj43_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj43_Delete
		bclr	#7,2(a2,d0.w)

Obj43_Delete:				; ...
		jmp	$880000+DeleteObject
Obj43_Index2:	dc.w Obj43_RollChk-Obj43_Index2	; ...
		dc.w Obj43_RollNoChk-Obj43_Index2
		dc.w Obj43_ChkJump-Obj43_Index2
		dc.w Obj43_MatchFloor-Obj43_Index2

Obj43_RollChk:				; ...
		move.w	($FFFFD008).w,d0
		subi.w	#$100,d0
		bcs.s	loc_E0D2
		sub.w	8(a0),d0	; check	distance between Roller	and Sonic
		bcs.s	loc_E0D2
		addq.b	#4,$25(a0)
		move.b	#2,$1C(a0)
		move.w	#$700,$10(a0)	; move Roller horizontally
		move.b	#$8E,$20(a0)	; make Roller invincible

loc_E0D2:				; ...
		addq.l	#4,sp
		rts	

Obj43_RollNoChk:			; ...
		cmpi.b	#2,$1C(a0)
		beq.s	loc_E0F8
		subq.w	#1,$30(a0)
		bpl.s	locret_E0F6
		move.b	#1,$1C(a0)
		move.w	#$700,$10(a0)
		move.b	#$8E,$20(a0)

locret_E0F6:				; ...
		rts	

loc_E0F8:				; ...
		addq.b	#2,$25(a0)
		rts	

Obj43_ChkJump:				; ...
		bsr.w	Obj43_Stop
		jsr	$880000+SpeedToPos
		jsr	$880000+ObjHitFloor
		cmpi.w	#-8,d1
		blt.s	Obj43_Jump
		cmpi.w	#$C,d1
		bge.s	Obj43_Jump
		add.w	d1,$C(a0)
		rts	

Obj43_Jump:				; ...
		addq.b	#2,$25(a0)
		bset	#0,$32(a0)
		beq.s	locret_E12E
		move.w	#-$600,$12(a0)	; move Roller vertically

locret_E12E:				; ...
		rts	

Obj43_MatchFloor:			; ...
		jsr	$880000+ObjectFall
		tst.w	$12(a0)
		bmi.s	locret_E150
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_E150
		add.w	d1,$C(a0)	; match	Roller's position with the floor
		subq.b	#2,$25(a0)
		move.w	#0,$12(a0)

locret_E150:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj43_Stop:				; ...
		tst.b	$32(a0)
		bmi.s	locret_E188
		move.w	($FFFFD008).w,d0
		subi.w	#$30,d0
		sub.w	8(a0),d0
		bcc.s	locret_E188
		move.b	#0,$1C(a0)
		move.b	#$E,$20(a0)
		clr.w	$10(a0)
		move.w	#120,$30(a0)	; set waiting time to 2	seconds
		move.b	#2,$25(a0)
		bset	#7,$32(a0)

locret_E188:				; ...
		rts	
; End of function Obj43_Stop

Ani_obj43:	dc.w byte_E190-Ani_obj43, byte_E196-Ani_obj43, byte_E19C-Ani_obj43 ; ...
byte_E190:	dc.b $F, 2, 1, 0, $FE, 1 ; ...
byte_E196:	dc.b $F, 1, 2, $FD, 2, 0 ; ...
byte_E19C:	dc.b 3,	3, 4, 2, $FF, 0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Roller enemy (SYZ)
; ---------------------------------------------------------------------------
Map_obj43:	dc.w byte_E1AC-Map_obj43, byte_E1B7-Map_obj43 ;	...
		dc.w byte_E1C2-Map_obj43, byte_E1C8-Map_obj43
		dc.w byte_E1CE-Map_obj43
byte_E1AC:	dc.b 2			; ...
		dc.b $DE, $E, 0, 0, $F0
		dc.b $F6, $E, 0, $C, $F0
byte_E1B7:	dc.b 2			; ...
		dc.b $E6, $E, 0, 0, $F0
		dc.b $FE, $D, 0, $18, $F0
byte_E1C2:	dc.b 1			; ...
		dc.b $F0, $F, 0, $20, $F0
byte_E1C8:	dc.b 1			; ...
		dc.b $F0, $F, 0, $30, $F0
byte_E1CE:	dc.b 1			; ...
		dc.b $F0, $F, 0, $40, $F0
; ---------------------------------------------------------------------------
; Object 44 - walls (GHZ)
; ---------------------------------------------------------------------------

Obj44:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj44_Index(pc,d0.w),d1
		jmp	Obj44_Index(pc,d1.w)
Obj44_Index:	dc.w Obj44_Main-Obj44_Index ; ...
		dc.w Obj44_Solid-Obj44_Index
		dc.w Obj44_Display-Obj44_Index

Obj44_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj44,4(a0)
		move.w	#$434C,2(a0)
		ori.b	#4,1(a0)
		move.b	#8,$19(a0)
		move.b	#6,$18(a0)
		move.b	$28(a0),$1A(a0)	; copy object type number to frame number
		bclr	#4,$1A(a0)	; clear	4th bit	(deduct	$10)
		beq.s	Obj44_Solid	; make object solid if 4th bit = 0
		addq.b	#2,$24(a0)
		bra.s	Obj44_Display	; don't make it solid if 4th bit = 1

Obj44_Solid:				; ...
		move.w	#$13,d1
		move.w	#$28,d2
		bsr.w	Obj44_SolidWall

Obj44_Display:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj44_Delete
		rts	
		
Obj44_Delete:
		jmp	$880000+DeleteObject
		
Obj44_SolidWall:			; ...
		bsr.w	Obj44_SolidWall2
		beq.s	loc_8AA8
		bmi.w	loc_8AC4
		tst.w	d0
		beq.w	loc_8A92
		bmi.s	loc_8A7C
		tst.w	$10(a1)
		bmi.s	loc_8A92
		bra.s	loc_8A82

loc_8A7C:				; ...
		tst.w	$10(a1)
		bpl.s	loc_8A92

loc_8A82:				; ...
		sub.w	d0,8(a1)
		move.w	#0,$14(a1)
		move.w	#0,$10(a1)

loc_8A92:				; ...
		btst	#1,$22(a1)
		bne.s	loc_8AB6
		bset	#5,$22(a1)
		bset	#5,$22(a0)
		rts	

loc_8AA8:				; ...
		btst	#5,$22(a0)
		beq.s	locret_8AC2
		move.w	#1,$1C(a1)

loc_8AB6:				; ...
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)

locret_8AC2:				; ...
		rts	

loc_8AC4:				; ...
		tst.w	$12(a1)
		bpl.s	locret_8AD8
		tst.w	d3
		bpl.s	locret_8AD8
		sub.w	d3,$C(a1)
		move.w	#0,$12(a1)

locret_8AD8:				; ...
		rts	
; End of function Obj44_SolidWall


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj44_SolidWall2:			; ...
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_8B48
		move.w	d1,d3
		add.w	d3,d3
		cmp.w	d3,d0
		bhi.s	loc_8B48
		move.b	$16(a1),d3
		ext.w	d3
		add.w	d3,d2
		move.w	$C(a1),d3
		sub.w	$C(a0),d3
		add.w	d2,d3
		bmi.s	loc_8B48
		move.w	d2,d4
		add.w	d4,d4
		cmp.w	d4,d3
		bcc.s	loc_8B48
		tst.b	($FFFFF7C8).w
		bmi.s	loc_8B48
		cmpi.b	#6,($FFFFD024).w
		bcc.s	loc_8B48
		tst.w	($FFFFFE08).w
		bne.s	loc_8B48
		move.w	d0,d5
		cmp.w	d0,d1
		bcc.s	loc_8B30
		add.w	d1,d1
		sub.w	d1,d0
		move.w	d0,d5
		neg.w	d5

loc_8B30:				; ...
		move.w	d3,d1
		cmp.w	d3,d2
		bcc.s	loc_8B3C
		sub.w	d4,d3
		move.w	d3,d1
		neg.w	d1

loc_8B3C:				; ...
		cmp.w	d1,d5
		bhi.s	loc_8B44
		moveq	#1,d4
		rts	

loc_8B44:				; ...
		moveq	#-1,d4
		rts	

loc_8B48:				; ...
		moveq	#0,d4
		rts	
; End of function Obj44_SolidWall2		
		
; ---------------------------------------------------------------------------
; Sprite mappings - walls (GHZ)
; ---------------------------------------------------------------------------
Map_obj44:	dc.w byte_E256-Map_obj44 ; ...
		dc.w byte_E26B-Map_obj44
		dc.w byte_E280-Map_obj44
byte_E256:	dc.b 4			; ...
		dc.b $E0, 5, 0,	4, $F8
		dc.b $F0, 5, 0,	8, $F8
		dc.b 0,	5, 0, 8, $F8
		dc.b $10, 5, 0,	8, $F8
byte_E26B:	dc.b 4			; ...
		dc.b $E0, 5, 0,	8, $F8
		dc.b $F0, 5, 0,	8, $F8
		dc.b 0,	5, 0, 8, $F8
		dc.b $10, 5, 0,	8, $F8
byte_E280:	dc.b 4			; ...
		dc.b $E0, 5, 0,	0, $F8
		dc.b $F0, 5, 0,	0, $F8
		dc.b 0,	5, 0, 0, $F8
		dc.b $10, 5, 0,	0, $F8
		dc.b 0

; ---------------------------------------------------------------------------
; Object 46 - solid blocks and blocks that fall	from the ceiling (MZ)
; ---------------------------------------------------------------------------

Obj46:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj46_Index(pc,d0.w),d1
		jmp	Obj46_Index(pc,d1.w)
Obj46_Index:	dc.w Obj46_Main-Obj46_Index ; ...
		dc.w Obj46_Action-Obj46_Index

Obj46_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#$F,$16(a0)
		move.b	#$F,$17(a0)
		move.l	#$880000+Map_obj46,4(a0)
		move.w	#$4000,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$10,$19(a0)
		move.w	$C(a0),$30(a0)
		move.w	#$5C0,$32(a0)

Obj46_Action:				; ...
		tst.b	1(a0)
		bpl.s	Obj46_ChkDel
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		andi.w	#7,d0		; read only the	1st digit
		add.w	d0,d0
		move.w	Obj46_TypeIndex(pc,d0.w),d1
		jsr	Obj46_TypeIndex(pc,d1.w)
		move.w	#$1B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject

Obj46_ChkDel:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj46_Delete
		rts	
		
Obj46_Delete:
		jmp	$880000+DeleteObject
		
Obj46_TypeIndex:dc.w Obj46_Type00-Obj46_TypeIndex ; ...
		dc.w Obj46_Type01-Obj46_TypeIndex
		dc.w Obj46_Type02-Obj46_TypeIndex
		dc.w Obj46_Type03-Obj46_TypeIndex
		dc.w Obj46_Type04-Obj46_TypeIndex

Obj46_Type00:				; ...
		rts	

Obj46_Type02:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_E888
		neg.w	d0

loc_E888:				; ...
		cmpi.w	#$90,d0		; is Sonic within $90 pixels of	the block?
		bcc.s	Obj46_Type01	; if not, resume wobbling
		move.b	#3,$28(a0)	; if yes, make the block fall

Obj46_Type01:				; ...
		moveq	#0,d0
		move.b	($FFFFFE74).w,d0
		btst	#3,$28(a0)
		beq.s	loc_E8A8
		neg.w	d0
		addi.w	#$10,d0

loc_E8A8:				; ...
		move.w	$30(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; update the block's position to make it wobble
		rts	

Obj46_Type03:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; increase falling speed
		jsr	$880000+ObjHitFloor
		tst.w	d1		; has the block	hit the	floor?
		bpl.w	locret_E8EE	; if not, branch
		add.w	d1,$C(a0)
		clr.w	$12(a0)		; stop the block falling
		move.w	$C(a0),$30(a0)
		move.b	#4,$28(a0)
		move.w	(a1),d0
		andi.w	#$3FF,d0
		cmpi.w	#$2E8,d0
		bcc.s	locret_E8EE
		move.b	#0,$28(a0)

locret_E8EE:				; ...
		rts	

Obj46_Type04:				; ...
		moveq	#0,d0
		move.b	($FFFFFE70).w,d0
		lsr.w	#3,d0
		move.w	$30(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; make the block wobble
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - solid blocks and blocks that fall from the ceiling (MZ)
; ---------------------------------------------------------------------------
Map_obj46:	dc.w byte_E906-Map_obj46 ; ...
byte_E906:	dc.b 1			; ...
		dc.b $F0, $F, 0, 1, $F0

; ---------------------------------------------------------------------------
; Object 47 - pinball bumper (SYZ)
; ---------------------------------------------------------------------------

Obj47:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj47_Index(pc,d0.w),d1
		jmp	Obj47_Index(pc,d1.w)
Obj47_Index:	dc.w Obj47_Main-Obj47_Index ; ...
		dc.w Obj47_Hit-Obj47_Index

Obj47_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj47,4(a0)
		move.w	#$380,2(a0)
		move.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#1,$18(a0)
		move.b	#$D7,$20(a0)

Obj47_Hit:				; ...
		tst.b	$21(a0)		; has Sonic touched the	bumper?
		beq.w	Obj47_Display	; if not, branch
		clr.b	$21(a0)
		lea	($FFFFD000).w,a1
		move.w	8(a0),d1
		move.w	$C(a0),d2
		sub.w	8(a1),d1
		sub.w	$C(a1),d2
		jsr	$880000+(CalcAngle).l
		jsr	$880000+(CalcSine).l
		muls.w	#-$700,d1
		asr.l	#8,d1
		move.w	d1,$10(a1)	; bounce Sonic away
		muls.w	#-$700,d0
		asr.l	#8,d0
		move.w	d0,$12(a1)	; bounce Sonic away
		bset	#1,$22(a1)
		bclr	#4,$22(a1)
		bclr	#5,$22(a1)
		clr.b	$3C(a1)
		move.b	#1,$1C(a0)
		move.w	#$B4,d0
		jsr	$880000+(PlaySound_Special).l ;	play bumper sound
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj47_Score
		cmpi.b	#$8A,2(a2,d0.w)	; has bumper been hit $8A times?
		bcc.s	Obj47_Display	; if yes, Sonic	gets no	points
		addq.b	#1,2(a2,d0.w)

Obj47_Score:				; ...
		moveq	#1,d0
		jsr	$880000+AddPoints	; add 10 to score
		jsr	$880000+SingleObjLoad
		bne.s	Obj47_Display
		move.b	#$29,0(a1)	; load points object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#4,$1A(a1)

Obj47_Display:				; ...
		lea	(Ani_obj47)(pc),a1
		jsr	$880000+AnimateSprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj47_ChkHit
		jmp	$880000+DisplaySprite

Obj47_ChkHit:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj47_Delete
		bclr	#7,2(a2,d0.w)

Obj47_Delete:				; ...
		jmp	$880000+DeleteObject
Ani_obj47:	dc.w byte_EAF4-Ani_obj47, byte_EAF8-Ani_obj47 ;	...
byte_EAF4:	dc.b $F, 0, $FF, 0	; ...
byte_EAF8:	dc.b 3,	1, 2, 1, 2, $FD, 0, 0 ;	...
; ---------------------------------------------------------------------------
; Sprite mappings - pinball bumper (SYZ)
; ---------------------------------------------------------------------------
Map_obj47:	dc.w byte_EB06-Map_obj47 ; ...
		dc.w byte_EB11-Map_obj47
		dc.w byte_EB1C-Map_obj47
byte_EB06:	dc.b 2			; ...
		dc.b $F0, 7, 0,	0, $F0
		dc.b $F0, 7, 8,	0, 0
byte_EB11:	dc.b 2			; ...
		dc.b $F4, 6, 0,	8, $F4
		dc.b $F4, 2, 8,	8, 4
byte_EB1C:	dc.b 2			; ...
		dc.b $F0, 7, 0,	$E, $F0
		dc.b $F0, 7, 8,	$E, 0
		dc.b 0

; ---------------------------------------------------------------------------
; Object 4F - blank
; ---------------------------------------------------------------------------

Obj4F:					; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj50_ChkWall:				; ...
		move.w	($FFFFFE04).w,d0
		add.w	d7,d0
		andi.w	#3,d0
		bne.s	loc_F836
		moveq	#0,d3
		move.b	$19(a0),d3
		tst.w	$10(a0)
		bmi.s	loc_F82C
		jsr	$880000+ObjHitWallRight
		tst.w	d1
		bpl.s	loc_F836

loc_F828:				; ...
		moveq	#1,d0
		rts	

loc_F82C:				; ...
		not.w	d3
		jsr	$880000+ObjHitWallLeft
		tst.w	d1
		bmi.s	loc_F828

loc_F836:				; ...
		moveq	#0,d0
		rts	
; End of function Obj50_ChkWall

; ---------------------------------------------------------------------------
; Object 50 - Yadrin enemy (SYZ)
; ---------------------------------------------------------------------------

Obj50:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj50_Index(pc,d0.w),d1
		jmp	Obj50_Index(pc,d1.w)
Obj50_Index:	dc.w Obj50_Main-Obj50_Index ; ...
		dc.w Obj50_Action-Obj50_Index

Obj50_Main:				; ...
		move.l	#$880000+Map_obj50,4(a0)
		move.w	#$247B,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$14,$19(a0)
		move.b	#$11,$16(a0)
		move.b	#8,$17(a0)
		move.b	#$CC,$20(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_F89E
		add.w	d1,$C(a0)	; match	object's position with the floor
		move.w	#0,$12(a0)
		addq.b	#2,$24(a0)
		bchg	#0,$22(a0)

locret_F89E:				; ...
		rts	

Obj50_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj50_Index2(pc,d0.w),d1
		jsr	Obj50_Index2(pc,d1.w)
		lea	$880000+(Ani_obj50).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj50_Index2:	dc.w Obj50_Move-Obj50_Index2 ; ...
		dc.w Obj50_FixToFloor-Obj50_Index2

Obj50_Move:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from pause	time
		bpl.s	locret_F8E2	; if time remains, branch
		addq.b	#2,$25(a0)
		move.w	#-$100,$10(a0)	; move object
		move.b	#1,$1C(a0)
		bchg	#0,$22(a0)
		bne.s	locret_F8E2
		neg.w	$10(a0)		; change direction

locret_F8E2:				; ...
		rts	

Obj50_FixToFloor:			; ...
		jsr	$880000+SpeedToPos
		jsr	$880000+ObjHitFloor
		cmpi.w	#-8,d1
		blt.s	Obj50_Pause
		cmpi.w	#$C,d1
		bge.s	Obj50_Pause
		add.w	d1,$C(a0)	; match	object's position to the floor
		bsr.w	Obj50_ChkWall
		bne.s	Obj50_Pause
		rts	

Obj50_Pause:				; ...
		subq.b	#2,$25(a0)
		move.w	#59,$30(a0)	; set pause time to 1 second
		move.w	#0,$10(a0)
		move.b	#0,$1C(a0)
		rts	
Ani_obj50:	dc.w byte_F920-Ani_obj50, byte_F924-Ani_obj50 ;	...
byte_F920:	dc.b 7,	0, $FF,	0	; ...
byte_F924:	dc.b 7,	0, 3, 1, 4, 0, 3, 2, 5,	$FF ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Yadrin enemy (SYZ)
; ---------------------------------------------------------------------------
Map_obj50:	dc.w byte_F93A-Map_obj50, byte_F954-Map_obj50 ;	...
		dc.w byte_F96E-Map_obj50, byte_F988-Map_obj50
		dc.w byte_F9A2-Map_obj50, byte_F9BC-Map_obj50
byte_F93A:	dc.b 5			; ...
		dc.b $F4, 8, 0,	0, $F4
		dc.b $FC, $E, 0, 3, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $31, $FC
byte_F954:	dc.b 5			; ...
		dc.b $F4, 8, 0,	$14, $F4
		dc.b $FC, $E, 0, $17, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $31, $FC
byte_F96E:	dc.b 5			; ...
		dc.b $F4, 9, 0,	$23, $F4
		dc.b 4,	$D, 0, $29, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $31, $FC
byte_F988:	dc.b 5			; ...
		dc.b $F4, 8, 0,	0, $F4
		dc.b $FC, $E, 0, 3, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $37, $FC
byte_F9A2:	dc.b 5			; ...
		dc.b $F4, 8, 0,	$14, $F4
		dc.b $FC, $E, 0, $17, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $37, $FC
byte_F9BC:	dc.b 5			; ...
		dc.b $F4, 9, 0,	$23, $F4
		dc.b 4,	$D, 0, $29, $EC
		dc.b $EC, 4, 0,	$F, $FC
		dc.b $F4, 2, 0,	$11, $C
		dc.b 4,	9, 0, $37, $FC

; ---------------------------------------------------------------------------
; Object 51 - smashable	green block (MZ)
; ---------------------------------------------------------------------------

Obj51:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj51_Index(pc,d0.w),d1
		jsr	Obj51_Index(pc,d1.w)
		bra.w	MarkObjGone
Obj51_Index:	dc.w Obj51_Main-Obj51_Index ; ...
		dc.w Obj51_Solid-Obj51_Index
		dc.w Obj51_Display-Obj51_Index

Obj51_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj51,4(a0)
		move.w	#$42B8,2(a0)
		move.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		move.b	$28(a0),$1A(a0)

Obj51_Solid:				; ...
		move.w	($FFFFF7D0).w,$34(a0)
		move.b	($FFFFD01C).w,$32(a0) ;	load Sonic's animation number
		move.w	#$1B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#3,$22(a0)
		bne.s	Obj51_Smash

locret_FCFC:				; ...
		rts	

Obj51_Smash:				; ...
		cmpi.b	#2,$32(a0)	; is Sonic rolling/jumping?
		bne.s	locret_FCFC	; if not, branch
		move.w	$34(a0),($FFFFF7D0).w
		bset	#2,$22(a1)
		move.b	#$E,$16(a1)
		move.b	#7,$17(a1)
		move.b	#2,$1C(a1)
		move.w	#-$300,$12(a1)	; bounce Sonic upwards
		bset	#1,$22(a1)
		bclr	#3,$22(a1)
		move.b	#2,$24(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		move.b	#1,$1A(a0)
		lea	(Obj51_Speeds)(pc),a4 ; load broken fragment speed data
		moveq	#3,d1		; set number of	fragments to 4
		move.w	#$38,d2
		bsr.w	SmashObject
		jsr	$880000+SingleObjLoad
		bne.s	Obj51_Display
		move.b	#$29,0(a1)	; load points object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	($FFFFF7D0).w,d2
		addq.w	#2,($FFFFF7D0).w
		cmpi.w	#6,d2
		bcs.s	Obj51_Bonus
		moveq	#6,d2

Obj51_Bonus:				; ...
		moveq	#0,d0
		move.w	Obj51_Points(pc,d2.w),d0
		cmpi.w	#$20,($FFFFF7D0).w ; have 16 blocks been smashed?
		bcs.s	loc_FD98	; if not, branch
		move.w	#1000,d0	; give higher points for 16th block
		moveq	#10,d2

loc_FD98:				; ...
		jsr	$880000+AddPoints
		lsr.w	#1,d2
		move.b	d2,$1A(a1)

Obj51_Display:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$38,$12(a0)
		jsr	$880000+DisplaySprite
		tst.b	1(a0)
		bpl.w	Obj52_Delete
		rts	
Obj51_Speeds:	dc.w $FE00, $FE00	; ...
		dc.w $FF00, $FF00	; x-speed, y-speed
		dc.w $200, $FE00
		dc.w $100, $FF00

Obj51_Points:	dc.w 10, 20, 50, 100
; ---------------------------------------------------------------------------
; Sprite mappings - smashable green block (MZ)
; ---------------------------------------------------------------------------
Map_obj51:	dc.w byte_FDD8-Map_obj51 ; ...
		dc.w byte_FDE3-Map_obj51
byte_FDD8:	dc.b 2			; ...
		dc.b $F0, $D, 0, 0, $F0
		dc.b 0,	$D, 0, 0, $F0
byte_FDE3:	dc.b 4			; ...
		dc.b $F0, 5, $80, 0, $F0
		dc.b 0,	5, $80,	0, $F0
		dc.b $F0, 5, $80, 0, 0
		dc.b 0,	5, $80,	0, 0
; ---------------------------------------------------------------------------
; Object 52 - moving platform blocks (MZ, LZ, SBZ)
; ---------------------------------------------------------------------------

Obj52:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj52_Index(pc,d0.w),d1
		jmp	Obj52_Index(pc,d1.w)
Obj52_Index:	dc.w Obj52_Main-Obj52_Index ; ...
		dc.w Obj52_Platform-Obj52_Index
		dc.w Obj52_StandOn-Obj52_Index

Obj52_Var:	dc.b $10, 0		; object width,	frame number
		dc.b $20, 1
		dc.b $20, 2
		dc.b $40, 3
		dc.b $30, 4

Obj52_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj52,4(a0)
		move.w	#$42B8,2(a0)
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	loc_FE44
		move.l	#$880000+Map_obj52a,4(a0) ; LZ specific	code
		move.w	#$43BC,2(a0)
		move.b	#7,$16(a0)

loc_FE44:				; ...
		cmpi.b	#5,($FFFFFE10).w ; check if level is SBZ
		bne.s	loc_FE60
		move.w	#$22C0,2(a0)	; SBZ specific code (object 5228)
		cmpi.b	#$28,$28(a0)	; is object 5228 ?
		beq.s	loc_FE60	; if yes, branch
		move.w	#$4460,2(a0)	; SBZ specific code (object 523x)

loc_FE60:				; ...
		move.b	#4,1(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#3,d0
		andi.w	#$1E,d0
		lea	Obj52_Var(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2)+,$1A(a0)
		move.b	#4,$18(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$32(a0)
		andi.b	#$F,$28(a0)

Obj52_Platform:				; ...
		bsr.w	Obj52_Move
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(PlatformObject).l
		bra.s	Obj52_ChkDel

Obj52_StandOn:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(ExitPlatform).l
		move.w	8(a0),-(sp)
		bsr.w	Obj52_Move
		move.w	(sp)+,d2
		jsr	$880000+(MvSonicOnPtfm2).l

Obj52_ChkDel:				; ...
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj52_Delete
		jmp	$880000+DisplaySprite

Obj52_Move:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj52_TypeIndex(pc,d0.w),d1
		jmp	Obj52_TypeIndex(pc,d1.w)
Obj52_TypeIndex:dc.w Obj52_Type00-Obj52_TypeIndex, Obj52_Type01-Obj52_TypeIndex	; ...
		dc.w Obj52_Type02-Obj52_TypeIndex, Obj52_Type03-Obj52_TypeIndex
		dc.w Obj52_Type02-Obj52_TypeIndex, Obj52_Type05-Obj52_TypeIndex
		dc.w Obj52_Type06-Obj52_TypeIndex, Obj52_Type07-Obj52_TypeIndex
		dc.w Obj52_Type08-Obj52_TypeIndex, Obj52_Type02-Obj52_TypeIndex
		dc.w Obj52_Type0A-Obj52_TypeIndex

Obj52_Type00:				; ...
		rts	

Obj52_Type01:				; ...
		move.b	($FFFFFE6C).w,d0
		move.w	#$60,d1
		btst	#0,$22(a0)
		beq.s	loc_FF26
		neg.w	d0
		add.w	d1,d0

loc_FF26:				; ...
		move.w	$30(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)
		rts	

Obj52_Type02:				; ...
		cmpi.b	#4,$24(a0)	; is Sonic standing on the platform?
		bne.s	Obj52_02_Wait
		addq.b	#1,$28(a0)	; if yes, add 1	to type

Obj52_02_Wait:				; ...
		rts	

Obj52_Type03:				; ...
		moveq	#0,d3
		move.b	$19(a0),d3
		jsr	$880000+ObjHitWallRight
		tst.w	d1		; has the platform hit a wall?
		bmi.s	Obj52_03_End	; if yes, branch
		addq.w	#1,8(a0)	; move platform	to the right
		move.w	8(a0),$30(a0)
		rts	

Obj52_03_End:				; ...
		clr.b	$28(a0)		; change to type 00 (non-moving	type)
		rts	

Obj52_Type05:				; ...
		moveq	#0,d3
		move.b	$19(a0),d3
		jsr	$880000+ObjHitWallRight
		tst.w	d1		; has the platform hit a wall?
		bmi.s	Obj52_05_End	; if yes, branch
		addq.w	#1,8(a0)	; move platform	to the right
		move.w	8(a0),$30(a0)
		rts	

Obj52_05_End:				; ...
		addq.b	#1,$28(a0)	; change to type 06 (falling)
		rts	

Obj52_Type06:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; make the platform fall
		jsr	$880000+ObjHitFloor
		tst.w	d1		; has platform hit the floor?
		bpl.w	locret_FFA0	; if not, branch
		add.w	d1,$C(a0)
		clr.w	$12(a0)		; stop platform	falling
		clr.b	$28(a0)		; change to type 00 (non-moving)

locret_FFA0:				; ...
		rts	

Obj52_Type07:				; ...
		tst.b	($FFFFF7E2).w	; has switch number 02 been pressed?
		beq.s	Obj52_07_ChkDel
		subq.b	#3,$28(a0)	; if yes, change object	type to	04

Obj52_07_ChkDel:			; ...
		addq.l	#4,sp
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj52_Delete
		rts	
		
Obj52_Delete:
		jmp	$880000+DeleteObject
		rts

Obj52_Type08:				; ...
		move.b	($FFFFFE7C).w,d0
		move.w	#$80,d1
		btst	#0,$22(a0)
		beq.s	loc_FFE2
		neg.w	d0
		add.w	d1,d0

loc_FFE2:				; ...
		move.w	$32(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)
		rts	

Obj52_Type0A:				; ...
		moveq	#0,d3
		move.b	$19(a0),d3
		add.w	d3,d3
		moveq	#8,d1
		btst	#0,$22(a0)
		beq.s	loc_10004
		neg.w	d1
		neg.w	d3

loc_10004:				; ...
		tst.w	$36(a0)		; is platform set to move back?
		bne.s	Obj52_0A_Back	; if yes, branch
		move.w	8(a0),d0
		sub.w	$30(a0),d0
		cmp.w	d3,d0
		beq.s	Obj52_0A_Wait
		add.w	d1,8(a0)	; move platform
		move.w	#300,$34(a0)	; set time delay to 5 seconds
		rts	

Obj52_0A_Wait:				; ...
		subq.w	#1,$34(a0)	; subtract 1 from time delay
		bne.s	locret_1002E	; if time remains, branch
		move.w	#1,$36(a0)	; set platform to move back to its original position

locret_1002E:				; ...
		rts	

Obj52_0A_Back:				; ...
		move.w	8(a0),d0
		sub.w	$30(a0),d0
		beq.s	Obj52_0A_Reset
		sub.w	d1,8(a0)	; return platform to its original position
		rts	

Obj52_0A_Reset:				; ...
		clr.w	$36(a0)
		subq.b	#1,$28(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - moving blocks (MZ, SBZ)
; ---------------------------------------------------------------------------
Map_obj52:	dc.w byte_10054-Map_obj52, byte_1005A-Map_obj52	; ...
		dc.w byte_10065-Map_obj52, byte_1007A-Map_obj52
		dc.w byte_1008F-Map_obj52
byte_10054:	dc.b 1			; ...
		dc.b $F8, $F, 0, 8, $F0
byte_1005A:	dc.b 2			; ...
		dc.b $F8, $F, 0, 8, $E0
		dc.b $F8, $F, 0, 8, 0
byte_10065:	dc.b 4			; ...
		dc.b $F8, $C, $20, 0, $E0
		dc.b 0,	$D, 0, 4, $E0
		dc.b $F8, $C, $20, 0, 0
		dc.b 0,	$D, 0, 4, 0
byte_1007A:	dc.b 4			; ...
		dc.b $F8, $E, 0, 0, $C0
		dc.b $F8, $E, 0, 3, $E0
		dc.b $F8, $E, 0, 3, 0
		dc.b $F8, $E, 8, 0, $20
byte_1008F:	dc.b 3			; ...
		dc.b $F8, $F, 0, 8, $D0
		dc.b $F8, $F, 0, 8, $F0
		dc.b $F8, $F, 0, 8, $10
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - moving block (LZ)
; ---------------------------------------------------------------------------
Map_obj52a:	dc.w byte_100A2-Map_obj52a ; ...
byte_100A2:	dc.b 1			; ...
		dc.b $F8, $D, 0, 0, $F0
		
; ---------------------------------------------------------------------------
; Object 4C - lava geyser / lavafall producer (MZ)
; ---------------------------------------------------------------------------

Obj4C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj4C_Index(pc,d0.w),d1
		jsr	Obj4C_Index(pc,d1.w)
		bra.w	Obj4D_ChkDel
Obj4C_Index:	dc.w Obj4C_Main-Obj4C_Index ; ...
		dc.w loc_EDCC-Obj4C_Index
		dc.w loc_EE3E-Obj4C_Index
		dc.w Obj4C_MakeLava-Obj4C_Index
		dc.w Obj4C_Display-Obj4C_Index
		dc.w Obj4C_Delete-Obj4C_Index

Obj4C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj4C,4(a0)
		move.w	#$E3A8,2(a0)
		move.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.b	#$38,$19(a0)
		move.w	#120,$34(a0)	; set time delay to 2 seconds

loc_EDCC:				; ...
		subq.w	#1,$32(a0)
		bpl.s	locret_EDF0
		move.w	$34(a0),$32(a0)
		move.w	($FFFFD00C).w,d0
		move.w	$C(a0),d1
		cmp.w	d1,d0
		bcc.s	locret_EDF0
		subi.w	#$170,d1
		cmp.w	d1,d0
		bcs.s	locret_EDF0
		addq.b	#2,$24(a0)

locret_EDF0:				; ...
		rts	

Obj4C_MakeLava:				; ...
		addq.b	#2,$24(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	loc_EE18
		move.b	#$4D,0(a1)	; load lavafall	object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$28(a0),$28(a1)
		move.l	a0,$3C(a1)

loc_EE18:				; ...
		move.b	#1,$1C(a0)
		tst.b	$28(a0)		; is object type 00 (geyser) ?
		beq.s	Obj4C_Type00	; if yes, branch
		move.b	#4,$1C(a0)
		bra.s	Obj4C_Display

Obj4C_Type00:				; ...
		movea.l	$3C(a0),a1	; load geyser object
		bset	#1,$22(a1)
		move.w	#-$580,$12(a1)
		bra.s	Obj4C_Display

loc_EE3E:				; ...
		tst.b	$28(a0)		; is object type 00 (geyser) ?
		beq.s	Obj4C_Display	; if yes, branch
		addq.b	#2,$24(a0)
		rts	

Obj4C_Display:				; ...
		lea	$880000+(Ani_obj4C).l,a1
		jsr	$880000+AnimateSprite
		jsr	$880000+DisplaySprite
		rts	

Obj4C_Delete:				; ...
		move.b	#0,$1C(a0)
		move.b	#2,$24(a0)
		tst.b	$28(a0)
		beq.w	Obj4D_Delete
		rts	
; ---------------------------------------------------------------------------
; Object 4D - lava geyser / lavafall (MZ)
; ---------------------------------------------------------------------------

Obj4D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj4D_Index(pc,d0.w),d1
		jsr	Obj4D_Index(pc,d1.w)
		jmp	$880000+DisplaySprite
Obj4D_Index:	dc.w Obj4D_Main-Obj4D_Index ; ...
		dc.w Obj4D_Action-Obj4D_Index
		dc.w loc_EFFC-Obj4D_Index
		dc.w Obj4D_Delete-Obj4D_Index

Obj4D_Speeds:	dc.w $FB00, 0

Obj4D_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	$C(a0),$30(a0)
		tst.b	$28(a0)
		beq.s	loc_EEA4
		subi.w	#$250,$C(a0)

loc_EEA4:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj4D_Speeds(pc,d0.w),$12(a0)
		movea.l	a0,a1
		moveq	#1,d1
		bsr.s	Obj4D_MakeLava
		bra.s	loc_EF10

Obj4D_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_EF0A

Obj4D_MakeLava:				; ...
		move.b	#$4D,0(a1)
		move.l	#$880000+Map_obj4C,4(a1)
		move.w	#$63A8,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$28(a0),$28(a1)
		move.b	#1,$18(a1)
		move.b	#5,$1C(a1)
		tst.b	$28(a0)
		beq.s	loc_EF0A
		move.b	#2,$1C(a1)

loc_EF0A:				; ...
		dbf	d1,Obj4D_Loop
		rts	

loc_EF10:				; ...
		addi.w	#$60,$C(a1)
		move.w	$30(a0),$30(a1)
		addi.w	#$60,$30(a1)
		move.b	#$93,$20(a1)
		move.b	#$80,$16(a1)
		bset	#4,1(a1)
		addq.b	#4,$24(a1)
		move.l	a0,$3C(a1)
		tst.b	$28(a0)
		beq.s	Obj4D_PlaySnd
		moveq	#0,d1
		bsr.w	Obj4D_Loop
		addq.b	#2,$24(a1)
		bset	#4,2(a1)
		addi.w	#$100,$C(a1)
		move.b	#0,$18(a1)
		move.w	$30(a0),$30(a1)
		move.l	$3C(a0),$3C(a1)
		move.b	#0,$28(a0)

Obj4D_PlaySnd:				; ...
		move.w	#$C8,d0
		jsr	$880000+(PlaySound_Special).l ;	play flame sound

Obj4D_Action:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj4D_TypeIndex(pc,d0.w),d1
		jsr	Obj4D_TypeIndex(pc,d1.w)
		jsr	$880000+SpeedToPos
		lea	$880000+(Ani_obj4C).l,a1
		jsr	$880000+AnimateSprite

Obj4D_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj4D_Delete
		rts	
Obj4D_TypeIndex:dc.w Obj4D_Type00-Obj4D_TypeIndex ; ...
		dc.w Obj4D_Type01-Obj4D_TypeIndex

Obj4D_Type00:				; ...
		addi.w	#$18,$12(a0)	; increase object's falling speed
		move.w	$30(a0),d0
		cmp.w	$C(a0),d0
		bcc.s	locret_EFDA
		addq.b	#4,$24(a0)
		movea.l	$3C(a0),a1
		move.b	#3,$1C(a1)

locret_EFDA:				; ...
		rts	

Obj4D_Type01:				; ...
		addi.w	#$18,$12(a0)	; increase object's falling speed
		move.w	$30(a0),d0
		cmp.w	$C(a0),d0
		bcc.s	locret_EFFA
		addq.b	#4,$24(a0)
		movea.l	$3C(a0),a1
		move.b	#1,$1C(a1)

locret_EFFA:				; ...
		rts	

loc_EFFC:				; ...
		movea.l	$3C(a0),a1
		cmpi.b	#6,$24(a1)
		beq.w	Obj4D_Delete
		move.w	$C(a1),d0
		addi.w	#$60,d0
		move.w	d0,$C(a0)
		sub.w	$30(a0),d0
		neg.w	d0
		moveq	#8,d1
		cmpi.w	#$40,d0
		bge.s	loc_F026
		moveq	#$B,d1

loc_F026:				; ...
		cmpi.w	#$80,d0
		ble.s	loc_F02E
		moveq	#$E,d1

loc_F02E:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	loc_F04C
		move.b	#7,$1E(a0)
		addq.b	#1,$1B(a0)
		cmpi.b	#2,$1B(a0)
		bcs.s	loc_F04C
		move.b	#0,$1B(a0)

loc_F04C:				; ...
		move.b	$1B(a0),d0
		add.b	d1,d0
		move.b	d0,$1A(a0)
		bra.w	Obj4D_ChkDel

Obj4D_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 4E - advancing	wall of	lava (MZ)
; ---------------------------------------------------------------------------

Obj4E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj4E_Index(pc,d0.w),d1
		jmp	Obj4E_Index(pc,d1.w)
Obj4E_Index:	dc.w Obj4E_Main-Obj4E_Index ; ...
		dc.w Obj4E_Solid-Obj4E_Index
		dc.w Obj4E_Action-Obj4E_Index
		dc.w Obj4E_Move2-Obj4E_Index
		dc.w Obj4E_Delete-Obj4E_Index

Obj4E_Main:				; ...
		addq.b	#4,$24(a0)
		movea.l	a0,a1
		moveq	#1,d1
		bra.s	Obj4E_Main2

Obj4E_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_F0C8

Obj4E_Main2:				; ...
		move.b	#$4E,0(a1)	; load object
		move.l	#$880000+Map_obj4E,4(a1)
		move.w	#$63A8,2(a1)
		move.b	#4,1(a1)
		move.b	#$50,$19(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#1,$18(a1)
		move.b	#0,$1C(a1)
		move.b	#$94,$20(a1)
		move.l	a0,$3C(a1)

loc_F0C8:				; ...
		dbf	d1,Obj4E_Loop	; repeat sequence once
		addq.b	#6,$24(a1)
		move.b	#4,$1A(a1)

Obj4E_Action:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	Obj4E_ChkSonic
		neg.w	d0

Obj4E_ChkSonic:				; ...
		cmpi.w	#$C0,d0		; is Sonic within $C0 pixels (x-axis)?
		bcc.s	Obj4E_Move	; if not, branch
		move.w	($FFFFD00C).w,d0
		sub.w	$C(a0),d0
		bcc.s	loc_F0F4
		neg.w	d0

loc_F0F4:				; ...
		cmpi.w	#$60,d0		; is Sonic within $60 pixels (y-axis)?
		bcc.s	Obj4E_Move	; if not, branch
		move.b	#1,$36(a0)	; set object to	move
		bra.s	Obj4E_Solid

Obj4E_Move:				; ...
		tst.b	$36(a0)		; is object set	to move?
		beq.s	Obj4E_Solid	; if not, branch
		move.w	#$180,$10(a0)	; set object speed
		subq.b	#2,$24(a0)

Obj4E_Solid:				; ...
		move.w	#$2B,d1
		move.w	#$18,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		move.b	$24(a0),d0
		move.w	d0,-(sp)
		jsr	$880000+SolidObject
		move.w	(sp)+,d0
		move.b	d0,$24(a0)
		cmpi.w	#$6A0,8(a0)	; has object reached $6A0 on the x-axis?
		bne.s	Obj4E_Animate	; if not, branch
		clr.w	$10(a0)		; stop object moving
		clr.b	$36(a0)

Obj4E_Animate:				; ...
		lea	$880000+(Ani_obj4E).l,a1
		jsr	$880000+AnimateSprite
		cmpi.b	#4,($FFFFD024).w
		bcc.s	Obj4E_ChkDel
		jsr	$880000+SpeedToPos

Obj4E_ChkDel:				; ...
		jsr	$880000+DisplaySprite
		tst.b	$36(a0)
		bne.s	locret_F17E
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj4E_ChkGone

locret_F17E:				; ...
		rts	

Obj4E_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bclr	#7,2(a2,d0.w)
		move.b	#8,$24(a0)
		rts	

Obj4E_Move2:				; ...
		movea.l	$3C(a0),a1
		cmpi.b	#8,$24(a1)
		beq.s	Obj4E_Delete
		move.w	8(a1),8(a0)	; move rest of lava wall
		subi.w	#$80,8(a0)
		jmp	$880000+DisplaySprite

Obj4E_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 54 - invisible	lava tag (MZ)
; ---------------------------------------------------------------------------

Obj54:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj54_Index(pc,d0.w),d1
		jmp	Obj54_Index(pc,d1.w)
Obj54_Index:	dc.w Obj54_Main-Obj54_Index ; ...
		dc.w Obj54_ChkDel-Obj54_Index

Obj54_Sizes:	dc.b $96, $94, $95, 0

Obj54_Main:				; ...
		addq.b	#2,$24(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		move.b	Obj54_Sizes(pc,d0.w),$20(a0)
		move.l	#$880000+Map_obj54,4(a0)
		move.b	#$84,1(a0)

Obj54_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		bmi.w	Obj4E_Delete
		cmpi.w	#$280,d0
		bhi.w	Obj4E_Delete
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - invisible lava tag (MZ)
; ---------------------------------------------------------------------------
Map_obj54:	dc.w byte_F212-Map_obj54 ; ...
byte_F212:	dc.b 0			; ...
		dc.b 0

Ani_obj4C:	dc.w byte_F220-Ani_obj4C, byte_F22A-Ani_obj4C, byte_F22E-Ani_obj4C ; ...
		dc.w byte_F232-Ani_obj4C, byte_F23A-Ani_obj4C, byte_F23E-Ani_obj4C
byte_F220:	dc.b 2,	0, 1, 0, 1, 4, 5, 4, 5,	$FC ; ...
byte_F22A:	dc.b 2,	2, 3, $FF	; ...
byte_F22E:	dc.b 2,	6, 7, $FF	; ...
byte_F232:	dc.b 2,	2, 3, 0, 1, 0, 1, $FC ;	...
byte_F23A:	dc.b $F, $13, $FF, 0	; ...
byte_F23E:	dc.b 2,	$11, $12, $FF	; ...

Ani_obj4E:	dc.w byte_F244-Ani_obj4E ; ...
byte_F244:	dc.b 9,	0, 1, 2, 3, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - lava geyser	/ lava that falls from the ceiling (MZ)
; ---------------------------------------------------------------------------
Map_obj4C:	dc.w byte_F272-Map_obj4C, byte_F27D-Map_obj4C ;	...
		dc.w byte_F288-Map_obj4C, byte_F29D-Map_obj4C
		dc.w byte_F2B2-Map_obj4C, byte_F2D1-Map_obj4C
		dc.w byte_F2F0-Map_obj4C, byte_F2FB-Map_obj4C
		dc.w byte_F306-Map_obj4C, byte_F339-Map_obj4C
		dc.w byte_F36C-Map_obj4C, byte_F39F-Map_obj4C
		dc.w byte_F3BE-Map_obj4C, byte_F3DD-Map_obj4C
		dc.w byte_F3FC-Map_obj4C, byte_F44D-Map_obj4C
		dc.w byte_F49E-Map_obj4C, byte_F4EF-Map_obj4C
		dc.w byte_F50E-Map_obj4C, byte_F52D-Map_obj4C
byte_F272:	dc.b 2			; ...
		dc.b $EC, $B, 0, 0, $E8
		dc.b $EC, $B, 8, 0, 0
byte_F27D:	dc.b 2			; ...
		dc.b $EC, $B, 0, $18, $E8
		dc.b $EC, $B, 8, $18, 0
byte_F288:	dc.b 4			; ...
		dc.b $EC, $B, 0, 0, $C8
		dc.b $F4, $E, 0, $C, $E0
		dc.b $F4, $E, 8, $C, 0
		dc.b $EC, $B, 8, 0, $20
byte_F29D:	dc.b 4			; ...
		dc.b $EC, $B, 0, $18, $C8
		dc.b $F4, $E, 0, $24, $E0
		dc.b $F4, $E, 8, $24, 0
		dc.b $EC, $B, 8, $18, $20
byte_F2B2:	dc.b 6			; ...
		dc.b $EC, $B, 0, 0, $C8
		dc.b $F4, $E, 0, $C, $E0
		dc.b $F4, $E, 8, $C, 0
		dc.b $EC, $B, 8, 0, $20
		dc.b $E8, $E, 0, $90, $E0
		dc.b $E8, $E, 8, $90, 0
byte_F2D1:	dc.b 6			; ...
		dc.b $EC, $B, 0, $18, $C8
		dc.b $F4, $E, 0, $24, $E0
		dc.b $F4, $E, 8, $24, 0
		dc.b $EC, $B, 8, $18, $20
		dc.b $E8, $E, 8, $90, $E0
		dc.b $E8, $E, 0, $90, 0
byte_F2F0:	dc.b 2			; ...
		dc.b $E0, $F, 0, $30, $E0
		dc.b $E0, $F, 8, $30, 0
byte_F2FB:	dc.b 2			; ...
		dc.b $E0, $F, 8, $30, $E0
		dc.b $E0, $F, 0, $30, 0
byte_F306:	dc.b $A			; ...
		dc.b $90, $F, 0, $40, $E0
		dc.b $90, $F, 8, $40, 0
		dc.b $B0, $F, 0, $40, $E0
		dc.b $B0, $F, 8, $40, 0
		dc.b $D0, $F, 0, $40, $E0
		dc.b $D0, $F, 8, $40, 0
		dc.b $F0, $F, 0, $40, $E0
		dc.b $F0, $F, 8, $40, 0
		dc.b $10, $F, 0, $40, $E0
		dc.b $10, $F, 8, $40, 0
byte_F339:	dc.b $A			; ...
		dc.b $90, $F, 0, $50, $E0
		dc.b $90, $F, 8, $50, 0
		dc.b $B0, $F, 0, $50, $E0
		dc.b $B0, $F, 8, $50, 0
		dc.b $D0, $F, 0, $50, $E0
		dc.b $D0, $F, 8, $50, 0
		dc.b $F0, $F, 0, $50, $E0
		dc.b $F0, $F, 8, $50, 0
		dc.b $10, $F, 0, $50, $E0
		dc.b $10, $F, 8, $50, 0
byte_F36C:	dc.b $A			; ...
		dc.b $90, $F, 0, $60, $E0
		dc.b $90, $F, 8, $60, 0
		dc.b $B0, $F, 0, $60, $E0
		dc.b $B0, $F, 8, $60, 0
		dc.b $D0, $F, 0, $60, $E0
		dc.b $D0, $F, 8, $60, 0
		dc.b $F0, $F, 0, $60, $E0
		dc.b $F0, $F, 8, $60, 0
		dc.b $10, $F, 0, $60, $E0
		dc.b $10, $F, 8, $60, 0
byte_F39F:	dc.b 6			; ...
		dc.b $90, $F, 0, $40, $E0
		dc.b $90, $F, 8, $40, 0
		dc.b $B0, $F, 0, $40, $E0
		dc.b $B0, $F, 8, $40, 0
		dc.b $D0, $F, 0, $40, $E0
		dc.b $D0, $F, 8, $40, 0
byte_F3BE:	dc.b 6			; ...
		dc.b $90, $F, 0, $50, $E0
		dc.b $90, $F, 8, $50, 0
		dc.b $B0, $F, 0, $50, $E0
		dc.b $B0, $F, 8, $50, 0
		dc.b $D0, $F, 0, $50, $E0
		dc.b $D0, $F, 8, $50, 0
byte_F3DD:	dc.b 6			; ...
		dc.b $90, $F, 0, $60, $E0
		dc.b $90, $F, 8, $60, 0
		dc.b $B0, $F, 0, $60, $E0
		dc.b $B0, $F, 8, $60, 0
		dc.b $D0, $F, 0, $60, $E0
		dc.b $D0, $F, 8, $60, 0
byte_F3FC:	dc.b $10		; ...
		dc.b $90, $F, 0, $40, $E0
		dc.b $90, $F, 8, $40, 0
		dc.b $B0, $F, 0, $40, $E0
		dc.b $B0, $F, 8, $40, 0
		dc.b $D0, $F, 0, $40, $E0
		dc.b $D0, $F, 8, $40, 0
		dc.b $F0, $F, 0, $40, $E0
		dc.b $F0, $F, 8, $40, 0
		dc.b $10, $F, 0, $40, $E0
		dc.b $10, $F, 8, $40, 0
		dc.b $30, $F, 0, $40, $E0
		dc.b $30, $F, 8, $40, 0
		dc.b $50, $F, 0, $40, $E0
		dc.b $50, $F, 8, $40, 0
		dc.b $70, $F, 0, $40, $E0
		dc.b $70, $F, 8, $40, 0
byte_F44D:	dc.b $10		; ...
		dc.b $90, $F, 0, $50, $E0
		dc.b $90, $F, 8, $50, 0
		dc.b $B0, $F, 0, $50, $E0
		dc.b $B0, $F, 8, $50, 0
		dc.b $D0, $F, 0, $50, $E0
		dc.b $D0, $F, 8, $50, 0
		dc.b $F0, $F, 0, $50, $E0
		dc.b $F0, $F, 8, $50, 0
		dc.b $10, $F, 0, $50, $E0
		dc.b $10, $F, 8, $50, 0
		dc.b $30, $F, 0, $50, $E0
		dc.b $30, $F, 8, $50, 0
		dc.b $50, $F, 0, $50, $E0
		dc.b $50, $F, 8, $50, 0
		dc.b $70, $F, 0, $50, $E0
		dc.b $70, $F, 8, $50, 0
byte_F49E:	dc.b $10		; ...
		dc.b $90, $F, 0, $60, $E0
		dc.b $90, $F, 8, $60, 0
		dc.b $B0, $F, 0, $60, $E0
		dc.b $B0, $F, 8, $60, 0
		dc.b $D0, $F, 0, $60, $E0
		dc.b $D0, $F, 8, $60, 0
		dc.b $F0, $F, 0, $60, $E0
		dc.b $F0, $F, 8, $60, 0
		dc.b $10, $F, 0, $60, $E0
		dc.b $10, $F, 8, $60, 0
		dc.b $30, $F, 0, $60, $E0
		dc.b $30, $F, 8, $60, 0
		dc.b $50, $F, 0, $60, $E0
		dc.b $50, $F, 8, $60, 0
		dc.b $70, $F, 0, $60, $E0
		dc.b $70, $F, 8, $60, 0
byte_F4EF:	dc.b 6			; ...
		dc.b $E0, $B, 0, 0, $C8
		dc.b $E8, $E, 0, $C, $E0
		dc.b $E8, $E, 8, $C, 0
		dc.b $E0, $B, 8, 0, $20
		dc.b $D8, $E, 0, $90, $E0
		dc.b $D8, $E, 8, $90, 0
byte_F50E:	dc.b 6			; ...
		dc.b $E0, $B, 0, $18, $C8
		dc.b $E8, $E, 0, $24, $E0
		dc.b $E8, $E, 8, $24, 0
		dc.b $E0, $B, 8, $18, $20
		dc.b $D8, $E, 8, $90, $E0
		dc.b $D8, $E, 0, $90, 0
byte_F52D:	dc.b 0			; ...
; ---------------------------------------------------------------------------
; Sprite mappings - advancing wall of lava (MZ)
; ---------------------------------------------------------------------------
Map_obj4E:	dc.w byte_F538-Map_obj4E, byte_F566-Map_obj4E ;	...
		dc.w byte_F594-Map_obj4E, byte_F5C2-Map_obj4E
		dc.w byte_F5F0-Map_obj4E
byte_F538:	dc.b 9			; ...
		dc.b $E0, $F, 0, $60, $20
		dc.b 0,	$F, 0, $70, $3C
		dc.b 0,	$F, $FF, $2A, $20
		dc.b $E0, $F, $FF, $2A,	0
		dc.b 0,	$F, $FF, $2A, 0
		dc.b $E0, $F, $FF, $2A,	$E0
		dc.b 0,	$F, $FF, $2A, $E0
		dc.b $E0, $F, $FF, $2A,	$C0
		dc.b 0,	$F, $FF, $2A, $C0
byte_F566:	dc.b 9			; ...
		dc.b $E0, $F, 0, $70, $20
		dc.b 0,	$F, 0, $80, $3C
		dc.b 0,	$F, $FF, $2A, $20
		dc.b $E0, $F, $FF, $2A,	0
		dc.b 0,	$F, $FF, $2A, 0
		dc.b $E0, $F, $FF, $2A,	$E0
		dc.b 0,	$F, $FF, $2A, $E0
		dc.b $E0, $F, $FF, $2A,	$C0
		dc.b 0,	$F, $FF, $2A, $C0
byte_F594:	dc.b 9			; ...
		dc.b $E0, $F, 0, $80, $20
		dc.b 0,	$F, 0, $70, $3C
		dc.b 0,	$F, $FF, $2A, $20
		dc.b $E0, $F, $FF, $2A,	0
		dc.b 0,	$F, $FF, $2A, 0
		dc.b $E0, $F, $FF, $2A,	$E0
		dc.b 0,	$F, $FF, $2A, $E0
		dc.b $E0, $F, $FF, $2A,	$C0
		dc.b 0,	$F, $FF, $2A, $C0
byte_F5C2:	dc.b 9			; ...
		dc.b $E0, $F, 0, $70, $20
		dc.b 0,	$F, 0, $60, $3C
		dc.b 0,	$F, $FF, $2A, $20
		dc.b $E0, $F, $FF, $2A,	0
		dc.b 0,	$F, $FF, $2A, 0
		dc.b $E0, $F, $FF, $2A,	$E0
		dc.b 0,	$F, $FF, $2A, $E0
		dc.b $E0, $F, $FF, $2A,	$C0
		dc.b 0,	$F, $FF, $2A, $C0
byte_F5F0:	dc.b 8			; ...
		dc.b $E0, $F, $FF, $2A,	$20
		dc.b 0,	$F, $FF, $2A, $20
		dc.b $E0, $F, $FF, $2A,	0
		dc.b 0,	$F, $FF, $2A, 0
		dc.b $E0, $F, $FF, $2A,	$E0
		dc.b 0,	$F, $FF, $2A, $E0
		dc.b $E0, $F, $FF, $2A,	$C0
		dc.b 0,	$F, $FF, $2A, $C0
		dc.b 0

		
; ---------------------------------------------------------------------------
; Object 55 - Basaran enemy (MZ)
; ---------------------------------------------------------------------------

Obj55:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj55_Index(pc,d0.w),d1
		jmp	Obj55_Index(pc,d1.w)
Obj55_Index:	dc.w Obj55_Main-Obj55_Index ; ...
		dc.w Obj55_Action-Obj55_Index

Obj55_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj55,4(a0)
		move.w	#$84B8,2(a0)
		move.b	#4,1(a0)
		move.b	#$C,$16(a0)
		move.b	#2,$18(a0)
		move.b	#$B,$20(a0)
		move.b	#$10,$19(a0)

Obj55_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj55_Index2(pc,d0.w),d1
		jsr	Obj55_Index2(pc,d1.w)
		lea	$880000+(Ani_obj55).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj55_Index2:	dc.w Obj55_ChkDrop-Obj55_Index2	; ...
		dc.w Obj55_DropFly-Obj55_Index2
		dc.w Obj55_PlaySnd-Obj55_Index2
		dc.w Obj55_FlyUp-Obj55_Index2

Obj55_ChkDrop:				; ...
		move.w	#$80,d2
		bsr.w	Obj55_ChkSonic
		bcc.s	Obj55_NoDrop
		move.w	($FFFFD00C).w,d0
		move.w	d0,$36(a0)
		sub.w	$C(a0),d0
		bcs.s	Obj55_NoDrop
		cmpi.w	#$80,d0		; is Sonic within $80 pixels of	basaran?
		bcc.s	Obj55_NoDrop	; if not, branch
		tst.w	($FFFFFE08).w	; is debug mode	on?
		bne.s	Obj55_NoDrop	; if yes, branch
		move.b	($FFFFFE0F).w,d0
		add.b	d7,d0
		andi.b	#7,d0
		bne.s	Obj55_NoDrop
		move.b	#1,$1C(a0)
		addq.b	#2,$25(a0)

Obj55_NoDrop:				; ...
		rts	

Obj55_DropFly:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)	; make basaran fall
		move.w	#$80,d2
		bsr.w	Obj55_ChkSonic
		move.w	$36(a0),d0
		sub.w	$C(a0),d0
		bcs.s	Obj55_ChkDel
		cmpi.w	#$10,d0
		bcc.s	locret_10180
		move.w	d1,$10(a0)	; make basaran fly horizontally
		move.w	#0,$12(a0)	; stop basaran falling
		move.b	#2,$1C(a0)
		addq.b	#2,$25(a0)

locret_10180:				; ...
		rts	

Obj55_ChkDel:				; ...
		tst.b	1(a0)
		bpl.w	Obj55_Delete
		rts	

Obj55_PlaySnd:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#$F,d0
		bne.s	loc_101A0
		move.w	#$C0,d0
		jsr	$880000+(PlaySound_Special).l ;	play flapping sound

loc_101A0:				; ...
		jsr	$880000+SpeedToPos
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_101B0
		neg.w	d0

loc_101B0:				; ...
		cmpi.w	#$80,d0
		bcs.s	locret_101C6
		move.b	($FFFFFE0F).w,d0
		add.b	d7,d0
		andi.b	#7,d0
		bne.s	locret_101C6
		addq.b	#2,$25(a0)

locret_101C6:				; ...
		rts	

Obj55_FlyUp:				; ...
		jsr	$880000+SpeedToPos
		subi.w	#$18,$12(a0)	; make basaran fly upwards
		jsr	$880000+ObjHitCeiling
		tst.w	d1		; has basaran hit the ceiling?
		bpl.s	locret_101F4	; if not, branch
		sub.w	d1,$C(a0)
		andi.w	#$FFF8,8(a0)
		clr.w	$10(a0)		; stop basaran moving
		clr.w	$12(a0)
		clr.b	$1C(a0)
		clr.b	$25(a0)

locret_101F4:				; ...
		rts	

Obj55_ChkSonic:				; ...
		move.w	#$100,d1
		bset	#0,$22(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_10214
		neg.w	d0
		neg.w	d1
		bclr	#0,$22(a0)

loc_10214:				; ...
		cmp.w	d2,d0
		rts	
		jsr	$880000+SpeedToPos
		jsr	$880000+DisplaySprite
		tst.b	1(a0)
		bpl.w	Obj55_Delete
		rts
Obj55_Delete:
		jmp	$880000+DeleteObject
		
Ani_obj55:	dc.w byte_10230-Ani_obj55, byte_10234-Ani_obj55, byte_10238-Ani_obj55 ;	...
byte_10230:	dc.b $F, 0, $FF, 0	; ...
byte_10234:	dc.b $F, 1, $FF, 0	; ...
byte_10238:	dc.b 3,	1, 2, 3, 2, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Basaran enemy (MZ)
; ---------------------------------------------------------------------------
Map_obj55:	dc.w byte_10246-Map_obj55, byte_1024C-Map_obj55	; ...
		dc.w byte_1025C-Map_obj55, byte_10271-Map_obj55
byte_10246:	dc.b 1			; ...
		dc.b $F4, 6, 0,	0, $F8
byte_1024C:	dc.b 3			; ...
		dc.b $F2, $E, 0, 6, $F4
		dc.b $A, 4, 0, $12, $FC
		dc.b 2,	0, 0, $27, $C
byte_1025C:	dc.b 4			; ...
		dc.b $F8, 4, 0,	$14, $F8
		dc.b 0,	$C, 0, $16, $F0
		dc.b 8,	4, 0, $1A, 0
		dc.b 0,	0, 0, $28, $C
byte_10271:	dc.b 4			; ...
		dc.b $F6, 9, 0,	$1C, $F5
		dc.b 6,	8, 0, $22, $F4
		dc.b $E, 4, 0, $25, $F4
		dc.b $FE, 0, 0,	$27, $C

		rts
; ---------------------------------------------------------------------------
; Object 56 - moving blocks (SYZ/SLZ), large doors (LZ)
; ---------------------------------------------------------------------------

Obj56:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj56_Index(pc,d0.w),d1
		jmp	Obj56_Index(pc,d1.w)
Obj56_Index:	dc.w Obj56_Main-Obj56_Index ; ...
		dc.w Obj56_Action-Obj56_Index

Obj56_Var:	dc.b  $10, $10		; width, height
		dc.b  $20, $20
		dc.b  $10, $20
		dc.b  $20, $1A
		dc.b  $10, $27
		dc.b  $10, $10
		dc.b	8, $20
		dc.b  $40, $10

Obj56_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj56,4(a0)
		move.w	#$4000,2(a0)
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	loc_102C8
		move.w	#$43C4,2(a0)	; LZ specific code

loc_102C8:				; ...
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#3,d0
		andi.w	#$E,d0
		lea	Obj56_Var(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2),$16(a0)
		lsr.w	#1,d0
		move.b	d0,$1A(a0)
		move.w	8(a0),$34(a0)
		move.w	$C(a0),$30(a0)
		moveq	#0,d0
		move.b	(a2),d0
		add.w	d0,d0
		move.w	d0,$3A(a0)
		moveq	#0,d0
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		beq.s	loc_10332
		move.b	$28(a0),d0	; SYZ/SLZ specific code
		andi.w	#$F,d0
		subq.w	#8,d0
		bcs.s	loc_10332
		lsl.w	#2,d0
		lea	($FFFFFE8A).w,a2
		lea	(a2,d0.w),a2
		tst.w	(a2)
		bpl.s	loc_10332
		bchg	#0,$22(a0)

loc_10332:				; ...
		move.b	$28(a0),d0
		bpl.s	Obj56_Action
		andi.b	#$F,d0
		move.b	d0,$3C(a0)
		move.b	#5,$28(a0)
		cmpi.b	#7,$1A(a0)
		bne.s	Obj56_ChkGone
		move.b	#$C,$28(a0)
		move.w	#$80,$3A(a0)

Obj56_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj56_Action
		bclr	#7,2(a2,d0.w)
		btst	#0,2(a2,d0.w)
		beq.s	Obj56_Action
		addq.b	#1,$28(a0)
		clr.w	$3A(a0)

Obj56_Action:				; ...
		move.w	8(a0),-(sp)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		andi.w	#$F,d0		; read only the	2nd digit
		add.w	d0,d0
		move.w	Obj56_TypeIndex(pc,d0.w),d1
		jsr	Obj56_TypeIndex(pc,d1.w)
		move.w	(sp)+,d4
		tst.b	1(a0)
		bpl.s	Obj56_ChkDel
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		moveq	#0,d2
		move.b	$16(a0),d2
		move.w	d2,d3
		addq.w	#1,d3
		jsr	$880000+SolidObject

Obj56_ChkDel:				; ...
		move.w	$34(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj56_Delete
		jmp	$880000+DisplaySprite
		
Obj56_Delete:
		jmp	$880000+DeleteObject
		
Obj56_TypeIndex:dc.w Obj56_Type00-Obj56_TypeIndex, Obj56_Type01-Obj56_TypeIndex	; ...
		dc.w Obj56_Type02-Obj56_TypeIndex, Obj56_Type03-Obj56_TypeIndex
		dc.w Obj56_Type04-Obj56_TypeIndex, Obj56_Type05-Obj56_TypeIndex
		dc.w Obj56_Type06-Obj56_TypeIndex, Obj56_Type07-Obj56_TypeIndex
		dc.w Obj56_Type08-Obj56_TypeIndex, Obj56_Type09-Obj56_TypeIndex
		dc.w Obj56_Type0A-Obj56_TypeIndex, Obj56_Type0B-Obj56_TypeIndex
		dc.w Obj56_Type0C-Obj56_TypeIndex, Obj56_Type0D-Obj56_TypeIndex

Obj56_Type00:				; ...
		rts	

Obj56_Type01:				; ...
		move.w	#$40,d1
		moveq	#0,d0
		move.b	($FFFFFE68).w,d0
		bra.s	Obj56_Move_LR

Obj56_Type02:				; ...
		move.w	#$80,d1
		moveq	#0,d0
		move.b	($FFFFFE7C).w,d0

Obj56_Move_LR:				; ...
		btst	#0,$22(a0)
		beq.s	loc_10416
		neg.w	d0
		add.w	d1,d0

loc_10416:				; ...
		move.w	$34(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)	; move object horizontally
		rts	

Obj56_Type03:				; ...
		move.w	#$40,d1
		moveq	#0,d0
		move.b	($FFFFFE68).w,d0
		bra.s	Obj56_Move_UD

Obj56_Type04:				; ...
		move.w	#$80,d1
		moveq	#0,d0
		move.b	($FFFFFE7C).w,d0

Obj56_Move_UD:				; ...
		btst	#0,$22(a0)
		beq.s	loc_10444
		neg.w	d0
		add.w	d1,d0

loc_10444:				; ...
		move.w	$30(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; move object vertically
		rts	

Obj56_Type05:				; ...
		tst.b	$38(a0)
		bne.s	loc_104A4
		cmpi.w	#$100,($FFFFFE10).w ; is level LZ1 ?
		bne.s	loc_1047A	; if not, branch
		cmpi.b	#3,$3C(a0)
		bne.s	loc_1047A
		clr.b	($FFFFF7C9).w
		move.w	($FFFFD008).w,d0
		cmp.w	8(a0),d0
		bcc.s	loc_1047A
		move.b	#1,($FFFFF7C9).w

loc_1047A:				; ...
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3C(a0),d0
		btst	#0,(a2,d0.w)
		beq.s	loc_104AE
		cmpi.w	#$100,($FFFFFE10).w ; is level LZ1 ?
		bne.s	loc_1049E	; if not, branch
		cmpi.b	#3,d0
		bne.s	loc_1049E
		clr.b	($FFFFF7C9).w

loc_1049E:				; ...
		move.b	#1,$38(a0)

loc_104A4:				; ...
		tst.w	$3A(a0)
		beq.s	loc_104C8
		subq.w	#2,$3A(a0)

loc_104AE:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_104BC
		neg.w	d0

loc_104BC:				; ...
		move.w	$30(a0),d1
		add.w	d0,d1
		move.w	d1,$C(a0)
		rts	

loc_104C8:				; ...
		addq.b	#1,$28(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_104AE
		bset	#0,2(a2,d0.w)
		bra.s	loc_104AE

Obj56_Type06:				; ...
		tst.b	$38(a0)
		bne.s	loc_10500
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3C(a0),d0
		tst.b	(a2,d0.w)
		bpl.s	loc_10512
		move.b	#1,$38(a0)

loc_10500:				; ...
		moveq	#0,d0
		move.b	$16(a0),d0
		add.w	d0,d0
		cmp.w	$3A(a0),d0
		beq.s	loc_1052C
		addq.w	#2,$3A(a0)

loc_10512:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_10520
		neg.w	d0

loc_10520:				; ...
		move.w	$30(a0),d1
		add.w	d0,d1
		move.w	d1,$C(a0)
		rts	

loc_1052C:				; ...
		subq.b	#1,$28(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_10512
		bclr	#0,2(a2,d0.w)
		bra.s	loc_10512

Obj56_Type07:				; ...
		tst.b	$38(a0)
		bne.s	loc_1055E
		tst.b	($FFFFF7EF).w	; has switch number $F been pressed?
		beq.s	locret_10578
		move.b	#1,$38(a0)
		clr.w	$3A(a0)

loc_1055E:				; ...
		addq.w	#1,8(a0)
		move.w	8(a0),$34(a0)
		addq.w	#1,$3A(a0)
		cmpi.w	#$380,$3A(a0)
		bne.s	locret_10578
		clr.b	$28(a0)

locret_10578:				; ...
		rts	

Obj56_Type0C:				; ...
		tst.b	$38(a0)
		bne.s	loc_10598
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3C(a0),d0
		btst	#0,(a2,d0.w)
		beq.s	loc_105A2
		move.b	#1,$38(a0)

loc_10598:				; ...
		tst.w	$3A(a0)
		beq.s	loc_105C0
		subq.w	#2,$3A(a0)

loc_105A2:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_105B4
		neg.w	d0
		addi.w	#$80,d0

loc_105B4:				; ...
		move.w	$34(a0),d1
		add.w	d0,d1
		move.w	d1,8(a0)
		rts	

loc_105C0:				; ...
		addq.b	#1,$28(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_105A2
		bset	#0,2(a2,d0.w)
		bra.s	loc_105A2

Obj56_Type0D:				; ...
		tst.b	$38(a0)
		bne.s	loc_105F8
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3C(a0),d0
		tst.b	(a2,d0.w)
		bpl.s	loc_10606
		move.b	#1,$38(a0)

loc_105F8:				; ...
		move.w	#$80,d0
		cmp.w	$3A(a0),d0
		beq.s	loc_10624
		addq.w	#2,$3A(a0)

loc_10606:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_10618
		neg.w	d0
		addi.w	#$80,d0

loc_10618:				; ...
		move.w	$34(a0),d1
		add.w	d0,d1
		move.w	d1,8(a0)
		rts	

loc_10624:				; ...
		subq.b	#1,$28(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_10606
		bclr	#0,2(a2,d0.w)
		bra.s	loc_10606

Obj56_Type08:				; ...
		move.w	#$10,d1
		moveq	#0,d0
		move.b	($FFFFFE88).w,d0
		lsr.w	#1,d0
		move.w	($FFFFFE8A).w,d3
		bra.s	Obj56_Move_Sqr

Obj56_Type09:				; ...
		move.w	#$30,d1
		moveq	#0,d0
		move.b	($FFFFFE8C).w,d0
		move.w	($FFFFFE8E).w,d3
		bra.s	Obj56_Move_Sqr

Obj56_Type0A:				; ...
		move.w	#$50,d1
		moveq	#0,d0
		move.b	($FFFFFE90).w,d0
		move.w	($FFFFFE92).w,d3
		bra.s	Obj56_Move_Sqr

Obj56_Type0B:				; ...
		move.w	#$70,d1
		moveq	#0,d0
		move.b	($FFFFFE94).w,d0
		move.w	($FFFFFE96).w,d3

Obj56_Move_Sqr:				; ...
		tst.w	d3
		bne.s	loc_1068E
		addq.b	#1,$22(a0)
		andi.b	#3,$22(a0)

loc_1068E:				; ...
		move.b	$22(a0),d2
		andi.b	#3,d2
		bne.s	loc_106AE
		sub.w	d1,d0
		add.w	$34(a0),d0
		move.w	d0,8(a0)
		neg.w	d1
		add.w	$30(a0),d1
		move.w	d1,$C(a0)
		rts	

loc_106AE:				; ...
		subq.b	#1,d2
		bne.s	loc_106CC
		subq.w	#1,d1
		sub.w	d1,d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		addq.w	#1,d1
		add.w	$34(a0),d1
		move.w	d1,8(a0)
		rts	

loc_106CC:				; ...
		subq.b	#1,d2
		bne.s	loc_106EA
		subq.w	#1,d1
		sub.w	d1,d0
		neg.w	d0
		add.w	$34(a0),d0
		move.w	d0,8(a0)
		addq.w	#1,d1
		add.w	$30(a0),d1
		move.w	d1,$C(a0)
		rts	

loc_106EA:				; ...
		sub.w	d1,d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		neg.w	d1
		add.w	$34(a0),d1
		move.w	d1,8(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - moving blocks (SYZ)
; ---------------------------------------------------------------------------
Map_obj56:	dc.w byte_10710-Map_obj56, byte_10716-Map_obj56	; ...
		dc.w byte_1072B-Map_obj56, byte_10736-Map_obj56
		dc.w byte_1074B-Map_obj56, byte_1075B-Map_obj56
		dc.w byte_10761-Map_obj56, byte_1076C-Map_obj56
byte_10710:	dc.b 1			; ...
		dc.b $F0, $F, 0, $61, $F0
byte_10716:	dc.b 4			; ...
		dc.b $E0, $F, 0, $61, $E0
		dc.b $E0, $F, 0, $61, 0
		dc.b 0,	$F, 0, $61, $E0
		dc.b 0,	$F, 0, $61, 0
byte_1072B:	dc.b 2			; ...
		dc.b $E0, $F, 0, $61, $F0
		dc.b 0,	$F, 0, $61, $F0
byte_10736:	dc.b 4			; ...
		dc.b $E6, $F, 0, $81, $E0
		dc.b $E6, $F, 0, $81, 0
		dc.b 0,	$F, 0, $81, $E0
		dc.b 0,	$F, 0, $81, 0
byte_1074B:	dc.b 3			; ...
		dc.b $D9, $F, 0, $81, $F0
		dc.b $F3, $F, 0, $81, $F0
		dc.b $D, $F, 0,	$81, $F0
byte_1075B:	dc.b 1			; ...
		dc.b $F0, $F, 0, $21, $F0
byte_10761:	dc.b 2			; ...
		dc.b $E0, 7, 0,	0, $F8
		dc.b 0,	7, $10,	0, $F8
byte_1076C:	dc.b 4			; ...
		dc.b $F0, $F, 0, $22, $C0
		dc.b $F0, $F, 0, $22, $E0
		dc.b $F0, $F, 0, $22, 0
		dc.b $F0, $F, 0, $22, $20
		dc.b 0
; ---------------------------------------------------------------------------
; Object 57 - spiked balls (SYZ, LZ)
; ---------------------------------------------------------------------------

Obj57:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj57_Index(pc,d0.w),d1
		jmp	Obj57_Index(pc,d1.w)
Obj57_Index:	dc.w Obj57_Main-Obj57_Index ; ...
		dc.w Obj57_Move-Obj57_Index
		dc.w Obj57_Display-Obj57_Index

Obj57_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj57,4(a0)
		move.w	#$3BA,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#8,$19(a0)
		move.w	8(a0),$3A(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$98,$20(a0)	; SYZ specific code (chain hurts Sonic)
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	loc_107E8
		move.b	#0,$20(a0)	; LZ specific code (chain doesn't hurt)
		move.w	#$310,2(a0)
		move.l	#$880000+Map_obj57a,4(a0)

loc_107E8:				; ...
		move.b	$28(a0),d1	; get object type
		andi.b	#$F0,d1		; read only the	1st digit
		ext.w	d1
		asl.w	#3,d1		; multiply by 8
		move.w	d1,$3E(a0)	; set object twirl speed
		move.b	$22(a0),d0
		ror.b	#2,d0
		andi.b	#-$40,d0
		move.b	d0,$26(a0)
		lea	$29(a0),a2
		move.b	$28(a0),d1	; get object type
		andi.w	#7,d1		; read only the	2nd digit
		move.b	#0,(a2)+
		move.w	d1,d3
		lsl.w	#4,d3
		move.b	d3,$3C(a0)
		subq.w	#1,d1		; set chain length (type-1)
		bcs.s	loc_10894
		btst	#3,$28(a0)
		beq.s	Obj57_MakeChain
		subq.w	#1,d1
		bcs.s	loc_10894

Obj57_MakeChain:			; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_10894
		addq.b	#1,$29(a0)
		move.w	a1,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	#4,$24(a1)
		move.b	0(a0),0(a1)
		move.l	4(a0),4(a1)
		move.w	2(a0),2(a1)
		move.b	1(a0),1(a1)
		move.b	$18(a0),$18(a1)
		move.b	$19(a0),$19(a1)
		move.b	$20(a0),$20(a1)
		subi.b	#$10,d3
		move.b	d3,$3C(a1)
		cmpi.b	#1,($FFFFFE10).w
		bne.s	loc_10890
		tst.b	d3
		bne.s	loc_10890
		move.b	#2,$1A(a1)

loc_10890:				; ...
		dbf	d1,Obj57_MakeChain ; repeat for	length of chain

loc_10894:				; ...
		move.w	a0,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	Obj57_Move
		move.b	#$8B,$20(a0)	; if yes, make last spikeball larger
		move.b	#1,$1A(a0)	; use different	frame

Obj57_Move:				; ...
		bsr.w	Obj57_MoveSub
		bra.w	Obj57_ChkDel

Obj57_MoveSub:				; ...
		move.w	$3E(a0),d0
		add.w	d0,$26(a0)
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		move.w	$38(a0),d2
		move.w	$3A(a0),d3
		lea	$29(a0),a2
		moveq	#0,d6
		move.b	(a2)+,d6

Obj57_MoveLoop:				; ...
		moveq	#0,d4
		move.b	(a2)+,d4
		lsl.w	#6,d4
		addi.l	#$FFD000,d4
		movea.l	d4,a1
		moveq	#0,d4
		move.b	$3C(a1),d4
		move.l	d4,d5
		muls.w	d0,d4
		asr.l	#8,d4
		muls.w	d1,d5
		asr.l	#8,d5
		add.w	d2,d4
		add.w	d3,d5
		move.w	d4,$C(a1)
		move.w	d5,8(a1)
		dbf	d6,Obj57_MoveLoop
		rts	

Obj57_ChkDel:				; ...
		move.w	$3A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj57_Delete
		jmp	$880000+DisplaySprite

Obj57_Delete:				; ...
		moveq	#0,d2
		lea	$29(a0),a2
		move.b	(a2)+,d2

Obj57_DelLoop:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		jsr	$880000+DeleteObject2
		dbf	d2,Obj57_DelLoop ; delete all pieces of	chain
		rts	

Obj57_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - chain of spiked balls (SYZ)
; ---------------------------------------------------------------------------
Map_obj57:	dc.w byte_10958-Map_obj57 ; ...
byte_10958:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
; ---------------------------------------------------------------------------
; Sprite mappings - spiked ball	on a chain (LZ)
; ---------------------------------------------------------------------------
Map_obj57a:	dc.w byte_10964-Map_obj57a ; ...
		dc.w byte_1096A-Map_obj57a
		dc.w byte_10970-Map_obj57a
byte_10964:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_1096A:	dc.b 1			; ...
		dc.b $F0, $F, 0, 4, $F0
byte_10970:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$14, $F8
; ---------------------------------------------------------------------------
; Object 58 - giant spiked balls (SYZ)
; ---------------------------------------------------------------------------

Obj58:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj58_Index(pc,d0.w),d1
		jmp	Obj58_Index(pc,d1.w)
Obj58_Index:	dc.w Obj58_Main-Obj58_Index ; ...
		dc.w Obj58_Move-Obj58_Index

Obj58_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj15b,4(a0)
		move.w	#$396,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$18,$19(a0)
		move.w	8(a0),$3A(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$86,$20(a0)
		move.b	$28(a0),d1	; get object type
		andi.b	#$F0,d1		; read only the	1st digit
		ext.w	d1
		asl.w	#3,d1		; multiply by 8
		move.w	d1,$3E(a0)	; set object speed
		move.b	$22(a0),d0
		ror.b	#2,d0
		andi.b	#$C0,d0
		move.b	d0,$26(a0)
		move.b	#$50,$3C(a0)	; set diameter of circle of rotation

Obj58_Move:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		andi.w	#7,d0		; read only the	2nd digit
		add.w	d0,d0
		move.w	Obj58_TypeIndex(pc,d0.w),d1
		jsr	Obj58_TypeIndex(pc,d1.w)
		move.w	$3A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj58_TypeIndex:dc.w Obj58_Type00-Obj58_TypeIndex ; ...
		dc.w Obj58_Type01-Obj58_TypeIndex
		dc.w Obj58_Type02-Obj58_TypeIndex
		dc.w Obj58_Type03-Obj58_TypeIndex

Obj58_Type00:				; ...
		rts	

Obj58_Type01:				; ...
		move.w	#$60,d1
		moveq	#0,d0
		move.b	($FFFFFE6C).w,d0
		btst	#0,$22(a0)
		beq.s	loc_10A38
		neg.w	d0
		add.w	d1,d0

loc_10A38:				; ...
		move.w	$3A(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)	; move object horizontally
		rts	

Obj58_Type02:				; ...
		move.w	#$60,d1
		moveq	#0,d0
		move.b	($FFFFFE6C).w,d0
		btst	#0,$22(a0)
		beq.s	loc_10A5C
		neg.w	d0
		addi.w	#$80,d0

loc_10A5C:				; ...
		move.w	$38(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; move object vertically
		rts	

Obj58_Type03:				; ...
		move.w	$3E(a0),d0
		add.w	d0,$26(a0)
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		move.w	$38(a0),d2
		move.w	$3A(a0),d3
		moveq	#0,d4
		move.b	$3C(a0),d4
		move.l	d4,d5
		muls.w	d0,d4
		asr.l	#8,d4
		muls.w	d1,d5
		asr.l	#8,d5
		add.w	d2,d4
		add.w	d3,d5
		move.w	d4,$C(a0)
		move.w	d5,8(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - spiked ball	on a chain (SBZ)
; ---------------------------------------------------------------------------
Map_obj15b:	dc.w byte_10AA6-Map_obj15b, byte_10AC0-Map_obj15b ; ...
		dc.w byte_10AC6-Map_obj15b
byte_10AA6:	dc.b 5			; ...
		dc.b $E8, 4, 0,	0, $F8
		dc.b $F0, $F, 0, 2, $F0
		dc.b $F8, 1, 0,	$12, $E8
		dc.b $F8, 1, 0,	$14, $10
		dc.b $10, 4, 0,	$16, $F8
byte_10AC0:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$20, $F8
byte_10AC6:	dc.b 2			; ...
		dc.b $F8, $D, 0, $18, $F0
		dc.b $E8, $D, $10, $18,	$F0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 59 - platforms	that move when you stand on them (SLZ)
; ---------------------------------------------------------------------------

Obj59:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj59_Index(pc,d0.w),d1
		jsr	Obj59_Index(pc,d1.w)
		move.w	$32(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj59_Index:	dc.w Obj59_Main-Obj59_Index ; ...
		dc.w Obj59_Platform-Obj59_Index
		dc.w Obj59_Action-Obj59_Index
		dc.w Obj59_MakeMulti-Obj59_Index

Obj59_Var1:	dc.b $28, 0		; width, frame number

Obj59_Var2:	dc.b $10, 1		; width, action	type
		dc.b $20, 1
		dc.b $34, 1
		dc.b $10, 3
		dc.b $20, 3
		dc.b $34, 3
		dc.b $14, 1
		dc.b $24, 1
		dc.b $2C, 1
		dc.b $14, 3
		dc.b $24, 3
		dc.b $2C, 3
		dc.b $20, 5
		dc.b $20, 7
		dc.b $30, 9

Obj59_Main:				; ...
		addq.b	#2,$24(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		bpl.s	Obj59_Main2
		addq.b	#4,$24(a0)
		andi.w	#$7F,d0
		mulu.w	#6,d0
		move.w	d0,$3C(a0)
		move.w	d0,$3E(a0)
		addq.l	#4,sp
		rts	

Obj59_Main2:				; ...
		lsr.w	#3,d0
		andi.w	#$1E,d0
		lea	Obj59_Var1(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2)+,$1A(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		andi.w	#$1E,d0
		lea	Obj59_Var2(pc,d0.w),a2
		move.b	(a2)+,d0
		lsl.w	#2,d0
		move.w	d0,$3C(a0)
		move.b	(a2)+,$28(a0)
		move.l	#$880000+Map_obj59,4(a0)
		move.w	#$4000,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.w	8(a0),$32(a0)
		move.w	$C(a0),$30(a0)

Obj59_Platform:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(PlatformObject).l
		bra.w	Obj59_Types

Obj59_Action:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(ExitPlatform).l
		move.w	8(a0),-(sp)
		bsr.w	Obj59_Types
		move.w	(sp)+,d2
		tst.b	0(a0)
		beq.s	locret_10BD4
		jmp	$880000+(MvSonicOnPtfm2).l

locret_10BD4:				; ...
		rts	

Obj59_Types:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj59_TypeIndex(pc,d0.w),d1
		jmp	Obj59_TypeIndex(pc,d1.w)
Obj59_TypeIndex:dc.w Obj59_Type00-Obj59_TypeIndex, Obj59_Type01-Obj59_TypeIndex	; ...
		dc.w Obj59_Type02-Obj59_TypeIndex, Obj59_Type01-Obj59_TypeIndex
		dc.w Obj59_Type04-Obj59_TypeIndex, Obj59_Type01-Obj59_TypeIndex
		dc.w Obj59_Type06-Obj59_TypeIndex, Obj59_Type01-Obj59_TypeIndex
		dc.w Obj59_Type08-Obj59_TypeIndex, Obj59_Type09-Obj59_TypeIndex

Obj59_Type00:				; ...
		rts	

Obj59_Type01:				; ...
		cmpi.b	#4,$24(a0)	; check	if Sonic is standing on	the object
		bne.s	locret_10C0C
		addq.b	#1,$28(a0)	; if yes, add 1	to type

locret_10C0C:				; ...
		rts	

Obj59_Type02:				; ...
		bsr.w	Obj59_Move
		move.w	$34(a0),d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		rts	

Obj59_Type04:				; ...
		bsr.w	Obj59_Move
		move.w	$34(a0),d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		rts	

Obj59_Type06:				; ...
		bsr.w	Obj59_Move
		move.w	$34(a0),d0
		asr.w	#1,d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		move.w	$34(a0),d0
		add.w	$32(a0),d0
		move.w	d0,8(a0)
		rts	

Obj59_Type08:				; ...
		bsr.w	Obj59_Move
		move.w	$34(a0),d0
		asr.w	#1,d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		move.w	$34(a0),d0
		neg.w	d0
		add.w	$32(a0),d0
		move.w	d0,8(a0)
		rts	

Obj59_Type09:				; ...
		bsr.w	Obj59_Move
		move.w	$34(a0),d0
		neg.w	d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)
		tst.b	$28(a0)
		beq.w	loc_10C94
		rts	

loc_10C94:				; ...
		btst	#3,$22(a0)
		beq.s	Obj59_Delete
		bset	#1,$22(a1)
		bclr	#3,$22(a1)
		move.b	#2,$24(a1)

Obj59_Delete:				; ...
		jmp	$880000+DeleteObject

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj59_Move:				; ...
		move.w	$38(a0),d0
		tst.b	$3A(a0)
		bne.s	loc_10CC8
		cmpi.w	#$800,d0
		bcc.s	loc_10CD0
		addi.w	#$10,d0
		bra.s	loc_10CD0

loc_10CC8:				; ...
		tst.w	d0
		beq.s	loc_10CD0
		subi.w	#$10,d0

loc_10CD0:				; ...
		move.w	d0,$38(a0)
		ext.l	d0
		asl.l	#8,d0
		add.l	$34(a0),d0
		move.l	d0,$34(a0)
		swap	d0
		move.w	$3C(a0),d2
		cmp.w	d2,d0
		bls.s	loc_10CF0
		move.b	#1,$3A(a0)

loc_10CF0:				; ...
		add.w	d2,d2
		cmp.w	d2,d0
		bne.s	locret_10CFA
		clr.b	$28(a0)

locret_10CFA:				; ...
		rts	
; End of function Obj59_Move


Obj59_MakeMulti:			; ...
		subq.w	#1,$3C(a0)
		bne.s	Obj59_ChkDel
		move.w	$3E(a0),$3C(a0)
		jsr	$880000+SingleObjLoad
		bne.s	Obj59_ChkDel
		move.b	#$59,0(a1)	; duplicate the	object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#$E,$28(a1)

Obj59_ChkDel:				; ...
		addq.l	#4,sp
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - platforms that move	when you stand on them (SLZ)
; ---------------------------------------------------------------------------
Map_obj59:	dc.w byte_10D4A-Map_obj59 ; ...
byte_10D4A:	dc.b 3			; ...
		dc.b $F8, $F, 0, $41, $D8
		dc.b $F8, $F, 0, $41, $F8
		dc.b $F8, 7, 0,	$41, $18
; ---------------------------------------------------------------------------
; Object 5A - platforms	moving in circles (SLZ)
; ---------------------------------------------------------------------------

Obj5A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5A_Index(pc,d0.w),d1
		jsr	Obj5A_Index(pc,d1.w)
		move.w	$32(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj5A_Index:	dc.w Obj5A_Main-Obj5A_Index ; ...
		dc.w Obj5A_Platform-Obj5A_Index
		dc.w Obj5A_Action-Obj5A_Index

Obj5A_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5A,4(a0)
		move.w	#$4000,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$18,$19(a0)
		move.w	8(a0),$32(a0)
		move.w	$C(a0),$30(a0)

Obj5A_Platform:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(PlatformObject).l
		bra.w	Obj5A_Types

Obj5A_Action:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(ExitPlatform).l
		move.w	8(a0),-(sp)
		bsr.w	Obj5A_Types
		move.w	(sp)+,d2
		jmp	$880000+(MvSonicOnPtfm2).l

Obj5A_Types:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$C,d0
		lsr.w	#1,d0
		move.w	Obj5A_TypeIndex(pc,d0.w),d1
		jmp	Obj5A_TypeIndex(pc,d1.w)
Obj5A_TypeIndex:dc.w Obj5A_Type00-Obj5A_TypeIndex ; ...
		dc.w Obj5A_Type04-Obj5A_TypeIndex

Obj5A_Type00:				; ...
		move.b	($FFFFFE80).w,d1
		subi.b	#$50,d1
		ext.w	d1
		move.b	($FFFFFE84).w,d2
		subi.b	#$50,d2
		ext.w	d2
		btst	#0,$28(a0)
		beq.s	loc_10E24
		neg.w	d1
		neg.w	d2

loc_10E24:				; ...
		btst	#1,$28(a0)
		beq.s	loc_10E30
		neg.w	d1
		exg	d1,d2

loc_10E30:				; ...
		add.w	$32(a0),d1
		move.w	d1,8(a0)
		add.w	$30(a0),d2
		move.w	d2,$C(a0)
		rts	

Obj5A_Type04:				; ...
		move.b	($FFFFFE80).w,d1
		subi.b	#$50,d1
		ext.w	d1
		move.b	($FFFFFE84).w,d2
		subi.b	#$50,d2
		ext.w	d2
		btst	#0,$28(a0)
		beq.s	loc_10E62
		neg.w	d1
		neg.w	d2

loc_10E62:				; ...
		btst	#1,$28(a0)
		beq.s	loc_10E6E
		neg.w	d1
		exg	d1,d2

loc_10E6E:				; ...
		neg.w	d1
		add.w	$32(a0),d1
		move.w	d1,8(a0)
		add.w	$30(a0),d2
		move.w	d2,$C(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - platforms that move	in circles (SLZ)
; ---------------------------------------------------------------------------
Map_obj5A:	dc.w byte_10E84-Map_obj5A ; ...
byte_10E84:	dc.b 2			; ...
		dc.b $F8, 9, 0,	$51, $E8
		dc.b $F8, 9, 8,	$51, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 5B - blocks that form a staircase (SLZ)
; ---------------------------------------------------------------------------

Obj5B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5B_Index(pc,d0.w),d1
		jsr	Obj5B_Index(pc,d1.w)
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj5B_Index:	dc.w Obj5B_Main-Obj5B_Index ; ...
		dc.w Obj5B_Move-Obj5B_Index
		dc.w Obj5B_Solid-Obj5B_Index

Obj5B_Main:				; ...
		addq.b	#2,$24(a0)
		moveq	#$38,d3
		moveq	#1,d4
		btst	#0,$22(a0)
		beq.s	loc_10EDA
		moveq	#$3B,d3
		moveq	#-1,d4

loc_10EDA:				; ...
		move.w	8(a0),d2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj5B_MakeBlocks

Obj5B_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.w	Obj5B_Move
		move.b	#4,$24(a1)

Obj5B_MakeBlocks:			; ...
		move.b	#$5B,0(a1)	; load another block object
		move.l	#$880000+Map_obj5B,4(a1)
		move.w	#$4000,2(a1)
		move.b	#4,1(a1)
		move.b	#3,$18(a1)
		move.b	#$10,$19(a1)
		move.b	$28(a0),$28(a1)
		move.w	d2,8(a1)
		move.w	$C(a0),$C(a1)
		move.w	8(a0),$30(a1)
		move.w	$C(a1),$32(a1)
		addi.w	#$20,d2
		move.b	d3,$37(a1)
		move.l	a0,$3C(a1)
		add.b	d4,d3
		dbf	d1,Obj5B_Loop	; repeat sequence 3 times

Obj5B_Move:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#7,d0
		add.w	d0,d0
		move.w	Obj5B_TypeIndex(pc,d0.w),d1
		jsr	Obj5B_TypeIndex(pc,d1.w)

Obj5B_Solid:				; ...
		movea.l	$3C(a0),a2
		moveq	#0,d0
		move.b	$37(a0),d0
		move.b	(a2,d0.w),d0
		add.w	$32(a0),d0
		move.w	d0,$C(a0)
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		tst.b	d4
		bpl.s	loc_10F92
		move.b	d4,$36(a2)

loc_10F92:				; ...
		btst	#3,$22(a0)
		beq.s	locret_10FA0
		move.b	#1,$36(a2)

locret_10FA0:				; ...
		rts	
Obj5B_TypeIndex:dc.w Obj5B_Type00-Obj5B_TypeIndex ; ...
		dc.w Obj5B_Type01-Obj5B_TypeIndex
		dc.w Obj5B_Type02-Obj5B_TypeIndex
		dc.w Obj5B_Type01-Obj5B_TypeIndex

Obj5B_Type00:				; ...
		tst.w	$34(a0)
		bne.s	loc_10FC0
		cmpi.b	#1,$36(a0)
		bne.s	locret_10FBE
		move.w	#$1E,$34(a0)

locret_10FBE:				; ...
		rts	

loc_10FC0:				; ...
		subq.w	#1,$34(a0)
		bne.s	locret_10FBE
		addq.b	#1,$28(a0)	; add 1	to type
		rts	

Obj5B_Type02:				; ...
		tst.w	$34(a0)
		bne.s	loc_10FE0
		tst.b	$36(a0)
		bpl.s	locret_10FDE
		move.w	#$3C,$34(a0)

locret_10FDE:				; ...
		rts	

loc_10FE0:				; ...
		subq.w	#1,$34(a0)
		bne.s	loc_10FEC
		addq.b	#1,$28(a0)	; add 1	to type
		rts	

loc_10FEC:				; ...
		lea	$38(a0),a1
		move.w	$34(a0),d0
		lsr.b	#2,d0
		andi.b	#1,d0
		move.b	d0,(a1)+
		eori.b	#1,d0
		move.b	d0,(a1)+
		eori.b	#1,d0
		move.b	d0,(a1)+
		eori.b	#1,d0
		move.b	d0,(a1)+
		rts	

Obj5B_Type01:				; ...
		lea	$38(a0),a1
		cmpi.b	#$80,(a1)
		beq.s	locret_11038
		addq.b	#1,(a1)
		moveq	#0,d1
		move.b	(a1)+,d1
		swap	d1
		lsr.l	#1,d1
		move.l	d1,d2
		lsr.l	#1,d1
		move.l	d1,d3
		add.l	d2,d3
		swap	d1
		swap	d2
		swap	d3
		move.b	d3,(a1)+
		move.b	d2,(a1)+
		move.b	d1,(a1)+

locret_11038:				; ...
		rts	
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - blocks that	form a staircase (SLZ)
; ---------------------------------------------------------------------------
Map_obj5B:	dc.w byte_1103E-Map_obj5B ; ...
byte_1103E:	dc.b 1			; ...
		dc.b $F0, $F, 0, $21, $F0
; ---------------------------------------------------------------------------
; Object 5C - metal girders in foreground (SLZ)
; ---------------------------------------------------------------------------

Obj5C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5C_Index(pc,d0.w),d1
		jmp	Obj5C_Index(pc,d1.w)
Obj5C_Index:	dc.w Obj5C_Main-Obj5C_Index ; ...
		dc.w Obj5C_Display-Obj5C_Index

Obj5C_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5C,4(a0)
		move.w	#$83CC,2(a0)
		move.b	#$10,$19(a0)

Obj5C_Display:				; ...
		move.l	($FFFFF700).w,d1
		add.l	d1,d1
		swap	d1
		neg.w	d1
		move.w	d1,8(a0)
		move.l	($FFFFF704).w,d1
		add.l	d1,d1
		swap	d1
		andi.w	#$3F,d1
		neg.w	d1
		addi.w	#$100,d1
		move.w	d1,$A(a0)
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - metal girders in foreground	(SLZ)
; ---------------------------------------------------------------------------
Map_obj5C:	dc.w byte_11098-Map_obj5C ; ...
byte_11098:	dc.b 9			; ...
		dc.b $80, $F, 0, 0, $F0
		dc.b $A0, $F, $10, 0, $F0
		dc.b $C0, $F, 0, 0, $F0
		dc.b $E0, $F, $10, 0, $F0
		dc.b 0,	$F, 0, 0, $F0
		dc.b $20, $F, $10, 0, $F0
		dc.b $40, $F, 0, 0, $F0
		dc.b $60, $F, $10, 0, $F0
		dc.b $7F, $F, 0, 0, $F0
		
; ---------------------------------------------------------------------------
; Object 5D - fans (SLZ)
; ---------------------------------------------------------------------------

Obj5D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5D_Index(pc,d0.w),d1
		jmp	Obj5D_Index(pc,d1.w)
Obj5D_Index:	dc.w Obj5D_Main-Obj5D_Index ; ...
		dc.w Obj5D_Delay-Obj5D_Index

Obj5D_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5D,4(a0)
		move.w	#$43A0,2(a0)
		ori.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)

Obj5D_Delay:				; ...
		btst	#1,$28(a0)	; is object type 02/03?
		bne.s	Obj5D_Blow	; if yes, branch
		subq.w	#1,$30(a0)	; subtract 1 from time delay
		bpl.s	Obj5D_Blow	; if time remains, branch
		move.w	#120,$30(a0)	; set delay to 2 seconds
		bchg	#0,$32(a0)	; switch fan on/off
		beq.s	Obj5D_Blow	; if fan is off, branch
		move.w	#180,$30(a0)	; set delay to 3 seconds

Obj5D_Blow:				; ...
		tst.b	$32(a0)		; is fan switched on?
		bne.w	Obj5D_ChkDel	; if not, branch
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		btst	#0,$22(a0)
		bne.s	Obj5D_ChkSonic
		neg.w	d0

Obj5D_ChkSonic:				; ...
		addi.w	#$50,d0
		cmpi.w	#$F0,d0		; is Sonic more	than $A0 pixels	from the fan?
		bcc.s	Obj5D_Animate	; if yes, branch
		move.w	$C(a1),d1
		addi.w	#$60,d1
		sub.w	$C(a0),d1
		bcs.s	Obj5D_Animate
		cmpi.w	#$70,d1
		bcc.s	Obj5D_Animate
		subi.w	#$50,d0
		bcc.s	loc_1159A
		not.w	d0
		add.w	d0,d0

loc_1159A:				; ...
		addi.w	#$60,d0
		btst	#0,$22(a0)
		bne.s	loc_115A8
		neg.w	d0

loc_115A8:				; ...
		neg.b	d0
		asr.w	#4,d0
		btst	#0,$28(a0)
		beq.s	Obj5D_MoveSonic
		neg.w	d0

Obj5D_MoveSonic:			; ...
		add.w	d0,8(a1)	; push Sonic away from the fan

Obj5D_Animate:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	Obj5D_ChkDel
		move.b	#0,$1E(a0)
		addq.b	#1,$1B(a0)
		cmpi.b	#3,$1B(a0)
		bcs.s	loc_115D8
		move.b	#0,$1B(a0)

loc_115D8:				; ...
		moveq	#0,d0
		btst	#0,$28(a0)
		beq.s	loc_115E4
		moveq	#2,d0

loc_115E4:				; ...
		add.b	$1B(a0),d0
		move.b	d0,$1A(a0)

Obj5D_ChkDel:				; ...
		jsr	$880000+DisplaySprite
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - fans (SLZ)
; ---------------------------------------------------------------------------
Map_obj5D:	dc.w byte_1161A-Map_obj5D, byte_11625-Map_obj5D	; ...
		dc.w byte_11630-Map_obj5D, byte_11625-Map_obj5D
		dc.w byte_1161A-Map_obj5D
byte_1161A:	dc.b 2			; ...
		dc.b $F0, 9, 0,	0, $F8
		dc.b 0,	$D, 0, 6, $F0
byte_11625:	dc.b 2			; ...
		dc.b $F0, $D, 0, $E, $F0
		dc.b 0,	$D, 0, $16, $F0
byte_11630:	dc.b 2			; ...
		dc.b $F0, $D, 0, $1E, $F0
		dc.b 0,	9, 0, $26, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 5E - seesaws (SLZ)
; ---------------------------------------------------------------------------

Obj5E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5E_Index(pc,d0.w),d1
		jsr	Obj5E_Index(pc,d1.w)
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		bmi.w	DeleteObject
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj5E_Index:	dc.w Obj5E_Main-Obj5E_Index, Obj5E_Slope-Obj5E_Index ; ...
		dc.w Obj5E_Slope2-Obj5E_Index, Obj5E_Spikeball-Obj5E_Index
		dc.w Obj5E_MoveSpike-Obj5E_Index, Obj5E_SpikeFall-Obj5E_Index

Obj5E_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5E,4(a0)
		move.w	#$374,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$30,$19(a0)
		move.w	8(a0),$30(a0)
		tst.b	$28(a0)		; is object type 00 ?
		bne.s	loc_116D2	; if not, branch
		jsr	$880000+SingleObjLoad2
		bne.s	loc_116D2
		move.b	#$5E,0(a1)	; load spikeball object
		addq.b	#6,$24(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$22(a0),$22(a1)
		move.l	a0,$3C(a1)

loc_116D2:				; ...
		btst	#0,$22(a0)
		beq.s	loc_116E0
		move.b	#2,$1A(a0)

loc_116E0:				; ...
		move.b	$1A(a0),$3A(a0)

Obj5E_Slope:				; ...
		move.b	$3A(a0),d1
		bsr.w	loc_11766
		lea	(Obj5E_Data1)(pc),a2
		btst	#0,$1A(a0)
		beq.s	loc_11702
		lea	(Obj5E_Data2)(pc),a2

loc_11702:				; ...
		lea	($FFFFD000).w,a1
		move.w	$12(a1),$38(a0)
		move.w	#$30,d1
		jsr	$880000+(SlopeObject).l
		rts	

Obj5E_Slope2:				; ...
		bsr.w	loc_1174A
		lea	(Obj5E_Data1)(pc),a2
		btst	#0,$1A(a0)
		beq.s	loc_11730
		lea	(Obj5E_Data2)(pc),a2

loc_11730:				; ...
		move.w	#$30,d1
		jsr	$880000+(ExitPlatform).l
		move.w	#$30,d1
		move.w	8(a0),d2
		jsr	$880000+SlopeObject2
		rts	

loc_1174A:				; ...
		moveq	#2,d1
		lea	($FFFFD000).w,a1
		move.w	8(a0),d0
		sub.w	8(a1),d0
		bcc.s	loc_1175E
		neg.w	d0
		moveq	#0,d1

loc_1175E:				; ...
		cmpi.w	#8,d0
		bcc.s	loc_11766
		moveq	#1,d1

loc_11766:				; ...
		move.b	$1A(a0),d0
		cmp.b	d1,d0
		beq.s	locret_11790
		bcc.s	loc_11772
		addq.b	#2,d0

loc_11772:				; ...
		subq.b	#1,d0
		move.b	d0,$1A(a0)
		move.b	d1,$3A(a0)
		bclr	#0,1(a0)
		btst	#1,$1A(a0)
		beq.s	locret_11790
		bset	#0,1(a0)

locret_11790:				; ...
		rts	

Obj5E_Spikeball:			; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5Ea,4(a0)
		move.w	#$4F0,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$8B,$20(a0)
		move.b	#$C,$19(a0)
		move.w	8(a0),$30(a0)
		addi.w	#$28,8(a0)
		move.w	$C(a0),$34(a0)
		move.b	#1,$1A(a0)
		btst	#0,$22(a0)
		beq.s	Obj5E_MoveSpike
		subi.w	#$50,8(a0)
		move.b	#2,$3A(a0)

Obj5E_MoveSpike:			; ...
		movea.l	$3C(a0),a1
		moveq	#0,d0
		move.b	$3A(a0),d0
		sub.b	$3A(a1),d0
		beq.s	loc_1183E
		bcc.s	loc_117FC
		neg.b	d0

loc_117FC:				; ...
		move.w	#-$818,d1
		move.w	#-$114,d2
		cmpi.b	#1,d0
		beq.s	loc_11822
		move.w	#-$AF0,d1
		move.w	#-$CC,d2
		cmpi.w	#$A00,$38(a1)
		blt.s	loc_11822
		move.w	#-$E00,d1
		move.w	#-$A0,d2

loc_11822:				; ...
		move.w	d1,$12(a0)
		move.w	d2,$10(a0)
		move.w	8(a0),d0
		sub.w	$30(a0),d0
		bcc.s	loc_11838
		neg.w	$10(a0)

loc_11838:				; ...
		addq.b	#2,$24(a0)
		bra.s	Obj5E_SpikeFall

loc_1183E:				; ...
		lea	(Obj5E_Speeds)(pc),a2
		moveq	#0,d0
		move.b	$1A(a1),d0
		move.w	#$28,d2
		move.w	8(a0),d1
		sub.w	$30(a0),d1
		bcc.s	loc_1185C
		neg.w	d2
		addq.w	#2,d0

loc_1185C:				; ...
		add.w	d0,d0
		move.w	$34(a0),d1
		add.w	(a2,d0.w),d1
		move.w	d1,$C(a0)
		add.w	$30(a0),d2
		move.w	d2,8(a0)
		clr.w	$E(a0)
		clr.w	$A(a0)
		rts	

Obj5E_SpikeFall:			; ...
		tst.w	$12(a0)
		bpl.s	loc_1189A
		jsr	$880000+ObjectFall
		move.w	$34(a0),d0
		subi.w	#$2F,d0
		cmp.w	$C(a0),d0
		bgt.s	locret_11898
		jsr	$880000+ObjectFall

locret_11898:				; ...
		rts	

loc_1189A:				; ...
		jsr	$880000+ObjectFall
		movea.l	$3C(a0),a1
		lea	(Obj5E_Speeds)(pc),a2
		moveq	#0,d0
		move.b	$1A(a1),d0
		move.w	8(a0),d1
		sub.w	$30(a0),d1
		bcc.s	loc_118BA
		addq.w	#2,d0

loc_118BA:				; ...
		add.w	d0,d0
		move.w	$34(a0),d1
		add.w	(a2,d0.w),d1
		cmp.w	$C(a0),d1
		bgt.s	locret_11938
		movea.l	$3C(a0),a1
		moveq	#2,d1
		tst.w	$10(a0)
		bmi.s	Obj5E_Spring
		moveq	#0,d1

Obj5E_Spring:				; ...
		move.b	d1,$3A(a1)
		move.b	d1,$3A(a0)
		cmp.b	$1A(a1),d1
		beq.s	loc_1192C
		bclr	#3,$22(a1)
		beq.s	loc_1192C
		clr.b	$25(a1)
		move.b	#2,$24(a1)
		lea	($FFFFD000).w,a2
		move.w	$12(a0),$12(a2)
		neg.w	$12(a2)
		bset	#1,$22(a2)
		bclr	#3,$22(a2)
		clr.b	$3C(a2)
		move.b	#$10,$1C(a2)	; change Sonic's animation to "spring" ($10)
		move.b	#2,$24(a2)
		move.w	#$CC,d0
		jsr	$880000+(PlaySound_Special).l ;	play spring sound

loc_1192C:				; ...
		clr.w	$10(a0)
		clr.w	$12(a0)
		subq.b	#2,$24(a0)

locret_11938:				; ...
		rts	
Obj5E_Speeds:	dc.w $FFF8, $FFE4, $FFD1, $FFE4, $FFF8 ; ...
Obj5E_Data1:	dc.b $24, $24, $26, $28, $2A, $2C, $2A,	$28, $26, $24, $23, $22, $21, $20, $1F,	$1E ; ...
		dc.b $1D, $1C, $1B, $1A, $19, $18, $17,	$16, $15, $14, $13, $12, $11, $10, $F, $E
		dc.b $D, $C, $B, $A, 9,	8, 7, 6, 5, 4, 3, 2, 2,	2, 2, 2
Obj5E_Data2:	dc.b $15, $15, $15, $15, $15, $15, $15,	$15, $15, $15, $15, $15, $15, $15, $15,	$15 ; ...
		dc.b $15, $15, $15, $15, $15, $15, $15,	$15, $15, $15, $15, $15, $15, $15, $15,	$15
		dc.b $15, $15, $15, $15, $15, $15, $15,	$15, $15, $15, $15, $15, $15, $15, $15,	$15
; ---------------------------------------------------------------------------
; Sprite mappings - seesaws (SLZ)
; ---------------------------------------------------------------------------
Map_obj5E:	dc.w byte_119AC-Map_obj5E, byte_119D0-Map_obj5E	; ...
		dc.w byte_119AC-Map_obj5E, byte_119D0-Map_obj5E
byte_119AC:	dc.b 7			; ...
		dc.b $D4, 6, 0,	0, $D3
		dc.b $DC, 6, 0,	6, $E3
		dc.b $E4, 4, 0,	$C, $F3
		dc.b $EC, $D, 0, $E, $F3
		dc.b $FC, 8, 0,	$16, $FB
		dc.b $F4, 6, 0,	6, $13
		dc.b $FC, 5, 0,	$19, $23
byte_119D0:	dc.b 4			; ...
		dc.b $E6, $A, 0, $1D, $D0
		dc.b $E6, $A, 0, $23, $E8
		dc.b $E6, $A, 8, $23, 0
		dc.b $E6, $A, 8, $1D, $18
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - spiked balls on the	seesaws	(SLZ)
; ---------------------------------------------------------------------------
Map_obj5Ea:	dc.w byte_119EA-Map_obj5Ea ; ...
		dc.w byte_119F0-Map_obj5Ea
byte_119EA:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_119F0:	dc.b 1			; ...
		dc.b $F4, $A, 0, 9, $F4


; ---------------------------------------------------------------------------
; Object 5F - walking bomb enemy (SLZ, SBZ)
; ---------------------------------------------------------------------------

Obj5F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj5F_Index(pc,d0.w),d1
		jmp	Obj5F_Index(pc,d1.w)
Obj5F_Index:	dc.w Obj5F_Main-Obj5F_Index ; ...
		dc.w Obj5F_Action-Obj5F_Index
		dc.w Obj5F_Display-Obj5F_Index
		dc.w Obj5F_End-Obj5F_Index

Obj5F_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj5F,4(a0)
		move.w	#$400,2(a0)
		ori.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$C,$19(a0)
		move.b	$28(a0),d0
		beq.s	loc_11A3C
		move.b	d0,$24(a0)
		rts	

loc_11A3C:				; ...
		move.b	#$9A,$20(a0)
		bchg	#0,$22(a0)

Obj5F_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj5F_Index2(pc,d0.w),d1
		jsr	Obj5F_Index2(pc,d1.w)
		lea	$880000+(Ani_obj5F).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone
Obj5F_Index2:	dc.w Obj5F_Walk-Obj5F_Index2 ; ...
		dc.w Obj5F_Wait-Obj5F_Index2
		dc.w Obj5F_Explode-Obj5F_Index2

Obj5F_Walk:				; ...
		bsr.w	Obj5F_ChkSonic
		subq.w	#1,$30(a0)	; subtract 1 from time delay
		bpl.s	locret_11A96	; if time remains, branch
		addq.b	#2,$25(a0)
		move.w	#1535,$30(a0)	; set time delay to 25 seconds
		move.w	#$10,$10(a0)
		move.b	#1,$1C(a0)
		bchg	#0,$22(a0)
		beq.s	locret_11A96
		neg.w	$10(a0)		; change direction

locret_11A96:				; ...
		rts	

Obj5F_Wait:				; ...
		bsr.w	Obj5F_ChkSonic
		subq.w	#1,$30(a0)	; subtract 1 from time delay
		bmi.s	loc_11AA8
		jsr	$880000+SpeedToPos
		rts	

loc_11AA8:				; ...
		subq.b	#2,$25(a0)
		move.w	#179,$30(a0)	; set time delay to 3 seconds
		clr.w	$10(a0)		; stop walking
		move.b	#0,$1C(a0)	; stop animation
		rts	

Obj5F_Explode:				; ...
		subq.w	#1,$30(a0)
		bpl.s	locret_11AD0
		move.b	#$3F,0(a0)	; change bomb into an explosion
		move.b	#0,$24(a0)

locret_11AD0:				; ...
		rts	

Obj5F_ChkSonic:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_11ADE
		neg.w	d0

loc_11ADE:				; ...
		cmpi.w	#$60,d0
		bcc.s	locret_11B5E
		move.w	($FFFFD00C).w,d0
		sub.w	$C(a0),d0
		bcc.s	Obj5F_MakeFuse
		neg.w	d0

Obj5F_MakeFuse:				; ...
		cmpi.w	#$60,d0
		bcc.s	locret_11B5E
		tst.w	($FFFFFE08).w
		bne.s	locret_11B5E
		move.b	#4,$25(a0)
		move.w	#143,$30(a0)	; set fuse time
		clr.w	$10(a0)
		move.b	#2,$1C(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	locret_11B5E
		move.b	#$5F,0(a1)	; load fuse object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	$C(a0),$34(a1)
		move.b	$22(a0),$22(a1)
		move.b	#4,$28(a1)
		move.b	#3,$1C(a1)
		move.w	#$10,$12(a1)
		btst	#1,$22(a0)
		beq.s	loc_11B54
		neg.w	$12(a1)

loc_11B54:				; ...
		move.w	#143,$30(a1)	; set fuse time
		move.l	a0,$3C(a1)

locret_11B5E:				; ...
		rts	

Obj5F_Display:				; ...
		bsr.s	loc_11B70
		lea	$880000+(Ani_obj5F).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone

loc_11B70:				; ...
		subq.w	#1,$30(a0)
		bmi.s	loc_11B7C
		jsr	$880000+SpeedToPos
		rts	

loc_11B7C:				; ...
		clr.w	$30(a0)
		clr.b	$24(a0)
		move.w	$34(a0),$C(a0)
		moveq	#3,d1
		movea.l	a0,a1
		lea	(Obj5F_ShrSpeed)(pc),a2 ;	load shrapnel speed data
		bra.s	Obj5F_MakeShrap

Obj5F_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_11BCE

Obj5F_MakeShrap:			; ...
		move.b	#$5F,0(a1)	; load shrapnel	object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#6,$28(a1)
		move.b	#4,$1C(a1)
		move.w	(a2)+,$10(a1)
		move.w	(a2)+,$12(a1)
		move.b	#$98,$20(a1)
		bset	#7,1(a1)

loc_11BCE:				; ...
		dbf	d1,Obj5F_Loop	; repeat 3 more	times
		move.b	#6,$24(a0)

Obj5F_End:				; ...
		jsr	$880000+SpeedToPos
		addi.w	#$18,$12(a0)
		lea	$880000+(Ani_obj5F).l,a1
		jsr	$880000+AnimateSprite
		tst.b	1(a0)
		bpl.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj5F_ShrSpeed:	dc.w $FE00, $FD00, $FF00, $FE00, $200, $FD00, $100, $FE00 ; ...
Ani_obj5F:	dc.w byte_11C12-Ani_obj5F, byte_11C16-Ani_obj5F, byte_11C1C-Ani_obj5F ;	...
		dc.w byte_11C20-Ani_obj5F, byte_11C24-Ani_obj5F
byte_11C12:	dc.b $13, 1, 0,	$FF	; ...
byte_11C16:	dc.b $13, 5, 4,	3, 2, $FF ; ...
byte_11C1C:	dc.b $13, 7, 6,	$FF	; ...
byte_11C20:	dc.b 3,	8, 9, $FF	; ...
byte_11C24:	dc.b 3,	$A, $B,	$FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - walking bomb enemy (SLZ, SBZ)
; ---------------------------------------------------------------------------
Map_obj5F:	dc.w byte_11C40-Map_obj5F, byte_11C50-Map_obj5F	; ...
		dc.w byte_11C60-Map_obj5F, byte_11C70-Map_obj5F
		dc.w byte_11C80-Map_obj5F, byte_11C90-Map_obj5F
		dc.w byte_11CA0-Map_obj5F, byte_11CAB-Map_obj5F
		dc.w byte_11CB6-Map_obj5F, byte_11CBC-Map_obj5F
		dc.w byte_11CC2-Map_obj5F, byte_11CC8-Map_obj5F
byte_11C40:	dc.b 3			; ...
		dc.b $F1, $A, 0, 0, $F4
		dc.b 9,	8, 0, $12, $F4
		dc.b $E7, 1, 0,	$21, $FC
byte_11C50:	dc.b 3			; ...
		dc.b $F1, $A, 0, 9, $F4
		dc.b 9,	8, 0, $12, $F4
		dc.b $E7, 1, 0,	$21, $FC
byte_11C60:	dc.b 3			; ...
		dc.b $F0, $A, 0, 0, $F4
		dc.b 8,	8, 0, $15, $F4
		dc.b $E6, 1, 0,	$21, $FC
byte_11C70:	dc.b 3			; ...
		dc.b $F1, $A, 0, 9, $F4
		dc.b 9,	8, 0, $18, $F4
		dc.b $E7, 1, 0,	$21, $FC
byte_11C80:	dc.b 3			; ...
		dc.b $F0, $A, 0, 0, $F4
		dc.b 8,	8, 0, $1B, $F4
		dc.b $E6, 1, 0,	$21, $FC
byte_11C90:	dc.b 3			; ...
		dc.b $F1, $A, 0, 9, $F4
		dc.b 9,	8, 0, $1E, $F4
		dc.b $E7, 1, 0,	$21, $FC
byte_11CA0:	dc.b 2			; ...
		dc.b $F1, $A, 0, 0, $F4
		dc.b 9,	8, 0, $12, $F4
byte_11CAB:	dc.b 2			; ...
		dc.b $F1, $A, 0, 9, $F4
		dc.b 9,	8, 0, $12, $F4
byte_11CB6:	dc.b 1			; ...
		dc.b $E7, 1, 0,	$23, $FC ; fuse	(just before it	explodes)
byte_11CBC:	dc.b 1			; ...
		dc.b $E7, 1, 0,	$25, $FC ; fuse
byte_11CC2:	dc.b 1			; ...
		dc.b $FC, 0, 0,	$27, $FC ; fireball (after it exploded)
byte_11CC8:	dc.b 1			; ...
		dc.b $FC, 0, 0,	$28, $FC ; fireball
; ---------------------------------------------------------------------------
; Object 60 - Orbinaut enemy (LZ, SLZ, SBZ)
; ---------------------------------------------------------------------------

Obj60:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj60_Index(pc,d0.w),d1
		jmp	Obj60_Index(pc,d1.w)
Obj60_Index:	dc.w Obj60_Main-Obj60_Index ; ...
		dc.w Obj60_ChkSonic-Obj60_Index
		dc.w Obj60_Display-Obj60_Index
		dc.w Obj60_MoveOrb-Obj60_Index
		dc.w Obj60_ChkDel2-Obj60_Index

Obj60_Main:				; ...
		move.l	#$880000+Map_obj60,4(a0)
		move.w	#$429,2(a0)	; SBZ specific code
		cmpi.b	#5,($FFFFFE10).w ; check if level is SBZ
		beq.s	loc_11D02
		move.w	#$2429,2(a0)	; SLZ specific code

loc_11D02:				; ...
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ
		bne.s	loc_11D10
		move.w	#$467,2(a0)	; LZ specific code

loc_11D10:				; ...
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$B,$20(a0)
		move.b	#$C,$19(a0)
		moveq	#0,d2
		lea	$37(a0),a2
		movea.l	a2,a3
		addq.w	#1,a2
		moveq	#3,d1

Obj60_MakeOrbs:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_11D90
		addq.b	#1,(a3)
		move.w	a1,d5
		subi.w	#-$3000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	0(a0),0(a1)	; load spiked orb object
		move.b	#6,$24(a1)
		move.l	4(a0),4(a1)
		move.w	2(a0),2(a1)
		ori.b	#4,1(a1)
		move.b	#4,$18(a1)
		move.b	#8,$19(a1)
		move.b	#3,$1A(a1)
		move.b	#$98,$20(a1)
		move.b	d2,$26(a1)
		addi.b	#$40,d2
		move.l	a0,$3C(a1)
		dbf	d1,Obj60_MakeOrbs ; repeat sequence 3 more times

loc_11D90:				; ...
		moveq	#1,d0
		btst	#0,$22(a0)
		beq.s	Obj60_Move
		neg.w	d0

Obj60_Move:				; ...
		move.b	d0,$36(a0)
		move.b	$28(a0),$24(a0)	; if type is 02, skip the firing rountine
		addq.b	#2,$24(a0)
		move.w	#-$40,$10(a0)	; move orbinaut	to the left
		btst	#0,$22(a0)	; is orbinaut reversed?
		beq.s	locret_11DBC	; if not, branch
		neg.w	$10(a0)		; move orbinaut	to the right

locret_11DBC:				; ...
		rts	

Obj60_ChkSonic:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcc.s	loc_11DCA
		neg.w	d0

loc_11DCA:				; ...
		cmpi.w	#$A0,d0		; is Sonic within $A0 pixels of	orbinaut?
		bcc.s	Obj60_Animate	; if not, branch
		move.w	($FFFFD00C).w,d0
		sub.w	$C(a0),d0
		bcc.s	loc_11DDC
		neg.w	d0

loc_11DDC:				; ...
		cmpi.w	#$50,d0		; is Sonic within $50 pixels of	orbinaut?
		bcc.s	Obj60_Animate	; if not, branch
		tst.w	($FFFFFE08).w	; is debug mode	on?
		bne.s	Obj60_Animate	; if yes, branch
		move.b	#1,$1C(a0)	; use "angry" animation

Obj60_Animate:				; ...
		lea	$880000+(Ani_obj60).l,a1
		jsr	$880000+AnimateSprite
		bra.w	Obj60_ChkDel

Obj60_Display:				; ...
		jsr	$880000+SpeedToPos

Obj60_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj60_ChkGone
		jmp	$880000+DisplaySprite

Obj60_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_11E34
		bclr	#7,2(a2,d0.w)

loc_11E34:				; ...
		lea	$37(a0),a2
		moveq	#0,d2
		move.b	(a2)+,d2
		subq.w	#1,d2
		bcs.s	Obj60_Delete

loc_11E40:				; ...
		moveq	#0,d0
		move.b	(a2)+,d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a1
		jsr	$880000+DeleteObject2
		dbf	d2,loc_11E40

Obj60_Delete:				; ...
		jmp	$880000+DeleteObject

Obj60_MoveOrb:				; ...
		movea.l	$3C(a0),a1
		cmpi.b	#$60,0(a1)
		bne.w	DeleteObject
		cmpi.b	#2,$1A(a1)
		bne.s	Obj60_Circle
		cmpi.b	#$40,$26(a0)
		bne.s	Obj60_Circle
		addq.b	#2,$24(a0)
		subq.b	#1,$37(a1)
		bne.s	Obj60_FireOrb
		addq.b	#2,$24(a1)

Obj60_FireOrb:				; ...
		move.w	#-$200,$10(a0)	; move orb to the left (quickly)
		btst	#0,$22(a1)
		beq.s	Obj60_Display2
		neg.w	$10(a0)

Obj60_Display2:				; ...
		jmp	$880000+DisplaySprite

Obj60_Circle:				; ...
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		asr.w	#4,d1
		add.w	8(a1),d1
		move.w	d1,8(a0)
		asr.w	#4,d0
		add.w	$C(a1),d0
		move.w	d0,$C(a0)
		move.b	$36(a1),d0
		add.b	d0,$26(a0)
		jmp	$880000+DisplaySprite

Obj60_ChkDel2:				; ...
		jsr	$880000+SpeedToPos
		tst.b	1(a0)
		bpl.w	DeleteObject
		jmp	$880000+DisplaySprite
Ani_obj60:	dc.w byte_11EDA-Ani_obj60, byte_11EDE-Ani_obj60	; ...
byte_11EDA:	dc.b $F, 0, $FF, 0	; ...
byte_11EDE:	dc.b $F, 1, 2, $FE, 1, 0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Orbinaut enemy (LZ,	SLZ, SBZ)
; ---------------------------------------------------------------------------
Map_obj60:	dc.w byte_11EEC-Map_obj60, byte_11EF2-Map_obj60	; ...
		dc.w byte_11EF8-Map_obj60, byte_11EFE-Map_obj60
byte_11EEC:	dc.b 1			; ...
		dc.b $F4, $A, 0, 0, $F4
byte_11EF2:	dc.b 1			; ...
		dc.b $F4, $A, $20, 9, $F4
byte_11EF8:	dc.b 1			; ...
		dc.b $F4, $A, 0, $12, $F4
byte_11EFE:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$1B, $F8
; ---------------------------------------------------------------------------
; Object 16 - harpoon (LZ)
; ---------------------------------------------------------------------------

Obj16:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj16_Index(pc,d0.w),d1
		jmp	Obj16_Index(pc,d1.w)
Obj16_Index:	dc.w Obj16_Main-Obj16_Index ; ...
		dc.w Obj16_Move-Obj16_Index
		dc.w Obj16_Wait-Obj16_Index

Obj16_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj16,4(a0)
		move.w	#$3CC,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	$28(a0),$1C(a0)
		move.b	#$14,$19(a0)
		move.w	#60,$30(a0)

Obj16_Move:				; ...
		lea	$880000+(Ani_obj16).l,a1
		jsr	$880000+AnimateSprite
		moveq	#0,d0
		move.b	$1A(a0),d0	; move frame number to d0
		move.b	Obj16_Data(pc,d0.w),$20(a0) ; load collision response (based on	d0)
		bra.w	MarkObjGone
Obj16_Data:	dc.b $9B, $9C, $9D, $9E, $9F, $A0

Obj16_Wait:				; ...
		subq.w	#1,$30(a0)
		bpl.s	Obj16_ChkDel
		move.w	#60,$30(a0)
		subq.b	#2,$24(a0)	; run "Obj16_Move" subroutine
		bchg	#0,$1C(a0)	; reverse animation

Obj16_ChkDel:				; ...
		bra.w	MarkObjGone
Ani_obj16:	dc.w byte_11F8A-Ani_obj16, byte_11F8E-Ani_obj16, byte_11F92-Ani_obj16 ;	...
		dc.w byte_11F96-Ani_obj16
byte_11F8A:	dc.b 3,	1, 2, $FC	; ...
byte_11F8E:	dc.b 3,	1, 0, $FC	; ...
byte_11F92:	dc.b 3,	4, 5, $FC	; ...
byte_11F96:	dc.b 3,	4, 3, $FC	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - harpoon (LZ)
; ---------------------------------------------------------------------------
Map_obj16:	dc.w byte_11FA6-Map_obj16, byte_11FAC-Map_obj16	; ...
		dc.w byte_11FB2-Map_obj16, byte_11FBD-Map_obj16
		dc.w byte_11FC3-Map_obj16, byte_11FC9-Map_obj16
byte_11FA6:	dc.b 1			; ...
		dc.b $FC, 4, 0,	0, $F8
byte_11FAC:	dc.b 1			; ...
		dc.b $FC, $C, 0, 2, $F8
byte_11FB2:	dc.b 2			; ...
		dc.b $FC, 8, 0,	6, $F8
		dc.b $FC, 8, 0,	3, $10
byte_11FBD:	dc.b 1			; ...
		dc.b $F8, 1, 0,	9, $FC
byte_11FC3:	dc.b 1			; ...
		dc.b $E8, 3, 0,	$B, $FC
byte_11FC9:	dc.b 2			; ...
		dc.b $D8, 2, 0,	$B, $FC
		dc.b $F0, 2, 0,	$F, $FC
; ---------------------------------------------------------------------------
; Object 61 - blocks (LZ)
; ---------------------------------------------------------------------------

Obj61:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj61_Index(pc,d0.w),d1
		jmp	Obj61_Index(pc,d1.w)
Obj61_Index:	dc.w Obj61_Main-Obj61_Index ; ...
		dc.w Obj61_Action-Obj61_Index

Obj61_Var:	dc.b $10, $10		; width, height
		dc.b $20, $C
		dc.b $10, $10
		dc.b $10, $10

Obj61_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj61,4(a0)
		move.w	#$43E6,2(a0)
		move.b	#4,1(a0)
		move.b	#3,$18(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#3,d0
		andi.w	#$E,d0
		lea	Obj61_Var(pc,d0.w),a2
		move.b	(a2)+,$19(a0)
		move.b	(a2),$16(a0)
		lsr.w	#1,d0
		move.b	d0,$1A(a0)
		move.w	8(a0),$34(a0)
		move.w	$C(a0),$30(a0)
		move.b	$28(a0),d0
		andi.b	#$F,d0
		beq.s	Obj61_Action
		cmpi.b	#7,d0
		beq.s	Obj61_Action
		move.b	#1,$38(a0)

Obj61_Action:				; ...
		move.w	8(a0),-(sp)
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj61_TypeIndex(pc,d0.w),d1
		jsr	Obj61_TypeIndex(pc,d1.w)
		move.w	(sp)+,d4
		tst.b	1(a0)
		bpl.s	Obj61_ChkDel
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		moveq	#0,d2
		move.b	$16(a0),d2
		move.w	d2,d3
		addq.w	#1,d3
		jsr	$880000+SolidObject
		move.b	d4,$3F(a0)
		bsr.w	loc_12180

Obj61_ChkDel:				; ...
		move.w	$34(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Obj61_TypeIndex:dc.w Obj61_Type00-Obj61_TypeIndex, Obj61_Type01-Obj61_TypeIndex	; ...
		dc.w Obj61_Type02-Obj61_TypeIndex, Obj61_Type01-Obj61_TypeIndex
		dc.w Obj61_Type04-Obj61_TypeIndex, Obj61_Type05-Obj61_TypeIndex
		dc.w Obj61_Type02-Obj61_TypeIndex, Obj61_Type07-Obj61_TypeIndex

Obj61_Type00:				; ...
		rts	

Obj61_Type01:				; ...
		tst.w	$36(a0)		; is Sonic standing on the object?
		bne.s	loc_120D6	; if yes, branch
		btst	#3,$22(a0)
		beq.s	locret_120D4
		move.w	#30,$36(a0)	; wait for Ћ second

locret_120D4:				; ...
		rts	

loc_120D6:				; ...
		subq.w	#1,$36(a0)	; subtract 1 from waiting time
		bne.s	locret_120D4	; if time remains, branch
		addq.b	#1,$28(a0)	; add 1	to type
		clr.b	$38(a0)
		rts	

Obj61_Type02:				; ...
		jsr	$880000+SpeedToPos
		addq.w	#8,$12(a0)	; make object fall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.w	locret_12106
		addq.w	#1,d1
		add.w	d1,$C(a0)
		clr.w	$12(a0)		; stop when it touches the floor
		clr.b	$28(a0)		; set type to 00 (non-moving type)

locret_12106:				; ...
		rts	

Obj61_Type04:				; ...
		jsr	$880000+SpeedToPos
		subq.w	#8,$12(a0)	; make object rise
		jsr	$880000+ObjHitCeiling
		tst.w	d1
		bpl.w	locret_12126
		sub.w	d1,$C(a0)
		clr.w	$12(a0)		; stop when it touches the ceiling
		clr.b	$28(a0)		; set type to 00 (non-moving type)

locret_12126:				; ...
		rts	

Obj61_Type05:				; ...
		cmpi.b	#1,$3F(a0)	; is Sonic touching the	object?
		bne.s	locret_12138	; if not, branch
		addq.b	#1,$28(a0)	; if yes, add 1	to type
		clr.b	$38(a0)

locret_12138:				; ...
		rts	

Obj61_Type07:				; ...
		move.w	($FFFFF646).w,d0
		sub.w	$C(a0),d0
		beq.s	locret_1217E
		bcc.s	loc_12162
		cmpi.w	#-2,d0
		bge.s	loc_1214E
		moveq	#-2,d0

loc_1214E:				; ...
		add.w	d0,$C(a0)	; make the block rise with water level
		jsr	$880000+ObjHitCeiling
		tst.w	d1
		bpl.w	locret_12160
		sub.w	d1,$C(a0)

locret_12160:				; ...
		rts	

loc_12162:				; ...
		cmpi.w	#2,d0
		ble.s	loc_1216A
		moveq	#2,d0

loc_1216A:				; ...
		add.w	d0,$C(a0)	; make the block sink with water level
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.w	locret_1217E
		addq.w	#1,d1
		add.w	d1,$C(a0)

locret_1217E:				; ...
		rts	

loc_12180:				; ...
		tst.b	$38(a0)
		beq.s	locret_121C0
		btst	#3,$22(a0)
		bne.s	loc_1219A
		tst.b	$3E(a0)
		beq.s	locret_121C0
		subq.b	#4,$3E(a0)
		bra.s	loc_121A6

loc_1219A:				; ...
		cmpi.b	#$40,$3E(a0)
		beq.s	locret_121C0
		addq.b	#4,$3E(a0)

loc_121A6:				; ...
		move.b	$3E(a0),d0
		jsr	$880000+(CalcSine).l
		move.w	#$400,d1
		muls.w	d1,d0
		swap	d0
		add.w	$30(a0),d0
		move.w	d0,$C(a0)

locret_121C0:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - blocks (LZ)
; ---------------------------------------------------------------------------
Map_obj61:	dc.w byte_121CA-Map_obj61, byte_121D0-Map_obj61	; ...
		dc.w byte_121DB-Map_obj61, byte_121E1-Map_obj61
byte_121CA:	dc.b 1			; ...
		dc.b $F0, $F, 0, 0, $F0
byte_121D0:	dc.b 2			; ...
		dc.b $F4, $E, 0, $69, $E0
		dc.b $F4, $E, 0, $75, 0
byte_121DB:	dc.b 1			; ...
		dc.b $F0, $F, 1, $1A, $F0
byte_121E1:	dc.b 1			; ...
		dc.b $F0, $F, $FD, $FA,	$F0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 62 - gargoyle head (LZ)
; ---------------------------------------------------------------------------

Obj62:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj62_Index(pc,d0.w),d1
		jsr	Obj62_Index(pc,d1.w)
		bra.w	MarkObjGone
Obj62_Index:	dc.w Obj62_Main-Obj62_Index ; ...
		dc.w Obj62_MakeFire-Obj62_Index
		dc.w Obj62_FireBall-Obj62_Index
		dc.w Obj62_AniFire-Obj62_Index

Obj62_SpitRate:	dc.b 30, 60, 90, 120, 150, 180,	210, 240

Obj62_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj62,4(a0)
		move.w	#$42E9,2(a0)
		ori.b	#4,1(a0)
		move.b	#3,$18(a0)
		move.b	#$10,$19(a0)
		move.b	$28(a0),d0	; get object type
		andi.w	#$F,d0		; read only the	2nd digit
		move.b	Obj62_SpitRate(pc,d0.w),$1F(a0)	; set fireball spit rate
		move.b	$1F(a0),$1E(a0)
		andi.b	#$F,$28(a0)

Obj62_MakeFire:				; ...
		subq.b	#1,$1E(a0)
		bne.s	Obj62_NoFire
		move.b	$1F(a0),$1E(a0)
		bsr.w	ChkObjOnScreen
		bne.s	Obj62_NoFire
		jsr	$880000+SingleObjLoad
		bne.s	Obj62_NoFire
		move.b	#$62,0(a1)	; load fireball	object
		addq.b	#4,$24(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	1(a0),1(a1)
		move.b	$22(a0),$22(a1)

Obj62_NoFire:				; ...
		rts	

Obj62_FireBall:				; ...
		addq.b	#2,$24(a0)
		move.b	#8,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj62,4(a0)
		move.w	#$2E9,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$98,$20(a0)
		move.b	#8,$19(a0)
		move.b	#2,$1A(a0)
		addq.w	#8,$C(a0)
		move.w	#$200,$10(a0)
		btst	#0,$22(a0)
		bne.s	Obj62_Sound
		neg.w	$10(a0)

Obj62_Sound:				; ...
		move.w	#$AE,d0
		jsr	$880000+(PlaySound_Special).l ;	play lava ball sound

Obj62_AniFire:				; ...
		move.b	($FFFFFE05).w,d0
		andi.b	#7,d0
		bne.s	Obj62_StopFire
		bchg	#0,$1A(a0)	; switch between frame 01 and 02

Obj62_StopFire:				; ...
		jsr	$880000+SpeedToPos
		btst	#0,$22(a0)
		bne.s	Obj62_StopFire2
		moveq	#-8,d3
		jsr	$880000+ObjHitWallLeft
		tst.w	d1
		bmi.w	DeleteObject	; delete if the	fireball hits a	wall
		rts	

Obj62_StopFire2:			; ...
		moveq	#8,d3
		jsr	$880000+ObjHitWallRight
		tst.w	d1
		bmi.w	DeleteObject
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - gargoyle head (LZ)
; ---------------------------------------------------------------------------
Map_obj62:	dc.w byte_12320-Map_obj62, byte_12320-Map_obj62	; ...
		dc.w byte_12330-Map_obj62, byte_12336-Map_obj62
byte_12320:	dc.b 3			; ...
		dc.b $F0, 4, 0,	0, 0
		dc.b $F8, $D, 0, 2, $F0
		dc.b 8,	8, 0, $A, $F8
byte_12330:	dc.b 1			; ...
		dc.b $FC, 4, 0,	$D, $F8
byte_12336:	dc.b 1			; ...
		dc.b $FC, 4, 0,	$F, $F8
; ---------------------------------------------------------------------------
; Object 63 - platforms	on a conveyor belt (LZ)
; ---------------------------------------------------------------------------

Obj63:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj63_Index(pc,d0.w),d1
		jsr	Obj63_Index(pc,d1.w)
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	loc_1236A

Obj63_Display:				; ...
		jmp	$880000+DisplaySprite

loc_1236A:				; ...
		cmpi.b	#2,($FFFFFE11).w
		bne.s	loc_12378
		cmpi.w	#-$80,d0
		bcc.s	Obj63_Display

loc_12378:				; ...
		move.b	$2F(a0),d0
		bpl.w	DeleteObject
		andi.w	#$7F,d0
		lea	($FFFFF7C1).w,a2
		bclr	#0,(a2,d0.w)
		jmp	$880000+DeleteObject
Obj63_Index:	dc.w Obj63_Main-Obj63_Index ; ...
		dc.w loc_124B2-Obj63_Index
		dc.w loc_124C2-Obj63_Index
		dc.w loc_124DE-Obj63_Index

Obj63_Main:				; ...
		move.b	$28(a0),d0
		bmi.w	loc_12460
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj63,4(a0)
		move.w	#$43F6,2(a0)
		ori.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		cmpi.b	#$7F,$28(a0)
		bne.s	loc_123E2
		addq.b	#4,$24(a0)
		move.w	#$3F6,2(a0)
		move.b	#1,$18(a0)
		bra.w	loc_124DE

loc_123E2:				; ...
		move.b	#4,$1A(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		move.w	d0,d1
		lsr.w	#3,d0
		andi.w	#$1E,d0
		lea	Obj63_Data(pc),a2
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,$38(a0)
		move.w	(a2)+,$30(a0)
		move.l	a2,$3C(a0)
		andi.w	#$F,d1
		lsl.w	#2,d1
		move.b	d1,$38(a0)
		move.b	#4,$3A(a0)
		tst.b	($FFFFF7C0).w
		beq.s	loc_1244C
		move.b	#1,$3B(a0)
		neg.b	$3A(a0)
		moveq	#0,d1
		move.b	$38(a0),d1
		add.b	$3A(a0),d1
		cmp.b	$39(a0),d1
		bcs.s	loc_12448
		move.b	d1,d0
		moveq	#0,d1
		tst.b	d0
		bpl.s	loc_12448
		move.b	$39(a0),d1
		subq.b	#4,d1

loc_12448:				; ...
		move.b	d1,$38(a0)

loc_1244C:				; ...
		move.w	(a2,d1.w),$34(a0)
		move.w	2(a2,d1.w),$36(a0)
		bsr.w	Obj63_ChangeDir
		bra.w	loc_124B2

loc_12460:				; ...
		move.b	d0,$2F(a0)
		andi.w	#$7F,d0
		lea	($FFFFF7C1).w,a2
		bset	#0,(a2,d0.w)
		bne.w	DeleteObject
		add.w	d0,d0
		andi.w	#$1E,d0
		addi.w	#$70,d0
		lea	$900000+(ObjPos_Index).l,a2
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,d1
		movea.l	a0,a1
		bra.s	Obj63_MakePtfms

Obj63_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_124AA

Obj63_MakePtfms:			; ...
		move.b	#$63,0(a1)
		move.w	(a2)+,8(a1)
		move.w	(a2)+,$C(a1)
		move.w	(a2)+,d0
		move.b	d0,$28(a1)

loc_124AA:				; ...
		dbf	d1,Obj63_Loop
		addq.l	#4,sp
		rts	

loc_124B2:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(PlatformObject).l
		bra.w	sub_12502

loc_124C2:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(ExitPlatform).l
		move.w	8(a0),-(sp)
		bsr.w	sub_12502
		move.w	(sp)+,d2
		jmp	$880000+(MvSonicOnPtfm2).l

loc_124DE:				; ...
		move.w	($FFFFFE04).w,d0
		andi.w	#3,d0
		bne.s	loc_124FC
		moveq	#1,d1
		tst.b	($FFFFF7C0).w
		beq.s	loc_124F2
		neg.b	d1

loc_124F2:				; ...
		add.b	d1,$1A(a0)
		andi.b	#3,$1A(a0)

loc_124FC:				; ...
		addq.l	#4,sp
		bra.w	MarkObjGone

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_12502:				; ...
		tst.b	($FFFFF7EE).w
		beq.s	loc_12520
		tst.b	$3B(a0)
		bne.s	loc_12520
		move.b	#1,$3B(a0)
		move.b	#1,($FFFFF7C0).w
		neg.b	$3A(a0)
		bra.s	loc_12534

loc_12520:				; ...
		move.w	8(a0),d0
		cmp.w	$34(a0),d0
		bne.s	loc_1256A
		move.w	$C(a0),d0
		cmp.w	$36(a0),d0
		bne.s	loc_1256A

loc_12534:				; ...
		moveq	#0,d1
		move.b	$38(a0),d1
		add.b	$3A(a0),d1
		cmp.b	$39(a0),d1
		bcs.s	loc_12552
		move.b	d1,d0
		moveq	#0,d1
		tst.b	d0
		bpl.s	loc_12552
		move.b	$39(a0),d1
		subq.b	#4,d1

loc_12552:				; ...
		move.b	d1,$38(a0)
		movea.l	$3C(a0),a1
		move.w	(a1,d1.w),$34(a0)
		move.w	2(a1,d1.w),$36(a0)
		bsr.w	Obj63_ChangeDir

loc_1256A:				; ...
		jsr	$880000+SpeedToPos
		rts	
; End of function sub_12502


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj63_ChangeDir:			; ...
		moveq	#0,d0
		move.w	#-$100,d2
		move.w	8(a0),d0
		sub.w	$34(a0),d0
		bcc.s	loc_12584
		neg.w	d0
		neg.w	d2

loc_12584:				; ...
		moveq	#0,d1
		move.w	#-$100,d3
		move.w	$C(a0),d1
		sub.w	$36(a0),d1
		bcc.s	loc_12598
		neg.w	d1
		neg.w	d3

loc_12598:				; ...
		cmp.w	d0,d1
		bcs.s	loc_125C2
		move.w	8(a0),d0
		sub.w	$34(a0),d0
		beq.s	loc_125AE
		ext.l	d0
		asl.l	#8,d0
		divs.w	d1,d0
		neg.w	d0

loc_125AE:				; ...
		move.w	d0,$10(a0)
		move.w	d3,$12(a0)
		swap	d0
		move.w	d0,$A(a0)
		clr.w	$E(a0)
		rts	

loc_125C2:				; ...
		move.w	$C(a0),d1
		sub.w	$36(a0),d1
		beq.s	loc_125D4
		ext.l	d1
		asl.l	#8,d1
		divs.w	d0,d1
		neg.w	d1

loc_125D4:				; ...
		move.w	d1,$12(a0)
		move.w	d2,$10(a0)
		swap	d1
		move.w	d1,$E(a0)
		clr.w	$A(a0)
		rts	
; End of function Obj63_ChangeDir

Obj63_Data:	dc.w word_125F4-Obj63_Data ; ...
		dc.w word_12610-Obj63_Data
		dc.w word_12628-Obj63_Data
		dc.w word_1263C-Obj63_Data
		dc.w word_12650-Obj63_Data
		dc.w word_12668-Obj63_Data
word_125F4:	dc.w $18, $1070, $1078,	$21A, $10BE, $260, $10BE, $393 ; ...
		dc.w $108C, $3C5, $1022, $390, $1022, $244
word_12610:	dc.w $14, $1280, $127E,	$280, $12CE, $2D0, $12CE, $46E ; ...
		dc.w $1232, $420, $1232, $2CC
word_12628:	dc.w $10, $D68,	$D22, $482, $D22, $5DE,	$DAE, $5DE, $DAE, $482 ; ...
word_1263C:	dc.w $10, $DA0,	$D62, $3A2, $DEE, $3A2,	$DEE, $4DE, $D62, $4DE ; ...
word_12650:	dc.w $14, $D00,	$CAC, $242, $DDE, $242,	$DDE, $3DE, $C52, $3DE,	$C52, $29C ; ...
word_12668:	dc.w $10, $1300, $1252,	$20A, $13DE, $20A, $13DE, $2BE,	$1252, $2BE ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - platforms on a conveyor belt (LZ)
; ---------------------------------------------------------------------------
Map_obj63:	dc.w byte_12686-Map_obj63, byte_1268C-Map_obj63	; ...
		dc.w byte_12692-Map_obj63, byte_12698-Map_obj63
		dc.w byte_1269E-Map_obj63
byte_12686:	dc.b 1			; ...
		dc.b $F0, $F, 0, 0, $F0
byte_1268C:	dc.b 1			; ...
		dc.b $F0, $F, 0, $10, $F0
byte_12692:	dc.b 1			; ...
		dc.b $F0, $F, 0, $20, $F0
byte_12698:	dc.b 1			; ...
		dc.b $F0, $F, 0, $30, $F0
byte_1269E:	dc.b 1			; ...
		dc.b $F8, $D, 0, $40, $F0
; ---------------------------------------------------------------------------
; Object 64 - bubbles (LZ)
; ---------------------------------------------------------------------------

Obj64:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj64_Index(pc,d0.w),d1
		jmp	Obj64_Index(pc,d1.w)
Obj64_Index:	dc.w Obj64_Main-Obj64_Index ; ...
		dc.w Obj64_Animate-Obj64_Index
		dc.w Obj64_ChkWater-Obj64_Index
		dc.w Obj64_Display2-Obj64_Index
		dc.w Obj64_Delete3-Obj64_Index
		dc.w Obj64_BblMaker-Obj64_Index

Obj64_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj64,4(a0)
		move.w	#$8348,2(a0)
		move.b	#$84,1(a0)
		move.b	#$10,$19(a0)
		move.b	#1,$18(a0)
		move.b	$28(a0),d0	; get object type
		bpl.s	Obj64_Bubble	; if type is $0-$7F, branch
		addq.b	#8,$24(a0)
		andi.w	#$7F,d0		; read only last 7 bits	(deduct	$80)
		move.b	d0,$32(a0)
		move.b	d0,$33(a0)
		move.b	#6,$1C(a0)
		bra.w	Obj64_BblMaker

Obj64_Bubble:				; ...
		move.b	d0,$1C(a0)
		move.w	8(a0),$30(a0)
		move.w	#-$88,$12(a0)	; float	bubble upwards
		jsr	$880000+(RandomNumber).l
		move.b	d0,$26(a0)

Obj64_Animate:				; ...
		lea	(Ani_obj64)(pc),a1
		jsr	$880000+AnimateSprite
		cmpi.b	#6,$1A(a0)
		bne.s	Obj64_ChkWater
		move.b	#1,$2E(a0)

Obj64_ChkWater:				; ...
		move.w	($FFFFF646).w,d0
		cmp.w	$C(a0),d0	; is bubble underwater?
		bcs.s	Obj64_Wobble	; if yes, branch

Obj64_Burst:				; ...
		move.b	#6,$24(a0)
		addq.b	#3,$1C(a0)	; run "bursting" animation
		bra.w	Obj64_Display2

Obj64_Wobble:				; ...
		move.b	$26(a0),d0
		addq.b	#1,$26(a0)
		andi.w	#$7F,d0
		lea	$880000+(Obj0A_WobbleData),a1
		move.b	(a1,d0.w),d0
		ext.w	d0
		add.w	$30(a0),d0
		move.w	d0,8(a0)	; change bubble's horizontal position
		tst.b	$2E(a0)
		beq.s	Obj64_Display
		bsr.w	Obj64_ChkSonic	; has Sonic touched the	bubble?
		beq.s	Obj64_Display	; if not, branch

		jsr	$880000+ResumeMusic	; cancel countdown music
		move.w	#$AD,d0
		jsr	$880000+(PlaySound_Special).l ;	play collecting	bubble sound
		lea	($FFFFD000).w,a1
		clr.w	$10(a1)
		clr.w	$12(a1)
		clr.w	$14(a1)
		move.b	#$15,$1C(a1)
		move.w	#$23,$3E(a1)
		move.b	#0,$3C(a1)
		bclr	#5,$22(a1)
		bclr	#4,$22(a1)
		btst	#2,$22(a1)
		beq.w	Obj64_Burst
		bclr	#2,$22(a1)
		move.b	#$13,$16(a1)
		move.b	#9,$17(a1)
		subq.w	#5,$C(a1)
		bra.w	Obj64_Burst

Obj64_Display:				; ...
		jsr	$880000+SpeedToPos
		tst.b	1(a0)
		bpl.s	Obj64_Delete
		jmp	$880000+DisplaySprite

Obj64_Delete:				; ...
		jmp	$880000+DeleteObject

Obj64_Display2:				; ...
		lea	(Ani_obj64)(pc),a1
		jsr	$880000+AnimateSprite
		tst.b	1(a0)
		bpl.s	Obj64_Delete2
		jmp	$880000+DisplaySprite

Obj64_Delete2:				; ...
		jmp	$880000+DeleteObject

Obj64_Delete3:				; ...
		jmp	$880000+DeleteObject

Obj64_BblMaker:				; ...
		tst.w	$36(a0)
		bne.s	loc_12874
		move.w	($FFFFF646).w,d0
		cmp.w	$C(a0),d0	; is bubble maker underwater?
		bcc.w	Obj64_ChkDel	; if not, branch
		tst.b	1(a0)
		bpl.w	Obj64_ChkDel
		subq.w	#1,$38(a0)
		bpl.w	loc_12914
		move.w	#1,$36(a0)

loc_1283A:				; ...
		jsr	$880000+(RandomNumber).l
		move.w	d0,d1
		andi.w	#7,d0
		cmpi.w	#6,d0
		bcc.s	loc_1283A
		move.b	d0,$34(a0)
		andi.w	#$C,d1
		lea	(Obj64_BblTypes)(pc),a1
		adda.w	d1,a1
		move.l	a1,$3C(a0)
		subq.b	#1,$32(a0)
		bpl.s	loc_12872
		move.b	$33(a0),$32(a0)
		bset	#7,$36(a0)

loc_12872:				; ...
		bra.s	loc_1287C

loc_12874:				; ...
		subq.w	#1,$38(a0)
		bpl.w	loc_12914

loc_1287C:				; ...
		jsr	$880000+(RandomNumber).l
		andi.w	#$1F,d0
		move.w	d0,$38(a0)
		jsr	$880000+SingleObjLoad
		bne.s	loc_128F8
		move.b	#$64,0(a1)	; load bubble object
		move.w	8(a0),8(a1)
		jsr	$880000+(RandomNumber).l
		andi.w	#$F,d0
		subq.w	#8,d0
		add.w	d0,8(a1)
		move.w	$C(a0),$C(a1)
		moveq	#0,d0
		move.b	$34(a0),d0
		movea.l	$3C(a0),a2
		move.b	(a2,d0.w),$28(a1)
		btst	#7,$36(a0)
		beq.s	loc_128F8
		jsr	$880000+(RandomNumber).l
		andi.w	#3,d0
		bne.s	loc_128E4
		bset	#6,$36(a0)
		bne.s	loc_128F8
		move.b	#2,$28(a1)

loc_128E4:				; ...
		tst.b	$34(a0)
		bne.s	loc_128F8
		bset	#6,$36(a0)
		bne.s	loc_128F8
		move.b	#2,$28(a1)

loc_128F8:				; ...
		subq.b	#1,$34(a0)
		bpl.s	loc_12914
		jsr	$880000+(RandomNumber).l
		andi.w	#$7F,d0
		addi.w	#$80,d0
		add.w	d0,$38(a0)
		clr.w	$36(a0)

loc_12914:				; ...
		lea	(Ani_obj64)(pc),a1
		jsr	$880000+AnimateSprite

Obj64_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		move.w	($FFFFF646).w,d0
		cmp.w	$C(a0),d0
		bcs.w	DisplaySprite
		rts	
; bubble production sequence
;
; 0 = small bubble, 1 =	large bubble
;
Obj64_BblTypes:	dc.b 0,	1, 0, 0, 0, 0, 1, 0, 0,	0, 0, 1, 0, 1, 0, 0, 1,	0 ; ...

Obj64_ChkSonic:				; ...
		tst.b	($FFFFF7C8).w
		bmi.s	loc_12998
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		move.w	8(a0),d1
		subi.w	#$10,d1
		cmp.w	d0,d1
		bcc.s	loc_12998
		addi.w	#$20,d1
		cmp.w	d0,d1
		bcs.s	loc_12998
		move.w	$C(a1),d0
		move.w	$C(a0),d1
		cmp.w	d0,d1
		bcc.s	loc_12998
		addi.w	#$10,d1
		cmp.w	d0,d1
		bcs.s	loc_12998
		moveq	#1,d0
		rts	

loc_12998:				; ...
		moveq	#0,d0
		rts	
Ani_obj64:	dc.w byte_129AA-Ani_obj64, byte_129B0-Ani_obj64, byte_129B6-Ani_obj64 ;	...
		dc.w byte_129BE-Ani_obj64, byte_129BE-Ani_obj64, byte_129C0-Ani_obj64
		dc.w byte_129C6-Ani_obj64
byte_129AA:	dc.b $E, 0, 1, 2, $FC, 0 ; ...
byte_129B0:	dc.b $E, 1, 2, 3, 4, $FC ; ...
byte_129B6:	dc.b $E, 2, 3, 4, 5, 6,	$FC, 0 ; ...
byte_129BE:	dc.b 4,	$FC		; ...
byte_129C0:	dc.b 4,	6, 7, 8, $FC, 0	; ...
byte_129C6:	dc.b $F, $13, $14, $15,	$FF, 0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - bubbles (LZ)
; ---------------------------------------------------------------------------
Map_obj64:	dc.w byte_129FA-Map_obj64, byte_12A00-Map_obj64	; ...
		dc.w byte_12A06-Map_obj64, byte_12A0C-Map_obj64
		dc.w byte_12A12-Map_obj64, byte_12A18-Map_obj64
		dc.w byte_12A1E-Map_obj64, byte_12A24-Map_obj64
		dc.w byte_12A39-Map_obj64, byte_12A4E-Map_obj64
		dc.w byte_12A54-Map_obj64, byte_12A5A-Map_obj64
		dc.w byte_12A60-Map_obj64, byte_12A66-Map_obj64
		dc.w byte_12A6C-Map_obj64, byte_12A72-Map_obj64
		dc.w byte_12A78-Map_obj64, byte_12A7E-Map_obj64
		dc.w byte_12A84-Map_obj64, byte_12A8A-Map_obj64
		dc.w byte_12A90-Map_obj64, byte_12A96-Map_obj64
		dc.w byte_12A9C-Map_obj64
byte_129FA:	dc.b 1			; ...
		dc.b $FC, 0, 0,	0, $FC
byte_12A00:	dc.b 1			; ...
		dc.b $FC, 0, 0,	1, $FC
byte_12A06:	dc.b 1			; ...
		dc.b $FC, 0, 0,	2, $FC
byte_12A0C:	dc.b 1			; ...
		dc.b $F8, 5, 0,	3, $F8
byte_12A12:	dc.b 1			; ...
		dc.b $F8, 5, 0,	7, $F8
byte_12A18:	dc.b 1			; ...
		dc.b $F4, $A, 0, $B, $F4
byte_12A1E:	dc.b 1			; ...
		dc.b $F0, $F, 0, $14, $F0
byte_12A24:	dc.b 4			; ...
		dc.b $F0, 5, 0,	$24, $F0
		dc.b $F0, 5, 8,	$24, 0
		dc.b 0,	5, $10,	$24, $F0
		dc.b 0,	5, $18,	$24, 0
byte_12A39:	dc.b 4			; ...
		dc.b $F0, 5, 0,	$28, $F0
		dc.b $F0, 5, 8,	$28, 0
		dc.b 0,	5, $10,	$28, $F0
		dc.b 0,	5, $18,	$28, 0
byte_12A4E:	dc.b 1			; ...
		dc.b $F4, 6, 0,	$2C, $F8
byte_12A54:	dc.b 1			; ...
		dc.b $F4, 6, 0,	$32, $F8
byte_12A5A:	dc.b 1			; ...
		dc.b $F4, 6, 0,	$38, $F8
byte_12A60:	dc.b 1			; ...
		dc.b $F4, 6, 0,	$3E, $F8
byte_12A66:	dc.b 1			; ...
		dc.b $F4, 6, $20, $44, $F8
byte_12A6C:	dc.b 1			; ...
		dc.b $F4, 6, $20, $4A, $F8
byte_12A72:	dc.b 1			; ...
		dc.b $F4, 6, $20, $50, $F8
byte_12A78:	dc.b 1			; ...
		dc.b $F4, 6, $20, $56, $F8
byte_12A7E:	dc.b 1			; ...
		dc.b $F4, 6, $20, $5C, $F8
byte_12A84:	dc.b 1			; ...
		dc.b $F4, 6, $20, $62, $F8
byte_12A8A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$68, $F8
byte_12A90:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$6C, $F8
byte_12A96:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$70, $F8
byte_12A9C:	dc.b 0			; ...
		dc.b 0
; ---------------------------------------------------------------------------
; Object 65 - waterfalls (LZ)
; ---------------------------------------------------------------------------

Obj65:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj65_Index(pc,d0.w),d1
		jmp	Obj65_Index(pc,d1.w)
Obj65_Index:	dc.w Obj65_Main-Obj65_Index ; ...
		dc.w Obj65_Animate-Obj65_Index
		dc.w Obj65_ChkDel-Obj65_Index
		dc.w Obj65_FixHeight-Obj65_Index
		dc.w loc_12B36-Obj65_Index

Obj65_Main:				; ...
		addq.b	#4,$24(a0)
		move.l	#$880000+Map_obj65,4(a0)
		move.w	#$4259,2(a0)
		ori.b	#4,1(a0)
		move.b	#$18,$19(a0)
		move.b	#1,$18(a0)
		move.b	$28(a0),d0	; get object type
		bpl.s	loc_12AE6
		bset	#7,2(a0)

loc_12AE6:				; ...
		andi.b	#$F,d0		; read only the	2nd byte
		move.b	d0,$1A(a0)	; set frame number
		cmpi.b	#9,d0		; is object type $x9 ?
		bne.s	Obj65_ChkDel	; if not, branch
		clr.b	$18(a0)
		subq.b	#2,$24(a0)
		btst	#6,$28(a0)	; is object type $4x ?
		beq.s	loc_12B0A	; if not, branch
		move.b	#6,$24(a0)

loc_12B0A:				; ...
		btst	#5,$28(a0)	; is object type $Ax ?
		beq.s	Obj65_Animate	; if not, branch
		move.b	#8,$24(a0)

Obj65_Animate:				; ...
		lea	$880000+(Ani_obj65).l,a1
		jsr	$880000+AnimateSprite

Obj65_ChkDel:				; ...
		bra.w	MarkObjGone

Obj65_FixHeight:			; ...
		move.w	($FFFFF646).w,d0
		subi.w	#$10,d0
		move.w	d0,$C(a0)	; match	object position	to water height
		bra.s	Obj65_Animate

loc_12B36:				; ...
		bclr	#7,2(a0)
		cmpi.b	#7,($FFFFA506).w
		bne.s	Obj65_Animate2
		bset	#7,2(a0)

Obj65_Animate2:				; ...
		bra.s	Obj65_Animate
Ani_obj65:	dc.w byte_12B4E-Ani_obj65 ; ...
byte_12B4E:	dc.b 5,	9, $A, $B, $FF,	0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - waterfalls (LZ)
; ---------------------------------------------------------------------------
Map_obj65:	dc.w byte_12B6C-Map_obj65, byte_12B72-Map_obj65	; ...
		dc.w byte_12B7D-Map_obj65, byte_12B88-Map_obj65
		dc.w byte_12B8E-Map_obj65, byte_12B99-Map_obj65
		dc.w byte_12B9F-Map_obj65, byte_12BA5-Map_obj65
		dc.w byte_12BAB-Map_obj65, byte_12BB6-Map_obj65
		dc.w byte_12BC1-Map_obj65, byte_12BCC-Map_obj65
byte_12B6C:	dc.b 1			; ...
		dc.b $F0, 7, 0,	0, $F8
byte_12B72:	dc.b 2			; ...
		dc.b $F8, 4, 0,	8, $FC
		dc.b 0,	8, 0, $A, $F4
byte_12B7D:	dc.b 2			; ...
		dc.b $F8, 0, 0,	8, 0
		dc.b 0,	4, 0, $D, $F8
byte_12B88:	dc.b 1			; ...
		dc.b $F8, 1, 0,	$F, 0
byte_12B8E:	dc.b 2			; ...
		dc.b $F8, 0, 0,	8, 0
		dc.b 0,	4, 0, $D, $F8
byte_12B99:	dc.b 1			; ...
		dc.b $F8, 1, 0,	$11, 0
byte_12B9F:	dc.b 1			; ...
		dc.b $F8, 1, 0,	$13, 0
byte_12BA5:	dc.b 1			; ...
		dc.b $F0, 7, 0,	$15, $F8
byte_12BAB:	dc.b 2			; ...
		dc.b $F8, $C, 0, $1D, $F6
		dc.b 0,	$C, 0, $21, $E8
byte_12BB6:	dc.b 2			; ...
		dc.b $F0, $B, 0, $25, $E8
		dc.b $F0, $B, 0, $31, 0
byte_12BC1:	dc.b 2			; ...
		dc.b $F0, $B, 0, $3D, $E8
		dc.b $F0, $B, 0, $49, 0
byte_12BCC:	dc.b 2			; ...
		dc.b $F0, $B, 0, $55, $E8
		dc.b $F0, $B, 0, $61, 0
		dc.b 0
; ---------------------------------------------------------------------------
; Object 66 - rotating disc that grabs Sonic (SBZ)
; ---------------------------------------------------------------------------

Obj66:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj66_Index(pc,d0.w),d1
		jmp	Obj66_Index(pc,d1.w)
Obj66_Index:	dc.w Obj66_Main-Obj66_Index ; ...
		dc.w Obj66_Action-Obj66_Index
		dc.w Obj66_Display-Obj66_Index
		dc.w Obj66_Release-Obj66_Index

Obj66_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#1,d1
		movea.l	a0,a1
		bra.s	Obj66_MakeItem

Obj66_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_150FE
		move.b	#$66,0(a1)
		addq.b	#4,$24(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#3,$18(a1)
		move.b	#$10,$1A(a1)

Obj66_MakeItem:				; ...
		move.l	#$880000+Map_obj66,4(a1)
		move.w	#$4348,2(a1)
		ori.b	#4,1(a1)
		move.b	#$38,$19(a1)

loc_150FE:				; ...
		dbf	d1,Obj66_Loop
		move.b	#$30,$19(a0)
		move.b	#4,$18(a0)
		move.w	#$3C,$30(a0)
		move.b	#1,$34(a0)
		move.b	$28(a0),$38(a0)

Obj66_Action:				; ...
		bsr.w	Obj66_ChkSwitch
		tst.b	1(a0)
		bpl.w	Obj66_Display
		move.w	#$30,d1
		move.w	d1,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		btst	#5,$22(a0)
		beq.w	Obj66_Display
		lea	($FFFFD000).w,a1
		moveq	#$E,d1
		move.w	8(a1),d0
		cmp.w	8(a0),d0
		bcs.s	Obj66_GrabSonic
		moveq	#7,d1

Obj66_GrabSonic:			; ...
		cmp.b	$1A(a0),d1
		bne.s	Obj66_Display
		move.b	d1,$32(a0)
		addq.b	#4,$24(a0)
		move.b	#1,($FFFFF7C8).w ; lock	controls
		move.b	#2,$1C(a1)	; make Sonic use "rolling" animation
		move.w	#$800,$14(a1)
		move.w	#0,$10(a1)
		move.w	#0,$12(a1)
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)
		bset	#1,$22(a1)
		move.w	8(a1),d2
		move.w	$C(a1),d3
		bsr.w	Obj66_ChgPos
		add.w	d2,8(a1)
		add.w	d3,$C(a1)
		asr	8(a1)
		asr	$C(a1)

Obj66_Display:				; ...
		bra.w	MarkObjGone

Obj66_Release:				; ...
		move.b	$1A(a0),d0
		cmpi.b	#4,d0
		beq.s	loc_151C8
		cmpi.b	#7,d0
		bne.s	loc_151F8

loc_151C8:				; ...
		cmp.b	$32(a0),d0
		beq.s	loc_151F8
		lea	($FFFFD000).w,a1
		move.w	#0,$10(a1)
		move.w	#$800,$12(a1)
		cmpi.b	#4,d0
		beq.s	loc_151F0
		move.w	#$800,$10(a1)
		move.w	#$800,$12(a1)

loc_151F0:				; ...
		clr.b	($FFFFF7C8).w	; unlock controls
		subq.b	#4,$24(a0)

loc_151F8:				; ...
		bsr.s	Obj66_ChkSwitch
		bsr.s	Obj66_ChgPos
		bra.w	MarkObjGone

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj66_ChkSwitch:			; ...
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$38(a0),d0
		btst	#0,(a2,d0.w)	; is switch pressed?
		beq.s	loc_15224	; if not, branch
		tst.b	$36(a0)		; has switch previously	been pressed?
		bne.s	Obj66_Animate	; if yes, branch
		neg.b	$34(a0)
		move.b	#1,$36(a0)	; set to "previously pressed"
		bra.s	Obj66_Animate

loc_15224:				; ...
		clr.b	$36(a0)		; set to "not yet pressed"

Obj66_Animate:				; ...
		subq.b	#1,$1E(a0)
		bpl.s	locret_15246
		move.b	#7,$1E(a0)
		move.b	$34(a0),d1
		move.b	$1A(a0),d0
		add.b	d1,d0
		andi.b	#$F,d0
		move.b	d0,$1A(a0)

locret_15246:				; ...
		rts	
; End of function Obj66_ChkSwitch


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj66_ChgPos:				; ...
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.b	$1A(a0),d0
		add.w	d0,d0
		lea	Obj66_PosData(pc,d0.w),a2
		move.b	(a2)+,d0
		ext.w	d0
		add.w	8(a0),d0
		move.w	d0,8(a1)
		move.b	(a2)+,d0
		ext.w	d0
		add.w	$C(a0),d0
		move.w	d0,$C(a1)
		rts	
; End of function Obj66_ChgPos

Obj66_PosData:	dc.b  $E0,   0,	$E2,  $E ; disc	x-pos, Sonic x-pos, disc y-pos,	Sonic y-pos
		dc.b  $E8, $18,	$F2, $1E
		dc.b	0, $20,	 $E, $1E
		dc.b  $18, $18,	$1E,  $E
		dc.b  $20,   0,	$1E, $F2
		dc.b  $18, $E8,	 $E, $E2
		dc.b	0, $E0,	$F2, $E2
		dc.b  $E8, $E8,	$E2, $F2
; ---------------------------------------------------------------------------
; Sprite mappings - rotating disc that grabs Sonic (SBZ)
; ---------------------------------------------------------------------------
Map_obj66:	dc.w byte_152B4-Map_obj66, byte_152D3-Map_obj66	; ...
		dc.w byte_152F2-Map_obj66, byte_15311-Map_obj66
		dc.w byte_15330-Map_obj66, byte_1534F-Map_obj66
		dc.w byte_1536E-Map_obj66, byte_1538D-Map_obj66
		dc.w byte_153AC-Map_obj66, byte_153CB-Map_obj66
		dc.w byte_153EA-Map_obj66, byte_15409-Map_obj66
		dc.w byte_15428-Map_obj66, byte_15447-Map_obj66
		dc.w byte_15466-Map_obj66, byte_15485-Map_obj66
		dc.w byte_154A4-Map_obj66
byte_152B4:	dc.b 6			; ...
		dc.b $E8, 5, 0,	$22, $D0
		dc.b 8,	5, $10,	$22, $D0
		dc.b $E8, $A, 0, 0, $C8
		dc.b $E8, $A, 8, 0, $E0
		dc.b 0,	$A, $10, 0, $C8
		dc.b 0,	$A, $18, 0, $E0
byte_152D3:	dc.b 6			; ...
		dc.b $F8, 3, 0,	$26, $D0
		dc.b $18, 5, 0,	$2A, $D8
		dc.b $F6, $A, 0, 0, $CA
		dc.b $F6, $A, 8, 0, $E2
		dc.b $E, $A, $10, 0, $CA
		dc.b $E, $A, $18, 0, $E2
byte_152F2:	dc.b 6			; ...
		dc.b 0,	6, 0, $2E, $D0
		dc.b $20, 9, 0,	$34, $E8
		dc.b 0,	$A, 0, 0, $D0
		dc.b 0,	$A, 8, 0, $E8
		dc.b $18, $A, $10, 0, $D0
		dc.b $18, $A, $18, 0, $E8
byte_15311:	dc.b 6			; ...
		dc.b 8,	7, 0, $3A, $D8
		dc.b $28, 8, 0,	$42, $F0
		dc.b 6,	$A, 0, 0, $DA
		dc.b 6,	$A, 8, 0, $F2
		dc.b $1E, $A, $10, 0, $DA
		dc.b $1E, $A, $18, 0, $F2
byte_15330:	dc.b 6			; ...
		dc.b $20, 5, 0,	$45, $E8
		dc.b $20, 5, 8,	$45, 8
		dc.b 8,	$A, 0, 0, $E8
		dc.b 8,	$A, 8, 0, 0
		dc.b $20, $A, $10, 0, $E8
		dc.b $20, $A, $18, 0, 0
byte_1534F:	dc.b 6			; ...
		dc.b $28, 8, 8,	$42, $F8
		dc.b 8,	7, 8, $3A, $18
		dc.b 6,	$A, 0, 0, $F6
		dc.b 6,	$A, 8, 0, $E
		dc.b $1E, $A, $10, 0, $F6
		dc.b $1E, $A, $18, 0, $E
byte_1536E:	dc.b 6			; ...
		dc.b $20, 9, 8,	$34, 0
		dc.b 0,	6, 8, $2E, $20
		dc.b 0,	$A, 0, 0, 0
		dc.b 0,	$A, 8, 0, $18
		dc.b $18, $A, $10, 0, 0
		dc.b $18, $A, $18, 0, $18
byte_1538D:	dc.b 6			; ...
		dc.b $18, 5, 8,	$2A, $18
		dc.b $F8, 3, 8,	$26, $28
		dc.b $F6, $A, 0, 0, 6
		dc.b $F6, $A, 8, 0, $1E
		dc.b $E, $A, $10, 0, 6
		dc.b $E, $A, $18, 0, $1E
byte_153AC:	dc.b 6			; ...
		dc.b $E8, 5, 8,	$22, $20
		dc.b 8,	5, $18,	$22, $20
		dc.b $E8, $A, 0, 0, 8
		dc.b $E8, $A, 8, 0, $20
		dc.b 0,	$A, $10, 0, 8
		dc.b 0,	$A, $18, 0, $20
byte_153CB:	dc.b 6			; ...
		dc.b $D8, 5, $18, $2A, $18
		dc.b $E8, 3, $18, $26, $28
		dc.b $DA, $A, 0, 0, 6
		dc.b $DA, $A, 8, 0, $1E
		dc.b $F2, $A, $10, 0, 6
		dc.b $F2, $A, $18, 0, $1E
byte_153EA:	dc.b 6			; ...
		dc.b $D0, 9, $18, $34, 0
		dc.b $E8, 6, $18, $2E, $20
		dc.b $D0, $A, 0, 0, 0
		dc.b $D0, $A, 8, 0, $18
		dc.b $E8, $A, $10, 0, 0
		dc.b $E8, $A, $18, 0, $18
byte_15409:	dc.b 6			; ...
		dc.b $D0, 8, $18, $42, $F8
		dc.b $D8, 7, $18, $3A, $18
		dc.b $CA, $A, 0, 0, $F6
		dc.b $CA, $A, 8, 0, $E
		dc.b $E2, $A, $10, 0, $F6
		dc.b $E2, $A, $18, 0, $E
byte_15428:	dc.b 6			; ...
		dc.b $D0, 5, $10, $45, $E8
		dc.b $D0, 5, $18, $45, 8
		dc.b $C8, $A, 0, 0, $E8
		dc.b $C8, $A, 8, 0, 0
		dc.b $E0, $A, $10, 0, $E8
		dc.b $E0, $A, $18, 0, 0
byte_15447:	dc.b 6			; ...
		dc.b $D8, 7, $10, $3A, $D8
		dc.b $D0, 8, $10, $42, $F0
		dc.b $CA, $A, 0, 0, $DA
		dc.b $CA, $A, 8, 0, $F2
		dc.b $E2, $A, $10, 0, $DA
		dc.b $E2, $A, $18, 0, $F2
byte_15466:	dc.b 6			; ...
		dc.b $E8, 6, $10, $2E, $D0
		dc.b $D0, 9, $10, $34, $E8
		dc.b $D0, $A, 0, 0, $D0
		dc.b $D0, $A, 8, 0, $E8
		dc.b $E8, $A, $10, 0, $D0
		dc.b $E8, $A, $18, 0, $E8
byte_15485:	dc.b 6			; ...
		dc.b $E8, 3, $10, $26, $D0
		dc.b $D8, 5, $10, $2A, $D8
		dc.b $DA, $A, 0, 0, $CA
		dc.b $DA, $A, 8, 0, $E2
		dc.b $F2, $A, $10, 0, $CA
		dc.b $F2, $A, $18, 0, $E2
byte_154A4:	dc.b $C			; ...
		dc.b $C8, $D, 0, 9, $E0
		dc.b $D0, $A, 0, $11, $D0
		dc.b $E0, 7, 0,	$1A, $C8
		dc.b $C8, $D, 8, 9, 0
		dc.b $D0, $A, 8, $11, $18
		dc.b $E0, 7, 8,	$1A, $28
		dc.b 0,	7, $10,	$1A, $C8
		dc.b $18, $A, $10, $11,	$D0
		dc.b $28, $D, $10, 9, $E0
		dc.b $28, $D, $18, 9, 0
		dc.b $18, $A, $18, $11,	$18
		dc.b 0,	7, $18,	$1A, $28
		dc.b 0
; ---------------------------------------------------------------------------
; Object 67 - disc that	you run	around (SBZ)
; ---------------------------------------------------------------------------

Obj67:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj67_Index(pc,d0.w),d1
		jmp	Obj67_Index(pc,d1.w)
Obj67_Index:	dc.w Obj67_Main-Obj67_Index ; ...
		dc.w Obj67_Action-Obj67_Index

Obj67_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj67,4(a0)
		move.w	#$C344,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#8,$19(a0)
		move.w	8(a0),$32(a0)
		move.w	$C(a0),$30(a0)
		move.b	#$18,$34(a0)
		move.b	#$48,$38(a0)
		move.b	$28(a0),d1	; get object type
		andi.b	#$F,d1		; read only the	2nd digit
		beq.s	loc_15546
		move.b	#$10,$34(a0)
		move.b	#$38,$38(a0)

loc_15546:				; ...
		move.b	$28(a0),d1	; get object type
		andi.b	#$F0,d1		; read only the	1st digit
		ext.w	d1
		asl.w	#3,d1
		move.w	d1,$36(a0)
		move.b	$22(a0),d0
		ror.b	#2,d0
		andi.b	#-$40,d0
		move.b	d0,$26(a0)

Obj67_Action:				; ...
		bsr.w	Obj67_MoveSonic
		bsr.w	Obj67_MoveSpot
		bra.w	Obj67_ChkDel

Obj67_MoveSonic:			; ...
		moveq	#0,d2
		move.b	$38(a0),d2
		move.w	d2,d3
		add.w	d3,d3
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	$32(a0),d0
		add.w	d2,d0
		cmp.w	d3,d0
		bcc.s	loc_155A8
		move.w	$C(a1),d1
		sub.w	$30(a0),d1
		add.w	d2,d1
		cmp.w	d3,d1
		bcc.s	loc_155A8
		btst	#1,$22(a1)
		beq.s	loc_155B8
		clr.b	$3A(a0)
		rts	

loc_155A8:				; ...
		tst.b	$3A(a0)
		beq.s	locret_155B6
		clr.b	$38(a1)
		clr.b	$3A(a0)

locret_155B6:				; ...
		rts	

loc_155B8:				; ...
		tst.b	$3A(a0)
		bne.s	loc_155E2
		move.b	#1,$3A(a0)
		btst	#2,$22(a1)
		bne.s	loc_155D0
		clr.b	$1C(a1)

loc_155D0:				; ...
		bclr	#5,$22(a1)
		move.b	#1,$1D(a1)
		move.b	#1,$38(a1)

loc_155E2:				; ...
		move.w	$14(a1),d0
		tst.w	$36(a0)
		bpl.s	loc_15608
		cmpi.w	#-$400,d0
		ble.s	loc_155FA
		move.w	#-$400,$14(a1)
		rts	

loc_155FA:				; ...
		cmpi.w	#-$F00,d0
		bge.s	locret_15606
		move.w	#-$F00,$14(a1)

locret_15606:				; ...
		rts	

loc_15608:				; ...
		cmpi.w	#$400,d0
		bge.s	loc_15616
		move.w	#$400,$14(a1)
		rts	

loc_15616:				; ...
		cmpi.w	#$F00,d0
		ble.s	locret_15622
		move.w	#$F00,$14(a1)

locret_15622:				; ...
		rts	

Obj67_MoveSpot:				; ...
		move.w	$36(a0),d0
		add.w	d0,$26(a0)
		move.b	$26(a0),d0
		jsr	$880000+(CalcSine).l
		move.w	$30(a0),d2
		move.w	$32(a0),d3
		moveq	#0,d4
		move.b	$34(a0),d4
		lsl.w	#8,d4
		move.l	d4,d5
		muls.w	d0,d4
		swap	d4
		muls.w	d1,d5
		swap	d5
		add.w	d2,d4
		add.w	d3,d5
		move.w	d4,$C(a0)
		move.w	d5,8(a0)
		rts	

Obj67_ChkDel:				; ...
		move.w	$32(a0),d0
		andi.w	#-$80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#-$80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj67_Delete
		jmp	$880000+DisplaySprite

Obj67_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - disc that you run around (SBZ)
; (It's just a small blob that moves around in a circle. The disc itself is
; part of the level tiles.)
; ---------------------------------------------------------------------------
Map_obj67:	dc.w byte_15688-Map_obj67 ; ...
byte_15688:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
; ---------------------------------------------------------------------------
; Object 68 - conveyor belts (SBZ)
; ---------------------------------------------------------------------------

Obj68:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj68_Index(pc,d0.w),d1
		jmp	Obj68_Index(pc,d1.w)
Obj68_Index:	dc.w Obj68_Main-Obj68_Index ; ...
		dc.w Obj68_Action-Obj68_Index

Obj68_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	#128,$38(a0)	; set width to 128 pixels
		move.b	$28(a0),d1	; get object type
		andi.b	#$F,d1		; read only the	2nd digit
		beq.s	loc_156BA	; if zero, branch
		move.b	#56,$38(a0)	; set width to 56 pixels

loc_156BA:				; ...
		move.b	$28(a0),d1	; get object type
		andi.b	#$F0,d1		; read only the	1st digit
		ext.w	d1
		asr.w	#4,d1
		move.w	d1,$36(a0)	; set belt speed

Obj68_Action:				; ...
		bsr.s	Obj68_MoveSonic
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj68_Delete
		rts	

Obj68_Delete:				; ...
		jmp	$880000+DeleteObject

Obj68_MoveSonic:			; ...
		moveq	#0,d2
		move.b	$38(a0),d2
		move.w	d2,d3
		add.w	d3,d3
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d2,d0
		cmp.w	d3,d0
		bcc.s	locret_1572E
		move.w	$C(a1),d1
		sub.w	$C(a0),d1
		addi.w	#$30,d1
		cmpi.w	#$30,d1
		bcc.s	locret_1572E
		btst	#1,$22(a1)
		bne.s	locret_1572E
		move.w	$36(a0),d0
		add.w	d0,8(a1)

locret_1572E:				; ...
		rts	
; ---------------------------------------------------------------------------
; Object 69 - spinning platforms and trapdoors (SBZ)
; ---------------------------------------------------------------------------

Obj69:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj69_Index(pc,d0.w),d1
		jmp	Obj69_Index(pc,d1.w)
Obj69_Index:	dc.w Obj69_Main-Obj69_Index ; ...
		dc.w Obj69_Trapdoor-Obj69_Index
		dc.w Obj69_Spinner-Obj69_Index

Obj69_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj69,4(a0)
		move.w	#$4492,2(a0)
		ori.b	#4,1(a0)
		move.b	#$80,$19(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		mulu.w	#$3C,d0
		move.w	d0,$32(a0)
		tst.b	$28(a0)
		bpl.s	Obj69_Trapdoor
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj69a,4(a0)
		move.w	#$4DF,2(a0)
		move.b	#$10,$19(a0)
		move.b	#2,$1C(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		move.w	d0,d1
		andi.w	#$F,d0		; read only the	2nd digit
		mulu.w	#6,d0		; multiply by 6
		move.w	d0,$30(a0)	; set time delay
		move.w	d0,$32(a0)
		andi.w	#$70,d1
		addi.w	#$10,d1
		lsl.w	#2,d1
		subq.w	#1,d1
		move.w	d1,$36(a0)
		bra.s	Obj69_Spinner

Obj69_Trapdoor:				; ...
		subq.w	#1,$30(a0)
		bpl.s	Obj69_Animate
		move.w	$32(a0),$30(a0)
		bchg	#0,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj69_Animate
		move.w	#$BB,d0
		jsr	$880000+(PlaySound_Special).l ;	play door sound

Obj69_Animate:				; ...
		lea	$880000+(Ani_obj69).l,a1
		jsr	$880000+AnimateSprite
		tst.b	$1A(a0)		; is frame number 0 displayed?
		bne.s	Obj69_NotSolid	; if not, branch
		move.w	#$4B,d1
		move.w	#$C,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		bra.w	MarkObjGone

Obj69_NotSolid:				; ...
		btst	#3,$22(a0)
		beq.s	Obj69_Display
		lea	($FFFFD000).w,a1
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)

Obj69_Display:				; ...
		bra.w	MarkObjGone

Obj69_Spinner:				; ...
		move.w	($FFFFFE04).w,d0
		and.w	$36(a0),d0
		bne.s	Obj69_Delay
		move.b	#1,$34(a0)

Obj69_Delay:				; ...
		tst.b	$34(a0)
		beq.s	Obj69_Animate2
		subq.w	#1,$30(a0)
		bpl.s	Obj69_Animate2
		move.w	$32(a0),$30(a0)
		clr.b	$34(a0)
		bchg	#0,$1C(a0)

Obj69_Animate2:				; ...
		lea	$880000+(Ani_obj69).l,a1
		jsr	$880000+AnimateSprite
		tst.b	$1A(a0)		; check	if frame number	0 is displayed
		bne.s	Obj69_NotSolid2	; if not, branch
		move.w	#$1B,d1
		move.w	#7,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		bra.w	MarkObjGone

Obj69_NotSolid2:			; ...
		btst	#3,$22(a0)
		beq.s	Obj69_Display2
		lea	($FFFFD000).w,a1
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)

Obj69_Display2:				; ...
		bra.w	MarkObjGone
Ani_obj69:	dc.w byte_158AC-Ani_obj69, byte_158B2-Ani_obj69, byte_158B8-Ani_obj69 ;	...
		dc.w byte_158CC-Ani_obj69
byte_158AC:	dc.b 3,	0, 1, 2, $FE, 1	; ...
byte_158B2:	dc.b 3,	2, 1, 0, $FE, 1	; ...
byte_158B8:	dc.b 1,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63 ; ...
		dc.b $64, $23, $22, $21, 0, $FE, 1
byte_158CC:	dc.b 1,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63 ; ...
		dc.b $64, $23, $22, $21, 0, $FE, 1
; ---------------------------------------------------------------------------
; Sprite mappings - trapdoor (SBZ)
; ---------------------------------------------------------------------------
Map_obj69:	dc.w byte_158E6-Map_obj69 ; ...
		dc.w byte_158FB-Map_obj69
		dc.w byte_15924-Map_obj69
byte_158E6:	dc.b 4			; ...
		dc.b $F4, $E, 0, 0, $C0
		dc.b $F4, $E, 8, 0, $E0
		dc.b $F4, $E, 0, 0, 0
		dc.b $F4, $E, 8, 0, $20
byte_158FB:	dc.b 8			; ...
		dc.b $F2, $F, 0, $C, $B6
		dc.b $1A, $F, $18, $C, $D6
		dc.b 2,	$A, 0, $1C, $D6
		dc.b $12, $A, $18, $1C,	$BE
		dc.b $F2, $F, 8, $C, $2A
		dc.b $1A, $F, $10, $C, $A
		dc.b 2,	$A, 8, $1C, $12
		dc.b $12, $A, $10, $1C,	$2A
byte_15924:	dc.b 4			; ...
		dc.b 0,	$B, 0, $25, $B4
		dc.b $20, $B, $10, $25,	$B4
		dc.b 0,	$B, 0, $25, $34
		dc.b $20, $B, $10, $25,	$34
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - spinning platforms (SBZ)
; ---------------------------------------------------------------------------
Map_obj69a:	dc.w byte_15944-Map_obj69a, byte_1594F-Map_obj69a ; ...
		dc.w byte_1595A-Map_obj69a, byte_15965-Map_obj69a
		dc.w byte_15970-Map_obj69a
byte_15944:	dc.b 2			; ...
		dc.b $F8, 5, 0,	0, $F0
		dc.b $F8, 5, 8,	0, 0
byte_1594F:	dc.b 2			; ...
		dc.b $F0, $D, 0, $14, $F0
		dc.b 0,	$D, 0, $1C, $F0
byte_1595A:	dc.b 2			; ...
		dc.b $F0, 9, 0,	4, $F0
		dc.b 0,	9, 0, $A, $F8
byte_15965:	dc.b 2			; ...
		dc.b $F0, 9, 0,	$24, $F0
		dc.b 0,	9, 0, $2A, $F8
byte_15970:	dc.b 2			; ...
		dc.b $F0, 5, 0,	$10, $F8
		dc.b 0,	5, $10,	$10, $F8
		dc.b 0
; ---------------------------------------------------------------------------
; Object 6A - ground saws and pizza cutters (SBZ)
; ---------------------------------------------------------------------------

Obj6A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6A_Index(pc,d0.w),d1
		jmp	Obj6A_Index(pc,d1.w)
Obj6A_Index:	dc.w Obj6A_Main-Obj6A_Index ; ...
		dc.w Obj6A_Action-Obj6A_Index

Obj6A_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj6A,4(a0)
		move.w	#$43B5,2(a0)
		move.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$20,$19(a0)
		move.w	8(a0),$3A(a0)
		move.w	$C(a0),$38(a0)
		cmpi.b	#3,$28(a0)
		bcc.s	Obj6A_Action
		move.b	#$A2,$20(a0)

Obj6A_Action:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#7,d0
		add.w	d0,d0
		move.w	Obj6A_TypeIndex(pc,d0.w),d1
		jsr	Obj6A_TypeIndex(pc,d1.w)
		move.w	$3A(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj6A_Delete
		jmp	$880000+DisplaySprite

Obj6A_Delete:				; ...
		jmp	$880000+DeleteObject
Obj6A_TypeIndex:dc.w Obj6A_Type00-Obj6A_TypeIndex, Obj6A_Type01-Obj6A_TypeIndex	; ...
		dc.w Obj6A_Type02-Obj6A_TypeIndex, Obj6A_Type03-Obj6A_TypeIndex
		dc.w Obj6A_Type04-Obj6A_TypeIndex

Obj6A_Type00:				; ...
		rts	

Obj6A_Type01:				; ...
		move.w	#$60,d1
		moveq	#0,d0
		move.b	($FFFFFE6C).w,d0
		btst	#0,$22(a0)
		beq.s	Obj6A_Animate01
		neg.w	d0
		add.w	d1,d0

Obj6A_Animate01:			; ...
		move.w	$3A(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)	; move saw sideways
		subq.b	#1,$1E(a0)
		bpl.s	loc_15A46
		move.b	#2,$1E(a0)	; time between frame changes
		bchg	#0,$1A(a0)	; change frame

loc_15A46:				; ...
		tst.b	1(a0)
		bpl.s	locret_15A60
		move.w	($FFFFFE04).w,d0
		andi.w	#$F,d0
		bne.s	locret_15A60
		move.w	#$B0,d0
		jsr	$880000+(PlaySound_Special).l ;	play saw sound

locret_15A60:				; ...
		rts	

Obj6A_Type02:				; ...
		move.w	#$30,d1
		moveq	#0,d0
		move.b	($FFFFFE64).w,d0
		btst	#0,$22(a0)
		beq.s	Obj6A_Animate02
		neg.w	d0
		addi.w	#$80,d0

Obj6A_Animate02:			; ...
		move.w	$38(a0),d1
		sub.w	d0,d1
		move.w	d1,$C(a0)	; move saw vertically
		subq.b	#1,$1E(a0)
		bpl.s	loc_15A96
		move.b	#2,$1E(a0)
		bchg	#0,$1A(a0)

loc_15A96:				; ...
		tst.b	1(a0)
		bpl.s	locret_15AB0
		move.b	($FFFFFE64).w,d0
		cmpi.b	#$18,d0
		bne.s	locret_15AB0
		move.w	#$B0,d0
		jsr	$880000+(PlaySound_Special).l ;	play saw sound

locret_15AB0:				; ...
		rts	

Obj6A_Type03:				; ...
		tst.b	$3D(a0)
		bne.s	Obj6A_Animate03
		move.w	($FFFFD008).w,d0
		subi.w	#$C0,d0
		bcs.s	loc_15B02
		sub.w	8(a0),d0
		bcs.s	loc_15B02
		move.w	($FFFFD00C).w,d0
		subi.w	#$80,d0
		cmp.w	$C(a0),d0
		bcc.s	locret_15B04
		addi.w	#$100,d0
		cmp.w	$C(a0),d0
		bcs.s	locret_15B04
		move.b	#1,$3D(a0)
		move.w	#$600,$10(a0)	; move object to the right
		move.b	#$A2,$20(a0)
		move.b	#2,$1A(a0)
		move.w	#$B0,d0
		jsr	$880000+(PlaySound_Special).l ;	play saw sound

loc_15B02:				; ...
		addq.l	#4,sp

locret_15B04:				; ...
		rts	

Obj6A_Animate03:			; ...
		jsr	$880000+SpeedToPos
		move.w	8(a0),$3A(a0)
		subq.b	#1,$1E(a0)
		bpl.s	locret_15B24
		move.b	#2,$1E(a0)
		bchg	#0,$1A(a0)

locret_15B24:				; ...
		rts	

Obj6A_Type04:				; ...
		tst.b	$3D(a0)
		bne.s	Obj6A_Animate04
		move.w	($FFFFD008).w,d0
		addi.w	#$E0,d0
		sub.w	8(a0),d0
		bcc.s	loc_15B74
		move.w	($FFFFD00C).w,d0
		subi.w	#$80,d0
		cmp.w	$C(a0),d0
		bcc.s	locret_15B76
		addi.w	#$100,d0
		cmp.w	$C(a0),d0
		bcs.s	locret_15B76
		move.b	#1,$3D(a0)
		move.w	#-$600,$10(a0)	; move object to the left
		move.b	#$A2,$20(a0)
		move.b	#2,$1A(a0)
		move.w	#$B0,d0
		jsr	$880000+(PlaySound_Special).l ;	play saw sound

loc_15B74:				; ...
		addq.l	#4,sp

locret_15B76:				; ...
		rts	

Obj6A_Animate04:			; ...
		jsr	$880000+SpeedToPos
		move.w	8(a0),$3A(a0)
		subq.b	#1,$1E(a0)
		bpl.s	locret_15B96
		move.b	#2,$1E(a0)
		bchg	#0,$1A(a0)

locret_15B96:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - ground saws	and pizza cutters (SBZ)
; ---------------------------------------------------------------------------
Map_obj6A:	dc.w byte_15BA0-Map_obj6A, byte_15BC4-Map_obj6A	; ...
		dc.w byte_15BE8-Map_obj6A, byte_15BFD-Map_obj6A
byte_15BA0:	dc.b 7			; ...
		dc.b $C4, 1, 0,	$20, $FC
		dc.b $D4, 1, 0,	$20, $FC
		dc.b $E4, 3, 0,	$20, $FC
		dc.b $E0, $F, 0, 0, $E0
		dc.b $E0, $F, 8, 0, 0
		dc.b 0,	$F, $10, 0, $E0
		dc.b 0,	$F, $18, 0, 0
byte_15BC4:	dc.b 7			; ...
		dc.b $C4, 1, 0,	$20, $FC
		dc.b $D4, 1, 0,	$20, $FC
		dc.b $E4, 3, 0,	$20, $FC
		dc.b $E0, $F, 0, $10, $E0
		dc.b $E0, $F, 8, $10, 0
		dc.b 0,	$F, $10, $10, $E0
		dc.b 0,	$F, $18, $10, 0
byte_15BE8:	dc.b 4			; ...
		dc.b $E0, $F, 0, 0, $E0
		dc.b $E0, $F, 8, 0, 0
		dc.b 0,	$F, $10, 0, $E0
		dc.b 0,	$F, $18, 0, 0
byte_15BFD:	dc.b 4			; ...
		dc.b $E0, $F, 0, $10, $E0
		dc.b $E0, $F, 8, $10, 0
		dc.b 0,	$F, $10, $10, $E0
		dc.b 0,	$F, $18, $10, 0
; ---------------------------------------------------------------------------
; Object 6B - stomper (SBZ)
; ---------------------------------------------------------------------------

Obj6B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6B_Index(pc,d0.w),d1
		jmp	Obj6B_Index(pc,d1.w)
Obj6B_Index:	dc.w Obj6B_Main-Obj6B_Index ; ...
		dc.w Obj6B_Action-Obj6B_Index

Obj6B_Var:	dc.b  $40,  $C,	$80,   1 ; width, height, ????,	type number
		dc.b  $1C, $20,	$38,   3
		dc.b  $1C, $20,	$40,   4
		dc.b  $1C, $20,	$60,   4
		dc.b  $80, $40,	  0,   5

Obj6B_Main:				; ...
		addq.b	#2,$24(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		lsr.w	#2,d0
		andi.w	#$1C,d0
		lea	Obj6B_Var(pc,d0.w),a3
		move.b	(a3)+,$19(a0)
		move.b	(a3)+,$16(a0)
		lsr.w	#2,d0
		move.b	d0,$1A(a0)
		move.l	#$880000+Map_obj6B,4(a0)
		move.w	#$22C0,2(a0)
		cmpi.b	#1,($FFFFFE10).w ; check if level is LZ/SBZ3
		bne.s	Obj6B_SBZ12	; if not, branch
		bset	#0,($FFFFF7CB).w
		beq.s	Obj6B_SBZ3

Obj6B_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj6B_Delete
		bclr	#7,2(a2,d0.w)

Obj6B_Delete:				; ...
		jmp	$880000+DeleteObject

Obj6B_SBZ3:				; ...
		move.w	#$41F0,2(a0)
		cmpi.w	#$A80,8(a0)
		bne.s	Obj6B_SBZ12
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj6B_SBZ12
		btst	#0,2(a2,d0.w)
		beq.s	Obj6B_SBZ12
		clr.b	($FFFFF7CB).w
		bra.s	Obj6B_ChkGone

Obj6B_SBZ12:				; ...
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.w	8(a0),$34(a0)
		move.w	$C(a0),$30(a0)
		moveq	#0,d0
		move.b	(a3)+,d0
		move.w	d0,$3C(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		bpl.s	Obj6B_Action
		andi.b	#$F,d0
		move.b	d0,$3E(a0)
		move.b	(a3),$28(a0)
		cmpi.b	#5,(a3)
		bne.s	Obj6B_ChkGone2
		bset	#4,1(a0)

Obj6B_ChkGone2:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj6B_Action
		bclr	#7,2(a2,d0.w)

Obj6B_Action:				; ...
		move.w	8(a0),-(sp)
		moveq	#0,d0
		move.b	$28(a0),d0
		andi.w	#$F,d0
		add.w	d0,d0
		move.w	Obj6B_TypeIndex(pc,d0.w),d1
		jsr	Obj6B_TypeIndex(pc,d1.w)
		move.w	(sp)+,d4
		tst.b	1(a0)
		bpl.s	Obj6B_ChkDel
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		moveq	#0,d2
		move.b	$16(a0),d2
		move.w	d2,d3
		addq.w	#1,d3
		jsr	$880000+SolidObject

Obj6B_ChkDel:				; ...
		move.w	$34(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	loc_15D64
		jmp	$880000+DisplaySprite

loc_15D64:				; ...
		cmpi.b	#1,($FFFFFE10).w
		bne.s	Obj6B_Delete2
		clr.b	($FFFFF7CB).w
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	Obj6B_Delete2
		bclr	#7,2(a2,d0.w)

Obj6B_Delete2:				; ...
		jmp	$880000+DeleteObject
Obj6B_TypeIndex:dc.w Obj6B_Type00-Obj6B_TypeIndex, Obj6B_Type01-Obj6B_TypeIndex	; ...
		dc.w Obj6B_Type02-Obj6B_TypeIndex, Obj6B_Type03-Obj6B_TypeIndex
		dc.w Obj6B_Type04-Obj6B_TypeIndex, Obj6B_Type05-Obj6B_TypeIndex

Obj6B_Type00:				; ...
		rts	

Obj6B_Type01:				; ...
		tst.b	$38(a0)
		bne.s	loc_15DB4
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3E(a0),d0
		btst	#0,(a2,d0.w)
		beq.s	loc_15DC2
		move.b	#1,$38(a0)

loc_15DB4:				; ...
		move.w	$3C(a0),d0
		cmp.w	$3A(a0),d0
		beq.s	loc_15DE0
		addq.w	#2,$3A(a0)

loc_15DC2:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_15DD4
		neg.w	d0
		addi.w	#$80,d0

loc_15DD4:				; ...
		move.w	$34(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)
		rts	

loc_15DE0:				; ...
		addq.b	#1,$28(a0)
		move.w	#$B4,$36(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_15DC2
		bset	#0,2(a2,d0.w)
		bra.s	loc_15DC2

Obj6B_Type02:				; ...
		tst.b	$38(a0)
		bne.s	loc_15E14
		subq.w	#1,$36(a0)
		bne.s	loc_15E1E
		move.b	#1,$38(a0)

loc_15E14:				; ...
		tst.w	$3A(a0)
		beq.s	loc_15E3C
		subq.w	#2,$3A(a0)

loc_15E1E:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_15E30
		neg.w	d0
		addi.w	#$80,d0

loc_15E30:				; ...
		move.w	$34(a0),d1
		sub.w	d0,d1
		move.w	d1,8(a0)
		rts	

loc_15E3C:				; ...
		subq.b	#1,$28(a0)
		clr.b	$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_15E1E
		bclr	#0,2(a2,d0.w)
		bra.s	loc_15E1E

Obj6B_Type03:				; ...
		tst.b	$38(a0)
		bne.s	loc_15E7C
		tst.w	$3A(a0)
		beq.s	loc_15E6A
		subq.w	#1,$3A(a0)
		bra.s	loc_15E8E

loc_15E6A:				; ...
		subq.w	#1,$36(a0)
		bpl.s	loc_15E8E
		move.w	#$3C,$36(a0)
		move.b	#1,$38(a0)

loc_15E7C:				; ...
		addq.w	#8,$3A(a0)
		move.w	$3A(a0),d0
		cmp.w	$3C(a0),d0
		bne.s	loc_15E8E
		clr.b	$38(a0)

loc_15E8E:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_15EA0
		neg.w	d0
		addi.w	#$38,d0

loc_15EA0:				; ...
		move.w	$30(a0),d1
		add.w	d0,d1
		move.w	d1,$C(a0)
		rts	

Obj6B_Type04:				; ...
		tst.b	$38(a0)
		bne.s	loc_15ED0
		tst.w	$3A(a0)
		beq.s	loc_15EBE
		subq.w	#8,$3A(a0)
		bra.s	loc_15EF0

loc_15EBE:				; ...
		subq.w	#1,$36(a0)
		bpl.s	loc_15EF0
		move.w	#$3C,$36(a0)
		move.b	#1,$38(a0)

loc_15ED0:				; ...
		move.w	$3A(a0),d0
		cmp.w	$3C(a0),d0
		beq.s	loc_15EE0
		addq.w	#8,$3A(a0)
		bra.s	loc_15EF0

loc_15EE0:				; ...
		subq.w	#1,$36(a0)
		bpl.s	loc_15EF0
		move.w	#$3C,$36(a0)
		clr.b	$38(a0)

loc_15EF0:				; ...
		move.w	$3A(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_15F02
		neg.w	d0
		addi.w	#$38,d0

loc_15F02:				; ...
		move.w	$30(a0),d1
		add.w	d0,d1
		move.w	d1,$C(a0)
		rts	

Obj6B_Type05:				; ...
		tst.b	$38(a0)
		bne.s	loc_15F3E
		lea	($FFFFF7E0).w,a2
		moveq	#0,d0
		move.b	$3E(a0),d0
		btst	#0,(a2,d0.w)
		beq.s	locret_15F5C
		move.b	#1,$38(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_15F3E
		bset	#0,2(a2,d0.w)

loc_15F3E:				; ...
		subi.l	#$10000,8(a0)
		addi.l	#$8000,$C(a0)
		move.w	8(a0),$34(a0)
		cmpi.w	#$980,8(a0)
		beq.s	loc_15F5E

locret_15F5C:				; ...
		rts	

loc_15F5E:				; ...
		clr.b	$28(a0)
		clr.b	$38(a0)
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - stomper and	platforms (SBZ)
; ---------------------------------------------------------------------------
Map_obj6B:	dc.w byte_15F72-Map_obj6B, byte_15F87-Map_obj6B	; ...
		dc.w byte_15F87-Map_obj6B, byte_15F87-Map_obj6B
		dc.w byte_15FB0-Map_obj6B
byte_15F72:	dc.b 4			; ...
		dc.b $F4, $E, $21, $AF,	$C0
		dc.b $F4, $E, $21, $B2,	$E0
		dc.b $F4, $E, $21, $B2,	0
		dc.b $F4, $E, $29, $AF,	$20
byte_15F87:	dc.b 8			; ...
		dc.b $E0, $C, 0, $C, $E4
		dc.b $E0, 8, 0,	$10, 4
		dc.b $E8, $E, $20, $13,	$E4
		dc.b $E8, $A, $20, $1F,	4
		dc.b 0,	$E, $20, $13, $E4
		dc.b 0,	$A, $20, $1F, 4
		dc.b $18, $C, 0, $C, $E4
		dc.b $18, 8, 0,	$10, 4
byte_15FB0:	dc.b $E			; ...
		dc.b $C0, $F, 0, 0, $80
		dc.b $C0, $F, 0, $10, $A0
		dc.b $C0, $F, 0, $20, $C0
		dc.b $C0, $F, 0, $10, $E0
		dc.b $C0, $F, 0, $20, 0
		dc.b $C0, $F, 0, $10, $20
		dc.b $C0, $F, 0, $30, $40
		dc.b $C0, $D, 0, $40, $60
		dc.b $E0, $F, 0, $48, $80
		dc.b $E0, $F, 0, $48, $C0
		dc.b $E0, $F, 0, $58, 0
		dc.b 0,	$F, 0, $48, $80
		dc.b 0,	$F, 0, $58, $C0
		dc.b $20, $F, 0, $58, $80
		dc.b 0
; ---------------------------------------------------------------------------
; Object 6C - vanishing	platforms (SBZ)
; ---------------------------------------------------------------------------

Obj6C:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6C_Index(pc,d0.w),d1
		jmp	Obj6C_Index(pc,d1.w)
Obj6C_Index:	dc.w Obj6C_Main-Obj6C_Index ; ...
		dc.w Obj6C_Vanish-Obj6C_Index
		dc.w Obj6C_Vanish-Obj6C_Index
		dc.w loc_16068-Obj6C_Index

Obj6C_Main:				; ...
		addq.b	#6,$24(a0)
		move.l	#$880000+Map_obj6C,4(a0)
		move.w	#$44C3,2(a0)
		ori.b	#4,1(a0)
		move.b	#$10,$19(a0)
		move.b	#4,$18(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		andi.w	#$F,d0		; read only the	2nd digit
		addq.w	#1,d0		; add 1
		lsl.w	#7,d0		; multiply by $80
		move.w	d0,d1
		subq.w	#1,d0
		move.w	d0,$30(a0)
		move.w	d0,$32(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; get object type
		andi.w	#$F0,d0		; read only the	1st digit
		addi.w	#$80,d1
		mulu.w	d1,d0
		lsr.l	#8,d0
		move.w	d0,$36(a0)
		subq.w	#1,d1
		move.w	d1,$38(a0)

loc_16068:				; ...
		move.w	($FFFFFE04).w,d0
		sub.w	$36(a0),d0
		and.w	$38(a0),d0
		bne.s	Obj6C_Animate
		subq.b	#4,$24(a0)
		bra.s	Obj6C_Vanish

Obj6C_Animate:				; ...
		lea	$880000+(Ani_obj6C).l,a1
		jsr	$880000+AnimateSprite
		bra.w	MarkObjGone

Obj6C_Vanish:				; ...
		subq.w	#1,$30(a0)
		bpl.s	loc_160AA
		move.w	#127,$30(a0)
		tst.b	$1C(a0)
		beq.s	loc_160A4
		move.w	$32(a0),$30(a0)

loc_160A4:				; ...
		bchg	#0,$1C(a0)

loc_160AA:				; ...
		lea	$880000+(Ani_obj6C).l,a1
		jsr	$880000+AnimateSprite
		btst	#1,$1A(a0)	; has platform vanished?
		bne.s	Obj6C_NotSolid	; if yes, branch
		cmpi.b	#2,$24(a0)
		bne.s	loc_160D6
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(PlatformObject).l
		bra.w	MarkObjGone

loc_160D6:				; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		jsr	$880000+(ExitPlatform).l
		move.w	8(a0),d2
		jsr	$880000+(MvSonicOnPtfm2).l
		bra.w	MarkObjGone

Obj6C_NotSolid:				; ...
		btst	#3,$22(a0)
		beq.s	Obj6C_Display
		lea	($FFFFD000).w,a1
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		move.b	#2,$24(a0)
		clr.b	$25(a0)

Obj6C_Display:				; ...
		bra.w	MarkObjGone
Ani_obj6C:	dc.w byte_1611A-Ani_obj6C, byte_16122-Ani_obj6C	; ...
byte_1611A:	dc.b 7,	0, 1, 2, 3, $FE, 1, 0 ;	...
byte_16122:	dc.b 7,	3, 2, 1, 0, $FE, 1, 0 ;	...
; ---------------------------------------------------------------------------
; Sprite mappings - vanishing platforms	(SBZ)
; ---------------------------------------------------------------------------
Map_obj6C:	dc.w byte_16132-Map_obj6C, byte_16138-Map_obj6C	; ...
		dc.w byte_1613E-Map_obj6C, byte_16144-Map_obj6C
byte_16132:	dc.b 1			; ...
		dc.b $F8, $F, 0, 0, $F0
byte_16138:	dc.b 1			; ...
		dc.b $F8, 7, 0,	$10, $F8
byte_1613E:	dc.b 1			; ...
		dc.b $F8, 3, 0,	$18, $FC
byte_16144:	dc.b 0			; ...
		dc.b 0

; ---------------------------------------------------------------------------
; Object 6D - flame thrower (SBZ)
; ---------------------------------------------------------------------------

Obj6D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6D_Index(pc,d0.w),d1
		jmp	Obj6D_Index(pc,d1.w)
Obj6D_Index:	dc.w Obj6D_Main-Obj6D_Index ; ...
		dc.w Obj6D_Action-Obj6D_Index

Obj6D_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj6D,4(a0)
		move.w	#$83D9,2(a0)
		ori.b	#4,1(a0)
		move.b	#1,$18(a0)
		move.w	$C(a0),$30(a0)
		move.b	#$C,$19(a0)
		move.b	$28(a0),d0
		andi.w	#$F0,d0		; read 1st digit of object type
		add.w	d0,d0		; multiply by 2
		move.w	d0,$30(a0)
		move.w	d0,$32(a0)	; set flaming time
		move.b	$28(a0),d0
		andi.w	#$F,d0		; read 2nd digit of object type
		lsl.w	#5,d0		; multiply by $20
		move.w	d0,$34(a0)	; set pause time
		move.b	#$A,$36(a0)
		btst	#1,$22(a0)
		beq.s	Obj6D_Action
		move.b	#2,$1C(a0)
		move.b	#$15,$36(a0)

Obj6D_Action:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from time
		bpl.s	loc_E57A	; if time remains, branch
		move.w	$34(a0),$30(a0)	; begin	pause time
		bchg	#0,$1C(a0)
		beq.s	loc_E57A
		move.w	$32(a0),$30(a0)	; begin	flaming	time
		move.w	#$B3,d0
		jsr	$880000+(PlaySound_Special).l ;	play flame sound

loc_E57A:				; ...
		lea	$880000+(Ani_obj6D).l,a1
		jsr	$880000+AnimateSprite
		move.b	#0,$20(a0)
		move.b	$36(a0),d0
		cmp.b	$1A(a0),d0
		bne.s	Obj6D_ChkDel
		move.b	#$A3,$20(a0)

Obj6D_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	DeleteObject
		jmp	$880000+DisplaySprite
Ani_obj6D:	dc.w byte_E5C4-Ani_obj6D, byte_E5D2-Ani_obj6D, byte_E5DC-Ani_obj6D ; ...
		dc.w byte_E5EA-Ani_obj6D
byte_E5C4:	dc.b 3,	0, 1, 2, 3, 4, 5, 6, 7,	8, 9, $A, $FE, 2 ; ...
byte_E5D2:	dc.b 0,	9, 7, 5, 3, 1, 0, $FE, 1, 0 ; ...
byte_E5DC:	dc.b 3,	$B, $C,	$D, $E,	$F, $10, $11, $12, $13,	$14, $15, $FE, 2 ; ...
byte_E5EA:	dc.b 0,	$14, $12, $11, $F, $D, $B, $FE,	1, 0 ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - flame thrower (SBZ)
; ---------------------------------------------------------------------------
Map_obj6D:	dc.w byte_E620-Map_obj6D, byte_E626-Map_obj6D ;	...
		dc.w byte_E631-Map_obj6D, byte_E63C-Map_obj6D
		dc.w byte_E64C-Map_obj6D, byte_E65C-Map_obj6D
		dc.w byte_E671-Map_obj6D, byte_E686-Map_obj6D
		dc.w byte_E6A0-Map_obj6D, byte_E6BA-Map_obj6D
		dc.w byte_E6D9-Map_obj6D, byte_E6F8-Map_obj6D
		dc.w byte_E6FE-Map_obj6D, byte_E709-Map_obj6D
		dc.w byte_E714-Map_obj6D, byte_E724-Map_obj6D
		dc.w byte_E734-Map_obj6D, byte_E749-Map_obj6D
		dc.w byte_E75E-Map_obj6D, byte_E778-Map_obj6D
		dc.w byte_E792-Map_obj6D, byte_E7B1-Map_obj6D
byte_E620:	dc.b 1			; ...
		dc.b $28, 5, $40, $14, $FB
byte_E626:	dc.b 2			; ...
		dc.b $20, 1, 0,	0, $FD
		dc.b $28, 5, $40, $14, $FB
byte_E631:	dc.b 2			; ...
		dc.b $20, 1, 8,	0, $FC
		dc.b $28, 5, $40, $14, $FB
byte_E63C:	dc.b 3			; ...
		dc.b $10, 6, 0,	2, $F8
		dc.b $20, 1, 0,	0, $FD
		dc.b $28, 5, $40, $14, $FB
byte_E64C:	dc.b 3			; ...
		dc.b $10, 6, 8,	2, $F8
		dc.b $20, 1, 8,	0, $FC
		dc.b $28, 5, $40, $14, $FB
byte_E65C:	dc.b 4			; ...
		dc.b 8,	6, 0, 2, $F8
		dc.b $10, 6, 0,	2, $F8
		dc.b $20, 1, 0,	0, $FD
		dc.b $28, 5, $40, $14, $FB
byte_E671:	dc.b 4			; ...
		dc.b 8,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $20, 1, 8,	0, $FC
		dc.b $28, 5, $40, $14, $FB
byte_E686:	dc.b 5			; ...
		dc.b $F8, $B, 0, 8, $F4
		dc.b 8,	6, 0, 2, $F8
		dc.b $10, 6, 0,	2, $F8
		dc.b $20, 1, 0,	0, $FD
		dc.b $28, 5, $40, $14, $FB
byte_E6A0:	dc.b 5			; ...
		dc.b $F8, $B, 8, 8, $F4
		dc.b 8,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $20, 1, 8,	0, $FC
		dc.b $28, 5, $40, $14, $FB
byte_E6BA:	dc.b 6			; ...
		dc.b $E8, $B, 0, 8, $F4
		dc.b $F7, $B, 0, 8, $F4
		dc.b 8,	6, 0, 2, $F8
		dc.b $F, 6, 0, 2, $F8
		dc.b $20, 1, 0,	0, $FD
		dc.b $28, 5, $40, $14, $FB
byte_E6D9:	dc.b 6			; ...
		dc.b $E7, $B, 8, 8, $F4
		dc.b $F8, $B, 8, 8, $F4
		dc.b 7,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $20, 1, 8,	0, $FC
		dc.b $28, 5, $40, $14, $FB
byte_E6F8:	dc.b 1			; ...
		dc.b $28, 5, $40, $18, $F9
byte_E6FE:	dc.b 2			; ...
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 0,	0, $FD
byte_E709:	dc.b 2			; ...
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 8,	0, $FC
byte_E714:	dc.b 3			; ...
		dc.b $10, 6, 0,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 0,	0, $FD
byte_E724:	dc.b 3			; ...
		dc.b $10, 6, 8,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 8,	0, $FC
byte_E734:	dc.b 4			; ...
		dc.b 8,	6, 0, 2, $F8
		dc.b $10, 6, 0,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 0,	0, $FD
byte_E749:	dc.b 4			; ...
		dc.b 8,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 8,	0, $FC
byte_E75E:	dc.b 5			; ...
		dc.b $F8, $B, 0, 8, $F4
		dc.b 8,	6, 0, 2, $F8
		dc.b $10, 6, 0,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 0,	0, $FD
byte_E778:	dc.b 5			; ...
		dc.b $F8, $B, 8, 8, $F4
		dc.b 8,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 8,	0, $FC
byte_E792:	dc.b 6			; ...
		dc.b $E8, $B, 0, 8, $F4
		dc.b $F7, $B, 0, 8, $F4
		dc.b 8,	6, 0, 2, $F8
		dc.b $F, 6, 0, 2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 0,	0, $FD
byte_E7B1:	dc.b 6			; ...
		dc.b $E7, $B, 8, 8, $F4
		dc.b $F8, $B, 8, 8, $F4
		dc.b 7,	6, 8, 2, $F8
		dc.b $10, 6, 8,	2, $F8
		dc.b $28, 5, $40, $18, $F9
		dc.b $20, 1, 8,	0, $FC		

; ---------------------------------------------------------------------------
; Object 6E - electrocution orbs (SBZ)
; ---------------------------------------------------------------------------

Obj6E:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6E_Index(pc,d0.w),d1
		jmp	Obj6E_Index(pc,d1.w)
Obj6E_Index:	dc.w Obj6E_Main-Obj6E_Index ; ...
		dc.w Obj6E_Shock-Obj6E_Index

Obj6E_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj6E,4(a0)
		move.w	#$47E,2(a0)
		ori.b	#4,1(a0)
		move.b	#$28,$19(a0)
		moveq	#0,d0
		move.b	$28(a0),d0	; read object type
		lsl.w	#4,d0		; multiply by $10
		subq.w	#1,d0
		move.w	d0,$34(a0)

Obj6E_Shock:				; ...
		move.w	($FFFFFE04).w,d0
		and.w	$34(a0),d0
		bne.s	Obj6E_Animate
		move.b	#1,$1C(a0)	; run "shocking" animation
		tst.b	1(a0)
		bpl.s	Obj6E_Animate
		move.w	#$B1,d0
		jsr	$880000+(PlaySound_Special).l ;	play electricity sound

Obj6E_Animate:				; ...
		lea	$880000+(Ani_obj6E).l,a1
		jsr	$880000+AnimateSprite
		move.b	#0,$20(a0)
		cmpi.b	#4,$1A(a0)	; is frame number 4 displayed?
		bne.s	Obj6E_Display	; if not, branch
		move.b	#$A4,$20(a0)	; if yes, make object hurt Sonic

Obj6E_Display:				; ...
		bra.w	MarkObjGone
Ani_obj6E:	dc.w byte_161CC-Ani_obj6E, byte_161D0-Ani_obj6E	; ...
byte_161CC:	dc.b 7,	0, $FF,	0	; ...
byte_161D0:	dc.b 0,	1, 1, 1, 2, 3, 3, 4, 4,	4, 5, 5, 5, 0, $FD, 0 ;	...
; ---------------------------------------------------------------------------
; Sprite mappings - electrocution orbs (SBZ)
; ---------------------------------------------------------------------------
Map_obj6E:	dc.w byte_161EC-Map_obj6E, byte_161F7-Map_obj6E	; ...
		dc.w byte_16207-Map_obj6E, byte_16221-Map_obj6E
		dc.w byte_16236-Map_obj6E, byte_16255-Map_obj6E
byte_161EC:	dc.b 2			; ...
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
byte_161F7:	dc.b 3			; ...
		dc.b $F8, 5, 0,	8, $F8
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
byte_16207:	dc.b 5			; ...
		dc.b $F8, 5, 0,	8, $F8
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
		dc.b $F6, $D, 0, $C, 8
		dc.b $F6, $D, 8, $C, $DC
byte_16221:	dc.b 4			; ...
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
		dc.b $F6, $D, 0, $C, 8
		dc.b $F6, $D, 8, $C, $DC
byte_16236:	dc.b 6			; ...
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
		dc.b $F6, $D, $10, $C, 8
		dc.b $F6, $D, $18, $C, $DC
		dc.b $F6, $D, 0, $C, $24
		dc.b $F6, $D, 8, $C, $C0
byte_16255:	dc.b 4			; ...
		dc.b $F8, 4, $60, 0, $F8
		dc.b 0,	6, $40,	2, $F8
		dc.b $F6, $D, $10, $C, $24
		dc.b $F6, $D, $18, $C, $C0
; ---------------------------------------------------------------------------
; Object 6F - spinning platforms that move around a conveyor belt (SBZ)
; ---------------------------------------------------------------------------

Obj6F:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj6F_Index(pc,d0.w),d1
		jsr	Obj6F_Index(pc,d1.w)
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	loc_1629A

Obj6F_Display:				; ...
		jmp	$880000+DisplaySprite

loc_1629A:				; ...
		cmpi.b	#2,($FFFFFE11).w ; check if act	is 3
		bne.s	Obj6F_Act1or2	; if not, branch
		cmpi.w	#-$80,d0
		bcc.s	Obj6F_Display

Obj6F_Act1or2:				; ...
		move.b	$2F(a0),d0
		bpl.s	Obj6F_Delete
		andi.w	#$7F,d0
		lea	($FFFFF7C1).w,a2
		bclr	#0,(a2,d0.w)

Obj6F_Delete:				; ...
		jmp	$880000+DeleteObject
Obj6F_Index:	dc.w Obj6F_Main-Obj6F_Index ; ...
		dc.w loc_163D8-Obj6F_Index

Obj6F_Main:				; ...
		move.b	$28(a0),d0
		bmi.w	loc_16380
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj69a,4(a0)
		move.w	#$4DF,2(a0)
		move.b	#$10,$19(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		moveq	#0,d0
		move.b	$28(a0),d0
		move.w	d0,d1
		lsr.w	#3,d0
		andi.w	#$1E,d0
		lea	off_164A6(pc),a2
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,$38(a0)
		move.w	(a2)+,$30(a0)
		move.l	a2,$3C(a0)
		andi.w	#$F,d1
		lsl.w	#2,d1
		move.b	d1,$38(a0)
		move.b	#4,$3A(a0)
		tst.b	($FFFFF7C0).w
		beq.s	loc_16356
		move.b	#1,$3B(a0)
		neg.b	$3A(a0)
		moveq	#0,d1
		move.b	$38(a0),d1
		add.b	$3A(a0),d1
		cmp.b	$39(a0),d1
		bcs.s	loc_16352
		move.b	d1,d0
		moveq	#0,d1
		tst.b	d0
		bpl.s	loc_16352
		move.b	$39(a0),d1
		subq.b	#4,d1

loc_16352:				; ...
		move.b	d1,$38(a0)

loc_16356:				; ...
		move.w	(a2,d1.w),$34(a0)
		move.w	2(a2,d1.w),$36(a0)
		tst.w	d1
		bne.s	loc_1636C
		move.b	#1,$1C(a0)

loc_1636C:				; ...
		cmpi.w	#8,d1
		bne.s	loc_16378
		move.b	#0,$1C(a0)

loc_16378:				; ...
		bsr.w	Obj63_ChangeDir
		bra.w	loc_163D8

loc_16380:				; ...
		move.b	d0,$2F(a0)
		andi.w	#$7F,d0
		lea	($FFFFF7C1).w,a2
		bset	#0,(a2,d0.w)
		beq.s	loc_1639A
		jmp	$880000+DeleteObject

loc_1639A:				; ...
		add.w	d0,d0
		andi.w	#$1E,d0
		addi.w	#$80,d0
		lea	$900000+(ObjPos_Index).l,a2
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,d1
		movea.l	a0,a1
		bra.s	Obj6F_LoadPform

Obj6F_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_163D0

Obj6F_LoadPform:			; ...
		move.b	#$6F,0(a1)
		move.w	(a2)+,8(a1)
		move.w	(a2)+,$C(a1)
		move.w	(a2)+,d0
		move.b	d0,$28(a1)

loc_163D0:				; ...
		dbf	d1,Obj6F_Loop
		addq.l	#4,sp
		rts	

loc_163D8:				; ...
		lea	$880000+(Ani_obj6F).l,a1
		jsr	$880000+AnimateSprite
		tst.b	$1A(a0)
		bne.s	loc_16404
		move.w	8(a0),-(sp)
		bsr.w	loc_16424
		move.w	#$1B,d1
		move.w	#7,d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	(sp)+,d4
		jmp	$880000+SolidObject

loc_16404:				; ...
		btst	#3,$22(a0)
		beq.s	loc_16420
		lea	($FFFFD000).w,a1
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)

loc_16420:				; ...
		bra.w	*+4

loc_16424:				; ...
		move.w	8(a0),d0
		cmp.w	$34(a0),d0
		bne.s	loc_16484
		move.w	$C(a0),d0
		cmp.w	$36(a0),d0
		bne.s	loc_16484
		moveq	#0,d1
		move.b	$38(a0),d1
		add.b	$3A(a0),d1
		cmp.b	$39(a0),d1
		bcs.s	loc_16456
		move.b	d1,d0
		moveq	#0,d1
		tst.b	d0
		bpl.s	loc_16456
		move.b	$39(a0),d1
		subq.b	#4,d1

loc_16456:				; ...
		move.b	d1,$38(a0)
		movea.l	$3C(a0),a1
		move.w	(a1,d1.w),$34(a0)
		move.w	2(a1,d1.w),$36(a0)
		tst.w	d1
		bne.s	loc_16474
		move.b	#1,$1C(a0)

loc_16474:				; ...
		cmpi.w	#8,d1
		bne.s	loc_16480
		move.b	#0,$1C(a0)

loc_16480:				; ...
		bsr.w	Obj63_ChangeDir

loc_16484:				; ...
		jmp	$880000+SpeedToPos
Ani_obj6F:	dc.w byte_1648E-Ani_obj6F, byte_164A2-Ani_obj6F	; ...
byte_1648E:	dc.b 0,	0, 1, 2, 3, 4, $43, $42, $41, $40, $61,	$62, $63 ; ...
		dc.b $64, $23, $22, $21, 0, $FF, 0
byte_164A2:	dc.b $F, 0, $FF, 0	; ...

off_164A6:	dc.w word_164B2-off_164A6, word_164C6-off_164A6, word_164DA-off_164A6 ;	...
		dc.w word_164EE-off_164A6, word_16502-off_164A6, word_16516-off_164A6
word_164B2:	dc.w $10, $E80,	$E14, $370, $EEF, $302,	$EEF, $340, $E14, $3AE ; ...
word_164C6:	dc.w $10, $F80,	$F14, $2E0, $FEF, $272,	$FEF, $2B0, $F14, $31E ; ...
word_164DA:	dc.w $10, $1080, $1014,	$270, $10EF, $202, $10EF, $240,	$1014, $2AE ; ...
word_164EE:	dc.w $10, $F80,	$F14, $570, $FEF, $502,	$FEF, $540, $F14, $5AE ; ...
word_16502:	dc.w $10, $1B80, $1B14,	$670, $1BEF, $602, $1BEF, $640,	$1B14, $6AE ; ...
word_16516:	dc.w $10, $1C80, $1C14,	$5E0, $1CEF, $572, $1CEF, $5B0,	$1C14, $61E ; ...
; ---------------------------------------------------------------------------
; Object 70 - large girder block (SBZ)
; ---------------------------------------------------------------------------

Obj70:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj70_Index(pc,d0.w),d1
		jmp	Obj70_Index(pc,d1.w)
Obj70_Index:	dc.w Obj70_Main-Obj70_Index ; ...
		dc.w Obj70_Action-Obj70_Index

Obj70_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj70,4(a0)
		move.w	#$42F0,2(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$60,$19(a0)
		move.b	#$18,$16(a0)
		move.w	8(a0),$32(a0)
		move.w	$C(a0),$30(a0)
		bsr.w	Obj70_Move2

Obj70_Action:				; ...
		move.w	8(a0),-(sp)
		tst.w	$3A(a0)
		beq.s	Obj70_Move
		subq.w	#1,$3A(a0)
		bne.s	Obj70_Solid

Obj70_Move:				; ...
		jsr	$880000+SpeedToPos
		subq.w	#1,$34(a0)	; subtract 1 from movement duration
		bne.s	Obj70_Solid	; if time remains, branch
		bsr.w	Obj70_Move2	; if time is zero, branch

Obj70_Solid:				; ...
		move.w	(sp)+,d4
		tst.b	1(a0)
		bpl.s	Obj70_ChkDel
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		moveq	#0,d2
		move.b	$16(a0),d2
		move.w	d2,d3
		addq.w	#1,d3
		jsr	$880000+SolidObject

Obj70_ChkDel:				; ...
		move.w	$32(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj70_Delete
		jmp	$880000+DisplaySprite

Obj70_Delete:				; ...
		jmp	$880000+DeleteObject

Obj70_Move2:				; ...
		move.b	$38(a0),d0
		andi.w	#$18,d0
		lea	(Obj70_MoveData)(pc),a1
		lea	(a1,d0.w),a1
		move.w	(a1)+,$10(a0)
		move.w	(a1)+,$12(a0)
		move.w	(a1)+,$34(a0)
		addq.b	#8,$38(a0)	; use next movedata set
		move.w	#7,$3A(a0)
		rts	
Obj70_MoveData:	dc.w   $100,	 0,   $60,     0 ; ...
		dc.w	  0,  $100,   $30,     0 ; x-speed, y-speed, duration, blank
		dc.w  $FF00, $FFC0,   $60,     0
		dc.w	  0, $FF00,   $18,     0
; ---------------------------------------------------------------------------
; Sprite mappings - large girder block (SBZ)
; ---------------------------------------------------------------------------
Map_obj70:	dc.w byte_1662A-Map_obj70 ; ...
byte_1662A:	dc.b $C			; ...
		dc.b $E8, $E, 0, 0, $A0
		dc.b 0,	$E, $10, 0, $A0
		dc.b $E8, $E, 0, 6, $C0
		dc.b 0,	$E, $10, 6, $C0
		dc.b $E8, $E, 0, 6, $E0
		dc.b 0,	$E, $10, 6, $E0
		dc.b $E8, $E, 0, 6, 0
		dc.b 0,	$E, $10, 6, 0
		dc.b $E8, $E, 0, 6, $20
		dc.b 0,	$E, $10, 6, $20
		dc.b $E8, $E, 0, 6, $40
		dc.b 0,	$E, $10, 6, $40
		dc.b 0
; ---------------------------------------------------------------------------
; Object 71 - invisible	solid blocks
; ---------------------------------------------------------------------------

Obj71:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj71_Index(pc,d0.w),d1
		jmp	Obj71_Index(pc,d1.w)
Obj71_Index:	dc.w Obj71_Main-Obj71_Index ; ...
		dc.w Obj71_Solid-Obj71_Index

Obj71_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj71,4(a0)
		move.w	#$8680,2(a0)
		ori.b	#4,1(a0)
		move.b	$28(a0),d0	; get object type
		move.b	d0,d1
		andi.w	#$F0,d0		; read only the	1st byte
		addi.w	#$10,d0
		lsr.w	#1,d0
		move.b	d0,$19(a0)	; set object width
		andi.w	#$F,d1		; read only the	2nd byte
		addq.w	#1,d1
		lsl.w	#3,d1
		move.b	d1,$16(a0)	; set object height

Obj71_Solid:				; ...
		bsr.w	ChkObjOnScreen
		bne.s	Obj71_ChkDel
		moveq	#0,d1
		move.b	$19(a0),d1
		addi.w	#$B,d1
		moveq	#0,d2
		move.b	$16(a0),d2
		move.w	d2,d3
		addq.w	#1,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject71

Obj71_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj71_Delete
		tst.w	($FFFFFE08).w	; are you using	debug mode?
		beq.s	Obj71_NoDisplay	; if not, branch
		jmp	$880000+DisplaySprite	; if yes, display the object

Obj71_NoDisplay:			; ...
		rts	

Obj71_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - invisible solid blocks
; ---------------------------------------------------------------------------
Map_obj71:	dc.w byte_114BC-Map_obj71 ; ...
		dc.w byte_114D1-Map_obj71
		dc.w byte_114E6-Map_obj71
byte_114BC:	dc.b 4			; ...
		dc.b $F0, 5, 0,	$18, $F0
		dc.b $F0, 5, 0,	$18, 0
		dc.b 0,	5, 0, $18, $F0
		dc.b 0,	5, 0, $18, 0
byte_114D1:	dc.b 4			; ...
		dc.b $E0, 5, 0,	$18, $C0
		dc.b $E0, 5, 0,	$18, $30
		dc.b $10, 5, 0,	$18, $C0
		dc.b $10, 5, 0,	$18, $30
byte_114E6:	dc.b 4			; ...
		dc.b $E0, 5, 0,	$18, $80
		dc.b $E0, 5, 0,	$18, $70
		dc.b $10, 5, 0,	$18, $80
		dc.b $10, 5, 0,	$18, $70
		dc.b 0
; ---------------------------------------------------------------------------
; Object 72 - teleporter (SBZ)
; ---------------------------------------------------------------------------

Obj72:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj72_Index(pc,d0.w),d1
		jsr	Obj72_Index(pc,d1.w)
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj72_Delete
		rts	

Obj72_Delete:				; ...
		jmp	$880000+DeleteObject
Obj72_Index:	dc.w Obj72_Main-Obj72_Index ; ...
		dc.w loc_166C8-Obj72_Index
		dc.w loc_1675E-Obj72_Index
		dc.w loc_16798-Obj72_Index

Obj72_Main:				; ...
		addq.b	#2,$24(a0)
		move.b	$28(a0),d0
		add.w	d0,d0
		andi.w	#$1E,d0
		lea	Obj72_Data(pc),a2
		adda.w	(a2,d0.w),a2
		move.w	(a2)+,$3A(a0)
		move.l	a2,$3C(a0)
		move.w	(a2)+,$36(a0)
		move.w	(a2)+,$38(a0)

loc_166C8:				; ...
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_166E0
		addi.w	#$F,d0

loc_166E0:				; ...
		cmpi.w	#$10,d0
		bcc.s	locret_1675C
		move.w	$C(a1),d1
		sub.w	$C(a0),d1
		addi.w	#$20,d1
		cmpi.w	#$40,d1
		bcc.s	locret_1675C
		tst.b	($FFFFF7C8).w
		bne.s	locret_1675C
		cmpi.b	#7,$28(a0)
		bne.s	loc_1670E
		cmpi.w	#50,($FFFFFE20).w
		bcs.s	locret_1675C

loc_1670E:				; ...
		addq.b	#2,$24(a0)
		move.b	#$81,($FFFFF7C8).w ; lock controls
		move.b	#2,$1C(a1)	; use Sonic's rolling animation
		move.w	#$800,$14(a1)
		move.w	#0,$10(a1)
		move.w	#0,$12(a1)
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)
		bset	#1,$22(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		clr.b	$32(a0)
		move.w	#$BE,d0
		jsr	$880000+(PlaySound_Special).l ;	play Sonic rolling sound

locret_1675C:				; ...
		rts	

loc_1675E:				; ...
		lea	($FFFFD000).w,a1
		move.b	$32(a0),d0
		addq.b	#2,$32(a0)
		jsr	$880000+(CalcSine).l
		asr.w	#5,d0
		move.w	$C(a0),d2
		sub.w	d0,d2
		move.w	d2,$C(a1)
		cmpi.b	#$80,$32(a0)
		bne.s	locret_16796
		bsr.w	sub_1681C
		addq.b	#2,$24(a0)
		move.w	#$BC,d0
		jsr	$880000+(PlaySound_Special).l ;	play teleport sound

locret_16796:				; ...
		rts	

loc_16798:				; ...
		addq.l	#4,sp
		lea	($FFFFD000).w,a1
		subq.b	#1,$2E(a0)
		bpl.s	loc_167DA
		move.w	$36(a0),8(a1)
		move.w	$38(a0),$C(a1)
		moveq	#0,d1
		move.b	$3A(a0),d1
		addq.b	#4,d1
		cmp.b	$3B(a0),d1
		bcs.s	loc_167C2
		moveq	#0,d1
		bra.s	loc_16800

loc_167C2:				; ...
		move.b	d1,$3A(a0)
		movea.l	$3C(a0),a2
		move.w	(a2,d1.w),$36(a0)
		move.w	2(a2,d1.w),$38(a0)
		bra.w	sub_1681C

loc_167DA:				; ...
		move.l	8(a1),d2
		move.l	$C(a1),d3
		move.w	$10(a1),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d2
		move.w	$12(a1),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d3
		move.l	d2,8(a1)
		move.l	d3,$C(a1)
		rts	

loc_16800:				; ...
		andi.w	#$7FF,$C(a1)
		clr.b	$24(a0)
		clr.b	($FFFFF7C8).w
		move.w	#0,$10(a1)
		move.w	#$200,$12(a1)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_1681C:				; ...
		moveq	#0,d0
		move.w	#$1000,d2
		move.w	$36(a0),d0
		sub.w	8(a1),d0
		bge.s	loc_16830
		neg.w	d0
		neg.w	d2

loc_16830:				; ...
		moveq	#0,d1
		move.w	#$1000,d3
		move.w	$38(a0),d1
		sub.w	$C(a1),d1
		bge.s	loc_16844
		neg.w	d1
		neg.w	d3

loc_16844:				; ...
		cmp.w	d0,d1
		bcs.s	loc_1687A
		moveq	#0,d1
		move.w	$38(a0),d1
		sub.w	$C(a1),d1
		swap	d1
		divs.w	d3,d1
		moveq	#0,d0
		move.w	$36(a0),d0
		sub.w	8(a1),d0
		beq.s	loc_16866
		swap	d0
		divs.w	d1,d0

loc_16866:				; ...
		move.w	d0,$10(a1)
		move.w	d3,$12(a1)
		tst.w	d1
		bpl.s	loc_16874
		neg.w	d1

loc_16874:				; ...
		move.w	d1,$2E(a0)
		rts	

loc_1687A:				; ...
		moveq	#0,d0
		move.w	$36(a0),d0
		sub.w	8(a1),d0
		swap	d0
		divs.w	d2,d0
		moveq	#0,d1
		move.w	$38(a0),d1
		sub.w	$C(a1),d1
		beq.s	loc_16898
		swap	d1
		divs.w	d0,d1

loc_16898:				; ...
		move.w	d1,$12(a1)
		move.w	d2,$10(a1)
		tst.w	d0
		bpl.s	loc_168A6
		neg.w	d0

loc_168A6:				; ...
		move.w	d0,$2E(a0)
		rts	
; End of function sub_1681C

Obj72_Data:	dc.w word_168BC-Obj72_Data, word_168C2-Obj72_Data, word_168C8-Obj72_Data ; ...
		dc.w word_168E6-Obj72_Data, word_168EC-Obj72_Data, word_1690A-Obj72_Data
		dc.w word_16910-Obj72_Data, word_1692E-Obj72_Data
word_168BC:	dc.w 4,	$794, $98C	; ...
word_168C2:	dc.w 4,	$94, $38C	; ...
word_168C8:	dc.w $1C, $794,	$2E8	; ...
		dc.w $7A4, $2C0, $7D0
		dc.w $2AC, $858, $2AC
		dc.w $884, $298, $894
		dc.w $270, $894, $190
word_168E6:	dc.w 4,	$894, $690	; ...
word_168EC:	dc.w $1C, $1194, $470	; ...
		dc.w $1184, $498, $1158
		dc.w $4AC, $FD0, $4AC
		dc.w $FA4, $4C0, $F94
		dc.w $4E8, $F94, $590
word_1690A:	dc.w 4,	$1294, $490	; ...
word_16910:	dc.w $1C, $1594, $FFE8	; ...
		dc.w $1584, $FFC0, $1560
		dc.w $FFAC, $14D0, $FFAC
		dc.w $14A4, $FF98, $1494
		dc.w $FF70, $1494, $FD90
word_1692E:	dc.w 4,	$894, $90	; ...
; ---------------------------------------------------------------------------
; Object 78 - Caterkiller enemy	(MZ, SBZ)
; ---------------------------------------------------------------------------

Obj78:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj78_Index(pc,d0.w),d1
		jmp	Obj78_Index(pc,d1.w)
Obj78_Index:	dc.w Obj78_Main-Obj78_Index, Obj78_Action-Obj78_Index ;	...
		dc.w Obj78_BodySeg1-Obj78_Index, Obj78_BodySeg2-Obj78_Index
		dc.w Obj78_BodySeg1-Obj78_Index, Obj78_Delete-Obj78_Index
		dc.w loc_16CC0-Obj78_Index

locret_16950:				; ...
		rts	

Obj78_Main:				; ...
		move.b	#7,$16(a0)
		move.b	#8,$17(a0)
		jsr	$880000+ObjectFall
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_16950
		add.w	d1,$C(a0)
		clr.w	$12(a0)
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj78,4(a0)
		move.w	#$22B0,2(a0)
		cmpi.b	#5,($FFFFFE10).w ; if level is SBZ, branch
		beq.s	loc_16996
		move.w	#$24FF,2(a0)	; MZ specific code

loc_16996:				; ...
		andi.b	#3,1(a0)
		ori.b	#4,1(a0)
		move.b	1(a0),$22(a0)
		move.b	#4,$18(a0)
		move.b	#8,$19(a0)
		move.b	#$B,$20(a0)
		move.w	8(a0),d2
		moveq	#$C,d5
		btst	#0,$22(a0)
		beq.s	loc_169CA
		neg.w	d5

loc_169CA:				; ...
		move.b	#4,d6
		moveq	#0,d3
		moveq	#4,d4
		movea.l	a0,a2
		moveq	#2,d1

Obj78_LoadBody:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj78_QuitLoad
		move.b	#$78,0(a1)	; load body segment object
		move.b	d6,$24(a1)
		addq.b	#2,d6
		move.l	4(a0),4(a1)
		move.w	2(a0),2(a1)
		move.b	#5,$18(a1)
		move.b	#8,$19(a1)
		move.b	#$CB,$20(a1)
		add.w	d5,d2
		move.w	d2,8(a1)
		move.w	$C(a0),$C(a1)
		move.b	$22(a0),$22(a1)
		move.b	$22(a0),1(a1)
		move.b	#8,$1A(a1)
		move.l	a2,$3C(a1)
		move.b	d4,$3C(a1)
		addq.b	#4,d4
		movea.l	a1,a2

Obj78_QuitLoad:				; ...
		dbf	d1,Obj78_LoadBody ; repeat sequence 2 more times
		move.b	#7,$2A(a0)
		clr.b	$3C(a0)

Obj78_Action:				; ...
		tst.b	$22(a0)
		bmi.w	loc_16C96
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj78_Index2(pc,d0.w),d1
		jsr	Obj78_Index2(pc,d1.w)
		move.b	$2B(a0),d1
		bpl.s	Obj78_Display
		lea	$880000+(Ani_obj78).l,a1
		move.b	$26(a0),d0
		andi.w	#$7F,d0
		addq.b	#4,$26(a0)
		move.b	(a1,d0.w),d0
		bpl.s	Obj78_AniHead
		bclr	#7,$2B(a0)
		bra.s	Obj78_Display

Obj78_AniHead:				; ...
		andi.b	#$10,d1
		add.b	d1,d0
		move.b	d0,$1A(a0)

Obj78_Display:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.w	Obj78_ChkGone
		jmp	$880000+DisplaySprite

Obj78_ChkGone:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		beq.s	loc_16ABC
		bclr	#7,2(a2,d0.w)

loc_16ABC:				; ...
		move.b	#$A,$24(a0)	; run "Obj78_Delete" routine
		rts	

Obj78_Delete:				; ...
		jmp	$880000+DeleteObject
Obj78_Index2:	dc.w Obj78_Move-Obj78_Index2 ; ...
		dc.w loc_16B02-Obj78_Index2

Obj78_Move:				; ...
		subq.b	#1,$2A(a0)
		bmi.s	Obj78_Move2
		rts	

Obj78_Move2:				; ...
		addq.b	#2,$25(a0)
		move.b	#$10,$2A(a0)
		move.w	#-$C0,$10(a0)
		move.w	#$40,$14(a0)
		bchg	#4,$2B(a0)
		bne.s	loc_16AFC
		clr.w	$10(a0)
		neg.w	$14(a0)

loc_16AFC:				; ...
		bset	#7,$2B(a0)

loc_16B02:				; ...
		subq.b	#1,$2A(a0)
		bmi.s	loc_16B5E
		move.l	8(a0),-(sp)
		move.l	8(a0),d2
		move.w	$10(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_16B1E
		neg.w	d0

loc_16B1E:				; ...
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d2
		move.l	d2,8(a0)
		jsr	$880000+ObjHitFloor
		move.l	(sp)+,d2
		cmpi.w	#-8,d1
		blt.s	loc_16B70
		cmpi.w	#$C,d1
		bge.s	loc_16B70
		add.w	d1,$C(a0)
		swap	d2
		cmp.w	8(a0),d2
		beq.s	locret_16B5C
		moveq	#0,d0
		move.b	$3C(a0),d0
		addq.b	#1,$3C(a0)
		andi.b	#$F,$3C(a0)
		move.b	d1,$2C(a0,d0.w)

locret_16B5C:				; ...
		rts	

loc_16B5E:				; ...
		subq.b	#2,$25(a0)
		move.b	#7,$2A(a0)
		move.w	#0,$10(a0)
		rts	

loc_16B70:				; ...
		move.l	d2,8(a0)
		bchg	#0,$22(a0)
		move.b	$22(a0),1(a0)
		moveq	#0,d0
		move.b	$3C(a0),d0
		move.b	#$80,$2C(a0,d0.w)
		addq.b	#1,$3C(a0)
		andi.b	#$F,$3C(a0)
		rts	

Obj78_BodySeg2:				; ...
		movea.l	$3C(a0),a1
		move.b	$2B(a1),$2B(a0)
		bpl.s	Obj78_BodySeg1
		lea	$880000+(Ani_obj78).l,a1
		move.b	$26(a0),d0
		andi.w	#$7F,d0
		addq.b	#4,$26(a0)
		tst.b	4(a1,d0.w)
		bpl.s	Obj78_AniBody
		addq.b	#4,$26(a0)

Obj78_AniBody:				; ...
		move.b	(a1,d0.w),d0
		addq.b	#8,d0
		move.b	d0,$1A(a0)

Obj78_BodySeg1:				; ...
		movea.l	$3C(a0),a1
		tst.b	$22(a0)
		bmi.w	loc_16C90
		move.b	$2B(a1),$2B(a0)
		move.b	$25(a1),$25(a0)
		beq.w	loc_16C64
		move.w	$14(a1),$14(a0)
		move.w	$10(a1),d0
		add.w	$14(a1),d0
		move.w	d0,$10(a0)
		move.l	8(a0),d2
		move.l	d2,d3
		move.w	$10(a0),d0
		btst	#0,$22(a0)
		beq.s	loc_16C0C
		neg.w	d0

loc_16C0C:				; ...
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d2
		move.l	d2,8(a0)
		swap	d3
		cmp.w	8(a0),d3
		beq.s	loc_16C64
		moveq	#0,d0
		move.b	$3C(a0),d0
		move.b	$2C(a1,d0.w),d1
		cmpi.b	#-$80,d1
		bne.s	loc_16C50
		swap	d3
		move.l	d3,8(a0)
		move.b	d1,$2C(a0,d0.w)
		bchg	#0,$22(a0)
		move.b	$22(a0),1(a0)
		addq.b	#1,$3C(a0)
		andi.b	#$F,$3C(a0)
		bra.s	loc_16C64

loc_16C50:				; ...
		ext.w	d1
		add.w	d1,$C(a0)
		addq.b	#1,$3C(a0)
		andi.b	#$F,$3C(a0)
		move.b	d1,$2C(a0,d0.w)

loc_16C64:				; ...
		cmpi.b	#$C,$24(a1)
		beq.s	loc_16C90
		cmpi.b	#$27,0(a1)
		beq.s	loc_16C7C
		cmpi.b	#$A,$24(a1)
		bne.s	loc_16C82

loc_16C7C:				; ...
		move.b	#$A,$24(a0)

loc_16C82:				; ...
		jmp	$880000+DisplaySprite
Obj78_FragSpeed:dc.w $FE00, $FE80, $180, $200 ;	...

loc_16C90:				; ...
		bset	#7,$22(a1)

loc_16C96:				; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj78_FragSpeed-2(pc,d0.w),d0
		btst	#0,$22(a0)
		beq.s	loc_16CAA
		neg.w	d0

loc_16CAA:				; ...
		move.w	d0,$10(a0)
		move.w	#-$400,$12(a0)
		move.b	#$C,$24(a0)
		andi.b	#-8,$1A(a0)

loc_16CC0:				; ...
		jsr	$880000+ObjectFall
		tst.w	$12(a0)
		bmi.s	loc_16CE0
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_16CE0
		add.w	d1,$C(a0)
		move.w	#-$400,$12(a0)

loc_16CE0:				; ...
		tst.b	1(a0)
		bpl.w	Obj78_ChkGone
		jmp	$880000+DisplaySprite
Ani_obj78:	dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, 0, 0, 0, 1 ; ...
		dc.b 1,	1, 1, 1, 1, 1, 2, 2, 2,	2, 2, 3, 3, 3, 3, 3
		dc.b 4,	4, 4, 4, 4, 4, 5, 5, 5,	5, 5, 6, 6, 6, 6, 6
		dc.b 6,	6, 7, 7, 7, 7, 7, 7, 7,	7, 7, 7, $FF, 7, 7, $FF
		dc.b 7,	7, 7, 7, 7, 7, 7, 7, 7,	7, 7, 7, 7, 7, 7, 6
		dc.b 6,	6, 6, 6, 6, 6, 5, 5, 5,	5, 5, 4, 4, 4, 4, 4
		dc.b 4,	3, 3, 3, 3, 3, 2, 2, 2,	2, 2, 1, 1, 1, 1, 1
		dc.b 1,	1, 0, 0, 0, 0, 0, 0, 0,	0, 0, 0, $FF, 0, 0, $FF
; ---------------------------------------------------------------------------
; Sprite mappings - Caterkiller	enemy (MZ, SBZ)
; ---------------------------------------------------------------------------
Map_obj78:	dc.w byte_16D9E-Map_obj78, byte_16DA4-Map_obj78	; ...
		dc.w byte_16DAA-Map_obj78, byte_16DB0-Map_obj78
		dc.w byte_16DB6-Map_obj78, byte_16DBC-Map_obj78
		dc.w byte_16DC2-Map_obj78, byte_16DC8-Map_obj78
		dc.w byte_16DCE-Map_obj78, byte_16DD4-Map_obj78
		dc.w byte_16DDA-Map_obj78, byte_16DE0-Map_obj78
		dc.w byte_16DE6-Map_obj78, byte_16DEC-Map_obj78
		dc.w byte_16DF2-Map_obj78, byte_16DF8-Map_obj78
		dc.w byte_16DFE-Map_obj78, byte_16E04-Map_obj78
		dc.w byte_16E0A-Map_obj78, byte_16E10-Map_obj78
		dc.w byte_16E16-Map_obj78, byte_16E1C-Map_obj78
		dc.w byte_16E22-Map_obj78, byte_16E28-Map_obj78
byte_16D9E:	dc.b 1			; ...
		dc.b $F2, 6, 0,	0, $F8
byte_16DA4:	dc.b 1			; ...
		dc.b $F1, 6, 0,	0, $F8
byte_16DAA:	dc.b 1			; ...
		dc.b $F0, 6, 0,	0, $F8
byte_16DB0:	dc.b 1			; ...
		dc.b $EF, 6, 0,	0, $F8
byte_16DB6:	dc.b 1			; ...
		dc.b $EE, 6, 0,	0, $F8
byte_16DBC:	dc.b 1			; ...
		dc.b $ED, 6, 0,	0, $F8
byte_16DC2:	dc.b 1			; ...
		dc.b $EC, 6, 0,	0, $F8
byte_16DC8:	dc.b 1			; ...
		dc.b $EB, 6, 0,	0, $F8
byte_16DCE:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$C, $F8
byte_16DD4:	dc.b 1			; ...
		dc.b $F7, 5, 0,	$C, $F8
byte_16DDA:	dc.b 1			; ...
		dc.b $F6, 5, 0,	$C, $F8
byte_16DE0:	dc.b 1			; ...
		dc.b $F5, 5, 0,	$C, $F8
byte_16DE6:	dc.b 1			; ...
		dc.b $F4, 5, 0,	$C, $F8
byte_16DEC:	dc.b 1			; ...
		dc.b $F3, 5, 0,	$C, $F8
byte_16DF2:	dc.b 1			; ...
		dc.b $F2, 5, 0,	$C, $F8
byte_16DF8:	dc.b 1			; ...
		dc.b $F1, 5, 0,	$C, $F8
byte_16DFE:	dc.b 1			; ...
		dc.b $F2, 6, 0,	6, $F8
byte_16E04:	dc.b 1			; ...
		dc.b $F1, 6, 0,	6, $F8
byte_16E0A:	dc.b 1			; ...
		dc.b $F0, 6, 0,	6, $F8
byte_16E10:	dc.b 1			; ...
		dc.b $EF, 6, 0,	6, $F8
byte_16E16:	dc.b 1			; ...
		dc.b $EE, 6, 0,	6, $F8
byte_16E1C:	dc.b 1			; ...
		dc.b $ED, 6, 0,	6, $F8
byte_16E22:	dc.b 1			; ...
		dc.b $EC, 6, 0,	6, $F8
byte_16E28:	dc.b 1			; ...
		dc.b $EB, 6, 0,	6, $F8
; ---------------------------------------------------------------------------
; Object 79 - lamppost
; ---------------------------------------------------------------------------

Obj79:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj79_Index(pc,d0.w),d1
		jsr	Obj79_Index(pc,d1.w)
		jmp	$880000+MarkObjGone
Obj79_Index:	dc.w Obj79_Main-Obj79_Index ; ...
		dc.w Obj79_BlueLamp-Obj79_Index
		dc.w Obj79_AfterHit-Obj79_Index
		dc.w Obj79_Twirl-Obj79_Index

Obj79_Main:				; ...
		addq.b	#2,$24(a0)
		move.l	#($880000+Map_obj79),4(a0)
		move.w	#$7A0,2(a0)
		move.b	#4,1(a0)
		move.b	#8,$19(a0)
		move.b	#5,$18(a0)
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bclr	#7,2(a2,d0.w)
		btst	#0,2(a2,d0.w)
		bne.s	Obj79_RedLamp
		move.b	($FFFFFE30).w,d1
		andi.b	#$7F,d1
		move.b	$28(a0),d2	; get lamppost number
		andi.b	#$7F,d2
		cmp.b	d2,d1		; is lamppost number higher than the number hit?
		bcs.s	Obj79_BlueLamp	; if yes, branch

Obj79_RedLamp:				; ...
		bset	#0,2(a2,d0.w)
		move.b	#4,$24(a0)	; run "Obj79_AfterHit" routine
		move.b	#3,$1A(a0)	; use red lamppost frame
		rts	

Obj79_BlueLamp:				; ...
		tst.w	($FFFFFE08).w	; is debug mode	being used?
		bne.w	locret_16F90	; if yes, branch
		tst.b	($FFFFF7C8).w
		bmi.w	locret_16F90
		move.b	($FFFFFE30).w,d1
		andi.b	#$7F,d1
		move.b	$28(a0),d2
		andi.b	#$7F,d2
		cmp.b	d2,d1
		bcs.s	Obj79_HitLamp
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bset	#0,2(a2,d0.w)
		move.b	#4,$24(a0)
		move.b	#3,$1A(a0)
		bra.w	locret_16F90

Obj79_HitLamp:				; ...
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		addq.w	#8,d0
		cmpi.w	#$10,d0
		bcc.w	locret_16F90
		move.w	($FFFFD00C).w,d0
		sub.w	$C(a0),d0
		addi.w	#$40,d0
		cmpi.w	#$68,d0
		bcc.s	locret_16F90
		move.w	#$A1,d0
		jsr	$880000+(PlaySound_Special).l ;	play lamppost sound
		addq.b	#2,$24(a0)
		jsr	$880000+SingleObjLoad
		bne.s	loc_16F76
		move.b	#$79,0(a1)	; load twirling	lamp object
		move.b	#6,$24(a1)	; use "Obj79_Twirl" routine
		move.w	8(a0),$30(a1)
		move.w	$C(a0),$32(a1)
		subi.w	#$18,$32(a1)
		move.l	#$880000+Map_obj79,4(a1)
		move.w	#$7A0,2(a1)
		move.b	#4,1(a1)
		move.b	#8,$19(a1)
		move.b	#4,$18(a1)
		move.b	#2,$1A(a1)
		move.w	#$20,$36(a1)

loc_16F76:				; ...
		move.b	#1,$1A(a0)	; use "post only" frame, with no lamp
		bsr.w	Obj79_StoreInfo
		lea	($FFFFFC00).w,a2
		moveq	#0,d0
		move.b	$23(a0),d0
		bset	#0,2(a2,d0.w)

locret_16F90:				; ...
		rts	

Obj79_AfterHit:				; ...
		rts	

Obj79_Twirl:				; ...
		subq.w	#1,$36(a0)
		bpl.s	loc_16FA0
		move.b	#4,$24(a0)
loc_16FA0:				; ...
		move.b	$26(a0),d0
		subi.b	#$10,$26(a0)
		subi.b	#$40,d0
		jsr	$880000+(CalcSine).l
		muls.w	#$C00,d1
		swap	d1
		add.w	$30(a0),d1
		move.w	d1,8(a0)
		muls.w	#$C00,d0
		swap	d0
		add.w	$32(a0),d0
		move.w	d0,$C(a0)
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	store information when you hit a lamppost
; ---------------------------------------------------------------------------

Obj79_StoreInfo:			; ...
		move.b	$28(a0),($FFFFFE30).w ;	lamppost number
		move.b	($FFFFFE30).w,($FFFFFE31).w
		move.w	8(a0),($FFFFFE32).w ; x-position
		move.w	$C(a0),($FFFFFE34).w ; y-position
		move.w	($FFFFFE20).w,($FFFFFE36).w ; rings
		move.b	($FFFFFE1B).w,($FFFFFE54).w ; lives
		move.l	($FFFFFE22).w,($FFFFFE38).w ; time
		move.b	($FFFFF742).w,($FFFFFE3C).w ; routine counter for dynamic level	mod
		move.w	($FFFFF72E).w,($FFFFFE3E).w ; lower y-boundary of level
		move.w	($FFFFF700).w,($FFFFFE40).w ; screen x-position
		move.w	($FFFFF704).w,($FFFFFE42).w ; screen y-position
		move.w	($FFFFF708).w,($FFFFFE44).w ; bg position
		move.w	($FFFFF70C).w,($FFFFFE46).w ; bg position
		move.w	($FFFFF710).w,($FFFFFE48).w ; bg position
		move.w	($FFFFF714).w,($FFFFFE4A).w ; bg position
		move.w	($FFFFF718).w,($FFFFFE4C).w ; bg position
		move.w	($FFFFF71C).w,($FFFFFE4E).w ; bg position
		move.w	($FFFFF648).w,($FFFFFE50).w ; water height
		move.b	($FFFFF64D).w,($FFFFFE52).w ; rountine counter for water
		move.b	($FFFFF64E).w,($FFFFFE53).w ; water direction
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	load stored info when you start	a level	from a lamppost
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj79_LoadInfo:				; ...
		move.b	($FFFFFE31).w,($FFFFFE30).w
		move.w	($FFFFFE32).w,($FFFFD008).w
		move.w	($FFFFFE34).w,($FFFFD00C).w
		move.w	($FFFFFE36).w,($FFFFFE20).w
		move.b	($FFFFFE54).w,($FFFFFE1B).w
		clr.w	($FFFFFE20).w
		clr.b	($FFFFFE1B).w
		move.l	($FFFFFE38).w,($FFFFFE22).w
		move.b	#59,($FFFFFE25).w
		subq.b	#1,($FFFFFE24).w
		move.b	($FFFFFE3C).w,($FFFFF742).w
		move.b	($FFFFFE52).w,($FFFFF64D).w
		move.w	($FFFFFE3E).w,($FFFFF72E).w
		move.w	($FFFFFE3E).w,($FFFFF726).w
		move.w	($FFFFFE40).w,($FFFFF700).w
		move.w	($FFFFFE42).w,($FFFFF704).w
		move.w	($FFFFFE44).w,($FFFFF708).w
		move.w	($FFFFFE46).w,($FFFFF70C).w
		move.w	($FFFFFE48).w,($FFFFF710).w
		move.w	($FFFFFE4A).w,($FFFFF714).w
		move.w	($FFFFFE4C).w,($FFFFF718).w
		move.w	($FFFFFE4E).w,($FFFFF71C).w
		cmpi.b	#1,($FFFFFE10).w
		bne.s	loc_170E4
		move.w	($FFFFFE50).w,($FFFFF648).w
		move.b	($FFFFFE52).w,($FFFFF64D).w
		move.b	($FFFFFE53).w,($FFFFF64E).w

loc_170E4:				; ...
		tst.b	($FFFFFE30).w
		bpl.s	locret_170F6
		move.w	($FFFFFE32).w,d0
		subi.w	#$A0,d0
		move.w	d0,($FFFFF728).w

locret_170F6:				; ...
		rts	
; End of function Obj79_LoadInfo

; ---------------------------------------------------------------------------
; Sprite mappings - lamppost
; ---------------------------------------------------------------------------
Map_obj79:	dc.w byte_17100-Map_obj79, byte_1711F-Map_obj79	; ...
		dc.w byte_17134-Map_obj79, byte_1713F-Map_obj79
byte_17100:	dc.b 6			; ...
		dc.b $E4, 1, 0,	0, $F8
		dc.b $E4, 1, 8,	0, 0
		dc.b $F4, 3, $20, 2, $F8
		dc.b $F4, 3, $28, 2, 0
		dc.b $D4, 1, 0,	6, $F8
		dc.b $D4, 1, 8,	6, 0
byte_1711F:	dc.b 4			; ...
		dc.b $E4, 1, 0,	0, $F8
		dc.b $E4, 1, 8,	0, 0
		dc.b $F4, 3, $20, 2, $F8
		dc.b $F4, 3, $28, 2, 0
byte_17134:	dc.b 2			; ...
		dc.b $F8, 1, 0,	8, $F8
		dc.b $F8, 1, 8,	8, 0
byte_1713F:	dc.b 6			; ...
		dc.b $E4, 1, 0,	0, $F8
		dc.b $E4, 1, 8,	0, 0
		dc.b $F4, 3, $20, 2, $F8
		dc.b $F4, 3, $28, 2, 0
		dc.b $D4, 1, 0,	8, $F8
		dc.b $D4, 1, 8,	8, 0

; ---------------------------------------------------------------------------
; Object 7D - hidden points at the end of a level
; ---------------------------------------------------------------------------

Obj7D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7D_Index(pc,d0.w),d1
		jmp	Obj7D_Index(pc,d1.w)
Obj7D_Index:	dc.w Obj7D_Main-Obj7D_Index ; ...
		dc.w Obj7D_DelayDel-Obj7D_Index

Obj7D_Main:				; ...
		moveq	#$10,d2
		move.w	d2,d3
		add.w	d3,d3
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d2,d0
		cmp.w	d3,d0
		bcc.s	Obj7D_ChkDel
		move.w	$C(a1),d1
		sub.w	$C(a0),d1
		add.w	d2,d1
		cmp.w	d3,d1
		bcc.s	Obj7D_ChkDel
		tst.w	($FFFFFE08).w
		bne.s	Obj7D_ChkDel
		tst.b	($FFFFF7CD).w
		bne.s	Obj7D_ChkDel
		addq.b	#2,$24(a0)
		move.l	#$880000+Map_obj7D,4(a0)
		move.w	#$84B6,2(a0)
		ori.b	#4,1(a0)
		move.b	#0,$18(a0)
		move.b	#$10,$19(a0)
		move.b	$28(a0),$1A(a0)
		move.w	#119,$30(a0)	; set display time to 2	seconds
		move.w	#$C9,d0
		jsr	$880000+(PlaySound_Special).l ;	play bonus sound
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		move.w	Obj7D_Points(pc,d0.w),d0 ; load	bonus points array
		jsr	$880000+AddPoints

Obj7D_ChkDel:				; ...
		move.w	8(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj7D_Delete
		rts	

Obj7D_Delete:				; ...
		jmp	$880000+DeleteObject
Obj7D_Points:	dc.w 0			; Bonus	points array
		dc.w 1000
		dc.w 100
		dc.w 1

Obj7D_DelayDel:				; ...
		subq.w	#1,$30(a0)	; subtract 1 from display time
		bmi.s	Obj7D_Delete2	; if time is zero, branch
		move.w	8(a0),d0
		andi.w	#-$80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#-$80,d1
		sub.w	d1,d0
		cmpi.w	#$280,d0
		bhi.s	Obj7D_Delete2
		jmp	$880000+DisplaySprite

Obj7D_Delete2:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Sprite mappings - hidden points at the end of	a level
; ---------------------------------------------------------------------------
Map_obj7D:	dc.w byte_17250-Map_obj7D, byte_17251-Map_obj7D	; ...
		dc.w byte_17257-Map_obj7D, byte_1725D-Map_obj7D
byte_17250:	dc.b 0			; ...
byte_17251:	dc.b 1			; ...
		dc.b $F4, $E, 0, 0, $F0
byte_17257:	dc.b 1			; ...
		dc.b $F4, $E, 0, $C, $F0
byte_1725D:	dc.b 1			; ...
		dc.b $F4, $E, 0, $18, $F0
		dc.b 0
		
		
; ---------------------------------------------------------------------------
; Object 3D - Robotnik (GHZ)
; ---------------------------------------------------------------------------

Obj3D:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj3D_Index(pc,d0.w),d1
		jmp	Obj3D_Index(pc,d1.w)
Obj3D_Index:	dc.w Obj3D_Main-Obj3D_Index ; ...
		dc.w Obj3D_ShipMain-Obj3D_Index
		dc.w Obj3D_FaceMain-Obj3D_Index
		dc.w Obj3D_FlameMain-Obj3D_Index

Obj3D_ObjData:	dc.b 2,	0		; ...
		dc.b 4,	1		; routine counter, animation
		dc.b 6,	7

Obj3D_Main:				; ...
		lea	(Obj3D_ObjData)(pc),a2
		movea.l	a0,a1
		moveq	#2,d1
		bra.s	Obj3D_LoadBoss

Obj3D_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_17772

Obj3D_LoadBoss:				; ...
		move.b	(a2)+,$24(a1)
		move.b	#$3D,0(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.l	#$880000+Map_Eggman,4(a1)
		move.w	#$400,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.b	#3,$18(a1)
		move.b	(a2)+,$1C(a1)
		move.l	a0,$34(a1)
		dbf	d1,Obj3D_Loop	; repeat sequence 2 more times

loc_17772:				; ...
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$F,$20(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8

Obj3D_ShipMain:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj3D_ShipIndex(pc,d0.w),d1
		jsr	Obj3D_ShipIndex(pc,d1.w)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		move.b	$22(a0),d0
		andi.b	#3,d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
Obj3D_ShipIndex:dc.w Obj3D_ShipStart-Obj3D_ShipIndex ; ...
		dc.w Obj3D_MakeBall-Obj3D_ShipIndex
		dc.w Obj3D_ShipMove-Obj3D_ShipIndex
		dc.w loc_17954-Obj3D_ShipIndex
		dc.w loc_1797A-Obj3D_ShipIndex
		dc.w loc_179AC-Obj3D_ShipIndex
		dc.w loc_179F6-Obj3D_ShipIndex

Obj3D_ShipStart:			; ...
		move.w	#$100,$12(a0)	; move ship down
		bsr.w	BossMove
		cmpi.w	#$338,$38(a0)
		bne.s	loc_177E6
		move.w	#0,$12(a0)	; stop ship
		addq.b	#2,$25(a0)	; goto next routine

loc_177E6:				; ...
		move.b	$3F(a0),d0
		jsr	$880000+(CalcSine).l
		asr.w	#6,d0
		add.w	$38(a0),d0
		move.w	d0,$C(a0)
		move.w	$30(a0),8(a0)
		addq.b	#2,$3F(a0)
		cmpi.b	#8,$25(a0)
		bcc.s	locret_1784A
		tst.b	$22(a0)
		bmi.s	loc_1784C
		tst.b	$20(a0)
		bne.s	locret_1784A
		tst.b	$3E(a0)
		bne.s	Obj3D_ShipFlash
		move.b	#$20,$3E(a0)	; set number of	times for ship to flash
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

Obj3D_ShipFlash:			; ...
		lea	($FFFFFB22).w,a1 ; load	2nd pallet, 2nd	entry
		moveq	#0,d0		; move 0 (black) to d0
		tst.w	(a1)
		bne.s	loc_1783C
		move.w	#$EEE,d0	; move 0EEE (white) to d0

loc_1783C:				; ...
		move.w	d0,(a1)		; load colour stored in	d0
		subq.b	#1,$3E(a0)
		bne.s	locret_1784A
		move.b	#$F,$20(a0)

locret_1784A:				; ...
		rts	

loc_1784C:				; ...
		moveq	#100,d0
		jsr	$880000+AddPoints
		move.b	#8,$25(a0)
		move.w	#$B3,$3C(a0)
		rts	
; ---------------------------------------------------------------------------
; Defeated boss	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


BossDefeated:				; ...
		move.b	($FFFFFE0F).w,d0
		andi.b	#7,d0
		bne.s	locret_178A2
		jsr	$880000+SingleObjLoad
		bne.s	locret_178A2
		move.b	#$3F,0(a1)	; load explosion object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		jsr	$880000+(RandomNumber).l
		move.w	d0,d1
		moveq	#0,d1
		move.b	d0,d1
		lsr.b	#2,d1
		subi.w	#$20,d1
		add.w	d1,8(a1)
		lsr.w	#8,d0
		lsr.b	#3,d0
		add.w	d0,$C(a1)

locret_178A2:				; ...
		rts	
; End of function BossDefeated

; ---------------------------------------------------------------------------
; Subroutine to	move a boss
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


BossMove:				; ...
		move.l	$30(a0),d2
		move.l	$38(a0),d3
		move.w	$10(a0),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d2
		move.w	$12(a0),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d3
		move.l	d2,$30(a0)
		move.l	d3,$38(a0)
		rts	
; End of function BossMove


Obj3D_MakeBall:				; ...
		move.w	#-$100,$10(a0)
		move.w	#-$40,$12(a0)
		bsr.w	BossMove
		cmpi.w	#$2A00,$30(a0)
		bne.s	loc_17916
		move.w	#0,$10(a0)
		move.w	#0,$12(a0)
		addq.b	#2,$25(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	loc_17910
		move.b	#$48,0(a1)	; load swinging	ball object
		move.w	$30(a0),8(a1)
		move.w	$38(a0),$C(a1)
		move.l	a0,$34(a1)

loc_17910:				; ...
		move.w	#$77,$3C(a0)

loc_17916:				; ...
		bra.w	loc_177E6

Obj3D_ShipMove:				; ...
		subq.w	#1,$3C(a0)
		bpl.s	Obj3D_Reverse
		addq.b	#2,$25(a0)
		move.w	#$3F,$3C(a0)
		move.w	#$100,$10(a0)	; move the ship	sideways
		cmpi.w	#$2A00,$30(a0)
		bne.s	Obj3D_Reverse
		move.w	#$7F,$3C(a0)
		move.w	#$40,$10(a0)

Obj3D_Reverse:				; ...
		btst	#0,$22(a0)
		bne.s	loc_17950
		neg.w	$10(a0)		; reverse direction of the ship

loc_17950:				; ...
		bra.w	loc_177E6

loc_17954:				; ...
		subq.w	#1,$3C(a0)
		bmi.s	loc_17960
		bsr.w	BossMove
		bra.s	loc_17976

loc_17960:				; ...
		bchg	#0,$22(a0)
		move.w	#$3F,$3C(a0)
		subq.b	#2,$25(a0)
		move.w	#0,$10(a0)

loc_17976:				; ...
		bra.w	loc_177E6

loc_1797A:				; ...
		subq.w	#1,$3C(a0)
		bmi.s	loc_17984
		bra.w	BossDefeated

loc_17984:				; ...
		bset	#0,$22(a0)
		bclr	#7,$22(a0)
		clr.w	$10(a0)
		addq.b	#2,$25(a0)
		move.w	#-$26,$3C(a0)
		tst.b	($FFFFF7A7).w
		bne.s	locret_179AA
		move.b	#1,($FFFFF7A7).w

locret_179AA:				; ...
		rts	

loc_179AC:				; ...
		addq.w	#1,$3C(a0)
		beq.s	loc_179BC
		bpl.s	loc_179C2
		addi.w	#$18,$12(a0)
		bra.s	loc_179EE

loc_179BC:				; ...
		clr.w	$12(a0)
		bra.s	loc_179EE

loc_179C2:				; ...
		cmpi.w	#$30,$3C(a0)
		bcs.s	loc_179DA
		beq.s	loc_179E0
		cmpi.w	#$38,$3C(a0)
		bcs.s	loc_179EE
		addq.b	#2,$25(a0)
		bra.s	loc_179EE

loc_179DA:				; ...
		subq.w	#8,$12(a0)
		bra.s	loc_179EE

loc_179E0:				; ...
		clr.w	$12(a0)
		move.w	#$81,d0
		jsr	$880000+(PlaySound).l	; play GHZ music

loc_179EE:				; ...
		bsr.w	BossMove
		bra.w	loc_177E6

loc_179F6:				; ...
		move.w	#$400,$10(a0)
		move.w	#-$40,$12(a0)
		cmpi.w	#$2AC0,($FFFFF72A).w
		beq.s	loc_17A10
		addq.w	#2,($FFFFF72A).w
		bra.s	loc_17A16

loc_17A10:				; ...
		tst.b	1(a0)
		bpl.s	Obj3D_ShipDel

loc_17A16:				; ...
		bsr.w	BossMove
		bra.w	loc_177E6

Obj3D_ShipDel:				; ...
		jmp	$880000+DeleteObject

Obj3D_FaceMain:				; ...
		moveq	#0,d0
		moveq	#1,d1
		movea.l	$34(a0),a1
		move.b	$25(a1),d0
		subq.b	#4,d0
		bne.s	loc_17A3E
		cmpi.w	#$2A00,$30(a1)
		bne.s	loc_17A46
		moveq	#4,d1

loc_17A3E:				; ...
		subq.b	#6,d0
		bmi.s	loc_17A46
		moveq	#$A,d1
		bra.s	loc_17A5A

loc_17A46:				; ...
		tst.b	$20(a1)
		bne.s	loc_17A50
		moveq	#5,d1
		bra.s	loc_17A5A

loc_17A50:				; ...
		cmpi.b	#4,($FFFFD024).w
		bcs.s	loc_17A5A
		moveq	#4,d1

loc_17A5A:				; ...
		move.b	d1,$1C(a0)
		subq.b	#2,d0
		bne.s	Obj3D_FaceDisp
		move.b	#6,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj3D_FaceDel

Obj3D_FaceDisp:				; ...
		bra.s	Obj3D_Display

Obj3D_FaceDel:				; ...
		jmp	$880000+DeleteObject

Obj3D_FlameMain:			; ...
		move.b	#7,$1C(a0)
		movea.l	$34(a0),a1
		cmpi.b	#$C,$25(a1)
		bne.s	loc_17A96
		move.b	#$B,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj3D_FlameDel
		bra.s	Obj3D_FlameDisp

loc_17A96:				; ...
		move.w	$10(a1),d0
		beq.s	Obj3D_FlameDisp
		move.b	#8,$1C(a0)

Obj3D_FlameDisp:			; ...
		bra.s	Obj3D_Display

Obj3D_FlameDel:				; ...
		jmp	$880000+DeleteObject

Obj3D_Display:				; ...
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		move.b	$22(a1),$22(a0)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		move.b	$22(a0),d0
		andi.b	#3,d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Object 48 - ball on a	chain that Robotnik swings (GHZ)
; ---------------------------------------------------------------------------

Obj48:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj48_Index(pc,d0.w),d1
		jmp	Obj48_Index(pc,d1.w)
Obj48_Index:	dc.w Obj48_Main-Obj48_Index ; ...
		dc.w Obj48_Base-Obj48_Index
		dc.w Obj48_Display2-Obj48_Index
		dc.w loc_17C68-Obj48_Index
		dc.w Obj48_ChkVanish-Obj48_Index

Obj48_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$4080,$26(a0)
		move.w	#-$200,$3E(a0)
		move.l	#$880000+Map_BossItems,4(a0)
		move.w	#$46C,2(a0)
		lea	$28(a0),a2
		move.b	#0,(a2)+
		moveq	#5,d1
		movea.l	a0,a1
		bra.s	loc_17B60

Obj48_MakeLinks:			; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj48_MakeBall
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#$48,0(a1)	; load chain link object
		move.b	#6,$24(a1)
		move.l	#$880000+Map_obj15,4(a1)
		move.w	#$380,2(a1)
		move.b	#1,$1A(a1)
		addq.b	#1,$28(a0)

loc_17B60:				; ...
		move.w	a1,d5
		subi.w	#$D000,d5
		lsr.w	#6,d5
		andi.w	#$7F,d5
		move.b	d5,(a2)+
		move.b	#4,1(a1)
		move.b	#8,$19(a1)
		move.b	#6,$18(a1)
		move.l	$34(a0),$34(a1)
		dbf	d1,Obj48_MakeLinks ; repeat sequence 5 more times

Obj48_MakeBall:				; ...
		move.b	#8,$24(a1)
		move.l	#$880000+Map_obj48,4(a1) ; load	different mappings for final link
		move.w	#$43AA,2(a1)	; use different	graphics
		move.b	#1,$1A(a1)
		move.b	#5,$18(a1)
		move.b	#$81,$20(a1)	; make object hurt Sonic
		rts	
Obj48_PosData:	dc.b 0,	$10, $20, $30, $40, $60	; ...
					; y-position data for links and	giant ball

Obj48_Base:				; ...
		lea	(Obj48_PosData)(pc),a3
		lea	$28(a0),a2
		moveq	#0,d6
		move.b	(a2)+,d6

loc_17BC6:				; ...
		moveq	#0,d4
		move.b	(a2)+,d4
		lsl.w	#6,d4
		addi.l	#$FFD000,d4
		movea.l	d4,a1
		move.b	(a3)+,d0
		cmp.b	$3C(a1),d0
		beq.s	loc_17BE0
		addq.b	#1,$3C(a1)

loc_17BE0:				; ...
		dbf	d6,loc_17BC6
		cmp.b	$3C(a1),d0
		bne.s	loc_17BFA
		movea.l	$34(a0),a1
		cmpi.b	#6,$25(a1)
		bne.s	loc_17BFA
		addq.b	#2,$24(a0)

loc_17BFA:				; ...
		cmpi.w	#$20,$32(a0)
		beq.s	Obj48_Display
		addq.w	#1,$32(a0)

Obj48_Display:				; ...
		bsr.w	sub_17C2A
		move.b	$26(a0),d0
		jsr	$880000+(Obj15_Move2).l
		jmp	$880000+DisplaySprite

Obj48_Display2:				; ...
		bsr.w	sub_17C2A
		jsr	$880000+(Obj48_Move).l
		jmp	$880000+DisplaySprite

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_17C2A:				; ...
		movea.l	$34(a0),a1
		addi.b	#$20,$1B(a0)
		bcc.s	loc_17C3C
		bchg	#0,$1A(a0)

loc_17C3C:				; ...
		move.w	8(a1),$3A(a0)
		move.w	$C(a1),d0
		add.w	$32(a0),d0
		move.w	d0,$38(a0)
		move.b	$22(a1),$22(a0)
		tst.b	$22(a1)
		bpl.s	locret_17C66
		move.b	#$3F,0(a0)
		move.b	#0,$24(a0)

locret_17C66:				; ...
		rts	
; End of function sub_17C2A


loc_17C68:				; ...
		movea.l	$34(a0),a1
		tst.b	$22(a1)
		bpl.s	Obj48_Display3
		move.b	#$3F,0(a0)
		move.b	#0,$24(a0)

Obj48_Display3:				; ...
		jmp	$880000+DisplaySprite

Obj48_ChkVanish:			; ...
		moveq	#0,d0
		tst.b	$1A(a0)
		bne.s	Obj48_Vanish
		addq.b	#1,d0

Obj48_Vanish:				; ...
		move.b	d0,$1A(a0)
		movea.l	$34(a0),a1
		tst.b	$22(a1)
		bpl.s	Obj48_Display4
		move.b	#0,$20(a0)
		bsr.w	BossDefeated
		subq.b	#1,$3C(a0)
		bpl.s	Obj48_Display4
		move.b	#$3F,(a0)
		move.b	#0,$24(a0)

Obj48_Display4:				; ...
		jmp	$880000+DisplaySprite
Ani_Eggman:	dc.w byte_17CD4-Ani_Eggman, byte_17CD8-Ani_Eggman, byte_17CDC-Ani_Eggman ; ...
		dc.w byte_17CE0-Ani_Eggman, byte_17CE4-Ani_Eggman, byte_17CE8-Ani_Eggman
		dc.w byte_17CEC-Ani_Eggman, byte_17CF0-Ani_Eggman, byte_17CF4-Ani_Eggman
		dc.w byte_17CF8-Ani_Eggman, byte_17CFC-Ani_Eggman, byte_17D00-Ani_Eggman
byte_17CD4:	dc.b $F, 0, $FF, 0	; ...
byte_17CD8:	dc.b 5,	1, 2, $FF	; ...
byte_17CDC:	dc.b 3,	1, 2, $FF	; ...
byte_17CE0:	dc.b 1,	1, 2, $FF	; ...
byte_17CE4:	dc.b 4,	3, 4, $FF	; ...
byte_17CE8:	dc.b $1F, 5, 1,	$FF	; ...
byte_17CEC:	dc.b 3,	6, 1, $FF	; ...
byte_17CF0:	dc.b $F, $A, $FF, 0	; ...
byte_17CF4:	dc.b 3,	8, 9, $FF	; ...
byte_17CF8:	dc.b 1,	8, 9, $FF	; ...
byte_17CFC:	dc.b $F, 7, $FF, 0	; ...
byte_17D00:	dc.b 2,	9, 8, $B, $C, $B, $C, 9, 8, $FE, 2, 0 ;	...
; ---------------------------------------------------------------------------
; Sprite mappings - Eggman (boss levels)
; ---------------------------------------------------------------------------
Map_Eggman:	dc.w byte_17D26-Map_Eggman, byte_17D45-Map_Eggman ; ...
		dc.w byte_17D50-Map_Eggman, byte_17D5B-Map_Eggman
		dc.w byte_17D6B-Map_Eggman, byte_17D7B-Map_Eggman
		dc.w byte_17D8B-Map_Eggman, byte_17D9B-Map_Eggman
		dc.w byte_17DB0-Map_Eggman, byte_17DB6-Map_Eggman
		dc.w byte_17DBC-Map_Eggman, byte_17DBD-Map_Eggman
		dc.w byte_17DC8-Map_Eggman
byte_17D26:	dc.b 6			; ...
		dc.b $EC, 1, 0,	$A, $E4
		dc.b $EC, 5, 0,	$C, $C
		dc.b $FC, $E, $20, $10,	$E4
		dc.b $FC, $E, $20, $1C,	4
		dc.b $14, $C, $20, $28,	$EC
		dc.b $14, 0, $20, $2C, $C
byte_17D45:	dc.b 2			; ...
		dc.b $E4, 4, 0,	0, $F4
		dc.b $EC, $D, 0, 2, $EC
byte_17D50:	dc.b 2			; ...
		dc.b $E4, 4, 0,	0, $F4
		dc.b $EC, $D, 0, $35, $EC
byte_17D5B:	dc.b 3			; ...
		dc.b $E4, 8, 0,	$3D, $F4
		dc.b $EC, 9, 0,	$40, $EC
		dc.b $EC, 5, 0,	$46, 4
byte_17D6B:	dc.b 3			; ...
		dc.b $E4, 8, 0,	$4A, $F4
		dc.b $EC, 9, 0,	$4D, $EC
		dc.b $EC, 5, 0,	$53, 4
byte_17D7B:	dc.b 3			; ...
		dc.b $E4, 8, 0,	$57, $F4
		dc.b $EC, 9, 0,	$5A, $EC
		dc.b $EC, 5, 0,	$60, 4
byte_17D8B:	dc.b 3			; ...
		dc.b $E4, 4, 0,	$64, 4
		dc.b $E4, 4, 0,	0, $F4
		dc.b $EC, $D, 0, $35, $EC
byte_17D9B:	dc.b 4			; ...
		dc.b $E4, 9, 0,	$66, $F4
		dc.b $E4, 8, 0,	$57, $F4
		dc.b $EC, 9, 0,	$5A, $EC
		dc.b $EC, 5, 0,	$60, 4
byte_17DB0:	dc.b 1			; ...
		dc.b 4,	5, 0, $2D, $22
byte_17DB6:	dc.b 1			; ...
		dc.b 4,	5, 0, $31, $22
byte_17DBC:	dc.b 0			; ...
byte_17DBD:	dc.b 2			; ...
		dc.b 0,	8, 1, $2A, $22
		dc.b 8,	8, $11,	$2A, $22
byte_17DC8:	dc.b 2			; ...
		dc.b $F8, $B, 1, $2D, $22
		dc.b 0,	1, 1, $39, $3A
		dc.b 0
; ---------------------------------------------------------------------------
; Sprite mappings - extra boss items (e.g. swinging ball on a chain in GHZ)
; ---------------------------------------------------------------------------
Map_BossItems:	dc.w byte_17DE4-Map_BossItems, byte_17DEA-Map_BossItems	; ...
		dc.w byte_17DF6-Map_BossItems, byte_17DFC-Map_BossItems
		dc.w byte_17E02-Map_BossItems, byte_17E08-Map_BossItems
		dc.w byte_17E1E-Map_BossItems, byte_17E2A-Map_BossItems
byte_17DE4:	dc.b 1			; ...
		dc.b $F8, 5, 0,	0, $F8
byte_17DEA:	dc.b 2			; ...
		dc.b $FC, 4, 0,	4, $F8
		dc.b $F8, 5, 0,	0, $F8
		dc.b 0
byte_17DF6:	dc.b 1			; ...
		dc.b $FC, 0, 0,	6, $FC
byte_17DFC:	dc.b 1			; ...
		dc.b $14, 9, 0,	7, $F4
byte_17E02:	dc.b 1			; ...
		dc.b $14, 5, 0,	$D, $F8
byte_17E08:	dc.b 4			; ...
		dc.b $F0, 4, 0,	$11, $F8
		dc.b $F8, 1, 0,	$13, $F8
		dc.b $F8, 1, 8,	$13, 0
		dc.b 8,	4, 0, $15, $F8
		dc.b 0
byte_17E1E:	dc.b 2			; ...
		dc.b 0,	5, 0, $17, 0
		dc.b 0,	0, 0, $1B, $10
		dc.b 0
byte_17E2A:	dc.b 2			; ...
		dc.b $18, 4, 0,	$1C, 0
		dc.b 0,	$B, 0, $1E, $10
		dc.b 0
; ---------------------------------------------------------------------------
; Object 77 - Robotnik (LZ)
; ---------------------------------------------------------------------------

Obj77:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj77_Index(pc,d0.w),d1
		jmp	Obj77_Index(pc,d1.w)
Obj77_Index:	dc.w Obj77_Main-Obj77_Index ; ...
		dc.w Obj77_ShipMain-Obj77_Index
		dc.w Obj77_FaceMain-Obj77_Index
		dc.w Obj77_FlameMain-Obj77_Index

Obj77_ObjData:	dc.b 2,	0		; ...
		dc.b 4,	1		; routine number, animation
		dc.b 6,	7

Obj77_Main:				; ...
		move.w	#$1E10,8(a0)
		move.w	#$5C0,$C(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$F,$20(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8
		move.b	#4,$18(a0)
		lea	Obj77_ObjData(pc),a2
		movea.l	a0,a1
		moveq	#2,d1
		bra.s	Obj77_LoadBoss

Obj77_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj77_ShipMain
		move.b	#$77,0(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Obj77_LoadBoss:				; ...
		bclr	#0,$22(a0)
		clr.b	$25(a1)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1C(a1)
		move.b	$18(a0),$18(a1)
		move.l	#$880000+Map_Eggman,4(a1)
		move.w	#$400,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.l	a0,$34(a1)
		dbf	d1,Obj77_Loop

Obj77_ShipMain:				; ...
		lea	($FFFFD000).w,a1
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj77_ShipIndex(pc,d0.w),d1
		jsr	Obj77_ShipIndex(pc,d1.w)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
Obj77_ShipIndex:dc.w loc_17F1E-Obj77_ShipIndex,	loc_17FA0-Obj77_ShipIndex ; ...
		dc.w loc_17FE0-Obj77_ShipIndex,	loc_1801E-Obj77_ShipIndex
		dc.w loc_180BC-Obj77_ShipIndex,	loc_180F6-Obj77_ShipIndex
		dc.w loc_1812A-Obj77_ShipIndex,	loc_18152-Obj77_ShipIndex

loc_17F1E:				; ...
		move.w	8(a1),d0
		cmpi.w	#$1DA0,d0
		bcs.s	loc_17F38
		move.w	#-$180,$12(a0)
		move.w	#$60,$10(a0)
		addq.b	#2,$25(a0)

loc_17F38:				; ...
		bsr.w	BossMove
		move.w	$38(a0),$C(a0)
		move.w	$30(a0),8(a0)

loc_17F48:				; ...
		tst.b	$3D(a0)
		bne.s	loc_17F8E
		tst.b	$22(a0)
		bmi.s	loc_17F92
		tst.b	$20(a0)
		bne.s	locret_17F8C
		tst.b	$3E(a0)
		bne.s	loc_17F70
		move.b	#$20,$3E(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l

loc_17F70:				; ...
		lea	($FFFFFB22).w,a1
		moveq	#0,d0
		tst.w	(a1)
		bne.s	loc_17F7E
		move.w	#$EEE,d0

loc_17F7E:				; ...
		move.w	d0,(a1)
		subq.b	#1,$3E(a0)
		bne.s	locret_17F8C
		move.b	#$F,$20(a0)

locret_17F8C:				; ...
		rts	

loc_17F8E:				; ...
		bra.w	BossDefeated

loc_17F92:				; ...
		moveq	#100,d0
		jsr	$880000+AddPoints
		move.b	#-1,$3D(a0)
		rts	

loc_17FA0:				; ...
		moveq	#-2,d0
		cmpi.w	#$1E48,$30(a0)
		bcs.s	loc_17FB6
		move.w	#$1E48,$30(a0)
		clr.w	$10(a0)
		addq.w	#1,d0

loc_17FB6:				; ...
		cmpi.w	#$500,$38(a0)
		bgt.s	loc_17FCA
		move.w	#$500,$38(a0)
		clr.w	$12(a0)
		addq.w	#1,d0

loc_17FCA:				; ...
		bne.s	loc_17FDC
		move.w	#$140,$10(a0)
		move.w	#-$200,$12(a0)
		addq.b	#2,$25(a0)

loc_17FDC:				; ...
		bra.w	loc_17F38

loc_17FE0:				; ...
		moveq	#-2,d0
		cmpi.w	#$1E70,$30(a0)
		bcs.s	loc_17FF6
		move.w	#$1E70,$30(a0)
		clr.w	$10(a0)
		addq.w	#1,d0

loc_17FF6:				; ...
		cmpi.w	#$4C0,$38(a0)
		bgt.s	loc_1800A
		move.w	#$4C0,$38(a0)
		clr.w	$12(a0)
		addq.w	#1,d0

loc_1800A:				; ...
		bne.s	loc_1801A
		move.w	#-$180,$12(a0)
		addq.b	#2,$25(a0)
		clr.b	$3F(a0)

loc_1801A:				; ...
		bra.w	loc_17F38

loc_1801E:				; ...
		cmpi.w	#$100,$38(a0)
		bgt.s	loc_1804E
		move.w	#$100,$38(a0)
		move.w	#$140,$10(a0)
		move.w	#-$80,$12(a0)
		tst.b	$3D(a0)
		beq.s	loc_18046
		asl	$10(a0)
		asl	$12(a0)

loc_18046:				; ...
		addq.b	#2,$25(a0)
		bra.w	loc_17F38

loc_1804E:				; ...
		bset	#0,$22(a0)
		addq.b	#2,$3F(a0)
		move.b	$3F(a0),d0
		jsr	$880000+(CalcSine).l
		tst.w	d1
		bpl.s	loc_1806C
		bclr	#0,$22(a0)

loc_1806C:				; ...
		asr.w	#4,d0
		swap	d0
		clr.w	d0
		add.l	$30(a0),d0
		swap	d0
		move.w	d0,8(a0)
		move.w	$12(a0),d0
		move.w	($FFFFD00C).w,d1
		sub.w	$C(a0),d1
		bcs.s	loc_180A2
		subi.w	#$48,d1
		bcs.s	loc_180A2
		asr.w	#1,d0
		subi.w	#$28,d1
		bcs.s	loc_180A2
		asr.w	#1,d0
		subi.w	#$28,d1
		bcs.s	loc_180A2
		moveq	#0,d0

loc_180A2:				; ...
		ext.l	d0
		asl.l	#8,d0
		tst.b	$3D(a0)
		beq.s	loc_180AE
		add.l	d0,d0

loc_180AE:				; ...
		add.l	d0,$38(a0)
		move.w	$38(a0),$C(a0)
		bra.w	loc_17F48

loc_180BC:				; ...
		moveq	#-2,d0
		cmpi.w	#$1F4C,$30(a0)
		bcs.s	loc_180D2
		move.w	#$1F4C,$30(a0)
		clr.w	$10(a0)
		addq.w	#1,d0

loc_180D2:				; ...
		cmpi.w	#$C0,$38(a0)
		bgt.s	loc_180E6
		move.w	#$C0,$38(a0)
		clr.w	$12(a0)
		addq.w	#1,d0

loc_180E6:				; ...
		bne.s	loc_180F2
		addq.b	#2,$25(a0)
		bclr	#0,$22(a0)

loc_180F2:				; ...
		bra.w	loc_17F38

loc_180F6:				; ...
		tst.b	$3D(a0)
		bne.s	loc_18112
		cmpi.w	#$1EC8,8(a1)
		blt.s	loc_18126
		cmpi.w	#$F0,$C(a1)
		bgt.s	loc_18126
		move.b	#$32,$3C(a0)

loc_18112:				; ...
		move.w	#$82,d0
		jsr	$880000+(PlaySound).l	; play LZ music
		bset	#0,$22(a0)
		addq.b	#2,$25(a0)

loc_18126:				; ...
		bra.w	loc_17F38

loc_1812A:				; ...
		tst.b	$3D(a0)
		bne.s	loc_18136
		subq.b	#1,$3C(a0)
		bne.s	loc_1814E

loc_18136:				; ...
		clr.b	$3C(a0)
		move.w	#$400,$10(a0)
		move.w	#-$40,$12(a0)
		clr.b	$3D(a0)
		addq.b	#2,$25(a0)

loc_1814E:				; ...
		bra.w	loc_17F38

loc_18152:				; ...
		cmpi.w	#$2030,($FFFFF72A).w
		bcc.s	loc_18160
		addq.w	#2,($FFFFF72A).w
		bra.s	loc_18166

loc_18160:				; ...
		tst.b	1(a0)
		bpl.s	Obj77_ShipDel

loc_18166:				; ...
		bra.w	loc_17F38

Obj77_ShipDel:				; ...
		jmp	$880000+DeleteObject

Obj77_FaceMain:				; ...
		movea.l	$34(a0),a1
		move.b	(a1),d0
		cmp.b	(a0),d0
		bne.s	Obj77_FaceDel
		moveq	#0,d0
		move.b	$25(a1),d0
		moveq	#1,d1
		tst.b	$3D(a0)
		beq.s	loc_1818C
		moveq	#$A,d1
		bra.s	loc_181A0

loc_1818C:				; ...
		tst.b	$20(a1)
		bne.s	loc_18196
		moveq	#5,d1
		bra.s	loc_181A0

loc_18196:				; ...
		cmpi.b	#4,($FFFFD024).w
		bcs.s	loc_181A0
		moveq	#4,d1

loc_181A0:				; ...
		move.b	d1,$1C(a0)
		cmpi.b	#$E,d0
		bne.s	loc_181B6
		move.b	#6,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj77_FaceDel

loc_181B6:				; ...
		bra.s	Obj77_Display

Obj77_FaceDel:				; ...
		jmp	$880000+DeleteObject

Obj77_FlameMain:			; ...
		move.b	#7,$1C(a0)
		movea.l	$34(a0),a1
		move.b	(a1),d0
		cmp.b	(a0),d0
		bne.s	Obj77_FlameDel
		cmpi.b	#$E,$25(a1)
		bne.s	loc_181F0
		move.b	#$B,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj77_FlameDel
		bra.s	loc_181F0
		tst.w	$10(a1)
		beq.s	loc_181F0
		move.b	#8,$1C(a0)

loc_181F0:				; ...
		bra.s	Obj77_Display

Obj77_FlameDel:				; ...
		jmp	$880000+DeleteObject

Obj77_Display:				; ...
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		move.b	$22(a1),$22(a0)
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#-4,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Object 73 - Robotnik (MZ)
; ---------------------------------------------------------------------------

Obj73:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj73_Index(pc,d0.w),d1
		jmp	Obj73_Index(pc,d1.w)
Obj73_Index:	dc.w Obj73_Main-Obj73_Index ; ...
		dc.w Obj73_ShipMain-Obj73_Index
		dc.w Obj73_FaceMain-Obj73_Index
		dc.w Obj73_FlameMain-Obj73_Index
		dc.w Obj73_TubeMain-Obj73_Index

Obj73_ObjData:	dc.b 2,	0, 4		; ...
		dc.b 4,	1, 4		; routine number, animation, priority
		dc.b 6,	7, 4
		dc.b 8,	0, 3

Obj73_Main:				; ...
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$F,$20(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8
		lea	Obj73_ObjData(pc),a2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj73_LoadBoss

Obj73_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj73_ShipMain
		move.b	#$73,0(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Obj73_LoadBoss:				; ...
		bclr	#0,$22(a0)
		clr.b	$25(a1)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1C(a1)
		move.b	(a2)+,$18(a1)
		move.l	#$880000+Map_Eggman,4(a1)
		move.w	#$400,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.l	a0,$34(a1)
		dbf	d1,Obj73_Loop	; repeat sequence 3 more times

Obj73_ShipMain:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj73_ShipIndex(pc,d0.w),d1
		jsr	Obj73_ShipIndex(pc,d1.w)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
Obj73_ShipIndex:dc.w loc_18302-Obj73_ShipIndex,	loc_183AA-Obj73_ShipIndex ; ...
		dc.w loc_184F6-Obj73_ShipIndex,	loc_1852C-Obj73_ShipIndex
		dc.w loc_18582-Obj73_ShipIndex

loc_18302:				; ...
		move.b	$3F(a0),d0
		addq.b	#2,$3F(a0)
		jsr	$880000+(CalcSine).l
		asr.w	#2,d0
		move.w	d0,$12(a0)
		move.w	#-$100,$10(a0)
		bsr.w	BossMove
		cmpi.w	#$1910,$30(a0)
		bne.s	loc_18334
		addq.b	#2,$25(a0)
		clr.b	$28(a0)
		clr.l	$10(a0)

loc_18334:				; ...
		jsr	$880000+(RandomNumber).l
		move.b	d0,$34(a0)

loc_1833E:				; ...
		move.w	$38(a0),$C(a0)
		move.w	$30(a0),8(a0)
		cmpi.b	#4,$25(a0)
		bcc.s	locret_18390
		tst.b	$22(a0)
		bmi.s	loc_18392
		tst.b	$20(a0)
		bne.s	locret_18390
		tst.b	$3E(a0)
		bne.s	loc_18374
		move.b	#$28,$3E(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

loc_18374:				; ...
		lea	($FFFFFB22).w,a1
		moveq	#0,d0
		tst.w	(a1)
		bne.s	loc_18382
		move.w	#$EEE,d0

loc_18382:				; ...
		move.w	d0,(a1)
		subq.b	#1,$3E(a0)
		bne.s	locret_18390
		move.b	#$F,$20(a0)

locret_18390:				; ...
		rts	

loc_18392:				; ...
		moveq	#100,d0
		jsr	$880000+AddPoints
		move.b	#4,$25(a0)
		move.w	#$B4,$3C(a0)
		clr.w	$10(a0)
		rts	

loc_183AA:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		move.w	off_183C2(pc,d0.w),d0
		jsr	off_183C2(pc,d0.w)
		andi.b	#6,$28(a0)
		bra.w	loc_1833E
off_183C2:	dc.w loc_183CA-off_183C2 ; ...
		dc.w Obj73_MakeLava2-off_183C2
		dc.w loc_183CA-off_183C2
		dc.w Obj73_MakeLava2-off_183C2

loc_183CA:				; ...
		tst.w	$10(a0)
		bne.s	loc_183FE
		moveq	#$40,d0
		cmpi.w	#$22C,$38(a0)
		beq.s	loc_183E6
		bcs.s	loc_183DE
		neg.w	d0

loc_183DE:				; ...
		move.w	d0,$12(a0)
		bra.w	BossMove

loc_183E6:				; ...
		move.w	#$200,$10(a0)
		move.w	#$100,$12(a0)
		btst	#0,$22(a0)
		bne.s	loc_183FE
		neg.w	$10(a0)

loc_183FE:				; ...
		cmpi.b	#$18,$3E(a0)
		bcc.s	Obj73_MakeLava
		bsr.w	BossMove
		subq.w	#4,$12(a0)

Obj73_MakeLava:				; ...
		subq.b	#1,$34(a0)
		bcc.s	loc_1845C
		jsr	$880000+SingleObjLoad
		bne.s	loc_1844A
		move.b	#$14,0(a1)	; load lava ball object
		move.w	#$2E8,$C(a1)	; set Y	position
		jsr	$880000+(RandomNumber).l
		andi.l	#$FFFF,d0
		divu.w	#$50,d0
		swap	d0
		addi.w	#$1878,d0
		move.w	d0,8(a1)
		lsr.b	#7,d1
		move.w	#$FF,$28(a1)

loc_1844A:				; ...
		jsr	$880000+(RandomNumber).l
		andi.b	#$1F,d0
		addi.b	#$40,d0
		move.b	d0,$34(a0)

loc_1845C:				; ...
		btst	#0,$22(a0)
		beq.s	loc_18474
		cmpi.w	#$1910,$30(a0)
		blt.s	locret_1849C
		move.w	#$1910,$30(a0)
		bra.s	loc_18482

loc_18474:				; ...
		cmpi.w	#$1830,$30(a0)
		bgt.s	locret_1849C
		move.w	#$1830,$30(a0)

loc_18482:				; ...
		clr.w	$10(a0)
		move.w	#-$180,$12(a0)
		cmpi.w	#$22C,$38(a0)
		bcc.s	loc_18498
		neg.w	$12(a0)

loc_18498:				; ...
		addq.b	#2,$28(a0)

locret_1849C:				; ...
		rts	

Obj73_MakeLava2:			; ...
		bsr.w	BossMove
		move.w	$38(a0),d0
		subi.w	#$22C,d0
		bgt.s	locret_184F4
		move.w	#$22C,d0
		tst.w	$12(a0)
		beq.s	loc_184EA
		clr.w	$12(a0)
		move.w	#$50,$3C(a0)
		bchg	#0,$22(a0)
		jsr	$880000+SingleObjLoad
		bne.s	loc_184EA
		move.w	$30(a0),8(a1)
		move.w	$38(a0),$C(a1)
		addi.w	#$18,$C(a1)
		move.b	#$74,(a1)	; load lava ball object
		move.b	#1,$28(a1)

loc_184EA:				; ...
		subq.w	#1,$3C(a0)
		bne.s	locret_184F4
		addq.b	#2,$28(a0)

locret_184F4:				; ...
		rts	

loc_184F6:				; ...
		subq.w	#1,$3C(a0)
		bmi.s	loc_18500
		bra.w	BossDefeated

loc_18500:				; ...
		bset	#0,$22(a0)
		bclr	#7,$22(a0)
		clr.w	$10(a0)
		addq.b	#2,$25(a0)
		move.w	#-$26,$3C(a0)
		tst.b	($FFFFF7A7).w
		bne.s	locret_1852A
		move.b	#1,($FFFFF7A7).w
		clr.w	$12(a0)

locret_1852A:				; ...
		rts	

loc_1852C:				; ...
		addq.w	#1,$3C(a0)
		beq.s	loc_18544
		bpl.s	loc_1854E
		cmpi.w	#$270,$38(a0)
		bcc.s	loc_18544
		addi.w	#$18,$12(a0)
		bra.s	loc_1857A

loc_18544:				; ...
		clr.w	$12(a0)
		clr.w	$3C(a0)
		bra.s	loc_1857A

loc_1854E:				; ...
		cmpi.w	#$30,$3C(a0)
		bcs.s	loc_18566
		beq.s	loc_1856C
		cmpi.w	#$38,$3C(a0)
		bcs.s	loc_1857A
		addq.b	#2,$25(a0)
		bra.s	loc_1857A

loc_18566:				; ...
		subq.w	#8,$12(a0)
		bra.s	loc_1857A

loc_1856C:				; ...
		clr.w	$12(a0)
		move.w	#$83,d0
		jsr	$880000+(PlaySound).l	; play MZ music

loc_1857A:				; ...
		bsr.w	BossMove
		bra.w	loc_1833E

loc_18582:				; ...
		move.w	#$500,$10(a0)
		move.w	#-$40,$12(a0)
		cmpi.w	#$1960,($FFFFF72A).w
		bcc.s	loc_1859C
		addq.w	#2,($FFFFF72A).w
		bra.s	loc_185A2

loc_1859C:				; ...
		tst.b	1(a0)
		bpl.s	Obj73_ShipDel

loc_185A2:				; ...
		bsr.w	BossMove
		bra.w	loc_1833E

Obj73_ShipDel:				; ...
		jmp	$880000+DeleteObject

Obj73_FaceMain:				; ...
		moveq	#0,d0
		moveq	#1,d1
		movea.l	$34(a0),a1
		move.b	$25(a1),d0
		subq.w	#2,d0
		bne.s	loc_185D2
		btst	#1,$28(a1)
		beq.s	loc_185DA
		tst.w	$12(a1)
		bne.s	loc_185DA
		moveq	#4,d1
		bra.s	loc_185EE

loc_185D2:				; ...
		subq.b	#2,d0
		bmi.s	loc_185DA
		moveq	#$A,d1
		bra.s	loc_185EE

loc_185DA:				; ...
		tst.b	$20(a1)
		bne.s	loc_185E4
		moveq	#5,d1
		bra.s	loc_185EE

loc_185E4:				; ...
		cmpi.b	#4,($FFFFD024).w
		bcs.s	loc_185EE
		moveq	#4,d1

loc_185EE:				; ...
		move.b	d1,$1C(a0)
		subq.b	#4,d0
		bne.s	loc_18602
		move.b	#6,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj73_FaceDel

loc_18602:				; ...
		bra.s	Obj73_Display

Obj73_FaceDel:				; ...
		jmp	$880000+DeleteObject

Obj73_FlameMain:			; ...
		move.b	#7,$1C(a0)
		movea.l	$34(a0),a1
		cmpi.b	#8,$25(a1)
		blt.s	loc_1862A
		move.b	#$B,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj73_FlameDel
		bra.s	loc_18636

loc_1862A:				; ...
		tst.w	$10(a1)
		beq.s	loc_18636
		move.b	#8,$1C(a0)

loc_18636:				; ...
		bra.s	Obj73_Display

Obj73_FlameDel:				; ...
		jmp	$880000+DeleteObject

Obj73_Display:				; ...
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite

loc_1864A:				; ...
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		move.b	$22(a1),$22(a0)
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#-4,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite

Obj73_TubeMain:				; ...
		movea.l	$34(a0),a1
		cmpi.b	#8,$25(a1)
		bne.s	loc_18688
		tst.b	1(a0)
		bpl.s	Obj73_TubeDel

loc_18688:				; ...
		move.l	#$880000+Map_BossItems,4(a0)
		move.w	#$246C,2(a0)
		move.b	#4,$1A(a0)
		bra.s	loc_1864A

Obj73_TubeDel:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 74 - lava that	Robotnik drops (MZ)
; ---------------------------------------------------------------------------

Obj74:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj74_Index(pc,d0.w),d0
		jsr	Obj74_Index(pc,d0.w)
		jmp	$880000+DisplaySprite
Obj74_Index:	dc.w Obj74_Main-Obj74_Index ; ...
		dc.w Obj74_Action-Obj74_Index
		dc.w loc_18886-Obj74_Index
		dc.w Obj74_Delete3-Obj74_Index

Obj74_Main:				; ...
		move.b	#8,$16(a0)
		move.b	#8,$17(a0)
		move.l	#$880000+Map_obj14,4(a0)
		move.w	#$345,2(a0)
		move.b	#4,1(a0)
		move.b	#5,$18(a0)
		move.w	$C(a0),$38(a0)
		move.b	#8,$19(a0)
		addq.b	#2,$24(a0)
		tst.b	$28(a0)
		bne.s	loc_1870A
		move.b	#$8B,$20(a0)
		addq.b	#2,$24(a0)
		bra.w	loc_18886

loc_1870A:				; ...
		move.b	#$1E,$29(a0)
		move.w	#$AE,d0
		jsr	$880000+(PlaySound_Special).l ;	play lava sound

Obj74_Action:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj74_Index2(pc,d0.w),d0
		jsr	Obj74_Index2(pc,d0.w)
		jsr	$880000+SpeedToPos
		lea	$880000+(Ani_obj14).l,a1
		jsr	$880000+AnimateSprite
		cmpi.w	#$2E8,$C(a0)
		bhi.s	Obj74_Delete
		rts	

Obj74_Delete:				; ...
		jmp	$880000+DeleteObject
Obj74_Index2:	dc.w Obj74_Drop-Obj74_Index2 ; ...
		dc.w Obj74_MakeFlame-Obj74_Index2
		dc.w Obj74_Duplicate-Obj74_Index2
		dc.w Obj74_FallEdge-Obj74_Index2

Obj74_Drop:				; ...
		bset	#1,$22(a0)
		subq.b	#1,$29(a0)
		bpl.s	locret_18780
		move.b	#$8B,$20(a0)
		clr.b	$28(a0)
		addi.w	#$18,$12(a0)
		bclr	#1,$22(a0)
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_18780
		addq.b	#2,$25(a0)

locret_18780:				; ...
		rts	

Obj74_MakeFlame:			; ...
		subq.w	#2,$C(a0)
		bset	#7,2(a0)
		move.w	#$A0,$10(a0)
		clr.w	$12(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#3,$29(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	loc_187CA
		lea	(a1),a3
		lea	(a0),a2
		moveq	#3,d0

Obj74_Loop:				; ...
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		dbf	d0,Obj74_Loop
		neg.w	$10(a1)
		addq.b	#2,$25(a1)

loc_187CA:				; ...
		addq.b	#2,$25(a0)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj74_Duplicate2:			; ...
		jsr	$880000+SingleObjLoad2
		bne.s	locret_187EE
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.b	#$74,(a1)
		move.w	#$67,$28(a1)

locret_187EE:				; ...
		rts	
; End of function Obj74_Duplicate2


Obj74_Duplicate:			; ...
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	loc_18826
		move.w	8(a0),d0
		cmpi.w	#$1940,d0
		bgt.s	loc_1882C
		move.w	$30(a0),d1
		cmp.w	d0,d1
		beq.s	loc_1881E
		andi.w	#$10,d0
		andi.w	#$10,d1
		cmp.w	d0,d1
		beq.s	loc_1881E
		bsr.s	Obj74_Duplicate2
		move.w	8(a0),$32(a0)

loc_1881E:				; ...
		move.w	8(a0),$30(a0)
		rts	

loc_18826:				; ...
		addq.b	#2,$25(a0)
		rts	

loc_1882C:				; ...
		addq.b	#2,$24(a0)
		rts	

Obj74_FallEdge:				; ...
		bclr	#1,$22(a0)
		addi.w	#$24,$12(a0)	; make flame fall
		move.w	8(a0),d0
		sub.w	$32(a0),d0
		bpl.s	loc_1884A
		neg.w	d0

loc_1884A:				; ...
		cmpi.w	#$12,d0
		bne.s	loc_18856
		bclr	#7,2(a0)

loc_18856:				; ...
		jsr	$880000+ObjHitFloor
		tst.w	d1
		bpl.s	locret_1887E
		subq.b	#1,$29(a0)
		beq.s	Obj74_Delete2
		clr.w	$12(a0)
		move.w	$32(a0),8(a0)
		move.w	$38(a0),$C(a0)
		bset	#7,2(a0)
		subq.b	#2,$25(a0)

locret_1887E:				; ...
		rts	

Obj74_Delete2:				; ...
		jmp	$880000+DeleteObject

loc_18886:				; ...
		bset	#7,2(a0)
		subq.b	#1,$29(a0)
		bne.s	Obj74_Animate
		move.b	#1,$1C(a0)
		subq.w	#4,$C(a0)
		clr.b	$20(a0)

Obj74_Animate:				; ...
		lea	$880000+(Ani_obj14).l,a1
		jmp	$880000+AnimateSprite

Obj74_Delete3:				; ...
		jmp	$880000+DeleteObject

Obj7A_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 7A - Robotnik (SLZ)
; ---------------------------------------------------------------------------

Obj7A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7A_Index(pc,d0.w),d1
		jmp	Obj7A_Index(pc,d1.w)
Obj7A_Index:	dc.w Obj7A_Main-Obj7A_Index ; ...
		dc.w Obj7A_ShipMain-Obj7A_Index
		dc.w Obj7A_FaceMain-Obj7A_Index
		dc.w Obj7A_FlameMain-Obj7A_Index
		dc.w Obj7A_TubeMain-Obj7A_Index

Obj7A_ObjData:	dc.b 2,	0, 4		; ...
		dc.b 4,	1, 4		; routine number, animation, priority
		dc.b 6,	7, 4
		dc.b 8,	0, 3

Obj7A_Main:				; ...
		move.w	#$2188,8(a0)
		move.w	#$228,$C(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$F,$20(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8
		lea	Obj7A_ObjData(pc),a2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj7A_LoadBoss

Obj7A_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_1895C
		move.b	#$7A,0(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Obj7A_LoadBoss:				; ...
		bclr	#0,$22(a0)
		clr.b	$25(a1)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1C(a1)
		move.b	(a2)+,$18(a1)
		move.l	#$880000+Map_Eggman,4(a1)
		move.w	#$400,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.l	a0,$34(a1)
		dbf	d1,Obj7A_Loop	; repeat sequence 3 more times

loc_1895C:				; ...
		lea	($FFFFD040).w,a1
		lea	$2A(a0),a2
		moveq	#$5E,d0
		moveq	#$3E,d1

loc_18968:				; ...
		cmp.b	(a1),d0
		bne.s	loc_18974
		tst.b	$28(a1)
		beq.s	loc_18974
		move.w	a1,(a2)+

loc_18974:				; ...
		adda.w	#$40,a1
		dbf	d1,loc_18968

Obj7A_ShipMain:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj7A_ShipIndex(pc,d0.w),d0
		jsr	Obj7A_ShipIndex(pc,d0.w)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
Obj7A_ShipIndex:dc.w loc_189B8-Obj7A_ShipIndex,	loc_18A5E-Obj7A_ShipIndex ; ...
		dc.w Obj7A_MakeBall-Obj7A_ShipIndex, loc_18B48-Obj7A_ShipIndex
		dc.w loc_18B80-Obj7A_ShipIndex,	loc_18BC6-Obj7A_ShipIndex

loc_189B8:				; ...
		move.w	#-$100,$10(a0)
		cmpi.w	#$2120,$30(a0)
		bcc.s	loc_189CA
		addq.b	#2,$25(a0)

loc_189CA:				; ...
		bsr.w	BossMove
		move.b	$3F(a0),d0
		addq.b	#2,$3F(a0)
		jsr	$880000+(CalcSine).l
		asr.w	#6,d0
		add.w	$38(a0),d0
		move.w	d0,$C(a0)
		move.w	$30(a0),8(a0)
		bra.s	loc_189FE

loc_189EE:				; ...
		bsr.w	BossMove
		move.w	$38(a0),$C(a0)
		move.w	$30(a0),8(a0)

loc_189FE:				; ...
		cmpi.b	#6,$25(a0)
		bcc.s	locret_18A44
		tst.b	$22(a0)
		bmi.s	loc_18A46
		tst.b	$20(a0)
		bne.s	locret_18A44
		tst.b	$3E(a0)
		bne.s	loc_18A28
		move.b	#$20,$3E(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

loc_18A28:				; ...
		lea	($FFFFFB22).w,a1
		moveq	#0,d0
		tst.w	(a1)
		bne.s	loc_18A36
		move.w	#$EEE,d0

loc_18A36:				; ...
		move.w	d0,(a1)
		subq.b	#1,$3E(a0)
		bne.s	locret_18A44
		move.b	#$F,$20(a0)

locret_18A44:				; ...
		rts	

loc_18A46:				; ...
		moveq	#100,d0
		jsr	$880000+AddPoints
		move.b	#6,$25(a0)
		move.b	#$78,$3C(a0)
		clr.w	$10(a0)
		rts	

loc_18A5E:				; ...
		move.w	$30(a0),d0
		move.w	#$200,$10(a0)
		btst	#0,$22(a0)
		bne.s	loc_18A7C
		neg.w	$10(a0)
		cmpi.w	#$2008,d0
		bgt.s	loc_18A88
		bra.s	loc_18A82

loc_18A7C:				; ...
		cmpi.w	#$2138,d0
		blt.s	loc_18A88

loc_18A82:				; ...
		bchg	#0,$22(a0)

loc_18A88:				; ...
		move.w	8(a0),d0
		moveq	#-1,d1
		moveq	#2,d2
		lea	$2A(a0),a2
		moveq	#$28,d4
		tst.w	$10(a0)
		bpl.s	loc_18A9E
		neg.w	d4

loc_18A9E:				; ...
		move.w	(a2)+,d1
		movea.l	d1,a3
		btst	#3,$22(a3)
		bne.s	loc_18AB4
		move.w	8(a3),d3
		add.w	d4,d3
		sub.w	d0,d3
		beq.s	loc_18AC0

loc_18AB4:				; ...
		dbf	d2,loc_18A9E
		move.b	d2,$28(a0)
		bra.w	loc_189CA

loc_18AC0:				; ...
		move.b	d2,$28(a0)
		addq.b	#2,$25(a0)
		move.b	#$28,$3C(a0)
		bra.w	loc_189CA

Obj7A_MakeBall:				; ...
		cmpi.b	#$28,$3C(a0)
		bne.s	loc_18B36
		moveq	#-1,d0
		move.b	$28(a0),d0
		ext.w	d0
		bmi.s	loc_18B40
		subq.w	#2,d0
		neg.w	d0
		add.w	d0,d0
		lea	$2A(a0),a1
		move.w	(a1,d0.w),d0
		movea.l	d0,a2
		lea	($FFFFD040).w,a1
		moveq	#$3E,d1

loc_18AFA:				; ...
		cmp.l	$3C(a1),d0
		beq.s	loc_18B40
		adda.w	#$40,a1
		dbf	d1,loc_18AFA
		move.l	a0,-(sp)
		lea	(a2),a0
		jsr	$880000+SingleObjLoad2
		movea.l	(sp)+,a0
		bne.s	loc_18B40
		move.b	#$7B,(a1)	; load spiked ball object
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		addi.w	#$20,$C(a1)
		move.b	$22(a2),$22(a1)
		move.l	a2,$3C(a1)

loc_18B36:				; ...
		subq.b	#1,$3C(a0)
		beq.s	loc_18B40
		bra.w	loc_189FE

loc_18B40:				; ...
		subq.b	#2,$25(a0)
		bra.w	loc_189CA

loc_18B48:				; ...
		subq.b	#1,$3C(a0)
		bmi.s	loc_18B52
		bra.w	BossDefeated

loc_18B52:				; ...
		addq.b	#2,$25(a0)
		clr.w	$12(a0)
		bset	#0,$22(a0)
		bclr	#7,$22(a0)
		clr.w	$10(a0)
		move.b	#-$18,$3C(a0)
		tst.b	($FFFFF7A7).w
		bne.s	loc_18B7C
		move.b	#1,($FFFFF7A7).w

loc_18B7C:				; ...
		bra.w	loc_189FE

loc_18B80:				; ...
		addq.b	#1,$3C(a0)
		beq.s	loc_18B90
		bpl.s	loc_18B96
		addi.w	#$18,$12(a0)
		bra.s	loc_18BC2

loc_18B90:				; ...
		clr.w	$12(a0)
		bra.s	loc_18BC2

loc_18B96:				; ...
		cmpi.b	#$20,$3C(a0)
		bcs.s	loc_18BAE
		beq.s	loc_18BB4
		cmpi.b	#$2A,$3C(a0)
		bcs.s	loc_18BC2
		addq.b	#2,$25(a0)
		bra.s	loc_18BC2

loc_18BAE:				; ...
		subq.w	#8,$12(a0)
		bra.s	loc_18BC2

loc_18BB4:				; ...
		clr.w	$12(a0)
		move.w	#$84,d0
		jsr	$880000+(PlaySound).l	; play SLZ music

loc_18BC2:				; ...
		bra.w	loc_189EE

loc_18BC6:				; ...
		move.w	#$400,$10(a0)
		move.w	#-$40,$12(a0)
		cmpi.w	#$2160,($FFFFF72A).w
		bcc.s	loc_18BE0
		addq.w	#2,($FFFFF72A).w
		bra.s	loc_18BE8

loc_18BE0:				; ...
		tst.b	1(a0)
		bpl.w	Obj7A_Delete

loc_18BE8:				; ...
		bsr.w	BossMove
		bra.w	loc_189CA

Obj7A_FaceMain:				; ...
		moveq	#0,d0
		moveq	#1,d1
		movea.l	$34(a0),a1
		move.b	$25(a1),d0
		cmpi.b	#6,d0
		bmi.s	loc_18C06
		moveq	#$A,d1
		bra.s	loc_18C1A

loc_18C06:				; ...
		tst.b	$20(a1)
		bne.s	loc_18C10
		moveq	#5,d1
		bra.s	loc_18C1A

loc_18C10:				; ...
		cmpi.b	#4,($FFFFD024).w
		bcs.s	loc_18C1A
		moveq	#4,d1

loc_18C1A:				; ...
		move.b	d1,$1C(a0)
		cmpi.b	#$A,d0
		bne.s	loc_18C32
		move.b	#6,$1C(a0)
		tst.b	1(a0)
		bpl.w	Obj7A_Delete

loc_18C32:				; ...
		bra.s	loc_18C6C

Obj7A_FlameMain:			; ...
		move.b	#8,$1C(a0)
		movea.l	$34(a0),a1
		cmpi.b	#$A,$25(a1)
		bne.s	loc_18C56
		tst.b	1(a0)
		bpl.w	Obj7A_Delete
		move.b	#$B,$1C(a0)
		bra.s	loc_18C6C

loc_18C56:				; ...
		cmpi.b	#8,$25(a1)
		bgt.s	loc_18C6C
		cmpi.b	#4,$25(a1)
		blt.s	loc_18C6C
		move.b	#7,$1C(a0)

loc_18C6C:				; ...
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite

loc_18C78:				; ...
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		move.b	$22(a1),$22(a0)
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#-4,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite

Obj7A_TubeMain:				; ...
		movea.l	$34(a0),a1
		cmpi.b	#$A,$25(a1)
		bne.s	loc_18CB8
		tst.b	1(a0)
		bpl.w	Obj7A_Delete

loc_18CB8:				; ...
		move.l	#$880000+Map_BossItems,4(a0)
		move.w	#$246C,2(a0)
		move.b	#3,$1A(a0)
		bra.s	loc_18C78
; ---------------------------------------------------------------------------
; Object 7B - exploding	spikeys	that Robotnik drops (SLZ)
; ---------------------------------------------------------------------------

Obj7B:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj7B_Index(pc,d0.w),d0
		jsr	Obj7B_Index(pc,d0.w)
		move.w	$30(a0),d0
		andi.w	#$FF80,d0
		move.w	($FFFFF700).w,d1
		subi.w	#$80,d1
		andi.w	#$FF80,d1
		sub.w	d1,d0
		bmi.w	Obj7A_Delete
		cmpi.w	#$280,d0
		bhi.w	Obj7A_Delete
		jmp	$880000+DisplaySprite
Obj7B_Index:	dc.w Obj7B_Main-Obj7B_Index ; ...
		dc.w Obj7B_Fall-Obj7B_Index
		dc.w loc_18DC6-Obj7B_Index
		dc.w loc_18EAA-Obj7B_Index
		dc.w Obj7B_Explode-Obj7B_Index
		dc.w Obj7B_MoveFrag-Obj7B_Index

Obj7B_Main:				; ...
		move.l	#$880000+Map_obj5Ea,4(a0)
		move.w	#$518,2(a0)
		move.b	#1,$1A(a0)
		ori.b	#4,1(a0)
		move.b	#4,$18(a0)
		move.b	#$8B,$20(a0)
		move.b	#$C,$19(a0)
		movea.l	$3C(a0),a1
		move.w	8(a1),$30(a0)
		move.w	$C(a1),$34(a0)
		bset	#0,$22(a0)
		move.w	8(a0),d0
		cmp.w	8(a1),d0
		bgt.s	loc_18D68
		bclr	#0,$22(a0)
		move.b	#2,$3A(a0)

loc_18D68:				; ...
		addq.b	#2,$24(a0)

Obj7B_Fall:				; ...
		jsr	$880000+ObjectFall
		movea.l	$3C(a0),a1
		lea	$880000+(word_19018).l,a2
		moveq	#0,d0
		move.b	$1A(a1),d0
		move.w	8(a0),d1
		sub.w	$30(a0),d1
		bcc.s	loc_18D8E
		addq.w	#2,d0

loc_18D8E:				; ...
		add.w	d0,d0
		move.w	$34(a0),d1
		add.w	(a2,d0.w),d1
		cmp.w	$C(a0),d1
		bgt.s	locret_18DC4
		movea.l	$3C(a0),a1
		moveq	#2,d1
		btst	#0,$22(a0)
		beq.s	loc_18DAE
		moveq	#0,d1

loc_18DAE:				; ...
		move.w	#$F0,$28(a0)
		move.b	#10,$1F(a0)	; set frame duration to	10 frames
		move.b	$1F(a0),$1E(a0)
		bra.w	loc_18FA2

locret_18DC4:				; ...
		rts	

loc_18DC6:				; ...
		movea.l	$3C(a0),a1
		moveq	#0,d0
		move.b	$3A(a0),d0
		sub.b	$3A(a1),d0
		beq.s	loc_18E2A
		bcc.s	loc_18DDA
		neg.b	d0

loc_18DDA:				; ...
		move.w	#-$818,d1
		move.w	#-$114,d2
		cmpi.b	#1,d0
		beq.s	loc_18E00
		move.w	#-$960,d1
		move.w	#-$F4,d2
		cmpi.w	#$9C0,$38(a1)
		blt.s	loc_18E00
		move.w	#-$A20,d1
		move.w	#-$80,d2

loc_18E00:				; ...
		move.w	d1,$12(a0)
		move.w	d2,$10(a0)
		move.w	8(a0),d0
		sub.w	$30(a0),d0
		bcc.s	loc_18E16
		neg.w	$10(a0)

loc_18E16:				; ...
		move.b	#1,$1A(a0)
		move.w	#$20,$28(a0)
		addq.b	#2,$24(a0)
		bra.w	loc_18EAA

loc_18E2A:				; ...
		lea	$880000+(word_19018).l,a2
		moveq	#0,d0
		move.b	$1A(a1),d0
		move.w	#$28,d2
		move.w	8(a0),d1
		sub.w	$30(a0),d1
		bcc.s	loc_18E48
		neg.w	d2
		addq.w	#2,d0

loc_18E48:				; ...
		add.w	d0,d0
		move.w	$34(a0),d1
		add.w	(a2,d0.w),d1
		move.w	d1,$C(a0)
		add.w	$30(a0),d2
		move.w	d2,8(a0)
		clr.w	$E(a0)
		clr.w	$A(a0)
		subq.w	#1,$28(a0)
		bne.s	loc_18E7A
		move.w	#$20,$28(a0)
		move.b	#8,$24(a0)
		rts	

loc_18E7A:				; ...
		cmpi.w	#$78,$28(a0)
		bne.s	loc_18E88
		move.b	#5,$1F(a0)

loc_18E88:				; ...
		cmpi.w	#$3C,$28(a0)
		bne.s	loc_18E96
		move.b	#2,$1F(a0)

loc_18E96:				; ...
		subq.b	#1,$1E(a0)
		bgt.s	locret_18EA8
		bchg	#0,$1A(a0)
		move.b	$1F(a0),$1E(a0)

locret_18EA8:				; ...
		rts	

loc_18EAA:				; ...
		lea	($FFFFD040).w,a1
		moveq	#$7A,d0
		moveq	#$40,d1
		moveq	#$3E,d2

loc_18EB4:				; ...
		cmp.b	(a1),d0
		beq.s	loc_18EC0
		adda.w	d1,a1
		dbf	d2,loc_18EB4
		bra.s	loc_18F38

loc_18EC0:				; ...
		move.w	8(a1),d0
		move.w	$C(a1),d1
		move.w	8(a0),d2
		move.w	$C(a0),d3
		lea	byte_19022(pc),a2
		lea	byte_19026(pc),a3
		move.b	(a2)+,d4
		ext.w	d4
		add.w	d4,d0
		move.b	(a3)+,d4
		ext.w	d4
		add.w	d4,d2
		cmp.w	d0,d2
		bcs.s	loc_18F38
		move.b	(a2)+,d4
		ext.w	d4
		add.w	d4,d0
		move.b	(a3)+,d4
		ext.w	d4
		add.w	d4,d2
		cmp.w	d2,d0
		bcs.s	loc_18F38
		move.b	(a2)+,d4
		ext.w	d4
		add.w	d4,d1
		move.b	(a3)+,d4
		ext.w	d4
		add.w	d4,d3
		cmp.w	d1,d3
		bcs.s	loc_18F38
		move.b	(a2)+,d4
		ext.w	d4
		add.w	d4,d1
		move.b	(a3)+,d4
		ext.w	d4
		add.w	d4,d3
		cmp.w	d3,d1
		bcs.s	loc_18F38
		addq.b	#2,$24(a0)
		clr.w	$28(a0)
		clr.b	$20(a1)
		subq.b	#1,$21(a1)
		bne.s	loc_18F38
		bset	#7,$22(a1)
		clr.w	$10(a0)
		clr.w	$12(a0)

loc_18F38:				; ...
		tst.w	$12(a0)
		bpl.s	loc_18F5C
		jsr	$880000+ObjectFall
		move.w	$34(a0),d0
		subi.w	#$2F,d0
		cmp.w	$C(a0),d0
		bgt.s	loc_18F58
		jsr	$880000+ObjectFall

loc_18F58:				; ...
		bra.w	loc_18E7A

loc_18F5C:				; ...
		jsr	$880000+ObjectFall
		movea.l	$3C(a0),a1
		lea	$880000+(word_19018).l,a2
		moveq	#0,d0
		move.b	$1A(a1),d0
		move.w	8(a0),d1
		sub.w	$30(a0),d1
		bcc.s	loc_18F7E
		addq.w	#2,d0

loc_18F7E:				; ...
		add.w	d0,d0
		move.w	$34(a0),d1
		add.w	(a2,d0.w),d1
		cmp.w	$C(a0),d1
		bgt.s	loc_18F58
		movea.l	$3C(a0),a1
		moveq	#2,d1
		tst.w	$10(a0)
		bmi.s	loc_18F9C
		moveq	#0,d1

loc_18F9C:				; ...
		move.w	#0,$28(a0)

loc_18FA2:				; ...
		move.b	d1,$3A(a1)
		move.b	d1,$3A(a0)
		cmp.b	$1A(a1),d1
		beq.s	loc_19008
		bclr	#3,$22(a1)
		beq.s	loc_19008
		clr.b	$25(a1)
		move.b	#2,$24(a1)
		lea	($FFFFD000).w,a2
		move.w	$12(a0),$12(a2)
		neg.w	$12(a2)
		cmpi.b	#1,$1A(a1)
		bne.s	loc_18FDC
		asr	$12(a2)

loc_18FDC:				; ...
		bset	#1,$22(a2)
		bclr	#3,$22(a2)
		clr.b	$3C(a2)
		move.l	a0,-(sp)
		lea	(a2),a0
		jsr	$880000+Obj01_ChkRoll
		movea.l	(sp)+,a0
		move.b	#2,$24(a2)
		move.w	#$CC,d0
		jsr	$880000+(PlaySound_Special).l ;	play "spring" sound

loc_19008:				; ...
		clr.w	$10(a0)
		clr.w	$12(a0)
		addq.b	#2,$24(a0)
		bra.w	loc_18E7A
word_19018:	dc.w $FFF8, $FFE4, $FFD1, $FFE4, $FFF8 ; ...
byte_19022:	dc.b $E8, $30, $E8, $30	; ...
byte_19026:	dc.b 8,	$F0, 8,	$F0	; ...

Obj7B_Explode:				; ...
		move.b	#$3F,(a0)
		clr.b	$24(a0)
		cmpi.w	#$20,$28(a0)
		beq.s	Obj7B_MakeFrag
		rts	

Obj7B_MakeFrag:				; ...
		move.w	$34(a0),$C(a0)
		moveq	#3,d1
		lea	Obj7B_FragSpeed(pc),a2

Obj7B_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	loc_1909A
		move.b	#$7B,(a1)	; load shrapnel	object
		move.b	#$A,$24(a1)
		move.l	#$880000+Map_obj7B,4(a1)
		move.b	#3,$18(a1)
		move.w	#$518,2(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)
		move.w	(a2)+,$10(a1)
		move.w	(a2)+,$12(a1)
		move.b	#$98,$20(a1)
		ori.b	#4,1(a1)
		bset	#7,1(a1)
		move.b	#$C,$19(a1)

loc_1909A:				; ...
		dbf	d1,Obj7B_Loop	; repeat sequence 3 more times
		rts	
Obj7B_FragSpeed:dc.w $FF00, $FCC0	; ...
		dc.w $FF60, $FDC0	; horizontal, vertical
		dc.w $100, $FCC0
		dc.w $A0, $FDC0

Obj7B_MoveFrag:				; ...
		jsr	$880000+SpeedToPos
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$34(a0)
		addi.w	#$18,$12(a0)
		moveq	#4,d0
		and.w	($FFFFFE0E).w,d0
		lsr.w	#2,d0
		move.b	d0,$1A(a0)
		tst.b	1(a0)
		bpl.w	Obj7A_Delete
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - exploding spikeys that the SLZ boss	drops
; ---------------------------------------------------------------------------
Map_obj7B:	dc.w byte_190E2-Map_obj7B ; ...
		dc.w byte_190E8-Map_obj7B
byte_190E2:	dc.b 1			; ...
		dc.b $FC, 0, 0,	$27, $FC
byte_190E8:	dc.b 1			; ...
		dc.b $FC, 0, 0,	$28, $FC
; ---------------------------------------------------------------------------
; Object 75 - Robotnik (SYZ)
; ---------------------------------------------------------------------------

Obj75:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj75_Index(pc,d0.w),d1
		jmp	Obj75_Index(pc,d1.w)
Obj75_Index:	dc.w Obj75_Main-Obj75_Index ; ...
		dc.w Obj75_ShipMain-Obj75_Index
		dc.w Obj75_FaceMain-Obj75_Index
		dc.w Obj75_FlameMain-Obj75_Index
		dc.w Obj75_SpikeMain-Obj75_Index

Obj75_ObjData:	dc.b 2,	0, 5		; ...
		dc.b 4,	1, 5		; routine number, animation, priority
		dc.b 6,	7, 5
		dc.b 8,	0, 5

Obj75_Main:				; ...
		move.w	#$2DB0,8(a0)
		move.w	#$4DA,$C(a0)
		move.w	8(a0),$30(a0)
		move.w	$C(a0),$38(a0)
		move.b	#$F,$20(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8
		lea	Obj75_ObjData(pc),a2
		movea.l	a0,a1
		moveq	#3,d1
		bra.s	Obj75_LoadBoss

Obj75_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj75_ShipMain
		move.b	#$75,(a1)
		move.w	8(a0),8(a1)
		move.w	$C(a0),$C(a1)

Obj75_LoadBoss:				; ...
		bclr	#0,$22(a0)
		clr.b	$25(a1)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1C(a1)
		move.b	(a2)+,$18(a1)
		move.l	#$880000+Map_Eggman,4(a1)
		move.w	#$400,2(a1)
		move.b	#4,1(a1)
		move.b	#$20,$19(a1)
		move.l	a0,$34(a1)
		dbf	d1,Obj75_Loop	; repeat sequence 3 more times

Obj75_ShipMain:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj75_ShipIndex(pc,d0.w),d1
		jsr	Obj75_ShipIndex(pc,d1.w)
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite
Obj75_ShipIndex:dc.w loc_191CC-Obj75_ShipIndex,	loc_19270-Obj75_ShipIndex ; ...
		dc.w loc_192EC-Obj75_ShipIndex,	loc_19474-Obj75_ShipIndex
		dc.w loc_194AC-Obj75_ShipIndex,	loc_194F2-Obj75_ShipIndex

loc_191CC:				; ...
		move.w	#-$100,$10(a0)
		cmpi.w	#$2D38,$30(a0)
		bcc.s	loc_191DE
		addq.b	#2,$25(a0)

loc_191DE:				; ...
		move.b	$3F(a0),d0
		addq.b	#2,$3F(a0)
		jsr	$880000+(CalcSine).l
		asr.w	#2,d0
		move.w	d0,$12(a0)

loc_191F2:				; ...
		bsr.w	BossMove
		move.w	$38(a0),$C(a0)
		move.w	$30(a0),8(a0)

loc_19202:				; ...
		move.w	8(a0),d0
		subi.w	#$2C00,d0
		lsr.w	#5,d0
		move.b	d0,$34(a0)
		cmpi.b	#6,$25(a0)
		bcc.s	locret_19256
		tst.b	$22(a0)
		bmi.s	loc_19258
		tst.b	$20(a0)
		bne.s	locret_19256
		tst.b	$3E(a0)
		bne.s	loc_1923A
		move.b	#$20,$3E(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

loc_1923A:				; ...
		lea	($FFFFFB22).w,a1
		moveq	#0,d0
		tst.w	(a1)
		bne.s	loc_19248
		move.w	#$EEE,d0

loc_19248:				; ...
		move.w	d0,(a1)
		subq.b	#1,$3E(a0)
		bne.s	locret_19256
		move.b	#$F,$20(a0)

locret_19256:				; ...
		rts	

loc_19258:				; ...
		moveq	#100,d0
		jsr	$880000+AddPoints
		move.b	#6,$25(a0)
		move.w	#$B4,$3C(a0)
		clr.w	$10(a0)
		rts	

loc_19270:				; ...
		move.w	$30(a0),d0
		move.w	#$140,$10(a0)
		btst	#0,$22(a0)
		bne.s	loc_1928E
		neg.w	$10(a0)
		cmpi.w	#$2C08,d0
		bgt.s	loc_1929E
		bra.s	loc_19294

loc_1928E:				; ...
		cmpi.w	#$2D38,d0
		blt.s	loc_1929E

loc_19294:				; ...
		bchg	#0,$22(a0)
		clr.b	$3D(a0)

loc_1929E:				; ...
		subi.w	#$2C10,d0
		andi.w	#$1F,d0
		subi.w	#$1F,d0
		bpl.s	loc_192AE
		neg.w	d0

loc_192AE:				; ...
		subq.w	#1,d0
		bgt.s	loc_192E8
		tst.b	$3D(a0)
		bne.s	loc_192E8
		move.w	($FFFFD008).w,d1
		subi.w	#$2C00,d1
		asr.w	#5,d1
		cmp.b	$34(a0),d1
		bne.s	loc_192E8
		moveq	#0,d0
		move.b	$34(a0),d0
		asl.w	#5,d0
		addi.w	#$2C10,d0
		move.w	d0,$30(a0)
		bsr.w	Obj75_FindBlocks
		addq.b	#2,$25(a0)
		clr.w	$28(a0)
		clr.w	$10(a0)

loc_192E8:				; ...
		bra.w	loc_191DE

loc_192EC:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		move.w	off_192FA(pc,d0.w),d0
		jmp	off_192FA(pc,d0.w)
off_192FA:	dc.w loc_19302-off_192FA, loc_19348-off_192FA ;	...
		dc.w loc_1938E-off_192FA, loc_193D0-off_192FA

loc_19302:				; ...
		move.w	#$180,$12(a0)
		move.w	$38(a0),d0
		cmpi.w	#$556,d0
		bcs.s	loc_19344
		move.w	#$556,$38(a0)
		clr.w	$3C(a0)
		moveq	#-1,d0
		move.w	$36(a0),d0
		beq.s	loc_1933C
		movea.l	d0,a1
		move.b	#-1,$29(a1)
		move.b	#-1,$29(a0)
		move.l	a0,$34(a1)
		move.w	#$32,$3C(a0)

loc_1933C:				; ...
		clr.w	$12(a0)
		addq.b	#2,$28(a0)

loc_19344:				; ...
		bra.w	loc_191F2

loc_19348:				; ...
		subq.w	#1,$3C(a0)
		bpl.s	loc_19366
		addq.b	#2,$28(a0)
		move.w	#-$800,$12(a0)
		tst.w	$36(a0)
		bne.s	loc_19362
		asr	$12(a0)

loc_19362:				; ...
		moveq	#0,d0
		bra.s	loc_1937C

loc_19366:				; ...
		moveq	#0,d0
		cmpi.w	#$1E,$3C(a0)
		bgt.s	loc_1937C
		moveq	#2,d0
		btst	#1,$3D(a0)
		beq.s	loc_1937C
		neg.w	d0

loc_1937C:				; ...
		add.w	$38(a0),d0
		move.w	d0,$C(a0)
		move.w	$30(a0),8(a0)
		bra.w	loc_19202

loc_1938E:				; ...
		move.w	#$4DA,d0
		tst.w	$36(a0)
		beq.s	loc_1939C
		subi.w	#$18,d0

loc_1939C:				; ...
		cmp.w	$38(a0),d0
		blt.s	loc_193BE
		move.w	#8,$3C(a0)
		tst.w	$36(a0)
		beq.s	loc_193B4
		move.w	#$2D,$3C(a0)

loc_193B4:				; ...
		addq.b	#2,$28(a0)
		clr.w	$12(a0)
		bra.s	loc_193CC

loc_193BE:				; ...
		cmpi.w	#-$40,$12(a0)
		bge.s	loc_193CC
		addi.w	#$C,$12(a0)

loc_193CC:				; ...
		bra.w	loc_191F2

loc_193D0:				; ...
		subq.w	#1,$3C(a0)
		bgt.s	loc_19406
		bmi.s	loc_193EE
		moveq	#-1,d0
		move.w	$36(a0),d0
		beq.s	loc_193E8
		movea.l	d0,a1
		move.b	#$A,$29(a1)

loc_193E8:				; ...
		clr.w	$36(a0)
		bra.s	loc_19406

loc_193EE:				; ...
		cmpi.w	#-$1E,$3C(a0)
		bne.s	loc_19406
		clr.b	$29(a0)
		subq.b	#2,$25(a0)
		move.b	#-1,$3D(a0)
		bra.s	loc_19446

loc_19406:				; ...
		moveq	#1,d0
		tst.w	$36(a0)
		beq.s	loc_19410
		moveq	#2,d0

loc_19410:				; ...
		cmpi.w	#$4DA,$38(a0)
		beq.s	loc_19424
		blt.s	loc_1941C
		neg.w	d0

loc_1941C:				; ...
		tst.w	$36(a0)
		add.w	d0,$38(a0)

loc_19424:				; ...
		moveq	#0,d0
		tst.w	$36(a0)
		beq.s	loc_19438
		moveq	#2,d0
		btst	#0,$3D(a0)
		beq.s	loc_19438
		neg.w	d0

loc_19438:				; ...
		add.w	$38(a0),d0
		move.w	d0,$C(a0)
		move.w	$30(a0),8(a0)

loc_19446:				; ...
		bra.w	loc_19202

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj75_FindBlocks:			; ...
		clr.w	$36(a0)
		lea	($FFFFD040).w,a1
		moveq	#$3E,d0
		moveq	#$76,d1
		move.b	$34(a0),d2

Obj75_FindLoop:				; ...
		cmp.b	(a1),d1		; is object a SYZ boss block?
		bne.s	loc_1946A	; if not, branch
		cmp.b	$28(a1),d2
		bne.s	loc_1946A
		move.w	a1,$36(a0)
		bra.s	locret_19472

loc_1946A:				; ...
		lea	$40(a1),a1	; next object RAM entry
		dbf	d0,Obj75_FindLoop

locret_19472:				; ...
		rts	
; End of function Obj75_FindBlocks


loc_19474:				; ...
		subq.w	#1,$3C(a0)
		bmi.s	loc_1947E
		bra.w	BossDefeated

loc_1947E:				; ...
		addq.b	#2,$25(a0)
		clr.w	$12(a0)
		bset	#0,$22(a0)
		bclr	#7,$22(a0)
		clr.w	$10(a0)
		move.w	#-1,$3C(a0)
		tst.b	($FFFFF7A7).w
		bne.s	loc_194A8
		move.b	#1,($FFFFF7A7).w

loc_194A8:				; ...
		bra.w	loc_19202

loc_194AC:				; ...
		addq.w	#1,$3C(a0)
		beq.s	loc_194BC
		bpl.s	loc_194C2
		addi.w	#$18,$12(a0)
		bra.s	loc_194EE

loc_194BC:				; ...
		clr.w	$12(a0)
		bra.s	loc_194EE

loc_194C2:				; ...
		cmpi.w	#$20,$3C(a0)
		bcs.s	loc_194DA
		beq.s	loc_194E0
		cmpi.w	#$2A,$3C(a0)
		bcs.s	loc_194EE
		addq.b	#2,$25(a0)
		bra.s	loc_194EE

loc_194DA:				; ...
		subq.w	#8,$12(a0)
		bra.s	loc_194EE

loc_194E0:				; ...
		clr.w	$12(a0)
		move.w	#$85,d0
		jsr	$880000+(PlaySound).l	; play SYZ music

loc_194EE:				; ...
		bra.w	loc_191F2

loc_194F2:				; ...
		move.w	#$400,$10(a0)
		move.w	#-$40,$12(a0)
		cmpi.w	#$2D40,($FFFFF72A).w
		bcc.s	loc_1950C
		addq.w	#2,($FFFFF72A).w
		bra.s	loc_19512

loc_1950C:				; ...
		tst.b	1(a0)
		bpl.s	Obj75_ShipDelete

loc_19512:				; ...
		bsr.w	BossMove
		bra.w	loc_191DE

Obj75_ShipDelete:			; ...
		jmp	$880000+DeleteObject

Obj75_FaceMain:				; ...
		moveq	#1,d1
		movea.l	$34(a0),a1
		moveq	#0,d0
		move.b	$25(a1),d0
		move.w	off_19546(pc,d0.w),d0
		jsr	off_19546(pc,d0.w)
		move.b	d1,$1C(a0)
		move.b	(a0),d0
		cmp.b	(a1),d0
		bne.s	Obj75_FaceDelete
		bra.s	loc_195BE

Obj75_FaceDelete:			; ...
		jmp	$880000+DeleteObject
off_19546:	dc.w loc_19574-off_19546, loc_19574-off_19546 ;	...
		dc.w loc_1955A-off_19546, loc_19552-off_19546
		dc.w loc_19552-off_19546, loc_19556-off_19546

loc_19552:				; ...
		moveq	#$A,d1
		rts	

loc_19556:				; ...
		moveq	#6,d1
		rts	

loc_1955A:				; ...
		moveq	#0,d0
		move.b	$28(a1),d0
		move.w	off_19568(pc,d0.w),d0
		jmp	off_19568(pc,d0.w)
off_19568:	dc.w loc_19570-off_19568, loc_19572-off_19568 ;	...
		dc.w loc_19570-off_19568, loc_19570-off_19568

loc_19570:				; ...
		bra.s	loc_19574

loc_19572:				; ...
		moveq	#6,d1

loc_19574:				; ...
		tst.b	$20(a1)
		bne.s	loc_1957E
		moveq	#5,d1
		rts	

loc_1957E:				; ...
		cmpi.b	#4,($FFFFD024).w
		bcs.s	locret_19588
		moveq	#4,d1

locret_19588:				; ...
		rts	

Obj75_FlameMain:			; ...
		move.b	#7,$1C(a0)
		movea.l	$34(a0),a1
		cmpi.b	#$A,$25(a1)
		bne.s	loc_195AA
		move.b	#$B,$1C(a0)
		tst.b	1(a0)
		bpl.s	Obj75_FlameDelete
		bra.s	loc_195B6

loc_195AA:				; ...
		tst.w	$10(a1)
		beq.s	loc_195B6
		move.b	#8,$1C(a0)

loc_195B6:				; ...
		bra.s	loc_195BE

Obj75_FlameDelete:			; ...
		jmp	$880000+DeleteObject

loc_195BE:				; ...
		lea	$880000+(Ani_Eggman).l,a1
		jsr	$880000+AnimateSprite
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)

loc_195DA:				; ...
		move.b	$22(a1),$22(a0)
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#$FC,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite

Obj75_SpikeMain:			; ...
		move.l	#$880000+Map_BossItems,4(a0)
		move.w	#$246C,2(a0)
		move.b	#5,$1A(a0)
		movea.l	$34(a0),a1
		cmpi.b	#$A,$25(a1)
		bne.s	loc_1961C
		tst.b	1(a0)
		bpl.s	Obj75_SpikeDelete

loc_1961C:				; ...
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		move.w	$3C(a0),d0
		cmpi.b	#4,$25(a1)
		bne.s	loc_19652
		cmpi.b	#6,$28(a1)
		beq.s	loc_1964C
		tst.b	$28(a1)
		bne.s	loc_19658
		cmpi.w	#$94,d0
		bge.s	loc_19658
		addq.w	#7,d0
		bra.s	loc_19658

loc_1964C:				; ...
		tst.w	$3C(a1)
		bpl.s	loc_19658

loc_19652:				; ...
		tst.w	d0
		ble.s	loc_19658
		subq.w	#5,d0

loc_19658:				; ...
		move.w	d0,$3C(a0)
		asr.w	#2,d0
		add.w	d0,$C(a0)
		move.b	#8,$19(a0)
		move.b	#$C,$16(a0)
		clr.b	$20(a0)
		movea.l	$34(a0),a1
		tst.b	$20(a1)
		beq.s	loc_19688
		tst.b	$29(a1)
		bne.s	loc_19688
		move.b	#$84,$20(a0)

loc_19688:				; ...
		bra.w	loc_195DA

Obj75_SpikeDelete:			; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 76 - blocks that Robotnik picks up (SYZ)
; ---------------------------------------------------------------------------

Obj76:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj76_Index(pc,d0.w),d1
		jmp	Obj76_Index(pc,d1.w)
Obj76_Index:	dc.w Obj76_Main-Obj76_Index ; ...
		dc.w Obj76_Action-Obj76_Index
		dc.w loc_19762-Obj76_Index

Obj76_Main:				; ...
		moveq	#0,d4
		move.w	#$2C10,d5
		moveq	#9,d6
		lea	(a0),a1
		bra.s	Obj76_MakeBlock

Obj76_Loop:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	Obj76_ExitLoop

Obj76_MakeBlock:			; ...
		move.b	#$76,(a1)
		move.l	#$880000+Map_obj76,4(a1)
		move.w	#$4000,2(a1)
		move.b	#4,1(a1)
		move.b	#$10,$19(a1)
		move.b	#$10,$16(a1)
		move.b	#3,$18(a1)
		move.w	d5,8(a1)	; set x-position
		move.w	#$582,$C(a1)
		move.w	d4,$28(a1)
		addi.w	#$101,d4
		addi.w	#$20,d5		; add $20 to next x-position
		addq.b	#2,$24(a1)
		dbf	d6,Obj76_Loop	; repeat sequence 9 more times

Obj76_ExitLoop:				; ...
		rts	

Obj76_Action:				; ...
		move.b	$29(a0),d0
		cmp.b	$28(a0),d0
		beq.s	Obj76_Solid
		tst.b	d0
		bmi.s	loc_19718

loc_19712:				; ...
		bsr.w	Obj76_Break
		bra.s	Obj76_Display

loc_19718:				; ...
		movea.l	$34(a0),a1
		tst.b	$21(a1)
		beq.s	loc_19712
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		addi.w	#$2C,$C(a0)
		cmpa.w	a0,a1
		bcs.s	Obj76_Display
		move.w	$12(a1),d0
		ext.l	d0
		asr.l	#8,d0
		add.w	d0,$C(a0)
		bra.s	Obj76_Display

Obj76_Solid:				; ...
		move.w	#$1B,d1
		move.w	#$10,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject

Obj76_Display:				; ...
		jmp	$880000+DisplaySprite

loc_19762:				; ...
		tst.b	1(a0)
		bpl.s	Obj76_Delete
		jsr	$880000+ObjectFall
		jmp	$880000+DisplaySprite

Obj76_Delete:				; ...
		jmp	$880000+DeleteObject

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Obj76_Break:				; ...
		lea	Obj76_FragSpeed(pc),a4
		lea	Obj76_FragPos(pc),a5
		moveq	#1,d4
		moveq	#3,d1
		moveq	#$38,d2
		addq.b	#2,$24(a0)
		move.b	#8,$19(a0)
		move.b	#8,$16(a0)
		lea	(a0),a1
		bra.s	Obj76_MakeFrag

Obj76_LoopFrag:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_197D4

Obj76_MakeFrag:				; ...
		lea	(a0),a2
		lea	(a1),a3
		moveq	#3,d3

loc_197AA:				; ...
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		dbf	d3,loc_197AA
		move.w	(a4)+,$10(a1)
		move.w	(a4)+,$12(a1)
		move.w	(a5)+,d3
		add.w	d3,8(a1)
		move.w	(a5)+,d3
		add.w	d3,$C(a1)
		move.b	d4,$1A(a1)
		addq.w	#1,d4
		dbf	d1,Obj76_LoopFrag ; repeat sequence 3 more times

loc_197D4:				; ...
		move.w	#$CB,d0
		jmp	$880000+(PlaySound_Special).l ;	play smashing sound
; End of function Obj76_Break

Obj76_FragSpeed:dc.w $FE80, $FE00	; ...
		dc.w $180, $FE00
		dc.w $FF00, $FF00
		dc.w $100, $FF00
Obj76_FragPos:	dc.w $FFF8, $FFF8	; ...
		dc.w $10, 0
		dc.w 0,	$10
		dc.w $10, $10
; ---------------------------------------------------------------------------
; Sprite mappings - blocks that	Robotnik picks up (SYZ)
; ---------------------------------------------------------------------------
Map_obj76:	dc.w byte_19808-Map_obj76, byte_19814-Map_obj76	; ...
		dc.w byte_1981A-Map_obj76, byte_19820-Map_obj76
		dc.w byte_19826-Map_obj76
byte_19808:	dc.b 2			; ...
		dc.b $F0, $D, 0, $71, $F0
		dc.b 0,	$D, 0, $79, $F0
		dc.b 0
byte_19814:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$71, $F8
byte_1981A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$75, $F8
byte_19820:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$79, $F8
byte_19826:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$7D, $F8

loc_1982C:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 82 - Robotnik (SBZ2)
; ---------------------------------------------------------------------------

Obj82:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj82_Index(pc,d0.w),d1
		jmp	Obj82_Index(pc,d1.w)
Obj82_Index:	dc.w Obj82_Main-Obj82_Index ; ...
		dc.w Obj82_Eggman-Obj82_Index
		dc.w Obj82_Switch-Obj82_Index

Obj82_ObjData:	dc.b 2,	0, 3		; ...
		dc.b 4,	0, 3		; routine number, animation, priority

Obj82_Main:				; ...
		lea	Obj82_ObjData(pc),a2
		move.w	#$2160,8(a0)
		move.w	#$5A4,$C(a0)
		move.b	#$F,$20(a0)
		move.b	#$10,$21(a0)
		bclr	#0,$22(a0)
		clr.b	$25(a0)
		move.b	(a2)+,$24(a0)
		move.b	(a2)+,$1C(a0)
		move.b	(a2)+,$18(a0)
		move.l	#$880000+Map_obj82,4(a0)
		move.w	#$400,2(a0)
		move.b	#4,1(a0)
		bset	#7,1(a0)
		move.b	#$20,$19(a0)
		jsr	$880000+SingleObjLoad2
		bne.s	Obj82_Eggman
		move.l	a0,$34(a1)
		move.b	#$82,(a1)	; load switch object
		move.w	#$2130,8(a1)
		move.w	#$5BC,$C(a1)
		clr.b	$25(a0)
		move.b	(a2)+,$24(a1)
		move.b	(a2)+,$1C(a1)
		move.b	(a2)+,$18(a1)
		move.l	#$880000+Map_obj32,4(a1)
		move.w	#$4A4,2(a1)
		move.b	#4,1(a1)
		bset	#7,1(a1)
		move.b	#$10,$19(a1)
		move.b	#0,$1A(a1)

Obj82_Eggman:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj82_EggIndex(pc,d0.w),d1
		jsr	Obj82_EggIndex(pc,d1.w)
		lea	Ani_obj82(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite
Obj82_EggIndex:	dc.w Obj82_ChkSonic-Obj82_EggIndex ; ...
		dc.w Obj82_PreLeap-Obj82_EggIndex
		dc.w Obj82_Leap-Obj82_EggIndex
		dc.w loc_19934-Obj82_EggIndex

Obj82_ChkSonic:				; ...
		move.w	8(a0),d0
		sub.w	($FFFFD008).w,d0
		cmpi.w	#128,d0		; is Sonic within 128 pixels of	Eggman?
		bcc.s	loc_19934	; if not, branch
		addq.b	#2,$25(a0)
		move.w	#180,$3C(a0)	; set delay to 3 seconds
		move.b	#1,$1C(a0)

loc_19934:				; ...
		jmp	$880000+SpeedToPos

Obj82_PreLeap:				; ...
		subq.w	#1,$3C(a0)	; subtract 1 from time delay
		bne.s	loc_19954	; if time remains, branch
		addq.b	#2,$25(a0)
		move.b	#2,$1C(a0)
		addq.w	#4,$C(a0)
		move.w	#15,$3C(a0)

loc_19954:				; ...
		bra.s	loc_19934

Obj82_Leap:				; ...
		subq.w	#1,$3C(a0)
		bgt.s	loc_199D0
		bne.s	loc_1996A
		move.w	#-$FC,$10(a0)	; make Eggman leap
		move.w	#-$3C0,$12(a0)

loc_1996A:				; ...
		cmpi.w	#$2132,8(a0)
		bgt.s	loc_19976
		clr.w	$10(a0)

loc_19976:				; ...
		addi.w	#$24,$12(a0)
		tst.w	$12(a0)
		bmi.s	Obj82_FindBlocks
		cmpi.w	#$595,$C(a0)
		bcs.s	Obj82_FindBlocks
		move.w	#$5357,$28(a0)
		cmpi.w	#$59B,$C(a0)
		bcs.s	Obj82_FindBlocks
		move.w	#$59B,$C(a0)
		clr.w	$12(a0)

Obj82_FindBlocks:			; ...
		move.w	$10(a0),d0
		or.w	$12(a0),d0
		bne.s	loc_199D0
		lea	($FFFFD000).w,a1 ; start at the	first object RAM
		moveq	#$3E,d0
		moveq	#$40,d1

Obj82_FindLoop:				; ...
		adda.w	d1,a1		; jump to next object RAM
		cmpi.b	#$83,(a1)	; is object a block? (object $83)
		dbeq	d0,Obj82_FindLoop ; if not, repeat (max	$3E times)
		bne.s	loc_199D0
		move.w	#$474F,$28(a1)	; set block to disintegrate
		addq.b	#2,$25(a0)
		move.b	#1,$1C(a0)

loc_199D0:				; ...
		bra.w	loc_19934

Obj82_Switch:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj82_SwIndex(pc,d0.w),d0
		jmp	Obj82_SwIndex(pc,d0.w)
Obj82_SwIndex:	dc.w loc_199E6-Obj82_SwIndex ; ...
		dc.w Obj82_SwDisplay-Obj82_SwIndex

loc_199E6:				; ...
		movea.l	$34(a0),a1
		cmpi.w	#$5357,$28(a1)
		bne.s	Obj82_SwDisplay
		move.b	#1,$1A(a0)
		addq.b	#2,$25(a0)

Obj82_SwDisplay:			; ...
		jmp	$880000+DisplaySprite
Ani_obj82:	dc.w byte_19A10-Ani_obj82, byte_19A14-Ani_obj82, byte_19A18-Ani_obj82 ;	...
		dc.w byte_19A20-Ani_obj82, byte_19A24-Ani_obj82, byte_19A2A-Ani_obj82
		dc.w byte_19A30-Ani_obj82
byte_19A10:	dc.b $7E, 0, $FF, 0	; ...
byte_19A14:	dc.b 6,	1, 2, $FF	; ...
byte_19A18:	dc.b $E, 3, 4, 4, 0, 0,	0, $FF ; ...
byte_19A20:	dc.b 0,	5, 9, $FF	; ...
byte_19A24:	dc.b 6,	7, 4, 8, 4, $FF	; ...
byte_19A2A:	dc.b $F, 4, 3, 3, $FF, 0 ; ...
byte_19A30:	dc.b $7E, 6, $FF, 0	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - Eggman (SBZ2)
; ---------------------------------------------------------------------------
Map_obj82:	dc.w byte_19A4A-Map_obj82, byte_19A5A-Map_obj82	; ...
		dc.w byte_19A70-Map_obj82, byte_19A86-Map_obj82
		dc.w byte_19A9C-Map_obj82, byte_19AB2-Map_obj82
		dc.w byte_19AC8-Map_obj82, byte_19AEC-Map_obj82
		dc.w byte_19B06-Map_obj82, byte_19B26-Map_obj82
		dc.w byte_19B4F-Map_obj82
byte_19A4A:	dc.b 3			; ...
		dc.b $FC, 0, 0,	$8F, $E8
		dc.b $E8, $E, 0, 0, $F0
		dc.b 0,	$F, 0, $6F, $F0
byte_19A5A:	dc.b 4			; ...
		dc.b $E8, $D, 0, $E, $F0
		dc.b $E8, $E, 0, 0, $F0
		dc.b 0,	$F, 0, $6F, $F0
		dc.b $FC, 0, 0,	$8F, $E8
		dc.b 0
byte_19A70:	dc.b 4			; ...
		dc.b $E9, $D, 0, $E, $F0
		dc.b $E9, $E, 0, 0, $F0
		dc.b 1,	$F, 0, $7F, $F0
		dc.b $FD, 0, 0,	$8F, $E8
		dc.b 0
byte_19A86:	dc.b 4			; ...
		dc.b $F4, $F, 8, $20, $F0
		dc.b $F5, 4, 8,	$30, $10
		dc.b 8,	9, 8, $4E, $F0
		dc.b $EC, $E, 0, 0, $F0
		dc.b 0
byte_19A9C:	dc.b 4			; ...
		dc.b $F0, $F, 8, $20, $F0
		dc.b $F1, 4, 8,	$30, $10
		dc.b 8,	6, 8, $3E, $F8
		dc.b $E8, $E, 0, 0, $F0
		dc.b 0
byte_19AB2:	dc.b 4			; ...
		dc.b $E8, $D, 0, $16, $EC
		dc.b $E8, 1, 0,	$1E, $C
		dc.b $E8, $E, 0, 0, $F0
		dc.b 0,	$F, 0, $6F, $F0
		dc.b 0
byte_19AC8:	dc.b 7			; ...
		dc.b $E8, $D, 0, $16, $EC
		dc.b $E8, 1, 0,	$1E, $C
		dc.b 4,	9, 8, $34, 0
		dc.b 4,	5, 8, $3A, $E8
		dc.b $F0, $F, 8, $20, $F0
		dc.b $F1, 4, 8,	$54, $10
		dc.b $F1, 4, 0,	$54, $E0
byte_19AEC:	dc.b 5			; ...
		dc.b $F0, $F, 8, $20, $F0
		dc.b $F1, 4, 8,	$30, $10
		dc.b 4,	9, 8, $34, 0
		dc.b 4,	5, 8, $3A, $E8
		dc.b $E8, $E, 0, 0, $F0
byte_19B06:	dc.b 6			; ...
		dc.b $EE, $F, 8, $20, $F0
		dc.b $EF, 4, 8,	$30, $10
		dc.b 9,	5, 8, $44, 0
		dc.b 3,	1, 8, $48, $F8
		dc.b $B, 5, 8, $4A, $E8
		dc.b $E6, $E, 0, 0, $F0
		dc.b 0
byte_19B26:	dc.b 8			; ...
		dc.b $E8, $D, 0, $16, $EC
		dc.b $E8, 1, 0,	$1E, $C
		dc.b $E8, $E, 0, 0, $F0
		dc.b 0,	$F, 0, $6F, $F0
		dc.b $E0, $D, $3E, $F0,	$F0
		dc.b $F0, $D, $3E, $F0,	$F0
		dc.b 0,	$D, $3E, $F0, $F0
		dc.b $10, $D, $3E, $F0,	$F0
byte_19B4F:	dc.b 3			; ...
		dc.b $EC, $D, 0, $56, $E4
		dc.b $F4, 8, 0,	$5E, 4
		dc.b $EC, $D, 0, $61, $FC
		dc.b 0
; ---------------------------------------------------------------------------
; Object 83 - blocks that disintegrate Eggman presses a	switch (SBZ2)
; ---------------------------------------------------------------------------

Obj83:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj83_Index(pc,d0.w),d1
		jmp	Obj83_Index(pc,d1.w)
Obj83_Index:	dc.w Obj83_Main-Obj83_Index, Obj83_ChkBreak-Obj83_Index	; ...
		dc.w loc_19C36-Obj83_Index, loc_19C62-Obj83_Index
		dc.w loc_19C72-Obj83_Index, loc_19C80-Obj83_Index

Obj83_Main:				; ...
		move.w	#$2080,8(a0)
		move.w	#$5D0,$C(a0)
		move.b	#$80,$19(a0)
		move.b	#$10,$16(a0)
		move.b	#4,1(a0)
		bset	#7,1(a0)
		moveq	#0,d4
		move.w	#$2010,d5
		moveq	#7,d6
		lea	$30(a0),a2

Obj83_MakeBlock:			; ...
		jsr	$880000+SingleObjLoad
		bne.s	Obj83_ExitMake
		move.w	a1,(a2)+
		move.b	#$83,(a1)	; load block object
		move.l	#$880000+Map_obj83,4(a1)
		move.w	#$4518,2(a1)
		move.b	#4,1(a1)
		move.b	#$10,$19(a1)
		move.b	#$10,$16(a1)
		move.b	#3,$18(a1)
		move.w	d5,8(a1)	; set X	position
		move.w	#$5D0,$C(a1)
		addi.w	#$20,d5		; add $20 for next X position
		move.b	#8,$24(a1)
		dbf	d6,Obj83_MakeBlock ; repeat sequence 7 more times

Obj83_ExitMake:				; ...
		addq.b	#2,$24(a0)
		rts	

Obj83_ChkBreak:				; ...
		cmpi.w	#$474F,$28(a0)	; is object set	to disintegrate?
		bne.s	Obj83_Solid	; if not, branch
		clr.b	$1A(a0)
		addq.b	#2,$24(a0)	; next subroutine

Obj83_Solid:				; ...
		moveq	#0,d0
		move.b	$1A(a0),d0
		neg.b	d0
		ext.w	d0
		addq.w	#8,d0
		asl.w	#4,d0
		move.w	#$2100,d4
		sub.w	d0,d4
		move.b	d0,$19(a0)
		move.w	d4,8(a0)
		moveq	#$B,d1
		add.w	d0,d1
		moveq	#$10,d2
		moveq	#$11,d3
		jmp	$880000+SolidObject

loc_19C36:				; ...
		subi.b	#$E,$1E(a0)
		bcc.s	Obj83_Solid2
		moveq	#-1,d0
		move.b	$1A(a0),d0
		ext.w	d0
		add.w	d0,d0
		move.w	$30(a0,d0.w),d0
		movea.l	d0,a1
		move.w	#$474F,$28(a1)
		addq.b	#1,$1A(a0)
		cmpi.b	#8,$1A(a0)
		beq.s	loc_19C62

Obj83_Solid2:				; ...
		bra.s	Obj83_Solid

loc_19C62:				; ...
		bclr	#3,$22(a0)
		bclr	#3,($FFFFD022).w
		bra.w	loc_1982C

loc_19C72:				; ...
		cmpi.w	#$474F,$28(a0)	; is object set	to disintegrate?
		beq.s	Obj83_Break	; if yes, branch
		jmp	$880000+DisplaySprite

loc_19C80:				; ...
		tst.b	1(a0)
		bpl.w	loc_1982C
		jsr	$880000+ObjectFall
		jmp	$880000+DisplaySprite

Obj83_Break:				; ...
		lea	Obj83_FragSpeed(pc),a4
		lea	Obj83_FragPos(pc),a5
		moveq	#1,d4
		moveq	#3,d1
		moveq	#$38,d2
		addq.b	#2,$24(a0)
		move.b	#8,$19(a0)
		move.b	#8,$16(a0)
		lea	(a0),a1
		bra.s	Obj83_MakeFrag

Obj83_LoopFrag:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	Obj83_BreakSnd

Obj83_MakeFrag:				; ...
		lea	(a0),a2
		lea	(a1),a3
		moveq	#3,d3

loc_19CC4:				; ...
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		move.l	(a2)+,(a3)+
		dbf	d3,loc_19CC4
		move.w	(a4)+,$12(a1)
		move.w	(a5)+,d3
		add.w	d3,8(a1)
		move.w	(a5)+,d3
		add.w	d3,$C(a1)
		move.b	d4,$1A(a1)
		addq.w	#1,d4
		dbf	d1,Obj83_LoopFrag ; repeat sequence 3 more times

Obj83_BreakSnd:				; ...
		move.w	#$CB,d0
		jsr	$880000+(PlaySound_Special).l ;	play smashing sound
		jmp	$880000+DisplaySprite
Obj83_FragSpeed:dc.w $80, 0		; ...
		dc.w $120, $C0
Obj83_FragPos:	dc.w $FFF8, $FFF8	; ...
		dc.w $10, 0
		dc.w 0,	$10
		dc.w $10, $10
; ---------------------------------------------------------------------------
; Sprite mappings - blocks that	disintegrate when Eggman presses a switch
; ---------------------------------------------------------------------------
Map_obj83:	dc.w byte_19D1C-Map_obj83, byte_19D22-Map_obj83	; ...
		dc.w byte_19D2E-Map_obj83, byte_19D3A-Map_obj83
		dc.w byte_19D46-Map_obj83
byte_19D1C:	dc.b 1			; ...
		dc.b $F0, $F, 0, 0, $F0
byte_19D22:	dc.b 2			; ...
		dc.b $F8, 1, 0,	0, $F8
		dc.b $F8, 1, 0,	4, 0
		dc.b 0
byte_19D2E:	dc.b 2			; ...
		dc.b $F8, 1, 0,	8, $F8
		dc.b $F8, 1, 0,	$C, 0
		dc.b 0
byte_19D3A:	dc.b 2			; ...
		dc.b $F8, 1, 0,	2, $F8
		dc.b $F8, 1, 0,	6, 0
		dc.b 0
byte_19D46:	dc.b 2			; ...
		dc.b $F8, 1, 0,	$A, $F8
		dc.b $F8, 1, 0,	$E, 0
		dc.b 0

		
		
		
; ---------------------------------------------------------------------------
; Object 85 - Robotnik (FZ)
; ---------------------------------------------------------------------------

Obj85_Delete:				; ...
		jmp	$880000+DeleteObject

Obj85:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj85_Index(pc,d0.w),d0
		jmp	Obj85_Index(pc,d0.w)
Obj85_Index:	dc.w Obj85_Main-Obj85_Index ; ...
		dc.w Obj85_Eggman-Obj85_Index
		dc.w loc_1A38E-Obj85_Index
		dc.w loc_1A346-Obj85_Index
		dc.w loc_1A2C6-Obj85_Index
		dc.w loc_1A3AC-Obj85_Index
		dc.w loc_1A264-Obj85_Index

Obj85_ObjData:	dc.w $100, $100, $470	; ...
		dc.l $880000+Map_obj82
		dc.w $25B0, $590, $300	; X pos, Y pos,	VRAM setting
		dc.l $880000+Map_obj84		; mappings pointer
		dc.w $26E0, $596, $3A0
		dc.l $880000+Map_FZBoss
		dc.w $26E0, $596, $470
		dc.l $880000+Map_obj82
		dc.w $26E0, $596, $400
		dc.l $880000+Map_Eggman
		dc.w $26E0, $596, $400
		dc.l $880000+Map_Eggman
Obj85_ObjData2:	dc.b 2,	0, 4, $20, $19	; ...
		dc.b 4,	0, 1, $12, 8	; routine num, animation, sprite priority, width, height
		dc.b 6,	0, 3, 0, 0
		dc.b 8,	0, 3, 0, 0
		dc.b $A, 0, 3, $20, $20
		dc.b $C, 0, 3, 0, 0

Obj85_Main:				; ...
		lea	Obj85_ObjData(pc),a2
		lea	Obj85_ObjData2(pc),a3
		movea.l	a0,a1
		moveq	#5,d1
		bra.s	Obj85_LoadBoss

Obj85_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_19E20

Obj85_LoadBoss:				; ...
		move.b	#$85,(a1)
		move.w	(a2)+,8(a1)
		move.w	(a2)+,$C(a1)
		move.w	(a2)+,2(a1)
		move.l	(a2)+,4(a1)
		move.b	(a3)+,$24(a1)
		move.b	(a3)+,$1C(a1)
		move.b	(a3)+,$18(a1)
		move.b	(a3)+,$17(a1)
		move.b	(a3)+,$16(a1)
		move.b	#4,1(a1)
		bset	#7,1(a0)
		move.l	a0,$34(a1)
		dbf	d1,Obj85_Loop

loc_19E20:				; ...
		lea	$36(a0),a2
		jsr	$880000+SingleObjLoad
		bne.s	loc_19E5A
		move.b	#$86,(a1)	; load energy ball object
		move.w	a1,(a2)
		move.l	a0,$34(a1)
		lea	$38(a0),a2
		moveq	#0,d2
		moveq	#3,d1

loc_19E3E:				; ...
		jsr	$880000+SingleObjLoad2
		bne.s	loc_19E5A
		move.w	a1,(a2)+
		move.b	#$84,(a1)	; load crushing	cylinder object
		move.l	a0,$34(a1)
		move.b	d2,$28(a1)
		addq.w	#2,d2
		dbf	d1,loc_19E3E

loc_19E5A:				; ...
		move.w	#0,$34(a0)
		move.b	#8,$21(a0)	; set number of	hits to	8
		move.w	#-1,$30(a0)

Obj85_Eggman:				; ...
		moveq	#0,d0
		move.b	$34(a0),d0
		move.w	off_19E80(pc,d0.w),d0
		jsr	off_19E80(pc,d0.w)
		jmp	$880000+DisplaySprite
off_19E80:	dc.w loc_19E90-off_19E80, loc_19EA8-off_19E80 ;	...
		dc.w loc_19FE6-off_19E80, loc_1A02A-off_19E80
		dc.w loc_1A074-off_19E80, loc_1A112-off_19E80
		dc.w loc_1A192-off_19E80, loc_1A1D4-off_19E80

loc_19E90:				; ...
		tst.l	($FFFFF680).w
		bne.s	loc_19EA2
		cmpi.w	#$2450,($FFFFF700).w
		bcs.s	loc_19EA2
		addq.b	#2,$34(a0)

loc_19EA2:				; ...
		addq.l	#1,($FFFFF636).w
		rts	

loc_19EA8:				; ...
		tst.w	$30(a0)
		bpl.s	loc_19F10
		clr.w	$30(a0)
		jsr	$880000+(RandomNumber).l
		andi.w	#$C,d0
		move.w	d0,d1
		addq.w	#2,d1
		tst.l	d0
		bpl.s	loc_19EC6
		exg	d1,d0

loc_19EC6:				; ...
		lea	word_19FD6(pc),a1
		move.w	(a1,d0.w),d0
		move.w	(a1,d1.w),d1
		move.w	d0,$30(a0)
		moveq	#-1,d2
		move.w	$38(a0,d0.w),d2
		movea.l	d2,a1
		move.b	#-1,$29(a1)
		move.w	#-1,$30(a1)
		move.w	$38(a0,d1.w),d2
		movea.l	d2,a1
		move.b	#1,$29(a1)
		move.w	#0,$30(a1)
		move.w	#1,$32(a0)
		clr.b	$35(a0)
		move.w	#$B7,d0
		jsr	$880000+(PlaySound_Special).l ;	play rumbling sound

loc_19F10:				; ...
		tst.w	$32(a0)
		bmi.w	loc_19FA6
		bclr	#0,$22(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcs.s	loc_19F2E
		bset	#0,$22(a0)

loc_19F2E:				; ...
		move.w	#$2B,d1
		move.w	#$14,d2
		move.w	#$14,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		tst.w	d4
		bgt.s	loc_19F50

loc_19F48:				; ...
		tst.b	$35(a0)
		bne.s	loc_19F88
		bra.s	loc_19F96

loc_19F50:				; ...
		addq.w	#7,($FFFFF636).w
		cmpi.b	#2,($FFFFD01C).w
		bne.s	loc_19F48
		move.w	#$300,d0
		btst	#0,$22(a0)
		bne.s	loc_19F6A
		neg.w	d0

loc_19F6A:				; ...
		move.w	d0,($FFFFD010).w
		tst.b	$35(a0)
		bne.s	loc_19F88
		subq.b	#1,$21(a0)
		move.b	#$64,$35(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

loc_19F88:				; ...
		subq.b	#1,$35(a0)
		beq.s	loc_19F96
		move.b	#3,$1C(a0)
		bra.s	loc_19F9C

loc_19F96:				; ...
		move.b	#1,$1C(a0)

loc_19F9C:				; ...
		lea	Ani_obj82(pc),a1
		jmp	$880000+AnimateSprite

loc_19FA6:				; ...
		tst.b	$21(a0)
		beq.s	loc_19FBC
		addq.b	#2,$34(a0)
		move.w	#-1,$30(a0)
		clr.w	$32(a0)
		rts	

loc_19FBC:				; ...
		move.b	#6,$34(a0)
		move.w	#$25C0,8(a0)
		move.w	#$53C,$C(a0)
		move.b	#$14,$16(a0)
		rts	
word_19FD6:	dc.w 0,	2, 2, 4, 4, 6, 6, 0 ; ...

loc_19FE6:				; ...
		moveq	#-1,d0
		move.w	$36(a0),d0
		movea.l	d0,a1
		tst.w	$30(a0)
		bpl.s	loc_1A000
		clr.w	$30(a0)
		move.b	#-1,$29(a1)
		bsr.s	loc_1A020

loc_1A000:				; ...
		moveq	#$F,d0
		and.w	($FFFFFE0E).w,d0
		bne.s	loc_1A00A
		bsr.s	loc_1A020

loc_1A00A:				; ...
		tst.w	$32(a0)
		beq.s	locret_1A01E
		subq.b	#2,$34(a0)
		move.w	#-1,$30(a0)
		clr.w	$32(a0)

locret_1A01E:				; ...
		rts	

loc_1A020:				; ...
		move.w	#$B1,d0
		jmp	$880000+(PlaySound_Special).l ;	play electricity sound

loc_1A02A:				; ...
		move.b	#$30,$17(a0)
		bset	#0,$22(a0)
		jsr	$880000+SpeedToPos
		move.b	#6,$1A(a0)
		addi.w	#$10,$12(a0)
		cmpi.w	#$59C,$C(a0)
		bcs.s	loc_1A070
		move.w	#$59C,$C(a0)
		addq.b	#2,$34(a0)
		move.b	#$20,$17(a0)
		move.w	#$100,$10(a0)
		move.w	#-$100,$12(a0)
		addq.b	#2,($FFFFF742).w

loc_1A070:				; ...
		bra.w	loc_1A166

loc_1A074:				; ...
		bset	#0,$22(a0)
		move.b	#4,$1C(a0)
		jsr	$880000+SpeedToPos
		addi.w	#$10,$12(a0)
		cmpi.w	#$5A3,$C(a0)
		bcs.s	loc_1A09A
		move.w	#-$40,$12(a0)

loc_1A09A:				; ...
		move.w	#$400,$10(a0)
		move.w	8(a0),d0
		sub.w	($FFFFD008).w,d0
		bpl.s	loc_1A0B4
		move.w	#$500,$10(a0)
		bra.w	loc_1A0F2

loc_1A0B4:				; ...
		subi.w	#$70,d0
		bcs.s	loc_1A0F2
		subi.w	#$100,$10(a0)
		subq.w	#8,d0
		bcs.s	loc_1A0F2
		subi.w	#$100,$10(a0)
		subq.w	#8,d0
		bcs.s	loc_1A0F2
		subi.w	#$80,$10(a0)
		subq.w	#8,d0
		bcs.s	loc_1A0F2
		subi.w	#$80,$10(a0)
		subq.w	#8,d0
		bcs.s	loc_1A0F2
		subi.w	#$80,$10(a0)
		subi.w	#$38,d0
		bcs.s	loc_1A0F2
		clr.w	$10(a0)

loc_1A0F2:				; ...
		cmpi.w	#$26A0,8(a0)
		bcs.s	loc_1A110
		move.w	#$26A0,8(a0)
		move.w	#$240,$10(a0)
		move.w	#-$4C0,$12(a0)
		addq.b	#2,$34(a0)

loc_1A110:				; ...
		bra.s	loc_1A15C

loc_1A112:				; ...
		jsr	$880000+SpeedToPos
		cmpi.w	#$26E0,8(a0)
		bcs.s	loc_1A124
		clr.w	$10(a0)

loc_1A124:				; ...
		addi.w	#$34,$12(a0)
		tst.w	$12(a0)
		bmi.s	loc_1A142
		cmpi.w	#$592,$C(a0)
		bcs.s	loc_1A142
		move.w	#$592,$C(a0)
		clr.w	$12(a0)

loc_1A142:				; ...
		move.w	$10(a0),d0
		or.w	$12(a0),d0
		bne.s	loc_1A15C
		addq.b	#2,$34(a0)
		move.w	#-$180,$12(a0)
		move.b	#1,$21(a0)

loc_1A15C:				; ...
		lea	Ani_obj82(pc),a1
		jsr	$880000+AnimateSprite

loc_1A166:				; ...
		cmpi.w	#$2700,($FFFFF72A).w
		bge.s	loc_1A172
		addq.w	#2,($FFFFF72A).w

loc_1A172:				; ...
		cmpi.b	#$C,$34(a0)
		bge.s	locret_1A190
		move.w	#$1B,d1
		move.w	#$70,d2
		move.w	#$71,d3
		move.w	8(a0),d4
		jmp	$880000+SolidObject

locret_1A190:				; ...
		rts	

loc_1A192:				; ...
		move.l	#$880000+Map_Eggman,4(a0)
		move.w	#$400,2(a0)
		move.b	#0,$1C(a0)
		bset	#0,$22(a0)
		jsr	$880000+SpeedToPos
		cmpi.w	#$544,$C(a0)
		bcc.s	loc_1A1D0
		move.w	#$180,$10(a0)
		move.w	#-$18,$12(a0)
		move.b	#$F,$20(a0)
		addq.b	#2,$34(a0)

loc_1A1D0:				; ...
		bra.w	loc_1A15C

loc_1A1D4:				; ...
		bset	#0,$22(a0)
		jsr	$880000+SpeedToPos
		tst.w	$30(a0)
		bne.s	loc_1A1FC
		tst.b	$20(a0)
		bne.s	loc_1A216
		move.w	#$1E,$30(a0)
		move.w	#$AC,d0
		jsr	$880000+(PlaySound_Special).l ;	play boss damage sound

loc_1A1FC:				; ...
		subq.w	#1,$30(a0)
		bne.s	loc_1A216
		tst.b	$22(a0)
		bpl.s	loc_1A210
		move.w	#$60,$12(a0)
		bra.s	loc_1A216

loc_1A210:				; ...
		move.b	#$F,$20(a0)

loc_1A216:				; ...
		cmpi.w	#$2790,($FFFFD008).w
		blt.s	loc_1A23A
		move.b	#1,($FFFFF7CC).w
		move.w	#0,($FFFFF602).w
		clr.w	($FFFFD014).w
		tst.w	$12(a0)
		bpl.s	loc_1A248
		move.w	#$100,($FFFFF602).w

loc_1A23A:				; ...
		cmpi.w	#$27E0,($FFFFD008).w
		blt.s	loc_1A248
		move.w	#$27E0,($FFFFD008).w

loc_1A248:				; ...
		cmpi.w	#$2900,8(a0)
		bcs.s	loc_1A260
		tst.b	1(a0)
		bmi.s	loc_1A260
		move.b	#$18,($FFFFF600).w
		bra.w	Obj85_Delete

loc_1A260:				; ...
		bra.w	loc_1A15C

loc_1A264:				; ...
		movea.l	$34(a0),a1
		move.b	(a1),d0
		cmp.b	(a0),d0
		bne.w	Obj85_Delete
		move.b	#7,$1C(a0)
		cmpi.b	#$C,$34(a1)
		bge.s	loc_1A280
		bra.s	loc_1A2A6

loc_1A280:				; ...
		tst.w	$10(a1)
		beq.s	loc_1A28C
		move.b	#$B,$1C(a0)

loc_1A28C:				; ...
		lea	Ani_Eggman(pc),a1
		jsr	$880000+AnimateSprite

loc_1A296:				; ...
		movea.l	$34(a0),a1
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)

loc_1A2A6:				; ...
		movea.l	$34(a0),a1
		move.b	$22(a1),$22(a0)
		moveq	#3,d0
		and.b	$22(a0),d0
		andi.b	#-4,1(a0)
		or.b	d0,1(a0)
		jmp	$880000+DisplaySprite

loc_1A2C6:				; ...
		movea.l	$34(a0),a1
		move.b	(a1),d0
		cmp.b	(a0),d0
		bne.w	Obj85_Delete
		cmpi.l	#$880000+Map_Eggman,4(a1)
		beq.s	loc_1A2E4
		move.b	#$A,$1A(a0)
		bra.s	loc_1A2A6

loc_1A2E4:				; ...
		move.b	#1,$1C(a0)
		tst.b	$21(a1)
		ble.s	loc_1A312
		move.b	#6,$1C(a0)
		move.l	#$880000+Map_Eggman,4(a0)
		move.w	#$400,2(a0)
		lea	Ani_Eggman(pc),a1
		jsr	$880000+AnimateSprite
		bra.w	loc_1A296

loc_1A312:				; ...
		tst.b	1(a0)
		bpl.w	Obj85_Delete
		bsr.w	BossDefeated
		move.b	#2,$18(a0)
		move.b	#0,$1C(a0)
		move.l	#$880000+Map_Eggman2,4(a0)
		move.w	#$3A0,2(a0)
		lea	Ani_obj85(pc),a1
		jsr	$880000+AnimateSprite
		bra.w	loc_1A296

loc_1A346:				; ...
		bset	#0,$22(a0)
		movea.l	$34(a0),a1
		cmpi.l	#$880000+Map_Eggman,4(a1)
		beq.s	loc_1A35E
		bra.w	loc_1A2A6

loc_1A35E:				; ...
		move.w	8(a1),8(a0)
		move.w	$C(a1),$C(a0)
		tst.b	$1E(a0)
		bne.s	loc_1A376
		move.b	#$14,$1E(a0)

loc_1A376:				; ...
		subq.b	#1,$1E(a0)
		bgt.s	loc_1A38A
		addq.b	#1,$1A(a0)
		cmpi.b	#2,$1A(a0)
		bgt.w	Obj85_Delete

loc_1A38A:				; ...
		bra.w	loc_1A296

loc_1A38E:				; ...
		move.b	#$B,$1A(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bcs.s	loc_1A3A6
		tst.b	1(a0)
		bpl.w	Obj85_Delete

loc_1A3A6:				; ...
		jmp	$880000+DisplaySprite

loc_1A3AC:				; ...
		move.b	#0,$1A(a0)
		bset	#0,$22(a0)
		movea.l	$34(a0),a1
		cmpi.b	#$C,$34(a1)
		bne.s	loc_1A3D0
		cmpi.l	#$880000+Map_Eggman,4(a1)
		beq.w	Obj85_Delete

loc_1A3D0:				; ...
		bra.w	loc_1A2A6
Ani_obj85:	dc.w byte_1A3D6-Ani_obj85 ; ...
byte_1A3D6:	dc.b 3,	0, 1, $FF	; ...

Map_Eggman2:	dc.w byte_1A3DE-Map_Eggman2 ; ...
		dc.w byte_1A3FD-Map_Eggman2
byte_1A3DE:	dc.b 6			; ...
		dc.b $E4, 8, 0,	$20, $F4
		dc.b $EC, $D, 0, $23, $E4
		dc.b $EC, 9, 0,	$2B, 4
		dc.b $FC, 5, $20, $3A, $E4
		dc.b $FC, $E, $20, $3E,	4
		dc.b $14, 4, $20, $4A, 4
byte_1A3FD:	dc.b 6			; ...
		dc.b $E4, $A, 0, $31, $F4
		dc.b $EC, 5, 0,	$23, $E4
		dc.b $EC, 9, 0,	$2B, 4
		dc.b $FC, 5, $20, $3A, $E4
		dc.b $FC, $E, $20, $3E,	4
		dc.b $14, 4, $20, $4A, 4

Map_FZBoss:	dc.w byte_1A422-Map_FZBoss, byte_1A42D-Map_FZBoss ; ...
		dc.w byte_1A43D-Map_FZBoss
byte_1A422:	dc.b 2			; ...
		dc.b $14, $E, $28, 0, $F4
		dc.b $24, 0, $28, $C, $EC
byte_1A42D:	dc.b 3			; ...
		dc.b $C, 5, $28, $D, $C
		dc.b $1C, 0, $28, $11, $C
		dc.b $14, $D, $28, $12,	$EC
byte_1A43D:	dc.b 2			; ...
		dc.b $C, 1, $28, $1A, $C
		dc.b $14, $C, $28, $1C,	$EC

Obj84_Delete:				; ...
		jmp	$880000+DeleteObject
; ---------------------------------------------------------------------------
; Object 84 - cylinder Robotnik	hides in (FZ)
; ---------------------------------------------------------------------------

Obj84:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj84_Index(pc,d0.w),d0
		jmp	Obj84_Index(pc,d0.w)
Obj84_Index:	dc.w Obj84_Main-Obj84_Index ; ...
		dc.w loc_1A4CE-Obj84_Index
		dc.w loc_1A57E-Obj84_Index

Obj84_PosData:	dc.w $24D0, $620	; ...
		dc.w $2550, $620
		dc.w $2490, $4C0
		dc.w $2510, $4C0

Obj84_Main:				; ...
		lea	Obj84_PosData(pc),a1
		moveq	#0,d0
		move.b	$28(a0),d0
		add.w	d0,d0
		adda.w	d0,a1
		move.b	#4,1(a0)
		bset	#7,1(a0)
		bset	#4,1(a0)
		move.w	#$300,2(a0)
		move.l	#$880000+Map_obj84,4(a0)
		move.w	(a1)+,8(a0)
		move.w	(a1),$C(a0)
		move.w	(a1)+,$38(a0)
		move.b	#$20,$16(a0)
		move.b	#$60,$17(a0)
		move.b	#$20,$19(a0)
		move.b	#$60,$16(a0)
		move.b	#3,$18(a0)
		addq.b	#2,$24(a0)

loc_1A4CE:				; ...
		cmpi.b	#2,$28(a0)
		ble.s	loc_1A4DC
		bset	#1,1(a0)

loc_1A4DC:				; ...
		clr.l	$3C(a0)
		tst.b	$29(a0)
		beq.s	loc_1A4EA
		addq.b	#2,$24(a0)

loc_1A4EA:				; ...
		move.l	$3C(a0),d0
		move.l	$38(a0),d1
		add.l	d0,d1
		swap	d1
		move.w	d1,$C(a0)
		cmpi.b	#4,$24(a0)
		bne.s	loc_1A524
		tst.w	$30(a0)
		bpl.s	loc_1A524
		moveq	#-$A,d0
		cmpi.b	#2,$28(a0)
		ble.s	loc_1A514
		moveq	#$E,d0

loc_1A514:				; ...
		add.w	d0,d1
		movea.l	$34(a0),a1
		move.w	d1,$C(a1)
		move.w	8(a0),8(a1)

loc_1A524:				; ...
		move.w	#$2B,d1
		move.w	#$60,d2
		move.w	#$61,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		moveq	#0,d0
		move.w	$3C(a0),d1
		bpl.s	loc_1A550
		neg.w	d1
		subq.w	#8,d1
		bcs.s	loc_1A55C
		addq.b	#1,d0
		asr.w	#4,d1
		add.w	d1,d0
		bra.s	loc_1A55C

loc_1A550:				; ...
		subi.w	#$27,d1
		bcs.s	loc_1A55C
		addq.b	#1,d0
		asr.w	#4,d1
		add.w	d1,d0

loc_1A55C:				; ...
		move.b	d0,$1A(a0)
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bmi.s	loc_1A578
		subi.w	#$140,d0
		bmi.s	loc_1A578
		tst.b	1(a0)
		bpl.w	Obj84_Delete

loc_1A578:				; ...
		jmp	$880000+DisplaySprite

loc_1A57E:				; ...
		moveq	#0,d0
		move.b	$28(a0),d0
		move.w	off_1A590(pc,d0.w),d0
		jsr	off_1A590(pc,d0.w)
		bra.w	loc_1A4EA
off_1A590:	dc.w loc_1A598-off_1A590 ; ...
		dc.w loc_1A598-off_1A590
		dc.w loc_1A604-off_1A590
		dc.w loc_1A604-off_1A590

loc_1A598:				; ...
		tst.b	$29(a0)
		bne.s	loc_1A5D4
		movea.l	$34(a0),a1
		tst.b	$21(a1)
		bne.s	loc_1A5B4
		bsr.w	BossDefeated
		subi.l	#$10000,$3C(a0)

loc_1A5B4:				; ...
		addi.l	#$20000,$3C(a0)
		bcc.s	locret_1A602
		clr.l	$3C(a0)
		movea.l	$34(a0),a1
		subq.w	#1,$32(a1)
		clr.w	$30(a1)
		subq.b	#2,$24(a0)
		rts	

loc_1A5D4:				; ...
		cmpi.w	#-$10,$3C(a0)
		bge.s	loc_1A5E4
		subi.l	#$28000,$3C(a0)

loc_1A5E4:				; ...
		subi.l	#$8000,$3C(a0)
		cmpi.w	#-$A0,$3C(a0)
		bgt.s	locret_1A602
		clr.w	$3E(a0)
		move.w	#-$A0,$3C(a0)
		clr.b	$29(a0)

locret_1A602:				; ...
		rts	

loc_1A604:				; ...
		bset	#1,1(a0)
		tst.b	$29(a0)
		bne.s	loc_1A646
		movea.l	$34(a0),a1
		tst.b	$21(a1)
		bne.s	loc_1A626
		bsr.w	BossDefeated
		addi.l	#$10000,$3C(a0)

loc_1A626:				; ...
		subi.l	#$20000,$3C(a0)
		bcc.s	locret_1A674
		clr.l	$3C(a0)
		movea.l	$34(a0),a1
		subq.w	#1,$32(a1)
		clr.w	$30(a1)
		subq.b	#2,$24(a0)
		rts	

loc_1A646:				; ...
		cmpi.w	#$10,$3C(a0)
		blt.s	loc_1A656
		addi.l	#$28000,$3C(a0)

loc_1A656:				; ...
		addi.l	#$8000,$3C(a0)
		cmpi.w	#$A0,$3C(a0)
		blt.s	locret_1A674
		clr.w	$3E(a0)
		move.w	#$A0,$3C(a0)
		clr.b	$29(a0)

locret_1A674:				; ...
		rts	
; ---------------------------------------------------------------------------
; Sprite mappings - cylinders Robotnik hides in	(FZ)
; ---------------------------------------------------------------------------
Map_obj84:	dc.w byte_1A68E-Map_obj84, byte_1A6AD-Map_obj84	; ...
		dc.w byte_1A6D6-Map_obj84, byte_1A709-Map_obj84
		dc.w byte_1A746-Map_obj84, byte_1A788-Map_obj84
		dc.w byte_1A788-Map_obj84, byte_1A788-Map_obj84
		dc.w byte_1A788-Map_obj84, byte_1A788-Map_obj84
		dc.w byte_1A788-Map_obj84, byte_1A7CF-Map_obj84
byte_1A68E:	dc.b 6			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
byte_1A6AD:	dc.b 8			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
		dc.b $D8, $F, $40, $20,	$E0
		dc.b $D8, $F, $48, $20,	0
byte_1A6D6:	dc.b $A			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
		dc.b $D8, $F, $40, $20,	$E0
		dc.b $D8, $F, $48, $20,	0
		dc.b $F8, $F, $40, $30,	$E0
		dc.b $F8, $F, $48, $30,	0
byte_1A709:	dc.b $C			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
		dc.b $D8, $F, $40, $20,	$E0
		dc.b $D8, $F, $48, $20,	0
		dc.b $F8, $F, $40, $30,	$E0
		dc.b $F8, $F, $48, $30,	0
		dc.b $18, $F, $40, $40,	$E0
		dc.b $18, $F, $48, $40,	0
byte_1A746:	dc.b $D			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
		dc.b $D8, $F, $40, $20,	$E0
		dc.b $D8, $F, $48, $20,	0
		dc.b $F8, $F, $40, $30,	$E0
		dc.b $F8, $F, $48, $30,	0
		dc.b $18, $F, $40, $40,	$E0
		dc.b $18, $F, $48, $40,	0
		dc.b $38, $F, $40, $50,	$F0
byte_1A788:	dc.b $E			; ...
		dc.b $A0, $D, $40, 0, $E0
		dc.b $A0, $D, $48, 0, 0
		dc.b $B0, $C, $20, 8, $E0
		dc.b $B0, $C, $20, $C, 0
		dc.b $B8, $F, $40, $10,	$E0
		dc.b $B8, $F, $48, $10,	0
		dc.b $D8, $F, $40, $20,	$E0
		dc.b $D8, $F, $48, $20,	0
		dc.b $F8, $F, $40, $30,	$E0
		dc.b $F8, $F, $48, $30,	0
		dc.b $18, $F, $40, $40,	$E0
		dc.b $18, $F, $48, $40,	0
		dc.b $38, $F, $40, $50,	$F0
		dc.b $58, $F, $40, $50,	$F0
byte_1A7CF:	dc.b 2			; ...
		dc.b $F8, 4, 0,	$68, $F0
		dc.b 0,	$C, 0, $6A, $F0
; ---------------------------------------------------------------------------
; Object 86 - energy balls (FZ)
; ---------------------------------------------------------------------------

Obj86:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj86_Index(pc,d0.w),d0
		jmp	Obj86_Index(pc,d0.w)
Obj86_Index:	dc.w Obj86_Main-Obj86_Index ; ...
		dc.w Obj86_Generator-Obj86_Index
		dc.w Obj86_MakeBalls-Obj86_Index
		dc.w loc_1A962-Obj86_Index
		dc.w loc_1A982-Obj86_Index

Obj86_Main:				; ...
		move.w	#$2588,8(a0)
		move.w	#$53C,$C(a0)
		move.w	#$300,2(a0)
		move.l	#$880000+Map_obj86,4(a0)
		move.b	#0,$1C(a0)
		move.b	#3,$18(a0)
		move.b	#8,$17(a0)
		move.b	#8,$16(a0)
		move.b	#4,1(a0)
		bset	#7,1(a0)
		addq.b	#2,$24(a0)

Obj86_Generator:			; ...
		movea.l	$34(a0),a1
		cmpi.b	#6,$34(a1)
		bne.s	loc_1A850
		move.b	#$3F,(a0)
		move.b	#0,$24(a0)
		jmp	$880000+DisplaySprite

loc_1A850:				; ...
		move.b	#0,$1C(a0)
		tst.b	$29(a0)
		beq.s	loc_1A86C
		addq.b	#2,$24(a0)
		move.b	#1,$1C(a0)
		move.b	#$3E,$28(a0)

loc_1A86C:				; ...
		move.w	#$13,d1
		move.w	#8,d2
		move.w	#$11,d3
		move.w	8(a0),d4
		jsr	$880000+SolidObject
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		bmi.s	loc_1A89A
		subi.w	#$140,d0
		bmi.s	loc_1A89A
		tst.b	1(a0)
		bpl.w	Obj84_Delete

loc_1A89A:				; ...
		lea	Ani_obj86(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite

Obj86_MakeBalls:			; ...
		tst.b	$29(a0)
		beq.w	loc_1A954
		clr.b	$29(a0)
		add.w	$30(a0),d0
		andi.w	#$1E,d0
		adda.w	d0,a2
		addq.w	#4,$30(a0)
		clr.w	$32(a0)
		moveq	#3,d2

Obj86_Loop:				; ...
		jsr	$880000+SingleObjLoad2
		bne.w	loc_1A954
		move.b	#$86,(a1)
		move.w	8(a0),8(a1)
		move.w	#$53C,$C(a1)
		move.b	#8,$24(a1)
		move.w	#$2300,2(a1)
		move.l	#$880000+Map_obj86a,4(a1)
		move.b	#$C,$16(a1)
		move.b	#$C,$17(a1)
		move.b	#0,$20(a1)
		move.b	#3,$18(a1)
		move.w	#$3E,$28(a1)
		move.b	#4,1(a1)
		bset	#7,1(a1)
		move.l	a0,$34(a1)
		jsr	$880000+(RandomNumber).l
		move.w	$32(a0),d1
		muls.w	#-$4F,d1
		addi.w	#$2578,d1
		andi.w	#$1F,d0
		subi.w	#$10,d0
		add.w	d1,d0
		move.w	d0,$30(a1)
		addq.w	#1,$32(a0)
		move.w	$32(a0),$38(a0)
		dbf	d2,Obj86_Loop	; repeat sequence 3 more times

loc_1A954:				; ...
		tst.w	$32(a0)
		bne.s	loc_1A95E
		addq.b	#2,$24(a0)

loc_1A95E:				; ...
		bra.w	loc_1A86C

loc_1A962:				; ...
		move.b	#2,$1C(a0)
		tst.w	$38(a0)
		bne.s	loc_1A97E
		move.b	#2,$24(a0)
		movea.l	$34(a0),a1
		move.w	#-1,$32(a1)

loc_1A97E:				; ...
		bra.w	loc_1A86C

loc_1A982:				; ...
		moveq	#0,d0
		move.b	$25(a0),d0
		move.w	Obj86_Index2(pc,d0.w),d0
		jsr	Obj86_Index2(pc,d0.w)
		lea	Ani_obj86a(pc),a1
		jsr	$880000+AnimateSprite
		jmp	$880000+DisplaySprite
Obj86_Index2:	dc.w loc_1A9A6-Obj86_Index2 ; ...
		dc.w loc_1A9C0-Obj86_Index2
		dc.w loc_1AA1E-Obj86_Index2

loc_1A9A6:				; ...
		move.w	$30(a0),d0
		sub.w	8(a0),d0
		asl.w	#4,d0
		move.w	d0,$10(a0)
		move.w	#$B4,$28(a0)
		addq.b	#2,$25(a0)
		rts	

loc_1A9C0:				; ...
		tst.w	$10(a0)
		beq.s	loc_1A9E6
		jsr	$880000+SpeedToPos
		move.w	8(a0),d0
		sub.w	$30(a0),d0
		bcc.s	loc_1A9E6
		clr.w	$10(a0)
		add.w	d0,8(a0)
		movea.l	$34(a0),a1
		subq.w	#1,$32(a1)

loc_1A9E6:				; ...
		move.b	#0,$1C(a0)
		subq.w	#1,$28(a0)
		bne.s	locret_1AA1C
		addq.b	#2,$25(a0)
		move.b	#1,$1C(a0)
		move.b	#$9A,$20(a0)
		move.w	#$B4,$28(a0)
		moveq	#0,d0
		move.w	($FFFFD008).w,d0
		sub.w	8(a0),d0
		move.w	d0,$10(a0)
		move.w	#$140,$12(a0)

locret_1AA1C:				; ...
		rts	

loc_1AA1E:				; ...
		jsr	$880000+SpeedToPos
		cmpi.w	#$5E0,$C(a0)
		bcc.s	loc_1AA34
		subq.w	#1,$28(a0)
		beq.s	loc_1AA34
		rts	

loc_1AA34:				; ...
		movea.l	$34(a0),a1
		subq.w	#1,$38(a1)
		bra.w	Obj84_Delete
Ani_obj86:	dc.w byte_1AA46-Ani_obj86, byte_1AA4A-Ani_obj86, byte_1AA50-Ani_obj86 ;	...
byte_1AA46:	dc.b $7E, 0, $FF, 0	; ...
byte_1AA4A:	dc.b 1,	0, 2, 0, 3, $FF	; ...
byte_1AA50:	dc.b 1,	1, 2, 1, 3, $FF	; ...
; ---------------------------------------------------------------------------
; Sprite mappings - energy ball	launcher (FZ)
; ---------------------------------------------------------------------------
Map_obj86:	dc.w byte_1AA5E-Map_obj86, byte_1AA64-Map_obj86	; ...
		dc.w byte_1AA6A-Map_obj86, byte_1AA70-Map_obj86
byte_1AA5E:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$6E, $F8
byte_1AA64:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$76, $F8
byte_1AA6A:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$72, $F8
byte_1AA70:	dc.b 1			; ...
		dc.b $F8, 5, $10, $72, $F8

Ani_obj86a:	dc.w byte_1AA7A-Ani_obj86a, byte_1AA9C-Ani_obj86a ; ...
byte_1AA7A:	dc.b 1,	0, $A, 8, $A, 1, $A, 9,	$A, 6, $A, 7, $A, 0, $A	; ...
		dc.b 8,	$A, 1, $A, 9, $A, 6, $A, 7, $A,	2, $A, 3, $A, 4
		dc.b $A, 5, $FF, 0
byte_1AA9C:	dc.b 0,	6, 5, 1, 5, 7, 5, 1, 5,	$FF ; ...
; ---------------------------------------------------------------------------
; Sprite mappings - energy balls (FZ)
; ---------------------------------------------------------------------------
Map_obj86a:	dc.w byte_1AABC-Map_obj86a, byte_1AAC7-Map_obj86a ; ...
		dc.w byte_1AAD2-Map_obj86a, byte_1AADD-Map_obj86a
		dc.w byte_1AAE8-Map_obj86a, byte_1AAF3-Map_obj86a
		dc.w byte_1AAFE-Map_obj86a, byte_1AB04-Map_obj86a
		dc.w byte_1AB0A-Map_obj86a, byte_1AB15-Map_obj86a
		dc.w byte_1AB20-Map_obj86a
byte_1AABC:	dc.b 2			; ...
		dc.b $F0, $D, 0, $7A, $F0
		dc.b 0,	$D, $18, $7A, $F0
byte_1AAC7:	dc.b 2			; ...
		dc.b $F4, 6, 0,	$82, $F4
		dc.b $F4, 2, $18, $82, 4
byte_1AAD2:	dc.b 2			; ...
		dc.b $F8, 4, 0,	$88, $F8
		dc.b 0,	4, $10,	$88, $F8
byte_1AADD:	dc.b 2			; ...
		dc.b $F8, 4, 0,	$8A, $F8
		dc.b 0,	4, $10,	$8A, $F8
byte_1AAE8:	dc.b 2			; ...
		dc.b $F8, 4, 0,	$8C, $F8
		dc.b 0,	4, $10,	$8C, $F8
byte_1AAF3:	dc.b 2			; ...
		dc.b $F4, 6, 0,	$8E, $F4
		dc.b $F4, 2, $18, $8E, 4
byte_1AAFE:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$94, $F8
byte_1AB04:	dc.b 1			; ...
		dc.b $F8, 5, 0,	$98, $F8
byte_1AB0A:	dc.b 2			; ...
		dc.b $F0, $D, 8, $7A, $F0
		dc.b 0,	$D, $10, $7A, $F0
byte_1AB15:	dc.b 2			; ...
		dc.b $F4, 6, $10, $82, $F4
		dc.b $F4, 2, 8,	$82, 4
byte_1AB20:	dc.b 0			; ...
		dc.b 0
		rts
; ---------------------------------------------------------------------------
; Object 8A - "SONIC TEAM PRESENTS" and	credits
; ---------------------------------------------------------------------------

Obj8A:					; ...
		moveq	#0,d0
		move.b	$24(a0),d0
		move.w	Obj8A_Index(pc,d0.w),d1
		jmp	Obj8A_Index(pc,d1.w)
Obj8A_Index:	dc.w Obj8A_Main-Obj8A_Index ; ...
		dc.w Obj8A_Display-Obj8A_Index

Obj8A_Main:				; ...
		addq.b	#2,$24(a0)
		move.w	#$120,8(a0)
		move.w	#$F0,$A(a0)
		move.l	#$880000+Map_obj8A,4(a0)
		move.w	#$5A0,2(a0)
		move.w	($FFFFFFF4).w,d0 ; load	credits	index number
		move.b	d0,$1A(a0)	; display appropriate sprite
		move.b	#0,1(a0)
		move.b	#0,$18(a0)
		cmpi.b	#4,($FFFFF600).w ; is the scene	number 04 (title screen)?
		bne.s	Obj8A_Display	; if not, branch
		move.w	#$A6,2(a0)
		move.b	#$A,$1A(a0)	; display "SONIC TEAM PRESENTS"
		tst.b	($FFFFFFE3).w	; is hidden credits cheat on?
		beq.s	Obj8A_Display	; if not, branch
		cmpi.b	#$72,($FFFFF604).w ; is	Start+A+C+Down being pressed?
		bne.s	Obj8A_Display	; if not, branch
		move.w	#$EEE,($FFFFFBC0).w ; 3rd pallet, 1st entry = white
		move.w	#$880,($FFFFFBC2).w ; 3rd pallet, 2nd entry = cyan
		jmp	$880000+DeleteObject

Obj8A_Display:				; ...
		jmp	$880000+DisplaySprite
; ---------------------------------------------------------------------------
; Sprite mappings - "SONIC TEAM	PRESENTS" and credits
; ---------------------------------------------------------------------------
Map_obj8A:	dc.w byte_172F8-Map_obj8A, byte_1733F-Map_obj8A	; ...
		dc.w byte_17390-Map_obj8A, byte_173C3-Map_obj8A
		dc.w byte_1743C-Map_obj8A, byte_174A1-Map_obj8A
		dc.w byte_17524-Map_obj8A, byte_17598-Map_obj8A
		dc.w byte_17634-Map_obj8A, byte_17680-Map_obj8A
		dc.w byte_176A9-Map_obj8A
byte_172F8:	dc.b $E			; ...
		dc.b $F8, 5, 0,	$2E, $88 ; SONIC TEAM STAFF
		dc.b $F8, 5, 0,	$26, $98
		dc.b $F8, 5, 0,	$1A, $A8
		dc.b $F8, 1, 0,	$46, $B8
		dc.b $F8, 5, 0,	$1E, $C0
		dc.b $F8, 5, 0,	$3E, $D8
		dc.b $F8, 5, 0,	$E, $E8
		dc.b $F8, 5, 0,	4, $F8
		dc.b $F8, 9, 0,	8, 8
		dc.b $F8, 5, 0,	$2E, $28
		dc.b $F8, 5, 0,	$3E, $38
		dc.b $F8, 5, 0,	4, $48
		dc.b $F8, 5, 0,	$5C, $58
		dc.b $F8, 5, 0,	$5C, $68
byte_1733F:	dc.b $10		; ...
		dc.b $D8, 5, 0,	0, $80	; GAME PLAN CAROL YAS
		dc.b $D8, 5, 0,	4, $90
		dc.b $D8, 9, 0,	8, $A0
		dc.b $D8, 5, 0,	$E, $B4
		dc.b $D8, 5, 0,	$12, $D0
		dc.b $D8, 5, 0,	$16, $E0
		dc.b $D8, 5, 0,	4, $F0
		dc.b $D8, 5, 0,	$1A, 0
		dc.b 8,	5, 0, $1E, $C8
		dc.b 8,	5, 0, 4, $D8
		dc.b 8,	5, 0, $22, $E8
		dc.b 8,	5, 0, $26, $F8
		dc.b 8,	5, 0, $16, 8
		dc.b 8,	5, 0, $2A, $20
		dc.b 8,	5, 0, 4, $30
		dc.b 8,	5, 0, $2E, $44
byte_17390:	dc.b $A			; ...
		dc.b $D8, 5, 0,	$12, $80 ; PROGRAM YU 2
		dc.b $D8, 5, 0,	$22, $90
		dc.b $D8, 5, 0,	$26, $A0
		dc.b $D8, 5, 0,	0, $B0
		dc.b $D8, 5, 0,	$22, $C0
		dc.b $D8, 5, 0,	4, $D0
		dc.b $D8, 9, 0,	8, $E0
		dc.b 8,	5, 0, $2A, $E8
		dc.b 8,	5, 0, $32, $F8
		dc.b 8,	5, 0, $36, 8
byte_173C3:	dc.b $18		; ...
		dc.b $D8, 5, 0,	$1E, $88 ; CHARACTER DESIGN BIGISLAND
		dc.b $D8, 5, 0,	$3A, $98
		dc.b $D8, 5, 0,	4, $A8
		dc.b $D8, 5, 0,	$22, $B8
		dc.b $D8, 5, 0,	4, $C8
		dc.b $D8, 5, 0,	$1E, $D8
		dc.b $D8, 5, 0,	$3E, $E8
		dc.b $D8, 5, 0,	$E, $F8
		dc.b $D8, 5, 0,	$22, 8
		dc.b $D8, 5, 0,	$42, $20
		dc.b $D8, 5, 0,	$E, $30
		dc.b $D8, 5, 0,	$2E, $40
		dc.b $D8, 1, 0,	$46, $50
		dc.b $D8, 5, 0,	0, $58
		dc.b $D8, 5, 0,	$1A, $68
		dc.b 8,	5, 0, $48, $C0
		dc.b 8,	1, 0, $46, $D0
		dc.b 8,	5, 0, 0, $D8
		dc.b 8,	1, 0, $46, $E8
		dc.b 8,	5, 0, $2E, $F0
		dc.b 8,	5, 0, $16, 0
		dc.b 8,	5, 0, 4, $10
		dc.b 8,	5, 0, $1A, $20
		dc.b 8,	5, 0, $42, $30
byte_1743C:	dc.b $14		; ...
		dc.b $D0, 5, 0,	$42, $A0 ; DESIGN JINYA	PHENIX RIE
		dc.b $D0, 5, 0,	$E, $B0
		dc.b $D0, 5, 0,	$2E, $C0
		dc.b $D0, 1, 0,	$46, $D0
		dc.b $D0, 5, 0,	0, $D8
		dc.b $D0, 5, 0,	$1A, $E8
		dc.b 0,	5, 0, $4C, $E8
		dc.b 0,	1, 0, $46, $F8
		dc.b 0,	5, 0, $1A, 4
		dc.b 0,	5, 0, $2A, $14
		dc.b 0,	5, 0, 4, $24
		dc.b $20, 5, 0,	$12, $D0
		dc.b $20, 5, 0,	$3A, $E0
		dc.b $20, 5, 0,	$E, $F0
		dc.b $20, 5, 0,	$1A, 0
		dc.b $20, 1, 0,	$46, $10
		dc.b $20, 5, 0,	$50, $18
		dc.b $20, 5, 0,	$22, $30
		dc.b $20, 1, 0,	$46, $40
		dc.b $20, 5, 0,	$E, $48
byte_174A1:	dc.b $1A		; ...
		dc.b $D8, 5, 0,	$2E, $98 ; SOUND PRODUCE MASATO	NAKAMURA
		dc.b $D8, 5, 0,	$26, $A8
		dc.b $D8, 5, 0,	$32, $B8
		dc.b $D8, 5, 0,	$1A, $C8
		dc.b $D8, 5, 0,	$54, $D8
		dc.b $D8, 5, 0,	$12, $F8
		dc.b $D8, 5, 0,	$22, 8
		dc.b $D8, 5, 0,	$26, $18
		dc.b $D8, 5, 0,	$42, $28
		dc.b $D8, 5, 0,	$32, $38
		dc.b $D8, 5, 0,	$1E, $48
		dc.b $D8, 5, 0,	$E, $58
		dc.b 8,	9, 0, 8, $88
		dc.b 8,	5, 0, 4, $9C
		dc.b 8,	5, 0, $2E, $AC
		dc.b 8,	5, 0, 4, $BC
		dc.b 8,	5, 0, $3E, $CC
		dc.b 8,	5, 0, $26, $DC
		dc.b 8,	5, 0, $1A, $F8
		dc.b 8,	5, 0, 4, 8
		dc.b 8,	5, 0, $58, $18
		dc.b 8,	5, 0, 4, $28
		dc.b 8,	9, 0, 8, $38
		dc.b 8,	5, 0, $32, $4C
		dc.b 8,	5, 0, $22, $5C
		dc.b 8,	5, 0, 4, $6C
byte_17524:	dc.b $17		; ...
		dc.b $D0, 5, 0,	$2E, $98 ; SOUND PROGRAM JIMITA	MACKY
		dc.b $D0, 5, 0,	$26, $A8
		dc.b $D0, 5, 0,	$32, $B8
		dc.b $D0, 5, 0,	$1A, $C8
		dc.b $D0, 5, 0,	$54, $D8
		dc.b $D0, 5, 0,	$12, $F8
		dc.b $D0, 5, 0,	$22, 8
		dc.b $D0, 5, 0,	$26, $18
		dc.b $D0, 5, 0,	0, $28
		dc.b $D0, 5, 0,	$22, $38
		dc.b $D0, 5, 0,	4, $48
		dc.b $D0, 9, 0,	8, $58
		dc.b 0,	5, 0, $4C, $D0
		dc.b 0,	1, 0, $46, $E0
		dc.b 0,	9, 0, 8, $E8
		dc.b 0,	1, 0, $46, $FC
		dc.b 0,	5, 0, $3E, 4
		dc.b 0,	5, 0, 4, $14
		dc.b $20, 9, 0,	8, $D0
		dc.b $20, 5, 0,	4, $E4
		dc.b $20, 5, 0,	$1E, $F4
		dc.b $20, 5, 0,	$58, 4
		dc.b $20, 5, 0,	$2A, $14
byte_17598:	dc.b $1F		; ...
		dc.b $D8, 5, 0,	$2E, $80 ; SPECIAL THANKS FUJIO	MINEGISHI PAPA
		dc.b $D8, 5, 0,	$12, $90
		dc.b $D8, 5, 0,	$E, $A0
		dc.b $D8, 5, 0,	$1E, $B0
		dc.b $D8, 1, 0,	$46, $C0
		dc.b $D8, 5, 0,	4, $C8
		dc.b $D8, 5, 0,	$16, $D8
		dc.b $D8, 5, 0,	$3E, $F8
		dc.b $D8, 5, 0,	$3A, 8
		dc.b $D8, 5, 0,	4, $18
		dc.b $D8, 5, 0,	$1A, $28
		dc.b $D8, 5, 0,	$58, $38
		dc.b $D8, 5, 0,	$2E, $48
		dc.b 0,	5, 0, $5C, $B0
		dc.b 0,	5, 0, $32, $C0
		dc.b 0,	5, 0, $4C, $D0
		dc.b 0,	1, 0, $46, $E0
		dc.b 0,	5, 0, $26, $E8
		dc.b 0,	9, 0, 8, 0
		dc.b 0,	1, 0, $46, $14
		dc.b 0,	5, 0, $1A, $1C
		dc.b 0,	5, 0, $E, $2C
		dc.b 0,	5, 0, 0, $3C
		dc.b 0,	1, 0, $46, $4C
		dc.b 0,	5, 0, $2E, $54
		dc.b 0,	5, 0, $3A, $64
		dc.b 0,	1, 0, $46, $74
		dc.b $20, 5, 0,	$12, $F8
		dc.b $20, 5, 0,	4, 8
		dc.b $20, 5, 0,	$12, $18
		dc.b $20, 5, 0,	4, $28
byte_17634:	dc.b $F			; ...
		dc.b $F8, 5, 0,	$12, $80 ; PRESENTED BY	SEGA
		dc.b $F8, 5, 0,	$22, $90
		dc.b $F8, 5, 0,	$E, $A0
		dc.b $F8, 5, 0,	$2E, $B0
		dc.b $F8, 5, 0,	$E, $C0
		dc.b $F8, 5, 0,	$1A, $D0
		dc.b $F8, 5, 0,	$3E, $E0
		dc.b $F8, 5, 0,	$E, $F0
		dc.b $F8, 5, 0,	$42, 0
		dc.b $F8, 5, 0,	$48, $18
		dc.b $F8, 5, 0,	$2A, $28
		dc.b $F8, 5, 0,	$2E, $40
		dc.b $F8, 5, 0,	$E, $50
		dc.b $F8, 5, 0,	0, $60
		dc.b $F8, 5, 0,	4, $70
byte_17680:	dc.b 8			; ...
		dc.b $30, 5, 0,	$3E, $C0 ; TRY AGAIN
		dc.b $30, 5, 0,	$22, $D0
		dc.b $30, 5, 0,	$2A, $E0
		dc.b $30, 5, 0,	4, $F8
		dc.b $30, 5, 0,	0, 8
		dc.b $30, 5, 0,	4, $18
		dc.b $30, 1, 0,	$46, $28
		dc.b $30, 5, 0,	$1A, $30
byte_176A9:	dc.b $11		; ...
		dc.b $E8, 5, 0,	$2E, $B4 ; SONIC TEAM PRESENTS
		dc.b $E8, 5, 0,	$26, $C4
		dc.b $E8, 5, 0,	$1A, $D4
		dc.b $E8, 1, 0,	$46, $E4
		dc.b $E8, 5, 0,	$1E, $EC
		dc.b $E8, 5, 0,	$3E, 4
		dc.b $E8, 5, 0,	$E, $14
		dc.b $E8, 5, 0,	4, $24
		dc.b $E8, 9, 0,	8, $34
		dc.b 0,	5, 0, $12, $C0
		dc.b 0,	5, 0, $22, $D0
		dc.b 0,	5, 0, $E, $E0
		dc.b 0,	5, 0, $2E, $F0
		dc.b 0,	5, 0, $E, 0
		dc.b 0,	5, 0, $1A, $10
		dc.b 0,	5, 0, $3E, $20
		dc.b 0,	5, 0, $2E, $30
		dc.b 0

; ---------------------------------------------------------------------------
; Solid	object subroutine (includes spikes, blocks, rocks etc)
;
; variables:
; d1 = width
; d2 = height і	2 (when	jumping)
; d3 = height і	2 (when	walking)
; d4 = x-axis position
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SolidObject:				; ...
		tst.b	$25(a0)
		beq.w	loc_FAC8
		move.w	d1,d2
		add.w	d2,d2
		lea	($FFFFD000).w,a1
		btst	#1,$22(a1)
		bne.s	loc_F9FE
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_F9FE
		cmp.w	d2,d0
		bcs.s	loc_FA12

loc_F9FE:				; ...
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		moveq	#0,d4
		rts	

loc_FA12:				; ...
		move.w	d4,d2
		jsr	$880000+MvSonicOnPtfm
		moveq	#0,d4
		rts	

SolidObject71:				; ...
		tst.b	$25(a0)
		beq.w	loc_FAD0
		move.w	d1,d2
		add.w	d2,d2
		lea	($FFFFD000).w,a1
		btst	#1,$22(a1)
		bne.s	loc_FA44
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.s	loc_FA44
		cmp.w	d2,d0
		bcs.s	loc_FA58

loc_FA44:				; ...
		bclr	#3,$22(a1)
		bclr	#3,$22(a0)
		clr.b	$25(a0)
		moveq	#0,d4
		rts	

loc_FA58:				; ...
		move.w	d4,d2
		jsr	$880000+MvSonicOnPtfm
		moveq	#0,d4
		rts	

SolidObject2F:				; ...
		lea	($FFFFD000).w,a1
		tst.b	1(a0)
		bpl.w	loc_FB92
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.w	loc_FB92
		move.w	d1,d3
		add.w	d3,d3
		cmp.w	d3,d0
		bhi.w	loc_FB92
		move.w	d0,d5
		btst	#0,1(a0)
		beq.s	loc_FA94
		not.w	d5
		add.w	d3,d5

loc_FA94:				; ...
		lsr.w	#1,d5
		moveq	#0,d3
		move.b	(a2,d5.w),d3
		sub.b	(a2),d3
		move.w	$C(a0),d5
		sub.w	d3,d5
		move.b	$16(a1),d3
		ext.w	d3
		add.w	d3,d2
		move.w	$C(a1),d3
		sub.w	d5,d3
		addq.w	#4,d3
		add.w	d2,d3
		bmi.w	loc_FB92
		move.w	d2,d4
		add.w	d4,d4
		cmp.w	d4,d3
		bcc.w	loc_FB92
		bra.w	loc_FB0E

loc_FAC8:				; ...
		tst.b	1(a0)
		bpl.w	loc_FB92

loc_FAD0:				; ...
		lea	($FFFFD000).w,a1
		move.w	8(a1),d0
		sub.w	8(a0),d0
		add.w	d1,d0
		bmi.w	loc_FB92
		move.w	d1,d3
		add.w	d3,d3
		cmp.w	d3,d0
		bhi.w	loc_FB92
		move.b	$16(a1),d3
		ext.w	d3
		add.w	d3,d2
		move.w	$C(a1),d3
		sub.w	$C(a0),d3
		addq.w	#4,d3
		add.w	d2,d3
		bmi.w	loc_FB92
		move.w	d2,d4
		add.w	d4,d4
		cmp.w	d4,d3
		bcc.w	loc_FB92

loc_FB0E:				; ...
		tst.b	($FFFFF7C8).w
		bmi.w	loc_FB92
		cmpi.b	#6,($FFFFD024).w
		bcc.w	loc_FB92
		tst.w	($FFFFFE08).w
		bne.w	loc_FBAC
		move.w	d0,d5
		cmp.w	d0,d1
		bcc.s	loc_FB36
		add.w	d1,d1
		sub.w	d1,d0
		move.w	d0,d5
		neg.w	d5

loc_FB36:				; ...
		move.w	d3,d1
		cmp.w	d3,d2
		bcc.s	loc_FB44
		subq.w	#4,d3
		sub.w	d4,d3
		move.w	d3,d1
		neg.w	d1

loc_FB44:				; ...
		cmp.w	d1,d5
		bhi.w	loc_FBB0
		cmpi.w	#4,d1
		bls.s	loc_FB8C
		tst.w	d0
		beq.s	loc_FB70
		bmi.s	loc_FB5E
		tst.w	$10(a1)
		bmi.s	loc_FB70
		bra.s	loc_FB64

loc_FB5E:				; ...
		tst.w	$10(a1)
		bpl.s	loc_FB70

loc_FB64:				; ...
		move.w	#0,$14(a1)	; stop Sonic moving
		move.w	#0,$10(a1)

loc_FB70:				; ...
		sub.w	d0,8(a1)
		btst	#1,$22(a1)
		bne.s	loc_FB8C
		bset	#5,$22(a1)
		bset	#5,$22(a0)
		moveq	#1,d4
		rts	

loc_FB8C:				; ...
		bsr.s	loc_FBA0
		moveq	#1,d4
		rts	

loc_FB92:				; ...
		btst	#5,$22(a0)
		beq.s	loc_FBAC
		move.w	#1,$1C(a1)	; use walking animation

loc_FBA0:				; ...
		bclr	#5,$22(a0)
		bclr	#5,$22(a1)

loc_FBAC:				; ...
		moveq	#0,d4
		rts	

loc_FBB0:				; ...
		tst.w	d3
		bmi.s	loc_FBBC
		cmpi.w	#$10,d3
		bcs.s	loc_FBEE
		bra.s	loc_FB92

loc_FBBC:				; ...
		tst.w	$12(a1)
		beq.s	loc_FBD6
		bpl.s	loc_FBD2
		tst.w	d3
		bpl.s	loc_FBD2
		sub.w	d3,$C(a1)
		move.w	#0,$12(a1)	; stop Sonic moving

loc_FBD2:				; ...
		moveq	#-1,d4
		rts	

loc_FBD6:				; ...
		btst	#1,$22(a1)
		bne.s	loc_FBD2
		move.l	a0,-(sp)
		movea.l	a1,a0
		jsr	$880000+KillSonic
		movea.l	(sp)+,a0
		moveq	#-1,d4
		rts	

loc_FBEE:				; ...
		subq.w	#4,d3
		moveq	#0,d1
		move.b	$19(a0),d1
		move.w	d1,d2
		add.w	d2,d2
		add.w	8(a1),d1
		sub.w	8(a0),d1
		bmi.s	loc_FC28
		cmp.w	d2,d1
		bcc.s	loc_FC28
		tst.w	$12(a1)
		bmi.s	loc_FC28
		sub.w	d3,$C(a1)
		subq.w	#1,$C(a1)
		bsr.s	sub_FC2C
		move.b	#2,$25(a0)
		bset	#3,$22(a0)
		moveq	#-1,d4
		rts	

loc_FC28:				; ...
		moveq	#0,d4
		rts	
; End of function SolidObject


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_FC2C:				; ...
		btst	#3,$22(a1)
		beq.s	loc_FC4E
		moveq	#0,d0
		move.b	$3D(a1),d0
		lsl.w	#6,d0
		addi.l	#$FFD000,d0
		movea.l	d0,a2
		bclr	#3,$22(a2)
		clr.b	$25(a2)

loc_FC4E:				; ...
		move.w	a0,d0
		subi.w	#-$3000,d0
		lsr.w	#6,d0
		andi.w	#$7F,d0
		move.b	d0,$3D(a1)
		move.b	#0,$26(a1)
		move.w	#0,$12(a1)
		move.w	$10(a1),$14(a1)
		btst	#1,$22(a1)
		beq.s	loc_FC84
		move.l	a0,-(sp)
		movea.l	a1,a0
		jsr	$880000+Sonic_ResetOnFloor
		movea.l	(sp)+,a0

loc_FC84:				; ...
		bset	#3,$22(a1)
		bset	#3,$22(a0)
		rts	
; End of function sub_FC2C


; ---------------------------------------------------------------------------
; Subroutine to	make an	object fall downwards, increasingly fast
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjectFall:				; ...
		move.l	8(a0),d2
		move.l	$C(a0),d3
		move.w	$10(a0),d0
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d2
		move.w	$12(a0),d0
		addi.w	#$38,$12(a0)	; increase vertical speed
		ext.l	d0
		asl.l	#8,d0
		add.l	d0,d3
		move.l	d2,8(a0)
		move.l	d3,$C(a0)
		rts	
; End of function ObjectFall

; ---------------------------------------------------------------------------
; Subroutine translating object	speed to update	object position
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SpeedToPos:				; ...
		move.l	8(a0),d2
		move.l	$C(a0),d3
		move.w	$10(a0),d0	; load horizontal speed
		ext.l	d0
		asl.l	#8,d0		; multiply speed by $100
		add.l	d0,d2		; add to x-axis	position
		move.w	$12(a0),d0	; load vertical	speed
		ext.l	d0
		asl.l	#8,d0		; multiply by $100
		add.l	d0,d3		; add to y-axis	position
		move.l	d2,8(a0)	; update x-axis	position
		move.l	d3,$C(a0)	; update y-axis	position
		rts	
; End of function SpeedToPos

; ---------------------------------------------------------------------------
; Subroutine to	display	a sprite/object, when a0 is the	object RAM
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DisplaySprite:				; ...
		lea	($FFFFAC00).w,a1
		move.w	$18(a0),d0
		lsr.w	#1,d0
		andi.w	#$380,d0
		adda.w	d0,a1
		cmpi.w	#$7E,(a1)
		bcc.s	locret_D620
		addq.w	#2,(a1)
		adda.w	(a1),a1
		move.w	a0,(a1)

locret_D620:				; ...
		rts	
; End of function DisplaySprite

; ---------------------------------------------------------------------------
; Subroutine to	display	a 2nd sprite/object, when a1 is	the object RAM
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DisplaySprite2:				; ...
		lea	($FFFFAC00).w,a2
		move.w	$18(a1),d0
		lsr.w	#1,d0
		andi.w	#$380,d0
		adda.w	d0,a2
		cmpi.w	#$7E,(a2)
		bcc.s	locret_D63E
		addq.w	#2,(a2)
		adda.w	(a2),a2
		move.w	a1,(a2)

locret_D63E:				; ...
		rts	
; End of function DisplaySprite2

; ---------------------------------------------------------------------------
; Subroutine to	delete an object
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


DeleteObject:				; ...
		movea.l	a0,a1

DeleteObject2:				; ...
		moveq	#0,d1
		moveq	#$F,d0

loc_D646:				; ...
		move.l	d1,(a1)+	; clear	the object RAM
		dbf	d0,loc_D646	; repeat $F times (length of object RAM)
		rts	
; End of function DeleteObject

BldSpr_ScrPos:	dc.l 0			; blank
		dc.l $FFF700		; main screen x-position
		dc.l $FFF708		; background x-position	1
		dc.l $FFF718		; background x-position	2
; ---------------------------------------------------------------------------
; Subroutine to	convert	mappings (etc) to proper Megadrive sprites
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


BuildSprites:				; ...
		lea	($FFFFF800).w,a2 ; set address for sprite table
		moveq	#0,d5
		lea	($FFFFAC00).w,a4
		moveq	#7,d7

loc_D66A:				; ...
		tst.w	(a4)
		beq.w	loc_D72E
		moveq	#2,d6

loc_D672:				; ...
		movea.w	(a4,d6.w),a0
		tst.b	(a0)
		beq.w	loc_D726
		bclr	#7,1(a0)
		move.b	1(a0),d0
		move.b	d0,d4
		andi.w	#$C,d0
		beq.s	loc_D6DE
		movea.l	BldSpr_ScrPos(pc,d0.w),a1
		moveq	#0,d0
		move.b	$19(a0),d0
		move.w	8(a0),d3
		sub.w	(a1),d3
		move.w	d3,d1
		add.w	d0,d1
		bmi.w	loc_D726
		move.w	d3,d1
		sub.w	d0,d1
		cmpi.w	#$140,d1
		bge.s	loc_D726
		addi.w	#$80,d3
		btst	#4,d4
		beq.s	loc_D6E8
		moveq	#0,d0
		move.b	$16(a0),d0
		move.w	$C(a0),d2
		sub.w	4(a1),d2
		move.w	d2,d1
		add.w	d0,d1
		bmi.s	loc_D726
		move.w	d2,d1
		sub.w	d0,d1
		cmpi.w	#$E0,d1
		bge.s	loc_D726
		addi.w	#$80,d2
		bra.s	loc_D700

loc_D6DE:				; ...
		move.w	$A(a0),d2
		move.w	8(a0),d3
		bra.s	loc_D700

loc_D6E8:				; ...
		move.w	$C(a0),d2
		sub.w	4(a1),d2
		addi.w	#$80,d2
		cmpi.w	#$60,d2
		bcs.s	loc_D726
		cmpi.w	#$180,d2
		bcc.s	loc_D726

loc_D700:				; ...
		movea.l	4(a0),a1
		moveq	#0,d1
		btst	#5,d4
		bne.s	loc_D71C
		move.b	$1A(a0),d1
		add.b	d1,d1
		adda.w	(a1,d1.w),a1
		move.b	(a1)+,d1
		subq.b	#1,d1
		bmi.s	loc_D720

loc_D71C:				; ...
		bsr.w	sub_D750

loc_D720:				; ...
		bset	#7,1(a0)

loc_D726:				; ...
		addq.w	#2,d6
		subq.w	#2,(a4)
		bne.w	loc_D672

loc_D72E:				; ...
		lea	$80(a4),a4
		dbf	d7,loc_D66A
		move.b	d5,($FFFFF62C).w
		cmpi.b	#$50,d5
		beq.s	loc_D748
		move.l	#0,(a2)
		rts	

loc_D748:				; ...
		move.b	#0,-5(a2)
		rts	
; End of function BuildSprites


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_D750:				; ...
		movea.w	2(a0),a3
		btst	#0,d4
		bne.s	loc_D796
		btst	#1,d4
		bne.w	loc_D7E4
; End of function sub_D750


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_D762:				; ...
		cmpi.b	#$50,d5
		beq.s	locret_D794
		move.b	(a1)+,d0
		ext.w	d0
		add.w	d2,d0
		move.w	d0,(a2)+
		move.b	(a1)+,(a2)+
		addq.b	#1,d5
		move.b	d5,(a2)+
		move.b	(a1)+,d0
		lsl.w	#8,d0
		move.b	(a1)+,d0
		add.w	a3,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d0
		ext.w	d0
		add.w	d3,d0
		andi.w	#$1FF,d0
		bne.s	loc_D78E
		addq.w	#1,d0

loc_D78E:				; ...
		move.w	d0,(a2)+
		dbf	d1,sub_D762

locret_D794:				; ...
		rts	
; End of function sub_D762


loc_D796:				; ...
		btst	#1,d4
		bne.w	loc_D82A

loc_D79E:				; ...
		cmpi.b	#$50,d5
		beq.s	locret_D7E2
		move.b	(a1)+,d0
		ext.w	d0
		add.w	d2,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d4
		move.b	d4,(a2)+
		addq.b	#1,d5
		move.b	d5,(a2)+
		move.b	(a1)+,d0
		lsl.w	#8,d0
		move.b	(a1)+,d0
		add.w	a3,d0
		eori.w	#$800,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d0
		ext.w	d0
		neg.w	d0
		add.b	d4,d4
		andi.w	#$18,d4
		addq.w	#8,d4
		sub.w	d4,d0
		add.w	d3,d0
		andi.w	#$1FF,d0
		bne.s	loc_D7DC
		addq.w	#1,d0

loc_D7DC:				; ...
		move.w	d0,(a2)+
		dbf	d1,loc_D79E

locret_D7E2:				; ...
		rts	

loc_D7E4:				; ...
		cmpi.b	#$50,d5
		beq.s	locret_D828
		move.b	(a1)+,d0
		move.b	(a1),d4
		ext.w	d0
		neg.w	d0
		lsl.b	#3,d4
		andi.w	#$18,d4
		addq.w	#8,d4
		sub.w	d4,d0
		add.w	d2,d0
		move.w	d0,(a2)+
		move.b	(a1)+,(a2)+
		addq.b	#1,d5
		move.b	d5,(a2)+
		move.b	(a1)+,d0
		lsl.w	#8,d0
		move.b	(a1)+,d0
		add.w	a3,d0
		eori.w	#$1000,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d0
		ext.w	d0
		add.w	d3,d0
		andi.w	#$1FF,d0
		bne.s	loc_D822
		addq.w	#1,d0

loc_D822:				; ...
		move.w	d0,(a2)+
		dbf	d1,loc_D7E4

locret_D828:				; ...
		rts	

loc_D82A:				; ...
		cmpi.b	#$50,d5
		beq.s	locret_D87C
		move.b	(a1)+,d0
		move.b	(a1),d4
		ext.w	d0
		neg.w	d0
		lsl.b	#3,d4
		andi.w	#$18,d4
		addq.w	#8,d4
		sub.w	d4,d0
		add.w	d2,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d4
		move.b	d4,(a2)+
		addq.b	#1,d5
		move.b	d5,(a2)+
		move.b	(a1)+,d0
		lsl.w	#8,d0
		move.b	(a1)+,d0
		add.w	a3,d0
		eori.w	#$1800,d0
		move.w	d0,(a2)+
		move.b	(a1)+,d0
		ext.w	d0
		neg.w	d0
		add.b	d4,d4
		andi.w	#$18,d4
		addq.w	#8,d4
		sub.w	d4,d0
		add.w	d3,d0
		andi.w	#$1FF,d0
		bne.s	loc_D876
		addq.w	#1,d0

loc_D876:				; ...
		move.w	d0,(a2)+
		dbf	d1,loc_D82A

locret_D87C:				; ...
		rts	
; ---------------------------------------------------------------------------
; Subroutine to	check if an object is on the screen
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ChkObjOnScreen:				; ...
		move.w	8(a0),d0	; get object x-position
		sub.w	($FFFFF700).w,d0 ; subtract screen x-position
		bmi.s	NotOnScreen
		cmpi.w	#320,d0		; is object on the screen?
		bge.s	NotOnScreen	; if not, branch

		move.w	$C(a0),d1	; get object y-position
		sub.w	($FFFFF704).w,d1 ; subtract screen y-position
		bmi.s	NotOnScreen
		cmpi.w	#224,d1		; is object on the screen?
		bge.s	NotOnScreen	; if not, branch

		moveq	#0,d0		; set flag to 0
		rts	

NotOnScreen:				; ...
		moveq	#1,d0		; set flag to 1
		rts	
; End of function ChkObjOnScreen


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ChkObjOnScreen2:			; ...
		moveq	#0,d1
		move.b	$19(a0),d1
		move.w	8(a0),d0
		sub.w	($FFFFF700).w,d0
		add.w	d1,d0
		bmi.s	NotOnScreen2
		add.w	d1,d1
		sub.w	d1,d0
		cmpi.w	#320,d0
		bge.s	NotOnScreen2

		move.w	$C(a0),d1
		sub.w	($FFFFF704).w,d1
		bmi.s	NotOnScreen2
		cmpi.w	#224,d1
		bge.s	NotOnScreen2

		moveq	#0,d0
		rts	

NotOnScreen2:				; ...
		moveq	#1,d0
		rts	
; End of function ChkObjOnScreen2

; ---------------------------------------------------------------------------
; Subroutine to	load a level's objects
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


ObjPosLoad:				; ...
		moveq	#0,d0
		move.b	($FFFFF76C).w,d0
		move.w	OPL_Index(pc,d0.w),d0
		jmp	OPL_Index(pc,d0.w)
; End of function ObjPosLoad

OPL_Index:	dc.w OPL_Main-OPL_Index	; ...
		dc.w OPL_Next-OPL_Index

OPL_Main:				; ...
		addq.b	#2,($FFFFF76C).w
		move.w	($FFFFFE10).w,d0
		lsl.b	#6,d0
		lsr.w	#4,d0
		lea	$900000+(ObjPos_Index),a0
		movea.l	a0,a1
		adda.w	(a0,d0.w),a0
		move.l	a0,($FFFFF770).w
		move.l	a0,($FFFFF774).w
		adda.w	2(a1,d0.w),a1
		move.l	a1,($FFFFF778).w
		move.l	a1,($FFFFF77C).w
		lea	($FFFFFC00).w,a2
		move.w	#$101,(a2)+
		move.w	#$5E,d0

OPL_ClrList:				; ...
		clr.l	(a2)+
		dbf	d0,OPL_ClrList	; clear	pre-destroyed object list
		lea	($FFFFFC00).w,a2
		moveq	#0,d2
		move.w	($FFFFF700).w,d6
		subi.w	#$80,d6
		bcc.s	loc_D93C
		moveq	#0,d6

loc_D93C:				; ...
		andi.w	#$FF80,d6
		movea.l	($FFFFF770).w,a0

loc_D944:				; ...
		cmp.w	(a0),d6
		bls.s	loc_D956
		tst.b	4(a0)
		bpl.s	loc_D952
		move.b	(a2),d2
		addq.b	#1,(a2)

loc_D952:				; ...
		addq.w	#6,a0
		bra.s	loc_D944

loc_D956:				; ...
		move.l	a0,($FFFFF770).w
		movea.l	($FFFFF774).w,a0
		subi.w	#$80,d6
		bcs.s	loc_D976

loc_D964:				; ...
		cmp.w	(a0),d6
		bls.s	loc_D976
		tst.b	4(a0)
		bpl.s	loc_D972
		addq.b	#1,1(a2)

loc_D972:				; ...
		addq.w	#6,a0
		bra.s	loc_D964

loc_D976:				; ...
		move.l	a0,($FFFFF774).w
		move.w	#-1,($FFFFF76E).w

OPL_Next:				; ...
		lea	($FFFFFC00).w,a2
		moveq	#0,d2
		move.w	($FFFFF700).w,d6
		andi.w	#$FF80,d6
		cmp.w	($FFFFF76E).w,d6
		beq.w	locret_DA3A
		bge.s	loc_D9F6
		move.w	d6,($FFFFF76E).w
		movea.l	($FFFFF774).w,a0
		subi.w	#$80,d6
		bcs.s	loc_D9D2

loc_D9A6:				; ...
		cmp.w	-6(a0),d6
		bge.s	loc_D9D2
		subq.w	#6,a0
		tst.b	4(a0)
		bpl.s	loc_D9BC
		subq.b	#1,1(a2)
		move.b	1(a2),d2

loc_D9BC:				; ...
		bsr.w	loc_DA3C
		bne.s	loc_D9C6
		subq.w	#6,a0
		bra.s	loc_D9A6

loc_D9C6:				; ...
		tst.b	4(a0)
		bpl.s	loc_D9D0
		addq.b	#1,1(a2)

loc_D9D0:				; ...
		addq.w	#6,a0

loc_D9D2:				; ...
		move.l	a0,($FFFFF774).w
		movea.l	($FFFFF770).w,a0
		addi.w	#$300,d6

loc_D9DE:				; ...
		cmp.w	-6(a0),d6
		bgt.s	loc_D9F0
		tst.b	-2(a0)
		bpl.s	loc_D9EC
		subq.b	#1,(a2)

loc_D9EC:				; ...
		subq.w	#6,a0
		bra.s	loc_D9DE

loc_D9F0:				; ...
		move.l	a0,($FFFFF770).w
		rts	

loc_D9F6:				; ...
		move.w	d6,($FFFFF76E).w
		movea.l	($FFFFF770).w,a0
		addi.w	#$280,d6

loc_DA02:				; ...
		cmp.w	(a0),d6
		bls.s	loc_DA16
		tst.b	4(a0)
		bpl.s	loc_DA10
		move.b	(a2),d2
		addq.b	#1,(a2)

loc_DA10:				; ...
		bsr.w	loc_DA3C
		beq.s	loc_DA02

loc_DA16:				; ...
		move.l	a0,($FFFFF770).w
		movea.l	($FFFFF774).w,a0
		subi.w	#$300,d6
		bcs.s	loc_DA36

loc_DA24:				; ...
		cmp.w	(a0),d6
		bls.s	loc_DA36
		tst.b	4(a0)
		bpl.s	loc_DA32
		addq.b	#1,1(a2)

loc_DA32:				; ...
		addq.w	#6,a0
		bra.s	loc_DA24

loc_DA36:				; ...
		move.l	a0,($FFFFF774).w

locret_DA3A:				; ...
		rts	

loc_DA3C:				; ...
		tst.b	4(a0)
		bpl.s	OPL_MakeItem
		bset	#7,2(a2,d2.w)
		beq.s	OPL_MakeItem
		addq.w	#6,a0
		moveq	#0,d0
		rts	

OPL_MakeItem:				; ...
		jsr	$880000+SingleObjLoad
		bne.s	locret_DA8A
		move.w	(a0)+,8(a1)
		move.w	(a0)+,d0
		move.w	d0,d1
		andi.w	#$FFF,d0
		move.w	d0,$C(a1)
		rol.w	#2,d1
		andi.b	#3,d1
		move.b	d1,1(a1)
		move.b	d1,$22(a1)
		move.b	(a0)+,d0
		bpl.s	loc_DA80
		andi.b	#$7F,d0
		move.b	d2,$23(a1)

loc_DA80:				; ...
		move.b	d0,0(a1)
		move.b	(a0)+,$28(a1)
		moveq	#0,d0

locret_DA8A:				; ...
		rts	


; ---------------------------------------------------------------------------
; Single object	loading	subroutine
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SingleObjLoad:				; ...
		lea	($FFFFD800).w,a1 ; start address for object RAM
		move.w	#$5F,d0

loc_DA94:				; ...
		tst.b	(a1)		; is object RAM	slot empty?
		beq.s	locret_DAA0	; if yes, branch
		lea	$40(a1),a1	; goto next object RAM slot
		dbf	d0,loc_DA94	; repeat $5F times

locret_DAA0:				; ...
		rts	
; End of function SingleObjLoad


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


SingleObjLoad2:				; ...
		movea.l	a0,a1
		move.w	#-$1000,d0
		sub.w	a0,d0
		lsr.w	#6,d0
		subq.w	#1,d0
		bcs.s	locret_DABC

loc_DAB0:				; ...
		tst.b	(a1)
		beq.s	locret_DABC
		lea	$40(a1),a1
		dbf	d0,loc_DAB0

locret_DABC:				; ...
		rts	
; End of function SingleObjLoad2




;-----------------------------------------------------------------
;
; Sound driver (68k part)
;
;-----------------------------------------------------------------

		align $10
Go_SoundTypes:	dc.l $880000+SoundTypes		; ...
Go_SoundD0:	dc.l $880000+SoundD0Index	; ...
Go_MusicIndex:	dc.l $880000+MusicIndex		; ...
Go_SoundIndex:	dc.l $880000+SoundIndex		; ...
off_719A0:	dc.l $880000+byte_71A94		; ...
Go_PSGIndex:	dc.l $880000+PSG_Index		; ...
; ---------------------------------------------------------------------------
; PSG instruments used in music
; ---------------------------------------------------------------------------
PSG_Index:	dc.l $880000+PSG1, $880000+PSG2, $880000+PSG3	; ...
		dc.l $880000+PSG4, $880000+PSG5, $880000+PSG6
		dc.l $880000+PSG7, $880000+PSG8, $880000+PSG9
PSG1:		dc.b 0,	0, 0, 1, 1, 1, 2, 2, 2,	3, 3, 3, 4, 4, 4, 5, 5,	5, 6, 6, 6, 7, $80 ; ...
PSG2:		dc.b 0,	2, 4, 6, 8, $10, $80 ; ...
PSG3:		dc.b 0,	0, 1, 1, 2, 2, 3, 3, 4,	4, 5, 5, 6, 6, 7, 7, $80 ; ...
PSG4:		dc.b 0,	0, 2, 3, 4, 4, 5, 5, 5,	6, $80 ; ...
PSG6:		dc.b 3,	3, 3, 2, 2, 2, 2, 1, 1,	1, 0, 0, 0, 0, $80 ; ...
PSG5:		dc.b 0,	0, 0, 0, 0, 0, 0, 0, 0,	0, 1, 1, 1, 1, 1, 1, 1,	1, 1, 1, 1 ; ...
		dc.b 1,	1, 1, 2, 2, 2, 2, 2, 2,	2, 2, 3, 3, 3, 3, 3, 3,	3, 3, 4, $80
PSG7:		dc.b 0,	0, 0, 0, 0, 0, 1, 1, 1,	1, 1, 2, 2, 2 ;	...
		dc.b 2,	2, 3, 3, 3, 4, 4, 4, 5,	5, 5, 6, 7, $80
PSG8:		dc.b 0,	0, 0, 0, 0, 1, 1, 1, 1,	1, 2, 2, 2, 2, 2, 2, 3,	3, 3, 3	; ...
		dc.b 3,	4, 4, 4, 4, 4, 5, 5, 5,	5, 5, 6, 6, 6, 6, 6, 7,	7, 7, $80
PSG9:		dc.b 0,	1, 2, 3, 4, 5, 6, 7, 8,	9, $A, $B, $C, $D, $E, $F, $80 ; ...
byte_71A94:	dc.b 7,	$72, $73, $26, $15, 8, $FF, 5 ;	...
; ---------------------------------------------------------------------------
; Music	Pointers
; ---------------------------------------------------------------------------
MusicIndex:	dc.l $880000+Music81, $880000+Music82	; ...
		dc.l $880000+Music83, $880000+Music84
		dc.l $880000+Music85, $880000+Music86
		dc.l $880000+Music87, $880000+Music88
		dc.l $880000+Music89, $880000+Music8A
		dc.l $880000+Music8B, $880000+Music8C
		dc.l $880000+Music8D, $880000+Music8E
		dc.l $880000+Music8F, $880000+Music90
		dc.l $880000+Music91, $880000+Music92
		dc.l $880000+Music93
; ---------------------------------------------------------------------------
; Sound	effect pointers
; ---------------------------------------------------------------------------
SoundIndex:	dc.l $880000+SoundA0, $880000+SoundA1, $880000+SoundA2 ; ...
		dc.l $880000+SoundA3, $880000+SoundA4, $880000+SoundA5
		dc.l $880000+SoundA6, $880000+SoundA7, $880000+SoundA8
		dc.l $880000+SoundA9, $880000+SoundAA, $880000+SoundAB
		dc.l $880000+SoundAC, $880000+SoundAD, $880000+SoundAE
		dc.l $880000+SoundAF, $880000+SoundB0, $880000+SoundB1
		dc.l $880000+SoundB2, $880000+SoundB3, $880000+SoundB4
		dc.l $880000+SoundB5, $880000+SoundB6, $880000+SoundB7
		dc.l $880000+SoundB8, $880000+SoundB9, $880000+SoundBA
		dc.l $880000+SoundBB, $880000+SoundBC, $880000+SoundBD
		dc.l $880000+SoundBE, $880000+SoundBF, $880000+SoundC0
		dc.l $880000+SoundC1, $880000+SoundC2, $880000+SoundC3
		dc.l $880000+SoundC4, $880000+SoundC5, $880000+SoundC6
		dc.l $880000+SoundC7, $880000+SoundC8, $880000+SoundC9
		dc.l $880000+SoundCA, $880000+SoundCB, $880000+SoundCC
		dc.l $880000+SoundCD, $880000+SoundCE, $880000+SoundCF
SoundD0Index:	dc.l $880000+SoundD0	
; ---------------------------------------------------------------------------
; Type of sound	being played ($90 = music; $70 = normal	sound effect)
; ---------------------------------------------------------------------------
SoundTypes:	dc.b $90, $90, $90, $90, $90, $90, $90,	$90, $90, $90, $90, $90, $90, $90, $90,	$90 ; ...
		dc.b $90, $90, $90, $90, $90, $90, $90,	$90, $90, $90, $90, $90, $90, $90, $90,	$80
		dc.b $70, $70, $70, $70, $70, $70, $70,	$70, $70, $68, $70, $70, $70, $60, $70,	$70
		dc.b $60, $70, $60, $70, $70, $70, $70,	$70, $70, $70, $70, $70, $70, $70, $7F,	$60
		dc.b $70, $70, $70, $70, $70, $70, $70,	$70, $70, $70, $70, $70, $70, $70, $70,	$80
		dc.b $80, $80, $80, $80, $80, $80, $80,	$80, $80, $80, $80, $80, $80, $80, $80,	$90
		dc.b $90, $90, $90, $90

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл

		align $10

sub_71B4C:				; ...
		move.w	#$100,($A11100).l ; stop the Z80
		nop	
		nop	
		nop	

loc_71B5A:				; ...
		btst	#0,($A11100).l
		bne.s	loc_71B5A
		btst	#7,($A01FFD).l
		beq.s	loc_71B82
		move.w	#0,($A11100).l	; start	the Z80
		nop	
		nop	
		nop	
		nop	
		nop	
		bra.s	sub_71B4C
dfsf:
		align	$10

loc_71B82:				; ...
		lea	($FFF000).l,a6
		clr.b	$E(a6)
		tst.b	3(a6)		; is music paused?
		bne.w	loc_71E50	; if yes, branch
		subq.b	#1,1(a6)
		bne.s	loc_71B9E
		jsr	sub_7260C(pc)

loc_71B9E:				; ...
		move.b	4(a6),d0
		beq.s	loc_71BA8
		jsr	sub_72504(pc)

loc_71BA8:				; ...
		tst.b	$24(a6)
		beq.s	loc_71BB2
		jsr	sub_7267C(pc)

loc_71BB2:				; ...
		tst.w	$A(a6)		; is music or sound being played?
		beq.s	loc_71BBC	; if not, branch
		jsr	Sound_Play(pc)

loc_71BBC:				; ...
		cmpi.b	#$80,9(a6)
		beq.s	loc_71BC8
		jsr	Sound_ChkValue(pc)

loc_71BC8:				; ...
		lea	$40(a6),a5
		tst.b	(a5)
		bpl.s	loc_71BD4
		jsr	sub_71C4E(pc)


loc_71BD4:				; ...
		clr.b	8(a6)
	if S32
		movem.l	a0-a6/d0-d6,-(sp)		; Back up the registers
		lea	PWM_First_Location-$30,a5	; Load the first PWM channel (not counting the "DAC") 
		moveq	#2,d7				; There are three "extra" PWM channels
@PWM_Loop:		
		add.w	#$30,a5				; Advance to the next channel
		tst.b	(a5)				; Test it to see if the channel isn't stopped
		bpl.s	@SkipChannel			; If it is, skip ahead
		jsr	$880000+ParsePWMChannel		; Otherwise, parse this channel
@SkipChannel						
		dbf	d7,@PWM_Loop			; Repeat for the rest of the channels
		movem.l	(sp)+,a0-a6/d0-d6		; Restore the registers
	endif
		moveq	#5,d7

loc_71BDA:				; ...
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71BE6
		jsr	sub_71CCA(pc)

loc_71BE6:				; ...
		dbf	d7,loc_71BDA
		moveq	#2,d7

loc_71BEC:				; ...
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71BF8
		jsr	sub_72850(pc)

loc_71BF8:				; ...
		dbf	d7,loc_71BEC
		move.b	#$80,$E(a6)
		moveq	#2,d7

loc_71C04:				; ...
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71C10
		jsr	sub_71CCA(pc)

loc_71C10:				; ...
		dbf	d7,loc_71C04
		moveq	#2,d7

loc_71C16:				; ...
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71C22
		jsr	sub_72850(pc)

loc_71C22:				; ...
		dbf	d7,loc_71C16
		move.b	#$40,$E(a6)
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71C38
		jsr	sub_71CCA(pc)

loc_71C38:				; ...
		adda.w	#$30,a5
		tst.b	(a5)
		bpl.s	loc_71C44
		jsr	sub_72850(pc)

loc_71C44:				; ...
		move.w	#0,($A11100).l	; start	the Z80
		rts	
; End of function sub_71B4C


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71C4E:				; ...
		subq.b	#1,$E(a5)
		bne.s	locret_71CAA
		move.b	#$80,8(a6)
		movea.l	4(a5),a4

loc_71C5E:				; ...
		moveq	#0,d5
		move.b	(a4)+,d5
		cmpi.b	#-$20,d5
		bcs.s	loc_71C6E
		jsr	sub_72A5A(pc)
		bra.s	loc_71C5E

loc_71C6E:				; ...
		tst.b	d5
		bpl.s	loc_71C84
		move.b	d5,$10(a5)
		move.b	(a4)+,d5
		bpl.s	loc_71C84
		subq.w	#1,a4
		move.b	$F(a5),$E(a5)
		bra.s	loc_71C88

loc_71C84:				; ...
		jsr	sub_71D40(pc)

loc_71C88:				; ...
		move.l	a4,4(a5)
		btst	#2,(a5)
		bne.s	locret_71CAA
		moveq	#0,d0
		move.b	$10(a5),d0
		cmpi.b	#$80,d0
		beq.s	locret_71CAA
	if S32=1
		sub.b	#$80,d0
		moveq	#1,d1
		moveq	#$20,d2		
		moveq	#0,d3
		move.b	9(a5),d3
		sub.b	d3,d2
		move.b	$A(a5),d3
		
		jmp	$880000+PlayPWM
locret_71CAA:
		rts
	else
	
		btst	#3,d0
		bne.s	loc_71CAC
		move.b	d0,($A01FFF).l

locret_71CAA:				; ...
		rts	

loc_71CAC:				; ...
		subi.b	#$88,d0
		move.b	byte_71CC4(pc,d0.w),d0
		move.b	d0,($A000EA).l
		move.b	#$83,($A01FFF).l
		rts	
	endif
; End of function sub_71C4E

byte_71CC4:	dc.b $12, $15, $1C, $1D, $FF, $FF

	if S32
ParsePWMChannel:				; ...
		subq.b	#1,$E(a5)
		bne.s	pwmret_71CAA
		move.b	#$80,8(a6)
		movea.l	4(a5),a4

pwm_71C5E:				; ...
		moveq	#0,d5
		move.b	(a4)+,d5
		cmpi.b	#-$20,d5
		bcs.s	pwm_71C6E
		jsr	sub_72A5A(pc)
		bra.s	pwm_71C5E

pwm_71C6E:				; ...
		tst.b	d5
		bpl.s	pwm_71C84
		move.b	d5,$10(a5)
		move.b	(a4)+,d5
		bpl.s	pwm_71C84
		subq.w	#1,a4
		move.b	$F(a5),$E(a5)
		bra.s	pwm_71C88

pwm_71C84:				; ...
		jsr	sub_71D40(pc)

pwm_71C88:				; ...
		move.l	a4,4(a5)
		btst	#2,(a5)
		bne.s	pwmret_71CAA
		moveq	#0,d0
		move.b	$10(a5),d0
		cmpi.b	#$80,d0
		beq.s	pwmret_71CAA
		sub.b	#$80,d0
		moveq	#0,d1	
		move.b	PWM_ChanTable(pc,d7),d1

		moveq	#$20,d2		
		moveq	#0,d3
		move.b	9(a5),d3
		sub.b	d3,d2
		move.b	$A(a5),d3

		jmp	$880000+PlayPWM
pwmret_71CAA:
		rts

PWM_ChanTable:
		dc.b	8,4,2
		even
; End of function ParsePWMChannel
	endif

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71CCA:				; ...
		subq.b	#1,$E(a5)
		bne.s	loc_71CE0
		bclr	#4,(a5)
		jsr	sub_71CEC(pc)
		jsr	sub_71E18(pc)
		bra.w	loc_726E2

loc_71CE0:				; ...
		jsr	sub_71D9E(pc)
		jsr	sub_71DC6(pc)
		bra.w	loc_71E24
; End of function sub_71CCA


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71CEC:				; ...
		movea.l	4(a5),a4
		bclr	#1,(a5)

loc_71CF4:				; ...
		moveq	#0,d5
		move.b	(a4)+,d5
		cmpi.b	#-$20,d5
		bcs.s	loc_71D04
		jsr	sub_72A5A(pc)
		bra.s	loc_71CF4

loc_71D04:				; ...
		jsr	sub_726FE(pc)
		tst.b	d5
		bpl.s	loc_71D1A
		jsr	sub_71D22(pc)
		move.b	(a4)+,d5
		bpl.s	loc_71D1A
		subq.w	#1,a4
		bra.w	sub_71D60

loc_71D1A:				; ...
		jsr	sub_71D40(pc)
		bra.w	sub_71D60
; End of function sub_71CEC


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71D22:				; ...
		subi.b	#$80,d5
		beq.s	loc_71D58
		add.b	8(a5),d5
		andi.w	#$7F,d5
		lsl.w	#1,d5
		lea	word_72790(pc),a0
		move.w	(a0,d5.w),d6
		move.w	d6,$10(a5)
		rts	
; End of function sub_71D22


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71D40:				; ...
		move.b	d5,d0
		move.b	2(a5),d1

loc_71D46:				; ...
		subq.b	#1,d1
		beq.s	loc_71D4E
		add.b	d5,d0
		bra.s	loc_71D46

loc_71D4E:				; ...
		move.b	d0,$F(a5)
		move.b	d0,$E(a5)
		rts	
; End of function sub_71D40


loc_71D58:				; ...
		bset	#1,(a5)
		clr.w	$10(a5)

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71D60:				; ...
		move.l	a4,4(a5)
		move.b	$F(a5),$E(a5)
		btst	#4,(a5)
		bne.s	locret_71D9C
		move.b	$13(a5),$12(a5)
		clr.b	$C(a5)
		btst	#3,(a5)
		beq.s	locret_71D9C
		movea.l	$14(a5),a0
		move.b	(a0)+,$18(a5)
		move.b	(a0)+,$19(a5)
		move.b	(a0)+,$1A(a5)
		move.b	(a0)+,d0
		lsr.b	#1,d0
		move.b	d0,$1B(a5)
		clr.w	$1C(a5)

locret_71D9C:				; ...
		rts	
; End of function sub_71D60


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71D9E:				; ...
		tst.b	$12(a5)
		beq.s	locret_71DC4
		subq.b	#1,$12(a5)
		bne.s	locret_71DC4
		bset	#1,(a5)
		tst.b	1(a5)
		bmi.w	loc_71DBE
		jsr	sub_726FE(pc)
		addq.w	#4,sp
		rts	

loc_71DBE:				; ...
		jsr	sub_729A0(pc)
		addq.w	#4,sp

locret_71DC4:				; ...
		rts	
; End of function sub_71D9E


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71DC6:				; ...
		addq.w	#4,sp
		btst	#3,(a5)
		beq.s	locret_71E16
		tst.b	$18(a5)
		beq.s	loc_71DDA
		subq.b	#1,$18(a5)
		rts	

loc_71DDA:				; ...
		subq.b	#1,$19(a5)
		beq.s	loc_71DE2
		rts	

loc_71DE2:				; ...
		movea.l	$14(a5),a0
		move.b	1(a0),$19(a5)
		tst.b	$1B(a5)
		bne.s	loc_71DFE
		move.b	3(a0),$1B(a5)
		neg.b	$1A(a5)
		rts	

loc_71DFE:				; ...
		subq.b	#1,$1B(a5)
		move.b	$1A(a5),d6
		ext.w	d6
		add.w	$1C(a5),d6
		move.w	d6,$1C(a5)
		add.w	$10(a5),d6
		subq.w	#4,sp

locret_71E16:				; ...
		rts	
; End of function sub_71DC6


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_71E18:				; ...
		btst	#1,(a5)
		bne.s	locret_71E48
		move.w	$10(a5),d6
		beq.s	loc_71E4A

loc_71E24:				; ...
		move.b	$1E(a5),d0
		ext.w	d0
		add.w	d0,d6
		btst	#2,(a5)
		bne.s	locret_71E48
		move.w	d6,d1
		lsr.w	#8,d1
		move.b	#-$5C,d0
		jsr	sub_72722(pc)
		move.b	d6,d1
		move.b	#-$60,d0
		jsr	sub_72722(pc)

locret_71E48:				; ...
		rts	

loc_71E4A:				; ...
		bset	#1,(a5)
		rts	
; End of function sub_71E18


loc_71E50:				; ...
		bmi.s	loc_71E94
		cmpi.b	#2,3(a6)
		beq.w	loc_71EFE
		move.b	#2,3(a6)
		moveq	#2,d3
		move.b	#-$4C,d0
		moveq	#0,d1

loc_71E6A:				; ...
		jsr	sub_7272E(pc)
		jsr	sub_72764(pc)
		addq.b	#1,d0
		dbf	d3,loc_71E6A
		moveq	#2,d3
		moveq	#$28,d0

loc_71E7C:				; ...
		move.b	d3,d1
		jsr	sub_7272E(pc)
		addq.b	#4,d1
		jsr	sub_7272E(pc)
		dbf	d3,loc_71E7C
		jsr	sub_729B6(pc)
		bra.w	loc_71C44

loc_71E94:				; ...
		clr.b	3(a6)
		moveq	#$30,d3
		lea	$40(a6),a5
		moveq	#6,d4

loc_71EA0:				; ...
		btst	#7,(a5)
		beq.s	loc_71EB8
		btst	#2,(a5)
		bne.s	loc_71EB8
		move.b	#-$4C,d0
		move.b	$A(a5),d1
		jsr	sub_72722(pc)

loc_71EB8:				; ...
		adda.w	d3,a5
		dbf	d4,loc_71EA0
		lea	$220(a6),a5
		moveq	#2,d4

loc_71EC4:				; ...
		btst	#7,(a5)
		beq.s	loc_71EDC
		btst	#2,(a5)
		bne.s	loc_71EDC
		move.b	#-$4C,d0
		move.b	$A(a5),d1
		jsr	sub_72722(pc)

loc_71EDC:				; ...
		adda.w	d3,a5
		dbf	d4,loc_71EC4
		lea	$340(a6),a5
		btst	#7,(a5)
		beq.s	loc_71EFE
		btst	#2,(a5)
		bne.s	loc_71EFE
		move.b	#-$4C,d0
		move.b	$A(a5),d1
		jsr	sub_72722(pc)

loc_71EFE:				; ...
		bra.w	loc_71C44
; ---------------------------------------------------------------------------
; Subroutine to	play a sound or	music track
; ---------------------------------------------------------------------------

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sound_Play:				; ...
		movea.l	$880000+(Go_SoundTypes).l,a0
		lea	$A(a6),a1	; load music track number
		move.b	0(a6),d3
		moveq	#2,d4

loc_71F12:				; ...
		move.b	(a1),d0		; move track number to d0
		move.b	d0,d1
		clr.b	(a1)+
		subi.b	#$81,d0
		bcs.s	loc_71F3E
		cmpi.b	#$80,9(a6)
		beq.s	loc_71F2C
		move.b	d1,$A(a6)
		bra.s	loc_71F3E

loc_71F2C:				; ...
		andi.w	#$7F,d0
		move.b	(a0,d0.w),d2
		cmp.b	d3,d2
		bcs.s	loc_71F3E
		move.b	d2,d3
		move.b	d1,9(a6)	; set music flag

loc_71F3E:				; ...
		dbf	d4,loc_71F12
		tst.b	d3
		bmi.s	locret_71F4A
		move.b	d3,0(a6)

locret_71F4A:				; ...
		rts	
; End of function Sound_Play


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Sound_ChkValue:				; ...
		moveq	#0,d7
		move.b	9(a6),d7
		beq.w	Sound_E4
		bpl.s	locret_71F8C
		move.b	#$80,9(a6)	; reset	music flag
		cmpi.b	#$9F,d7
		bls.w	Sound_81to9F	; music	$81-$9F
		cmpi.b	#$A0,d7
		bcs.w	locret_71F8C
		cmpi.b	#$CF,d7
		bls.w	Sound_A0toCF	; sound	$A0-$CF
		cmpi.b	#$D0,d7
		bcs.w	locret_71F8C
		cmpi.b	#$E0,d7
		bcs.w	Sound_D0toDF	; sound	$D0-$DF
		cmpi.b	#$E4,d7
		bls.s	Sound_E0toE4	; sound	$E0-$E4

locret_71F8C:				; ...
		rts	

Sound_E0toE4:				; ...
		subi.b	#$E0,d7
		lsl.w	#2,d7
		jmp	Sound_ExIndex(pc,d7.w)

Sound_ExIndex:
		bra.w	Sound_E0
		bra.w	Sound_E1
		bra.w	Sound_E2
		bra.w	Sound_E3
		bra.w	Sound_E4
; ---------------------------------------------------------------------------
; Play "Say-gaa" PCM sound
; ---------------------------------------------------------------------------

;
; original z80-based code
;
;Sound_E1:				; ...
;		move.b	#$88,($A01FFF).l
;		move.w	#0,($A11100).l	; start	the Z80
;		move.w	#$11,d1

;loc_71FC0:				; ...
;		move.w	#-1,d0

;loc_71FC4:				; ...
;		nop	
;		dbf	d0,loc_71FC4
;		dbf	d1,loc_71FC0
;		addq.w	#4,sp
;		rts	



        IF S32 == 1
        
        ; Sega Sound through PWM (32x)
        
Sound_E1:
	moveq	#0,d0		; Set sample ID = 0 (SegaPCM)
	moveq	#1,d1		; Set PWM channel = 1
	moveq	#$10,d2		; Set volume = $10
	move.l	#$C0,d3		; Set panning to center
	bsr.w	PlayPWM		; Play the sample
   

	
        move.w  #$800,d0
@waitloop
        move.w  #$200,d1
	nop
@waitloop2
        dbf     d1,@waitloop2
        dbf     d0,@waitloop
        
        addq.w  #4,sp
        rts
        
        
        
        
        ELSE        
        
        ; Sega Sound through DAC (MD)

Sound_E1:

        lea     SegaPCM+$880000,a0
        move.w  #SegaPCMEnd-SegaPCM,d0
        
@waitloop
        move.b  #$2a,($a04000).l
        move.b  (a0)+,($a04001).l
        move.w  #$28,d1
@waitloop2
        dbf     d1,@waitloop2
        dbf     d0,@waitloop
        
        addq.w  #4,sp
        rts
        
        ENDIF
        
; test of 4 channels playing the SEGA PCM together, at different sample rates
; now doesn't work because I removed three PWM samples, but feel free to add them
; and run the test yourself        
        
test_4ch:

	lea	($a15128).l,a0
	move.w	#$3,d2
	
.l1

	move.w	#$1101,(a0)
	move.w	#$0000,2(a0)
.l5
  move.w  (a0),d0
  andi.w  #$8000,d0
  beq.s .l5

	move.w	#$1201,(a0)
	move.w	#$0001,2(a0)
.l4
  move.w  (a0),d0
  andi.w  #$8000,d0
  beq.s .l4
  
  move.w	#$1401,(a0)
	move.w	#$0002,2(a0)
.l6
  move.w  (a0),d0
  andi.w  #$8000,d0
  beq.s .l6
	move.w	#$1801,(a0)
	move.w	#$0003,2(a0)
	move.w	#$800,d0
.l2
	move.w	#$100,d1
.l3
	dbf	d1,.l3
	dbf	d0,.l2

;	add.l	#2,a0
;	dbf	d2,.l1
	
	addq.w	#4,sp
	rts
	
;OLDtest_4ch:
;
; using the old system
;
;	lea	($a15128).l,a0
;	move.w	#$3,d2
;	
;.l1

;	move.w	#$ff01,(a0)
;	move.w	#$800,d0
;.l2
;	move.w	#$100,d1
;.l3
;	dbf	d1,.l3
;	dbf	d0,.l2

;	add.l	#2,a0
;	dbf	d2,.l1
	
;	addq.w	#4,sp
;	rts

; ---------------------------------------------------------------------------
; Play music track $81-$9F
; ---------------------------------------------------------------------------

Sound_81to9F:				; ...
		cmpi.b	#$88,d7		; is "extra life" music	played?
		bne.s	loc_72024	; if not, branch
		tst.b	$27(a6)
		bne.w	loc_721B6
		lea	$40(a6),a5
		moveq	#9,d0

loc_71FE6:				; ...
		bclr	#2,(a5)
		adda.w	#$30,a5
		dbf	d0,loc_71FE6
		lea	$220(a6),a5
		moveq	#5,d0

loc_71FF8:				; ...
		bclr	#7,(a5)
		adda.w	#$30,a5
		dbf	d0,loc_71FF8
		clr.b	0(a6)
		movea.l	a6,a0
		lea	$3A0(a6),a1
		move.w	#$87,d0

loc_72012:				; ...
		move.l	(a0)+,(a1)+
		dbf	d0,loc_72012
		move.b	#$80,$27(a6)
		clr.b	0(a6)
		bra.s	loc_7202C

loc_72024:				; ...
		clr.b	$27(a6)
		clr.b	$26(a6)

loc_7202C:				; ...
		jsr	sub_725CA(pc)
		movea.l	$880000+(off_719A0).l,a4
		subi.b	#$81,d7
		move.b	(a4,d7.w),$29(a6)
		movea.l	$880000+(Go_MusicIndex).l,a4
		lsl.w	#2,d7
		movea.l	(a4,d7.w),a4
		moveq	#0,d0
		move.w	(a4),d0
		add.l	a4,d0
		move.l	d0,$18(a6)
		move.b	5(a4),d0
		move.b	d0,$28(a6)
		tst.b	$2A(a6)
		beq.s	loc_72068
		move.b	$29(a6),d0

loc_72068:				; ...
		move.b	d0,2(a6)
		move.b	d0,1(a6)
		moveq	#0,d1
		movea.l	a4,a3
		addq.w	#6,a4
		moveq	#0,d7
		move.b	2(a3),d7
		beq.w	loc_72114
		subq.b	#1,d7
		move.b	#-$40,d1
		move.b	4(a3),d4
		moveq	#$30,d6
		move.b	#1,d5
		lea	$40(a6),a1
		lea	byte_721BA(pc),a2

	if S32
		clr.w	PWM_First_Location
		clr.w	PWM_First_Location+$30
		clr.w	PWM_First_Location+$60

		tst.b	2(a4)		; Check if any PWM channels exist
		beq.s	loc_72098	; If not, skip this entire code
		movem.l	a0-a6/d0-d7,-(sp)
		lea	PWM_First_Location,a1
		moveq	#0,d3
		move.b	2(a3),d3	; Number of FM channels
		lsl.b	#2,d3		; Multiply by 4
		add.w	d3,a4		; Add that to a4
		move.b	3(a3),d3	; Number of PSG channels
		moveq	#0,d0
		move.b	d3,d0
		lsl.b	#2,d3
		lsl.b	#1,d0
		add.b	d0,d3
		add.w	d3,a4
		move.b	8(a3),d3	; Load number of extra PWM channels
		subq.b	#1,d3
		
@PWM_Loop:		
		bset    #7,(a1)         ; Set highest bit of second dac channel
		move.b  (a2),1(a1)      ; Read something off the byte_721BA table, and store it
		move.b  d4,2(a1)        ; Set tempo divider in
		move.b  d6,$D(a1)       ; channel addr. $D = $30
		move.b  d1,$A(a1)       ; channel addr. $A = $C0
		move.b  d5,$E(a1)       ; Channel addr. $E (stored duration) = 1
		moveq   #0,d0           ; Clear d0
		move.w  (a4)+,d0        ; d0 = channel address (relative to song beginning)
		add.l   a3,d0           ; Append the song's base address to d0
		move.l  d0,4(a1)        ; ...and store this absolute address in byte 4 of the channel RAM data
		move.w  #$0010,8(a1)	; Set the default volume to $10	
		add.w	#$30,a1
		dbf	d3,@PWM_Loop	; Loop this

		movem.l (sp)+,a0-a6/d0-d7
	endif   

loc_72098:				; ...
		bset	#7,(a1)
		move.b	(a2)+,1(a1)
		move.b	d4,2(a1)
		move.b	d6,$D(a1)
		move.b	d1,$A(a1)
		move.b	d5,$E(a1)
		moveq	#0,d0
		move.w	(a4)+,d0
		add.l	a3,d0
		move.l	d0,4(a1)
		move.w	(a4)+,8(a1)
		adda.w	d6,a1
		dbf	d7,loc_72098
		move.w	#$0010,($FFFFF048).w   ; Set PWM1's volume. This can be kept when not using PWM too, it won't hurt.
		cmpi.b	#7,2(a3)
		bne.s	loc_720D8
		moveq	#$2B,d0
		moveq	#0,d1
		jsr	sub_7272E(pc)
		bra.w	loc_72114

loc_720D8:				; ...
		moveq	#$28,d0
		moveq	#6,d1
		jsr	sub_7272E(pc)
		move.b	#$42,d0
		moveq	#$7F,d1
		jsr	sub_72764(pc)
		move.b	#$4A,d0
		moveq	#$7F,d1
		jsr	sub_72764(pc)
		move.b	#$46,d0
		moveq	#$7F,d1
		jsr	sub_72764(pc)
		move.b	#$4E,d0
		moveq	#$7F,d1
		jsr	sub_72764(pc)
		move.b	#-$4A,d0
		move.b	#-$40,d1
		jsr	sub_72764(pc)

loc_72114:				; ...
		moveq	#0,d7
		move.b	3(a3),d7
		beq.s	loc_72154
		subq.b	#1,d7
		lea	$190(a6),a1
		lea	byte_721C2(pc),a2

loc_72126:				; ...
		bset	#7,(a1)
		move.b	(a2)+,1(a1)
		move.b	d4,2(a1)
		move.b	d6,$D(a1)
		move.b	d5,$E(a1)
		moveq	#0,d0
		move.w	(a4)+,d0
		add.l	a3,d0
		move.l	d0,4(a1)
		move.w	(a4)+,8(a1)
		move.b	(a4)+,d0
		move.b	(a4)+,$B(a1)
		adda.w	d6,a1
		dbf	d7,loc_72126

loc_72154:				; ...
		lea	$220(a6),a1
		moveq	#5,d7

loc_7215A:				; ...
		tst.b	(a1)
		bpl.w	loc_7217C
		moveq	#0,d0
		move.b	1(a1),d0
		bmi.s	loc_7216E
		subq.b	#2,d0
		lsl.b	#2,d0
		bra.s	loc_72170

loc_7216E:				; ...
		lsr.b	#3,d0

loc_72170:				; ...
		lea	dword_722CC(pc),a0
		movea.l	(a0,d0.w),a0
		bset	#2,(a0)

loc_7217C:				; ...
		adda.w	d6,a1
		dbf	d7,loc_7215A
		tst.w	$340(a6)
		bpl.s	loc_7218E
		bset	#2,$100(a6)

loc_7218E:				; ...
		tst.w	$370(a6)
		bpl.s	loc_7219A
		bset	#2,$1F0(a6)

loc_7219A:				; ...
		lea	$70(a6),a5
		moveq	#5,d4

loc_721A0:				; ...
		jsr	sub_726FE(pc)
		adda.w	d6,a5
		dbf	d4,loc_721A0
		moveq	#2,d4

loc_721AC:				; ...
		jsr	sub_729A0(pc)
		adda.w	d6,a5
		dbf	d4,loc_721AC

loc_721B6:				; ...
		addq.w	#4,sp
		rts	
byte_721BA:	dc.b 6,	0, 1, 2, 4, 5, 6, 0 ; ...
byte_721C2:	dc.b $80, $A0, $C0, 0	; ...
; ---------------------------------------------------------------------------
; Play normal sound effect
; ---------------------------------------------------------------------------

Sound_A0toCF:				; ...
		tst.b	$27(a6)
		bne.w	loc_722C6
		tst.b	4(a6)
		bne.w	loc_722C6
		tst.b	$24(a6)
		bne.w	loc_722C6
		cmpi.b	#$B5,d7		; is ring sound	effect played?
		bne.s	Sound_notB5	; if not, branch
		tst.b	$2B(a6)
		bne.s	loc_721EE
		move.b	#$CE,d7		; play ring sound in left speaker

loc_721EE:				; ...
		bchg	#0,$2B(a6)	; change speaker

Sound_notB5:				; ...
		cmpi.b	#$A7,d7		; is "pushing" sound played?
		bne.s	Sound_notA7	; if not, branch
		tst.b	$2C(a6)
		bne.w	locret_722C4
		move.b	#$80,$2C(a6)

Sound_notA7:				; ...
		movea.l	$880000+(Go_SoundIndex).l,a0
		subi.b	#$A0,d7
		lsl.w	#2,d7
		movea.l	(a0,d7.w),a3
		movea.l	a3,a1
		moveq	#0,d1
		move.w	(a1)+,d1
		add.l	a3,d1
		move.b	(a1)+,d5
		move.b	(a1)+,d7
		subq.b	#1,d7
		moveq	#$30,d6

loc_72228:				; ...
		moveq	#0,d3
		move.b	1(a1),d3
		move.b	d3,d4
		bmi.s	loc_72244
		subq.w	#2,d3
		lsl.w	#2,d3
		lea	dword_722CC(pc),a5
		movea.l	(a5,d3.w),a5
		bset	#2,(a5)
		bra.s	loc_7226E

loc_72244:				; ...
		lsr.w	#3,d3
		lea	dword_722CC(pc),a5
		movea.l	(a5,d3.w),a5
		bset	#2,(a5)
		cmpi.b	#$C0,d4
		bne.s	loc_7226E
		move.b	d4,d0
		ori.b	#$1F,d0
		move.b	d0,($C00011).l
		bchg	#5,d0
		move.b	d0,($C00011).l

loc_7226E:				; ...
		movea.l	dword_722EC(pc,d3.w),a5
		movea.l	a5,a2
		moveq	#$B,d0

loc_72276:				; ...
		clr.l	(a2)+
		dbf	d0,loc_72276
		move.w	(a1)+,(a5)
		move.b	d5,2(a5)
		moveq	#0,d0
		move.w	(a1)+,d0
		add.l	a3,d0
		move.l	d0,4(a5)
		move.w	(a1)+,8(a5)
		move.b	#1,$E(a5)
		move.b	d6,$D(a5)
		tst.b	d4
		bmi.s	loc_722A8
		move.b	#$C0,$A(a5)
		move.l	d1,$20(a5)

loc_722A8:				; ...
		dbf	d7,loc_72228
		tst.b	$250(a6)
		bpl.s	loc_722B8
		bset	#2,$340(a6)

loc_722B8:				; ...
		tst.b	$310(a6)
		bpl.s	locret_722C4
		bset	#2,$370(a6)

locret_722C4:				; ...
		rts	

loc_722C6:				; ...
		clr.b	0(a6)
		rts	
dword_722CC:	dc.l $FFF0D0		; ...
		dc.l 0
		dc.l $FFF100
		dc.l $FFF130
		dc.l $FFF190
		dc.l $FFF1C0
		dc.l $FFF1F0
		dc.l $FFF1F0
dword_722EC:	dc.l $FFF220
		dc.l 0
		dc.l $FFF250
		dc.l $FFF280
		dc.l $FFF2B0
		dc.l $FFF2E0
		dc.l $FFF310
		dc.l $FFF310
; ---------------------------------------------------------------------------
; Play GHZ waterfall sound
; ---------------------------------------------------------------------------

Sound_D0toDF:				; ...
		tst.b	$27(a6)
		bne.w	locret_723C6
		tst.b	4(a6)
		bne.w	locret_723C6
		tst.b	$24(a6)
		bne.w	locret_723C6
		movea.l	$880000+(Go_SoundD0).l,a0
		subi.b	#$D0,d7
		lsl.w	#2,d7
		movea.l	(a0,d7.w),a3
		movea.l	a3,a1
		moveq	#0,d0
		move.w	(a1)+,d0
		add.l	a3,d0
		move.l	d0,$20(a6)
		move.b	(a1)+,d5
		move.b	(a1)+,d7
		subq.b	#1,d7
		moveq	#$30,d6

loc_72348:				; ...
		move.b	1(a1),d4
		bmi.s	loc_7235A
		bset	#2,$100(a6)
		lea	$340(a6),a5
		bra.s	loc_72364

loc_7235A:				; ...
		bset	#2,$1F0(a6)
		lea	$370(a6),a5

loc_72364:				; ...
		movea.l	a5,a2
		moveq	#$B,d0

loc_72368:				; ...
		clr.l	(a2)+
		dbf	d0,loc_72368
		move.w	(a1)+,(a5)
		move.b	d5,2(a5)
		moveq	#0,d0
		move.w	(a1)+,d0
		add.l	a3,d0
		move.l	d0,4(a5)
		move.w	(a1)+,8(a5)
		move.b	#1,$E(a5)
		move.b	d6,$D(a5)
		tst.b	d4
		bmi.s	loc_72396
		move.b	#$C0,$A(a5)

loc_72396:				; ...
		dbf	d7,loc_72348
		tst.b	$250(a6)
		bpl.s	loc_723A6
		bset	#2,$340(a6)

loc_723A6:				; ...
		tst.b	$310(a6)
		bpl.s	locret_723C6
		bset	#2,$370(a6)
		ori.b	#$1F,d4
		move.b	d4,($C00011).l
		bchg	#5,d4
		move.b	d4,($C00011).l

locret_723C6:				; ...
		rts	
; End of function Sound_ChkValue

		dc.l $FFF100
		dc.l $FFF1F0
		dc.l $FFF250
		dc.l $FFF310
		dc.l $FFF340
		dc.l $FFF370

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Snd_FadeOut1:				; ...
	if S32
		clr.w	PWM_First_Location
		clr.w	PWM_First_Location+$30
		clr.w	PWM_First_Location+$60
	endif

		clr.b	0(a6)
		lea	$220(a6),a5
		moveq	#5,d7

loc_723EA:				; ...
		tst.b	(a5)
		bpl.w	loc_72472
		bclr	#7,(a5)
		moveq	#0,d3
		move.b	1(a5),d3
		bmi.s	loc_7243C
		jsr	sub_726FE(pc)
		cmpi.b	#4,d3
		bne.s	loc_72416
		tst.b	$340(a6)
		bpl.s	loc_72416
		lea	$340(a6),a5
		movea.l	$20(a6),a1
		bra.s	loc_72428

loc_72416:				; ...
		subq.b	#2,d3
		lsl.b	#2,d3
		lea	dword_722CC(pc),a0
		movea.l	a5,a3
		movea.l	(a0,d3.w),a5
		movea.l	$18(a6),a1

loc_72428:				; ...
		bclr	#2,(a5)
		bset	#1,(a5)
		move.b	$B(a5),d0
		jsr	sub_72C4E(pc)
		movea.l	a3,a5
		bra.s	loc_72472

loc_7243C:				; ...
		jsr	sub_729A0(pc)
		lea	$370(a6),a0
		cmpi.b	#$E0,d3
		beq.s	loc_7245A
		cmpi.b	#$C0,d3
		beq.s	loc_7245A
		lsr.b	#3,d3
		lea	dword_722CC(pc),a0
		movea.l	(a0,d3.w),a0

loc_7245A:				; ...
		bclr	#2,(a0)
		bset	#1,(a0)
		cmpi.b	#$E0,1(a0)
		bne.s	loc_72472
		move.b	$1F(a0),($C00011).l

loc_72472:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_723EA
		rts	
; End of function Snd_FadeOut1


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


Snd_FadeOut2:				; ...
	if S32
		clr.w	PWM_First_Location
		clr.w	PWM_First_Location+$30
		clr.w	PWM_First_Location+$60
	endif
		lea	$340(a6),a5
		tst.b	(a5)
		bpl.s	loc_724AE
		bclr	#7,(a5)
		btst	#2,(a5)
		bne.s	loc_724AE
		jsr	loc_7270A(pc)
		lea	$100(a6),a5
		bclr	#2,(a5)
		bset	#1,(a5)
		tst.b	(a5)
		bpl.s	loc_724AE
		movea.l	$18(a6),a1
		move.b	$B(a5),d0
		jsr	sub_72C4E(pc)

loc_724AE:				; ...
		lea	$370(a6),a5
		tst.b	(a5)
		bpl.s	locret_724E4
		bclr	#7,(a5)
		btst	#2,(a5)
		bne.s	locret_724E4
		jsr	loc_729A6(pc)
		lea	$1F0(a6),a5
		bclr	#2,(a5)
		bset	#1,(a5)
		tst.b	(a5)
		bpl.s	locret_724E4
		cmpi.b	#-$20,1(a5)
		bne.s	locret_724E4
		move.b	$1F(a5),($C00011).l

locret_724E4:				; ...
		rts	
; End of function Snd_FadeOut2

; ---------------------------------------------------------------------------
; Fade out music
; ---------------------------------------------------------------------------

Sound_E0:				; ...
		jsr	Snd_FadeOut1(pc)
		jsr	Snd_FadeOut2(pc)
		move.b	#3,6(a6)
		move.b	#$28,4(a6)
		clr.b	$40(a6)
		clr.b	$2A(a6)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72504:				; ...
		move.b	6(a6),d0
		beq.s	loc_72510
		subq.b	#1,6(a6)
		rts	

loc_72510:				; ...
		subq.b	#1,4(a6)
		beq.w	Sound_E4
		move.b	#3,6(a6)
		lea	$70(a6),a5
		moveq	#5,d7

loc_72524:				; ...
		tst.b	(a5)
		bpl.s	loc_72538
		addq.b	#1,9(a5)
		bpl.s	loc_72534
		bclr	#7,(a5)
		bra.s	loc_72538

loc_72534:				; ...
		jsr	sub_72CB4(pc)

loc_72538:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_72524
		moveq	#2,d7

loc_72542:				; ...
		tst.b	(a5)
		bpl.s	loc_72560
		addq.b	#1,9(a5)
		cmpi.b	#$10,9(a5)
		bcs.s	loc_72558
		bclr	#7,(a5)
		bra.s	loc_72560

loc_72558:				; ...
		move.b	9(a5),d6
		jsr	sub_7296A(pc)

loc_72560:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_72542
		rts	
; End of function sub_72504


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_7256A:				; ...
		moveq	#2,d3
		moveq	#$28,d0

loc_7256E:				; ...
		move.b	d3,d1
		jsr	sub_7272E(pc)
		addq.b	#4,d1
		jsr	sub_7272E(pc)
		dbf	d3,loc_7256E
		moveq	#$40,d0
		moveq	#$7F,d1
		moveq	#2,d4

loc_72584:				; ...
		moveq	#3,d3

loc_72586:				; ...
		jsr	sub_7272E(pc)
		jsr	sub_72764(pc)
		addq.w	#4,d0
		dbf	d3,loc_72586
		subi.b	#$F,d0
		dbf	d4,loc_72584
		rts	
; End of function sub_7256A

; ---------------------------------------------------------------------------
; Stop music
; ---------------------------------------------------------------------------

Sound_E4:				; ...
	if S32
		clr.w	PWM_First_Location
		clr.w	PWM_First_Location+$30
		clr.w	PWM_First_Location+$60
	endif

		moveq	#$2B,d0
		move.b	#$80,d1
		jsr	sub_7272E(pc)
		moveq	#$27,d0
		moveq	#0,d1
		jsr	sub_7272E(pc)
		movea.l	a6,a0
		move.w	#$E3,d0

loc_725B6:				; ...
		clr.l	(a0)+
		dbf	d0,loc_725B6
		move.b	#$80,9(a6)	; set music to $80 (silence)
		jsr	sub_7256A(pc)
		bra.w	sub_729B6

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_725CA:				; ...
		movea.l	a6,a0
		move.b	0(a6),d1
		move.b	$27(a6),d2
		move.b	$2A(a6),d3
		move.b	$26(a6),d4
		move.w	$A(a6),d5
		move.w	#$87,d0

loc_725E4:				; ...
		clr.l	(a0)+
		dbf	d0,loc_725E4
		move.b	d1,0(a6)
		move.b	d2,$27(a6)
		move.b	d3,$2A(a6)
		move.b	d4,$26(a6)
		move.w	d5,$A(a6)
		move.b	#$80,9(a6)
		jsr	sub_7256A(pc)
		bra.w	sub_729B6
; End of function sub_725CA


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_7260C:				; ...
		move.b	2(a6),1(a6)
		lea	$4E(a6),a0
		moveq	#$30,d0
		moveq	#9,d1

loc_7261A:				; ...
		addq.b	#1,(a0)
		adda.w	d0,a0
		dbf	d1,loc_7261A
	if S32
		addq.b  #1,PWM_First_Location+$E
		addq.b  #1,PWM_First_Location+$3E
		addq.b  #1,PWM_First_Location+$6E
	endif
		rts	
; End of function sub_7260C

; ---------------------------------------------------------------------------
; Speed	up music
; ---------------------------------------------------------------------------

Sound_E2:				; ...
		tst.b	$27(a6)
		bne.s	loc_7263E
		move.b	$29(a6),2(a6)
		move.b	$29(a6),1(a6)
		move.b	#$80,$2A(a6)
		rts	

loc_7263E:				; ...
		move.b	$3C9(a6),$3A2(a6)
		move.b	$3C9(a6),$3A1(a6)
		move.b	#$80,$3CA(a6)
		rts	
; ---------------------------------------------------------------------------
; Change music back to normal speed
; ---------------------------------------------------------------------------

Sound_E3:				; ...
		tst.b	$27(a6)
		bne.s	loc_7266A
		move.b	$28(a6),2(a6)
		move.b	$28(a6),1(a6)
		clr.b	$2A(a6)
		rts	

loc_7266A:				; ...
		move.b	$3C8(a6),$3A2(a6)
		move.b	$3C8(a6),$3A1(a6)
		clr.b	$3CA(a6)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_7267C:				; ...
		tst.b	$25(a6)
		beq.s	loc_72688
		subq.b	#1,$25(a6)
		rts	

loc_72688:				; ...
		tst.b	$26(a6)
		beq.s	loc_726D6
		subq.b	#1,$26(a6)
		move.b	#2,$25(a6)
		lea	$70(a6),a5
		moveq	#5,d7

loc_7269E:				; ...
		tst.b	(a5)
		bpl.s	loc_726AA
		subq.b	#1,9(a5)
		jsr	sub_72CB4(pc)

loc_726AA:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_7269E
		moveq	#2,d7

loc_726B4:				; ...
		tst.b	(a5)
		bpl.s	loc_726CC
		subq.b	#1,9(a5)
		move.b	9(a5),d6
		cmpi.b	#$10,d6
		bcs.s	loc_726C8
		moveq	#$F,d6

loc_726C8:				; ...
		jsr	sub_7296A(pc)

loc_726CC:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_726B4
		rts	

loc_726D6:				; ...
		bclr	#2,$40(a6)
		clr.b	$24(a6)
		rts	
; End of function sub_7267C


loc_726E2:				; ...
		btst	#1,(a5)
		bne.s	locret_726FC
		btst	#2,(a5)
		bne.s	locret_726FC
		moveq	#$28,d0
		move.b	1(a5),d1
		ori.b	#-$10,d1
		bra.w	sub_7272E

locret_726FC:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_726FE:				; ...
		btst	#4,(a5)
		bne.s	locret_72714
		btst	#2,(a5)
		bne.s	locret_72714

loc_7270A:				; ...
		moveq	#$28,d0
		move.b	1(a5),d1
		bra.w	sub_7272E

locret_72714:				; ...
		rts	
; End of function sub_726FE


loc_72716:				; ...
		btst	#2,(a5)
		bne.s	locret_72720
		bra.w	sub_72722

locret_72720:				; ...
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72722:				; ...
		btst	#2,1(a5)
		bne.s	loc_7275A
		add.b	1(a5),d0
; End of function sub_72722


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_7272E:				; ...
		move.b	($A04000).l,d2
		btst	#7,d2
		bne.s	sub_7272E
		move.b	d0,($A04000).l
		nop	
		nop	
		nop	

loc_72746:				; ...
		move.b	($A04000).l,d2
		btst	#7,d2
		bne.s	loc_72746
		move.b	d1,($A04001).l
		rts	
; End of function sub_7272E


loc_7275A:				; ...
		move.b	1(a5),d2
		bclr	#2,d2
		add.b	d2,d0

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72764:				; ...
		move.b	($A04000).l,d2
		btst	#7,d2
		bne.s	sub_72764
		move.b	d0,($A04002).l
		nop	
		nop	
		nop	

loc_7277C:				; ...
		move.b	($A04000).l,d2
		btst	#7,d2
		bne.s	loc_7277C
		move.b	d1,($A04003).l
		rts	
; End of function sub_72764

word_72790:	dc.w $25E, $284, $2AB, $2D3, $2FE, $32D, $35C, $38F, $3C5 ; ...
		dc.w $3FF, $43C, $47C, $A5E, $A84, $AAB, $AD3, $AFE, $B2D
		dc.w $B5C, $B8F, $BC5, $BFF, $C3C, $C7C, $125E,	$1284
		dc.w $12AB, $12D3, $12FE, $132D, $135C,	$138F, $13C5, $13FF
		dc.w $143C, $147C, $1A5E, $1A84, $1AAB,	$1AD3, $1AFE, $1B2D
		dc.w $1B5C, $1B8F, $1BC5, $1BFF, $1C3C,	$1C7C, $225E, $2284
		dc.w $22AB, $22D3, $22FE, $232D, $235C,	$238F, $23C5, $23FF
		dc.w $243C, $247C, $2A5E, $2A84, $2AAB,	$2AD3, $2AFE, $2B2D
		dc.w $2B5C, $2B8F, $2BC5, $2BFF, $2C3C,	$2C7C, $325E, $3284
		dc.w $32AB, $32D3, $32FE, $332D, $335C,	$338F, $33C5, $33FF
		dc.w $343C, $347C, $3A5E, $3A84, $3AAB,	$3AD3, $3AFE, $3B2D
		dc.w $3B5C, $3B8F, $3BC5, $3BFF, $3C3C,	$3C7C

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72850:				; ...
		subq.b	#1,$E(a5)
		bne.s	loc_72866
		bclr	#4,(a5)
		jsr	sub_72878(pc)
		jsr	sub_728DC(pc)
		bra.w	loc_7292E

loc_72866:				; ...
		jsr	sub_71D9E(pc)
		jsr	sub_72926(pc)
		jsr	sub_71DC6(pc)
		jsr	sub_728E2(pc)
		rts	
; End of function sub_72850


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72878:				; ...
		bclr	#1,(a5)
		movea.l	4(a5),a4

loc_72880:				; ...
		moveq	#0,d5
		move.b	(a4)+,d5
		cmpi.b	#$E0,d5
		bcs.s	loc_72890
		jsr	sub_72A5A(pc)
		bra.s	loc_72880

loc_72890:				; ...
		tst.b	d5
		bpl.s	loc_728A4
		jsr	sub_728AC(pc)
		move.b	(a4)+,d5
		tst.b	d5
		bpl.s	loc_728A4
		subq.w	#1,a4
		bra.w	sub_71D60

loc_728A4:				; ...
		jsr	sub_71D40(pc)
		bra.w	sub_71D60
; End of function sub_72878


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_728AC:				; ...
		subi.b	#$81,d5
		bcs.s	loc_728CA
		add.b	8(a5),d5
		andi.w	#$7F,d5
		lsl.w	#1,d5
		lea	word_729CE(pc),a0
		move.w	(a0,d5.w),$10(a5)
		bra.w	sub_71D60

loc_728CA:				; ...
		bset	#1,(a5)
		move.w	#-1,$10(a5)
		jsr	sub_71D60(pc)
		bra.w	sub_729A0
; End of function sub_728AC


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_728DC:				; ...
		move.w	$10(a5),d6
		bmi.s	loc_72920
; End of function sub_728DC


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_728E2:				; ...
		move.b	$1E(a5),d0
		ext.w	d0
		add.w	d0,d6
		btst	#2,(a5)
		bne.s	locret_7291E
		btst	#1,(a5)
		bne.s	locret_7291E
		move.b	1(a5),d0
		cmpi.b	#$E0,d0
		bne.s	loc_72904
		move.b	#$C0,d0

loc_72904:				; ...
		move.w	d6,d1
		andi.b	#$F,d1
		or.b	d1,d0
		lsr.w	#4,d6
		andi.b	#$3F,d6
		move.b	d0,($C00011).l
		move.b	d6,($C00011).l

locret_7291E:				; ...
		rts	
; End of function sub_728E2


loc_72920:				; ...
		bset	#1,(a5)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72926:				; ...
		tst.b	$B(a5)
		beq.w	locret_7298A

loc_7292E:				; ...
		move.b	9(a5),d6
		moveq	#0,d0
		move.b	$B(a5),d0
		beq.s	sub_7296A
		movea.l	$880000+(Go_PSGIndex).l,a0
		subq.w	#1,d0
		lsl.w	#2,d0
		movea.l	(a0,d0.w),a0
		move.b	$C(a5),d0
		move.b	(a0,d0.w),d0
		addq.b	#1,$C(a5)
		btst	#7,d0
		beq.s	loc_72960
		cmpi.b	#$80,d0
		beq.s	loc_7299A

loc_72960:				; ...
		add.w	d0,d6
		cmpi.b	#$10,d6
		bcs.s	sub_7296A
		moveq	#$F,d6
; End of function sub_72926


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_7296A:				; ...
		btst	#1,(a5)
		bne.s	locret_7298A
		btst	#2,(a5)
		bne.s	locret_7298A
		btst	#4,(a5)
		bne.s	loc_7298C

loc_7297C:				; ...
		or.b	1(a5),d6
		addi.b	#$10,d6
		move.b	d6,($C00011).l

locret_7298A:				; ...
		rts	

loc_7298C:				; ...
		tst.b	$13(a5)
		beq.s	loc_7297C
		tst.b	$12(a5)
		bne.s	loc_7297C
		rts	
; End of function sub_7296A


loc_7299A:				; ...
		subq.b	#1,$C(a5)
		rts	

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_729A0:				; ...
		btst	#2,(a5)
		bne.s	locret_729B4

loc_729A6:				; ...
		move.b	1(a5),d0
		ori.b	#$1F,d0
		move.b	d0,($C00011).l

locret_729B4:				; ...
		rts	
; End of function sub_729A0


; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_729B6:				; ...
		lea	($C00011).l,a0
		move.b	#$9F,(a0)
		move.b	#$BF,(a0)
		move.b	#$DF,(a0)
		move.b	#$FF,(a0)
		rts	
; End of function sub_729B6

word_729CE:	dc.w $356, $326, $2F9, $2CE, $2A5, $280, $25C, $23A, $21A ; ...
		dc.w $1FB, $1DF, $1C4, $1AB, $193, $17D, $167, $153, $140
		dc.w $12E, $11D, $10D, $FE, $EF, $E2, $D6, $C9,	$BE, $B4
		dc.w $A9, $A0, $97, $8F, $87, $7F, $78,	$71, $6B, $65
		dc.w $5F, $5A, $55, $50, $4B, $47, $43,	$40, $3C, $39
		dc.w $36, $33, $30, $2D, $2B, $28, $26,	$24, $22, $20
		dc.w $1F, $1D, $1B, $1A, $18, $17, $16,	$15, $13, $12
		dc.w $11, 0

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72A5A:				; ...
		subi.w	#$E0,d5
		lsl.w	#2,d5
		jmp	loc_72A64(pc,d5.w)
; End of function sub_72A5A


loc_72A64:
		bra.w	loc_72ACC
		bra.w	loc_72AEC
		bra.w	loc_72AF2
		bra.w	loc_72AF8
		bra.w	loc_72B14
		bra.w	loc_72B9E
		bra.w	loc_72BA4
		bra.w	loc_72BAE
		bra.w	loc_72BB4
		bra.w	loc_72BBE
		bra.w	loc_72BC6
		bra.w	loc_72BD0
		bra.w	loc_72BE6
		bra.w	loc_72BEE
		bra.w	loc_72BF4
		bra.w	loc_72C26
		bra.w	loc_72D30
		bra.w	loc_72D52
		bra.w	loc_72D58
		bra.w	loc_72E06
		bra.w	loc_72E20
		bra.w	loc_72E26
		bra.w	loc_72E2C
		bra.w	loc_72E38
		bra.w	loc_72E52
		bra.w	loc_72E64

loc_72ACC:				; ...
		move.b	(a4)+,d1
		tst.b	1(a5)
		bmi.s	locret_72AEA
		move.b	$A(a5),d0
		andi.b	#$37,d0
		or.b	d0,d1
		move.b	d1,$A(a5)
		move.b	#$B4,d0
		bra.w	loc_72716

locret_72AEA:				; ...
		rts	

loc_72AEC:				; ...
		move.b	(a4)+,$1E(a5)
		rts	

loc_72AF2:				; ...
		move.b	(a4)+,7(a6)
		rts	

loc_72AF8:				; ...
		moveq	#0,d0
		move.b	$D(a5),d0
		movea.l	(a5,d0.w),a4
		move.l	#0,(a5,d0.w)
		addq.w	#2,a4
		addq.b	#4,d0
		move.b	d0,$D(a5)
		rts	

loc_72B14:				; ...
		movea.l	a6,a0
		lea	$3A0(a6),a1
		move.w	#$87,d0

loc_72B1E:				; ...
		move.l	(a1)+,(a0)+
		dbf	d0,loc_72B1E
		bset	#2,$40(a6)
		movea.l	a5,a3
		move.b	#$28,d6
		sub.b	$26(a6),d6
		moveq	#5,d7
		lea	$70(a6),a5

loc_72B3A:				; ...
		btst	#7,(a5)
		beq.s	loc_72B5C
		bset	#1,(a5)
		add.b	d6,9(a5)
		btst	#2,(a5)
		bne.s	loc_72B5C
		moveq	#0,d0
		move.b	$B(a5),d0
		movea.l	$18(a6),a1
		jsr	sub_72C4E(pc)

loc_72B5C:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_72B3A
		moveq	#2,d7

loc_72B66:				; ...
		btst	#7,(a5)
		beq.s	loc_72B78
		bset	#1,(a5)
		jsr	sub_729A0(pc)
		add.b	d6,9(a5)

loc_72B78:				; ...
		adda.w	#$30,a5
		dbf	d7,loc_72B66
		movea.l	a3,a5
		move.b	#$80,$24(a6)
		move.b	#$28,$26(a6)
		clr.b	$27(a6)
		move.w	#0,($A11100).l
		addq.w	#8,sp
		rts	

loc_72B9E:				; ...
		move.b	(a4)+,2(a5)
		rts	

loc_72BA4:				; ...
		move.b	(a4)+,d0
		add.b	d0,9(a5)
		bra.w	sub_72CB4

loc_72BAE:				; ...
		bset	#4,(a5)
		rts	

loc_72BB4:				; ...
		move.b	(a4),$12(a5)
		move.b	(a4)+,$13(a5)
		rts	

loc_72BBE:				; ...
		move.b	(a4)+,d0
		add.b	d0,8(a5)
		rts	

loc_72BC6:				; ...
		move.b	(a4),2(a6)
		move.b	(a4)+,1(a6)
		rts	

loc_72BD0:				; ...
		lea	$40(a6),a0
		move.b	(a4)+,d0
		moveq	#$30,d1
		moveq	#9,d2

loc_72BDA:				; ...
		move.b	d0,2(a0)
		adda.w	d1,a0
		dbf	d2,loc_72BDA
		rts	

loc_72BE6:				; ...
		move.b	(a4)+,d0
		add.b	d0,9(a5)
		rts	

loc_72BEE:				; ...
		clr.b	$2C(a6)
		rts	

loc_72BF4:				; ...
		bclr	#7,(a5)
		bclr	#4,(a5)
		jsr	sub_726FE(pc)
		tst.b	$250(a6)
		bmi.s	loc_72C22
		movea.l	a5,a3
		lea	$100(a6),a5
		movea.l	$18(a6),a1
		bclr	#2,(a5)
		bset	#1,(a5)
		move.b	$B(a5),d0
		jsr	sub_72C4E(pc)
		movea.l	a3,a5

loc_72C22:				; ...
		addq.w	#8,sp
		rts	

loc_72C26:				; ...
		moveq	#0,d0
		move.b	(a4)+,d0
		move.b	d0,$B(a5)
		btst	#2,(a5)
		bne.w	locret_72CAA
		movea.l	$18(a6),a1
		tst.b	$E(a6)
		beq.s	sub_72C4E
		movea.l	$20(a5),a1
		tst.b	$E(a6)
		bmi.s	sub_72C4E
		movea.l	$20(a6),a1

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72C4E:				; ...
		subq.w	#1,d0
		bmi.s	loc_72C5C
		move.w	#$19,d1

loc_72C56:				; ...
		adda.w	d1,a1
		dbf	d0,loc_72C56

loc_72C5C:				; ...
		move.b	(a1)+,d1
		move.b	d1,$1F(a5)
		move.b	d1,d4
		move.b	#$B0,d0
		jsr	sub_72722(pc)
		lea	byte_72D18(pc),a2
		moveq	#$13,d3

loc_72C72:				; ...
		move.b	(a2)+,d0
		move.b	(a1)+,d1
		jsr	sub_72722(pc)
		dbf	d3,loc_72C72
		moveq	#3,d5
		andi.w	#7,d4
		move.b	byte_72CAC(pc,d4.w),d4
		move.b	9(a5),d3

loc_72C8C:				; ...
		move.b	(a2)+,d0
		move.b	(a1)+,d1
		lsr.b	#1,d4
		bcc.s	loc_72C96
		add.b	d3,d1

loc_72C96:				; ...
		jsr	sub_72722(pc)
		dbf	d5,loc_72C8C
		move.b	#$B4,d0
		move.b	$A(a5),d1
		jsr	sub_72722(pc)

locret_72CAA:				; ...
		rts	
; End of function sub_72C4E

byte_72CAC:	dc.b 8,	8, 8, 8, $A, $E, $E, $F

; ллллллллллллллл S U B	R O U T	I N E ллллллллллллллллллллллллллллллллллллллл


sub_72CB4:				; ...
		btst	#2,(a5)
		bne.s	locret_72D16
		moveq	#0,d0
		move.b	$B(a5),d0
		movea.l	$18(a6),a1
		tst.b	$E(a6)
		beq.s	loc_72CD8
		movea.l	$20(a6),a1
		tst.b	$E(a6)
		bmi.s	loc_72CD8
		movea.l	$20(a6),a1

loc_72CD8:				; ...
		subq.w	#1,d0
		bmi.s	loc_72CE6
		move.w	#$19,d1

loc_72CE0:				; ...
		adda.w	d1,a1
		dbf	d0,loc_72CE0

loc_72CE6:				; ...
		adda.w	#$15,a1
		lea	byte_72D2C(pc),a2
		move.b	$1F(a5),d0
		andi.w	#7,d0
		move.b	byte_72CAC(pc,d0.w),d4
		move.b	9(a5),d3
		bmi.s	locret_72D16
		moveq	#3,d5
		move.l	a1,d0
		and.l	#$ffffff00,d0	;had to use this hack due to a VERY nasty Sonic 1 bug
		bne.s	loc_72d02
		add.l	#$880000,a1

loc_72D02:				; ...
		move.b	(a2)+,d0
		move.b	(a1)+,d1
		lsr.b	#1,d4
		bcc.s	loc_72D12
		add.b	d3,d1
		bcs.s	loc_72D12
		jsr	sub_72722(pc)

loc_72D12:				; ...
		dbf	d5,loc_72D02

locret_72D16:				; ...
		rts	
; End of function sub_72CB4

byte_72D18:	dc.b $30, $38, $34, $3C, $50, $58, $54,	$5C, $60, $68 ;	...
		dc.b $64, $6C, $70, $78, $74, $7C, $80,	$88, $84, $8C
byte_72D2C:	dc.b $40, $48, $44, $4C	; ...

loc_72D30:				; ...
		bset	#3,(a5)
		move.l	a4,$14(a5)
		move.b	(a4)+,$18(a5)
		move.b	(a4)+,$19(a5)
		move.b	(a4)+,$1A(a5)
		move.b	(a4)+,d0
		lsr.b	#1,d0
		move.b	d0,$1B(a5)
		clr.w	$1C(a5)
		rts	

loc_72D52:				; ...
		bset	#3,(a5)
		rts	

loc_72D58:				; ...
		bclr	#7,(a5)
		bclr	#4,(a5)
		tst.b	1(a5)
		bmi.s	loc_72D74
		tst.b	8(a6)
		bmi.w	loc_72E02
		jsr	sub_726FE(pc)
		bra.s	loc_72D78

loc_72D74:				; ...
		jsr	sub_729A0(pc)

loc_72D78:				; ...
		tst.b	$E(a6)
		bpl.w	loc_72E02
		clr.b	0(a6)
		moveq	#0,d0
		move.b	1(a5),d0
		bmi.s	loc_72DCC
		lea	dword_722CC(pc),a0
		movea.l	a5,a3
		cmpi.b	#4,d0
		bne.s	loc_72DA8
		tst.b	$340(a6)
		bpl.s	loc_72DA8
		lea	$340(a6),a5
		movea.l	$20(a6),a1
		bra.s	loc_72DB8

loc_72DA8:				; ...
		subq.b	#2,d0
		lsl.b	#2,d0
		movea.l	(a0,d0.w),a5
		tst.b	(a5)
		bpl.s	loc_72DC8
		movea.l	$18(a6),a1

loc_72DB8:				; ...
		bclr	#2,(a5)
		bset	#1,(a5)
		move.b	$B(a5),d0
		jsr	sub_72C4E(pc)

loc_72DC8:				; ...
		movea.l	a3,a5
		bra.s	loc_72E02

loc_72DCC:				; ...
		lea	$370(a6),a0
		tst.b	(a0)
		bpl.s	loc_72DE0
		cmpi.b	#$E0,d0
		beq.s	loc_72DEA
		cmpi.b	#$C0,d0
		beq.s	loc_72DEA

loc_72DE0:				; ...
		lea	dword_722CC(pc),a0
		lsr.b	#3,d0
		movea.l	(a0,d0.w),a0

loc_72DEA:				; ...
		bclr	#2,(a0)
		bset	#1,(a0)
		cmpi.b	#$E0,1(a0)
		bne.s	loc_72E02
		move.b	$1F(a0),($C00011).l

loc_72E02:				; ...
		addq.w	#8,sp
		rts	

loc_72E06:				; ...
		move.b	#$E0,1(a5)
		move.b	(a4)+,$1F(a5)
		btst	#2,(a5)
		bne.s	locret_72E1E
		move.b	-1(a4),($C00011).l

locret_72E1E:				; ...
		rts	

loc_72E20:				; ...
		bclr	#3,(a5)
		rts	

loc_72E26:				; ...
		move.b	(a4)+,$B(a5)
		rts	

loc_72E2C:				; ...
		move.b	(a4)+,d0
		lsl.w	#8,d0
		move.b	(a4)+,d0
		adda.w	d0,a4
		subq.w	#1,a4
		rts	

loc_72E38:				; ...
		moveq	#0,d0
		move.b	(a4)+,d0
		move.b	(a4)+,d1
		tst.b	$24(a5,d0.w)
		bne.s	loc_72E48
		move.b	d1,$24(a5,d0.w)

loc_72E48:				; ...
		subq.b	#1,$24(a5,d0.w)
		bne.s	loc_72E2C
		addq.w	#2,a4
		rts	

loc_72E52:				; ...
		moveq	#0,d0
		move.b	$D(a5),d0
		subq.b	#4,d0
		move.l	a4,(a5,d0.w)
		move.b	d0,$D(a5)
		bra.s	loc_72E2C

loc_72E64:				; ...
		move.b	#$88,d0
		move.b	#$F,d1
		jsr	sub_7272E(pc)
		move.b	#$8C,d0
		move.b	#$F,d1
		bra.w	sub_7272E
		

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;
;; BANK 0 - Data used in all levels (e.g. music, samples)
;;          
;;   Remember to prepend addresses by $880000
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

Kos_Z80:	incbin	sound\z80_1.bin
		dc.b	$3e
		dc.b	((SegaPCM&$8000)>>15)
		dc.b	$32,$00,$60,$06,$08,$3e
		dc.b	$88+((SegaPCM&$FF0000)>>16)
		incbin	sound\z80_2.bin
		dc.w (((SegaPCM&$FF)<<8)+((SegaPCM&$FF00)>>8))|$80
		dc.b $21
		dc.w (((SegaPCMEnd-SegaPCM)&$FF)<<8)+(((SegaPCMEnd-SegaPCM)&$FF00)>>8)
		incbin	sound\z80_3.bin
		even
	if S32=1
; -----------------------------------------------
; PlayPWM - Play a PWM sample
; 
; d0 - Sample ID
; d1 - Channel ID
; d2 - Volume
; d3 - Panning ($C0 = both, $80 = right, $40 = left)
; -----------------------------------------------

PlayPWM:


		move.b	d0,-(sp)
		move.b	d1,-(sp)
		move.b	d1,-(sp)
		moveq	#0,d4
		move.b	d2,d4
		btst	#7,d3
		bne.s	@LeftPan
		clr.b	d4
@LeftPan
		move.w	d4,($A1512A).l	; Set volume to... this
		lsl.w	#8,d1		; Multiply channel ID by $100
		or.w 	#$1003,d1	; Set left volume
		move.w	d1,($A15128).l	; Send command to PWM

@PWM_ACK1
		move.w	($A15128).l,d0
		and.w	#$8000,d0
		beq.s	@PWM_ACK1

		;and.w	#$1F00,d1	; Clear PWM command
		moveq	#0,d1
		move.b	(sp)+,d1

		move.b	d2,d4
		btst	#6,d3
		bne.s	@RightPan
		clr.b	d4
@RightPan
		move.w	d4,($A1512A).l	; Set volume to... this
		lsl.w	#8,d1		; Multiply channel ID by $100
		or.w 	#$1004,d1	; Set left volume
		move.w	d1,($A15128).l	; Send command to PWM

@PWM_ACK2
		move.w	($A15128).l,d0
		and.w	#$8000,d0
		beq.s	@PWM_ACK2

;		and.w	#$1F00,d1	; Clear PWM command
		moveq	#0,d1
		move.b	(sp)+,d1

		moveq	#0,d0
		move.b	(sp)+,d0	; Restore sample ID
		move.w	d0,($A1512A).l	; Play Sample
		lsl.w	#8,d1		; Multiply channel ID by $100
		or.w 	#$1001,d1
		move.w  d1,($A15128).l ;pwm channel 1, play sample 00
@PWM_ACK
		move.w	($A15128).l,d0
		and.w	#$8000,d0
;		btst	#7,($A15128).l
		beq.s	@PWM_ACK
		rts

	endif

Music81:	incbin	sound\music81.bin
		even
Music82:	incbin	sound\music82.bin
		even
Music83:	incbin	sound\music83.bin
		even
Music84:	incbin	sound\music84.bin
		even
Music85:	incbin	sound\music85.bin
		even
Music86:	
	if S32
		incbin	sound\music86_s32.bin
	else
		incbin	sound\music86.bin
	endif
		even
Music87:	incbin	sound\music87.bin
		even
Music88:	incbin	sound\music88.bin
		even
Music89:	incbin	sound\music89.bin
		even
Music8A:	incbin	sound\music8A.bin
		even
Music8B:	incbin	sound\music8B.bin
		even
Music8C:	incbin	sound\music8C.bin
		even
Music8D:	incbin	sound\music8D.bin
		even
Music8E:	incbin	sound\music8E.bin
		even
Music8F:	incbin	sound\music8F.bin
		even
Music90:	incbin	sound\music90.bin
		even
Music91:	incbin	sound\music91.bin
		even
Music92:	incbin	sound\music92.bin
		even
Music93:	incbin	sound\music93.bin
		even
SoundA0:	incbin	sound\soundA0.bin
		even
SoundA1:	incbin	sound\soundA1.bin
		even
SoundA2:	incbin	sound\soundA2.bin
		even
SoundA3:	incbin	sound\soundA3.bin
		even
SoundA4:	incbin	sound\soundA4.bin
		even
SoundA5:	incbin	sound\soundA5.bin
		even
SoundA6:	incbin	sound\soundA6.bin
		even
SoundA7:	incbin	sound\soundA7.bin
		even
SoundA8:	incbin	sound\soundA8.bin
		even
SoundA9:	incbin	sound\soundA9.bin
		even
SoundAA:	incbin	sound\soundAA.bin
		even
SoundAB:	incbin	sound\soundAB.bin
		even
SoundAC:	incbin	sound\soundAC.bin
		even
SoundAD:	incbin	sound\soundAD.bin
		even
SoundAE:	incbin	sound\soundAE.bin
		even
SoundAF:	incbin	sound\soundAF.bin
		even
SoundB0:	incbin	sound\soundB0.bin
		even
SoundB1:	incbin	sound\soundB1.bin
		even
SoundB2:	incbin	sound\soundB2.bin
		even
SoundB3:	incbin	sound\soundB3.bin
		even
SoundB4:	incbin	sound\soundB4.bin
		even
SoundB5:	incbin	sound\soundB5.bin
		even
SoundB6:	incbin	sound\soundB6.bin
		even
SoundB7:	incbin	sound\soundB7.bin
		even
SoundB8:	incbin	sound\soundB8.bin
		even
SoundB9:	incbin	sound\soundB9.bin
		even
SoundBA:	incbin	sound\soundBA.bin
		even
SoundBB:	incbin	sound\soundBB.bin
		even
SoundBC:	incbin	sound\soundBC.bin
		even
SoundBD:	incbin	sound\soundBD.bin
		even
SoundBE:	incbin	sound\soundBE.bin
		even
SoundBF:	incbin	sound\soundBF.bin
		even
SoundC0:	incbin	sound\soundC0.bin
		even
SoundC1:	incbin	sound\soundC1.bin
		even
SoundC2:	incbin	sound\soundC2.bin
		even
SoundC3:	incbin	sound\soundC3.bin
		even
SoundC4:	incbin	sound\soundC4.bin
		even
SoundC5:	incbin	sound\soundC5.bin
		even
SoundC6:	incbin	sound\soundC6.bin
		even
SoundC7:	incbin	sound\soundC7.bin
		even
SoundC8:	incbin	sound\soundC8.bin
		even
SoundC9:	incbin	sound\soundC9.bin
		even
SoundCA:	incbin	sound\soundCA.bin
		even
SoundCB:	incbin	sound\soundCB.bin
		even
SoundCC:	incbin	sound\soundCC.bin
		even
SoundCD:	incbin	sound\soundCD.bin
		even
SoundCE:	incbin	sound\soundCE.bin
		even
SoundCF:	incbin	sound\soundCF.bin
		even
SoundD0:	incbin	sound\soundD0.bin
		even
SegaPCM:	incbin	sound\segapcm.bin
SegaPCMEnd:	even
	if S32
PWM1:		incbin	sound\pwm1d.bin
PWM1End:	even
PWM2:		incbin	sound\pwm2d.bin
PWM2End:	even
PWM3:		incbin	sound\pwm3d.bin
PWM3End:	even
	endif
        align $1000
        
PWMSamples:
        if S32
        dc.l    SegaPCM+$22000000	; "SEGA!"
        dc.l    SegaPCMEnd-SegaPCM
        dc.l    0
        dc.l    $440
        
	dc.l	PWM1+$22000000	; 81 - Kick
	dc.l	PWM1End-PWM1
	dc.l	0
	dc.l	$240

	dc.l	PWM2+$22000000	; 82 - Snare
	dc.l	PWM2End-PWM2
	dc.l	0
	dc.l	$600

	dc.l	PWM3+$22000000	; 83 - Timpani
	dc.l	PWM3End-PWM3
	dc.l	0
	dc.l	$580


	dcb.l	4,0	; 84
	dcb.l	4,0	; 85
	dcb.l	4,0	; 86
	dcb.l	4,0	; 87

	dc.l	PWM3+$22000000	; 88 - High Timpani
	dc.l	PWM3End-PWM3
	dc.l	0
	dc.l	$280

	dc.l	PWM3+$22000000	; 89 - Mid Timpani
	dc.l	PWM3End-PWM3
	dc.l	0
	dc.l	$240

	dc.l	PWM3+$22000000	; 8A - Low Timpani
	dc.l	PWM3End-PWM3
	dc.l	0
	dc.l	$200

	dc.l	PWM3+$22000000	; 8B - Very Low Timpani
	dc.l	PWM3End-PWM3
	dc.l	0
	dc.l	$1C0

	endif
        dc.l    $13370002

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;;
;; BANK 1 - DATA (only one bank will suffice)
;;          
;;   Remember to prepend addresses by $900000
;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

		align $1000


Nem_SegaLogo:	incbin	artnem\segalogo.bin	; large Sega logo
		even
Eni_SegaLogo:	incbin	mapeni\segalogo.bin	; large Sega logo (mappings)
		even
Eni_Title:	incbin	mapeni\titlescr.bin	; title screen foreground (mappings)
		even
Nem_TitleFg:	incbin	artnem\titlefor.bin	; title screen foreground
		even
Nem_TitleSonic:	incbin	artnem\titleson.bin	; Sonic on title screen
		even
Nem_TitleTM:	incbin	artnem\titletm.bin	; TM on title screen
		even
Eni_JapNames:	incbin	mapeni\japcreds.bin	; Japanese credits (mappings)
		even
Nem_JapNames:	incbin	artnem\japcreds.bin	; Japanese credits
		even
; ---------------------------------------------------------------------------
; Sprite mappings - Sonic
; ---------------------------------------------------------------------------
Map_Sonic:
; ---------------------------------------------------------------------------
; Sprite mappings - Sonic
; ---------------------------------------------------------------------------
		dc.w byte_21292-Map_Sonic, byte_21293-Map_Sonic
		dc.w byte_212A8-Map_Sonic, byte_212B8-Map_Sonic
		dc.w byte_212C8-Map_Sonic, byte_212D8-Map_Sonic
		dc.w byte_212E8-Map_Sonic, byte_212FD-Map_Sonic
		dc.w byte_21308-Map_Sonic, byte_21313-Map_Sonic
		dc.w byte_21328-Map_Sonic, byte_21333-Map_Sonic
		dc.w byte_21343-Map_Sonic, byte_2135D-Map_Sonic
		dc.w byte_2137C-Map_Sonic, byte_21391-Map_Sonic
		dc.w byte_213AB-Map_Sonic, byte_213C0-Map_Sonic
		dc.w byte_213DA-Map_Sonic, byte_213EF-Map_Sonic
		dc.w byte_213FA-Map_Sonic, byte_21405-Map_Sonic
		dc.w byte_2141A-Map_Sonic, byte_21425-Map_Sonic
		dc.w byte_21435-Map_Sonic, byte_21454-Map_Sonic
		dc.w byte_21473-Map_Sonic, byte_21488-Map_Sonic
		dc.w byte_214A2-Map_Sonic, byte_214B7-Map_Sonic
		dc.w byte_214D1-Map_Sonic, byte_214DC-Map_Sonic
		dc.w byte_214E7-Map_Sonic, byte_214F2-Map_Sonic
		dc.w byte_214FD-Map_Sonic, byte_21512-Map_Sonic
		dc.w byte_21522-Map_Sonic, byte_21537-Map_Sonic
		dc.w byte_21547-Map_Sonic, byte_21552-Map_Sonic
		dc.w byte_2155D-Map_Sonic, byte_21568-Map_Sonic
		dc.w byte_21573-Map_Sonic, byte_21588-Map_Sonic
		dc.w byte_21593-Map_Sonic, byte_215A8-Map_Sonic
		dc.w byte_215B3-Map_Sonic, byte_215B9-Map_Sonic
		dc.w byte_215BF-Map_Sonic, byte_215C5-Map_Sonic
		dc.w byte_215CB-Map_Sonic, byte_215D1-Map_Sonic
		dc.w byte_215DC-Map_Sonic, byte_215E2-Map_Sonic
		dc.w byte_215ED-Map_Sonic, byte_215F3-Map_Sonic
		dc.w byte_215FE-Map_Sonic, byte_21613-Map_Sonic
		dc.w byte_21628-Map_Sonic, byte_21638-Map_Sonic
		dc.w byte_21648-Map_Sonic, byte_21658-Map_Sonic
		dc.w byte_21663-Map_Sonic, byte_21673-Map_Sonic
		dc.w byte_21683-Map_Sonic, byte_21693-Map_Sonic
		dc.w byte_216A8-Map_Sonic, byte_216BD-Map_Sonic
		dc.w byte_216D7-Map_Sonic, byte_216F1-Map_Sonic
		dc.w byte_216FC-Map_Sonic, byte_2170C-Map_Sonic
		dc.w byte_21717-Map_Sonic, byte_21727-Map_Sonic
		dc.w byte_21732-Map_Sonic, byte_21742-Map_Sonic
		dc.w byte_21752-Map_Sonic, byte_2176C-Map_Sonic
		dc.w byte_21786-Map_Sonic, byte_21791-Map_Sonic
		dc.w byte_217A1-Map_Sonic, byte_217A7-Map_Sonic
		dc.w byte_217AD-Map_Sonic, byte_217B3-Map_Sonic
		dc.w byte_217C3-Map_Sonic, byte_217D3-Map_Sonic
		dc.w byte_217E3-Map_Sonic, byte_217F3-Map_Sonic
byte_21292:	dc.b 0
byte_21293:	dc.b 4			; standing
		dc.b $EC, 8, 0,	0, $F0
		dc.b $F4, $D, 0, 3, $F0
		dc.b 4,	8, 0, $B, $F0
		dc.b $C, 8, 0, $E, $F8
byte_212A8:	dc.b 3			; waiting 1
		dc.b $EC, 9, 0,	0, $F0
		dc.b $FC, 9, 0,	6, $F0
		dc.b $C, 8, 0, $C, $F8
byte_212B8:	dc.b 3			; waiting 2
		dc.b $EC, 9, 0,	0, $F0
		dc.b $FC, 9, 0,	6, $F0
		dc.b $C, 8, 0, $C, $F8
byte_212C8:	dc.b 3			; waiting 3
		dc.b $EC, 9, 0,	0, $F0
		dc.b $FC, 9, 0,	6, $F0
		dc.b $C, 8, 0, $C, $F8
byte_212D8:	dc.b 3			; looking up
		dc.b $EC, $A, 0, 0, $F0
		dc.b 4,	8, 0, 9, $F0
		dc.b $C, 8, 0, $C, $F8
byte_212E8:	dc.b 4			; walking 1-1
		dc.b $EB, $D, 0, 0, $EC
		dc.b $FB, 9, 0,	8, $EC
		dc.b $FB, 6, 0,	$E, 4
		dc.b $B, 4, 0, $14, $EC
byte_212FD:	dc.b 2			; walking 1-2
		dc.b $EC, $D, 0, 0, $ED
		dc.b $FC, $E, 0, 8, $F5
byte_21308:	dc.b 2			; walking 1-3
		dc.b $ED, 9, 0,	0, $F3
		dc.b $FD, $A, 0, 6, $F3
byte_21313:	dc.b 4			; walking 1-4
		dc.b $EB, 9, 0,	0, $F4
		dc.b $FB, 9, 0,	6, $EC
		dc.b $FB, 6, 0,	$C, 4
		dc.b $B, 4, 0, $12, $EC
byte_21328:	dc.b 2			; walking 1-5
		dc.b $EC, 9, 0,	0, $F3
		dc.b $FC, $E, 0, 6, $EB
byte_21333:	dc.b 3			; walking 1-6
		dc.b $ED, $D, 0, 0, $EC
		dc.b $FD, $C, 0, 8, $F4
		dc.b 5,	9, 0, $C, $F4
byte_21343:	dc.b 5			; walking 2-1
		dc.b $EB, 9, 0,	0, $EB
		dc.b $EB, 6, 0,	6, 3
		dc.b $FB, 8, 0,	$C, $EB
		dc.b 3,	9, 0, $F, $F3
		dc.b $13, 0, 0,	$15, $FB
byte_2135D:	dc.b 6			; walking 2-2
		dc.b $EC, 9, 0,	0, $EC
		dc.b $EC, 1, 0,	6, 4
		dc.b $FC, $C, 0, 8, $EC
		dc.b 4,	9, 0, $C, $F4
		dc.b $FC, 5, 0,	$12, $C
		dc.b $F4, 0, 0,	$16, $14
byte_2137C:	dc.b 4			; walking 2-3
		dc.b $ED, 9, 0,	0, $ED
		dc.b $ED, 1, 0,	6, 5
		dc.b $FD, $D, 0, 8, $F5
		dc.b $D, 8, 0, $10, $FD
byte_21391:	dc.b 5			; walking 2-4
		dc.b $EB, 9, 0,	0, $EB
		dc.b $EB, 5, 0,	6, 3
		dc.b $FB, $D, 0, $A, $F3
		dc.b $B, 8, 0, $12, $F3
		dc.b $13, 4, 0,	$15, $FB
byte_213AB:	dc.b 4			; walking 2-5
		dc.b $EC, 9, 0,	0, $EC
		dc.b $EC, 1, 0,	6, 4
		dc.b $FC, $D, 0, 8, $F4
		dc.b $C, 8, 0, $10, $FC
byte_213C0:	dc.b 5			; walking 2-6
		dc.b $ED, 9, 0,	0, $ED
		dc.b $ED, 1, 0,	6, 5
		dc.b $FD, 0, 0,	8, $ED
		dc.b $FD, $D, 0, 9, $F5
		dc.b $D, 8, 0, $11, $FD
byte_213DA:	dc.b 4			; walking 3-1
		dc.b $F4, 7, 0,	0, $EB
		dc.b $EC, 9, 0,	8, $FB
		dc.b $FC, 4, 0,	$E, $FB
		dc.b 4,	9, 0, $10, $FB
byte_213EF:	dc.b 2			; walking 3-2
		dc.b $F4, 7, 0,	0, $EC
		dc.b $EC, $B, 0, 8, $FC
byte_213FA:	dc.b 2			; walking 3-3
		dc.b $F4, 6, 0,	0, $ED
		dc.b $F4, $A, 0, 6, $FD
byte_21405:	dc.b 4			; walking 3-4
		dc.b $F4, 6, 0,	0, $EB
		dc.b $EC, 9, 0,	6, $FB
		dc.b $FC, 4, 0,	$C, $FB
		dc.b 4,	9, 0, $E, $FB
byte_2141A:	dc.b 2			; walking 3-5
		dc.b $F4, 6, 0,	0, $EC
		dc.b $F4, $B, 0, 6, $FC
byte_21425:	dc.b 3			; walking 3-6
		dc.b $F4, 7, 0,	0, $ED
		dc.b $EC, 0, 0,	8, $FD
		dc.b $F4, $A, 0, 9, $FD
byte_21435:	dc.b 6			; walking 4-1
		dc.b $FD, 6, 0,	0, $EB
		dc.b $ED, 4, 0,	6, $F3
		dc.b $F5, 4, 0,	8, $EB
		dc.b $F5, $A, 0, $A, $FB
		dc.b $D, 0, 0, $13, $FB
		dc.b $FD, 0, 0,	$14, $13
byte_21454:	dc.b 6			; walking 4-2
		dc.b $FC, 6, 0,	0, $EC
		dc.b $E4, 8, 0,	6, $F4
		dc.b $EC, 4, 0,	9, $FC
		dc.b $F4, 4, 0,	$B, $EC
		dc.b $F4, $A, 0, $D, $FC
		dc.b $C, 0, 0, $16, $FC
byte_21473:	dc.b 4			; walking 4-3
		dc.b $FB, 6, 0,	0, $ED
		dc.b $F3, 4, 0,	6, $ED
		dc.b $EB, $A, 0, 8, $FD
		dc.b 3,	4, 0, $11, $FD
byte_21488:	dc.b 5			; walking 4-4
		dc.b $FD, 6, 0,	0, $EB
		dc.b $ED, 8, 0,	6, $F3
		dc.b $F5, 4, 0,	9, $EB
		dc.b $F5, $D, 0, $B, $FB
		dc.b 5,	8, 0, $13, $FB
byte_214A2:	dc.b 4			; walking 4-5
		dc.b $FC, 6, 0,	0, $EC
		dc.b $F4, 4, 0,	6, $EC
		dc.b $EC, $A, 0, 8, $FC
		dc.b 4,	4, 0, $11, $FC
byte_214B7:	dc.b 5			; walking 4-6
		dc.b $FB, 6, 0,	0, $ED
		dc.b $EB, $A, 0, 6, $FD
		dc.b $F3, 4, 0,	$F, $ED
		dc.b 3,	4, 0, $11, $FD
		dc.b $B, 0, 0, $13, $FD
byte_214D1:	dc.b 2			; running 1-1
		dc.b $EE, 9, 0,	0, $F4
		dc.b $FE, $E, 0, 6, $EC
byte_214DC:	dc.b 2			; running 1-2
		dc.b $EE, 9, 0,	0, $F4
		dc.b $FE, $E, 0, 6, $EC
byte_214E7:	dc.b 2			; running 1-3
		dc.b $EE, 9, 0,	0, $F4
		dc.b $FE, $E, 0, 6, $EC
byte_214F2:	dc.b 2			; running 1-4
		dc.b $EE, 9, 0,	0, $F4
		dc.b $FE, $E, 0, 6, $EC
byte_214FD:	dc.b 4			; running 2-1
		dc.b $EE, 9, 0,	0, $EE
		dc.b $EE, 1, 0,	6, 6
		dc.b $FE, $E, 0, 8, $F6
		dc.b $FE, 0, 0,	$14, $EE
byte_21512:	dc.b 3			; running 2-2
		dc.b $EE, 9, 0,	0, $EE
		dc.b $EE, 1, 0,	6, 6
		dc.b $FE, $E, 0, 8, $F6
byte_21522:	dc.b 4			; running 2-3
		dc.b $EE, 9, 0,	0, $EE
		dc.b $EE, 1, 0,	6, 6
		dc.b $FE, $E, 0, 8, $F6
		dc.b $FE, 0, 0,	$14, $EE
byte_21537:	dc.b 3			; running 2-4
		dc.b $EE, 9, 0,	0, $EE
		dc.b $EE, 1, 0,	6, 6
		dc.b $FE, $E, 0, 8, $F6
byte_21547:	dc.b 2			; running 3-1
		dc.b $F4, 6, 0,	0, $EE
		dc.b $F4, $B, 0, 6, $FE
byte_21552:	dc.b 2			; running 3-2
		dc.b $F4, 6, 0,	0, $EE
		dc.b $F4, $B, 0, 6, $FE
byte_2155D:	dc.b 2			; running 3-3
		dc.b $F4, 6, 0,	0, $EE
		dc.b $F4, $B, 0, 6, $FE
byte_21568:	dc.b 2			; running 3-4
		dc.b $F4, 6, 0,	0, $EE
		dc.b $F4, $B, 0, 6, $FE
byte_21573:	dc.b 4			; running 4-1
		dc.b $FA, 6, 0,	0, $EE
		dc.b $F2, 4, 0,	6, $EE
		dc.b $EA, $B, 0, 8, $FE
		dc.b $A, 0, 0, $14, $FE
byte_21588:	dc.b 2			; running 4-2
		dc.b $F2, 7, 0,	0, $EE
		dc.b $EA, $B, 0, 8, $FE
byte_21593:	dc.b 4			; running 4-3
		dc.b $FA, 6, 0,	0, $EE
		dc.b $F2, 4, 0,	6, $EE
		dc.b $EA, $B, 0, 8, $FE
		dc.b $A, 0, 0, $14, $FE
byte_215A8:	dc.b 2			; running 4-4
		dc.b $F2, 7, 0,	0, $EE
		dc.b $EA, $B, 0, 8, $FE
byte_215B3:	dc.b 1			; rolling 1
		dc.b $F0, $F, 0, 0, $F0
byte_215B9:	dc.b 1			; rolling 2
		dc.b $F0, $F, 0, 0, $F0
byte_215BF:	dc.b 1			; rolling 3
		dc.b $F0, $F, 0, 0, $F0
byte_215C5:	dc.b 1			; rolling 4
		dc.b $F0, $F, 0, 0, $F0
byte_215CB:	dc.b 1			; rolling 5
		dc.b $F0, $F, 0, 0, $F0
byte_215D1:	dc.b 2			; warped 1 (unused)
		dc.b $F4, $E, 0, 0, $EC
		dc.b $F4, 2, 0,	$C, $C
byte_215DC:	dc.b 1			; warped 2 (unused)
		dc.b $F0, $F, 0, 0, $F0
byte_215E2:	dc.b 2			; warped 3 (unused)
		dc.b $EC, $B, 0, 0, $F4
		dc.b $C, 8, 0, $C, $F4
byte_215ED:	dc.b 1			; warped 4 (unused)
		dc.b $F0, $F, 0, 0, $F0
byte_215F3:	dc.b 2			; stopping 1
		dc.b $ED, 9, 0,	0, $F0
		dc.b $FD, $E, 0, 6, $F0
byte_215FE:	dc.b 4			; stopping 2
		dc.b $ED, 9, 0,	0, $F0
		dc.b $FD, $D, 0, 6, $F0
		dc.b $D, 4, 0, $E, 0
		dc.b 5,	0, 0, $10, $E8
byte_21613:	dc.b 4			; ducking
		dc.b $F4, 4, 0,	0, $FC
		dc.b $FC, $D, 0, 2, $F4
		dc.b $C, 8, 0, $A, $F4
		dc.b 4,	0, 0, $D, $EC
byte_21628:	dc.b 3			; balancing 1
		dc.b $EC, 8, 8,	0, $E8
		dc.b $F4, 2, 8,	3, 0
		dc.b $F4, $F, 8, 6, $E0
byte_21638:	dc.b 3			; balancing 2
		dc.b $EC, $E, 8, 0, $E8
		dc.b 4,	$D, 8, $C, $E0
		dc.b $C, 0, $18, $14, 0
byte_21648:	dc.b 3			; spinning 1 (LZ)
		dc.b $F4, $D, 0, 0, $FC
		dc.b $FC, 5, 0,	8, $EC
		dc.b 4,	8, 0, $C, $FC
byte_21658:	dc.b 2			; spinning 2 (LZ)
		dc.b $F4, $A, 0, 0, $E8
		dc.b $F4, $A, 8, 0, 0
byte_21663:	dc.b 3			; spinning 3 (LZ)
		dc.b $F4, $D, 0, 0, $E4
		dc.b $FC, 0, 0,	8, 4
		dc.b 4,	$C, 0, 9, $EC
byte_21673:	dc.b 3			; spinning 4 (LZ)
		dc.b $F4, $D, 0, 0, $FC
		dc.b $FC, 5, 0,	8, $EC
		dc.b 4,	8, 0, $C, $FC
byte_21683:	dc.b 3			; bouncing
		dc.b $E8, $B, 0, 0, $F0
		dc.b 8,	4, 0, $C, $F8
		dc.b $10, 0, 0,	$E, $F8
byte_21693:	dc.b 4			; hanging 1 (LZ)
		dc.b $F8, $E, 0, 0, $E8
		dc.b 0,	5, 0, $C, 8
		dc.b $F8, 0, 0,	$10, 8
		dc.b $F0, 0, 0,	$11, $F8
byte_216A8:	dc.b 4			; hanging 2 (LZ)
		dc.b $F8, $E, 0, 0, $E8
		dc.b 0,	5, 0, $C, 8
		dc.b $F8, 0, 0,	$10, 8
		dc.b $F0, 0, 0,	$11, $F8
byte_216BD:	dc.b 5			; celebration leap 1 (unused)
		dc.b $E8, $A, 0, 0, $F4
		dc.b $F0, 1, 0,	9, $C
		dc.b 0,	9, 0, $B, $F4
		dc.b $10, 4, 0,	$11, $F4
		dc.b 0,	0, 0, $13, $EC
byte_216D7:	dc.b 5			; celebration leap 2 (unused)
		dc.b $E8, $A, 0, 0, $F4
		dc.b $E8, 1, 0,	9, $C
		dc.b 0,	9, 0, $B, $F4
		dc.b $10, 4, 0,	$11, $F4
		dc.b 0,	0, 0, $13, $EC
byte_216F1:	dc.b 2			; pushing 1
		dc.b $ED, $A, 0, 0, $F3
		dc.b 5,	$D, 0, 9, $EB
byte_216FC:	dc.b 3			; pushing 2
		dc.b $EC, $A, 0, 0, $F3
		dc.b 4,	8, 0, 9, $F3
		dc.b $C, 4, 0, $C, $F3
byte_2170C:	dc.b 2			; pushing 3
		dc.b $ED, $A, 0, 0, $F3
		dc.b 5,	$D, 0, 9, $EB
byte_21717:	dc.b 3			; pushing 4
		dc.b $EC, $A, 0, 0, $F3
		dc.b 4,	8, 0, 9, $F3
		dc.b $C, 4, 0, $C, $F3
byte_21727:	dc.b 2			; surfing or sliding (unused)
		dc.b $EC, 9, 0,	0, $F0
		dc.b $FC, $E, 0, 6, $F0
byte_21732:	dc.b 3			; collecting bubble (unused)
		dc.b $EC, $A, 0, 0, $F0
		dc.b 4,	5, 0, 9, $F8
		dc.b $E4, 0, 0,	$D, $F8
byte_21742:	dc.b 3			; death	1
		dc.b $E8, $D, 0, 0, $EC
		dc.b $E8, 1, 0,	8, $C
		dc.b $F8, $B, 0, $A, $F4
byte_21752:	dc.b 5			; drowning
		dc.b $E8, $D, 0, 0, $EC
		dc.b $E8, 1, 0,	8, $C
		dc.b $F8, 9, 0,	$A, $F4
		dc.b 8,	$C, 0, $10, $F4
		dc.b $10, 0, 0,	$14, $F4
byte_2176C:	dc.b 5			; death	2
		dc.b $E8, $D, 0, 0, $EC
		dc.b $E8, 1, 0,	8, $C
		dc.b $F8, 9, 0,	$A, $F4
		dc.b 8,	$C, 0, $10, $F4
		dc.b $10, 0, 0,	$14, $F4
byte_21786:	dc.b 2			; shrinking 1 (unused)
		dc.b $EC, 8, 0,	0, $F0
		dc.b $F4, $F, 0, 3, $F0
byte_21791:	dc.b 3			; shrinking 2 (unused)
		dc.b $EC, 8, 0,	0, $F0
		dc.b $F4, $E, 0, 3, $F0
		dc.b $C, 8, 0, $F, $F8
byte_217A1:	dc.b 1			; shrinking 3 (unused)
		dc.b $F0, $B, 0, 0, $F4
byte_217A7:	dc.b 1			; shrinking 4 (unused)
		dc.b $F4, 6, 0,	0, $F8
byte_217AD:	dc.b 1			; shrinking 5 (unused)
		dc.b $F8, 1, 0,	0, $FC
byte_217B3:	dc.b 3			; injury
		dc.b $F4, $D, 8, 0, $E4
		dc.b $FC, 5, 8,	8, 4
		dc.b 4,	8, 8, $C, $EC
byte_217C3:	dc.b 3			; spinning 5 (LZ)
		dc.b $F4, $D, 8, 0, $FC
		dc.b $FC, 0, 8,	8, $F4
		dc.b 4,	$C, 8, 9, $F4
byte_217D3:	dc.b 3			; spinning 6 (LZ)
		dc.b $F0, $E, 0, 0, $EC
		dc.b $F8, 1, 0,	$C, $C
		dc.b 8,	$C, 0, $E, $F4
byte_217E3:	dc.b 3			; collecting bubble (LZ)
		dc.b $EB, 9, 0,	0, $F4
		dc.b $FB, $E, 0, 6, $EC
		dc.b 3,	1, 0, $12, $C
byte_217F3:	dc.b 2			; water	slide (LZ)
		dc.b $F0, $F, 0, 0, $EC
		dc.b $F8, 2, 0,	$10, $C
		even
; ---------------------------------------------------------------------------
; Uncompressed graphics	loading	array for Sonic
; ---------------------------------------------------------------------------
SonicDynPLC:
; ---------------------------------------------------------------------------
; Uncompressed graphics	loading	array for Sonic
; ---------------------------------------------------------------------------
		dc.w SonPLC_Blank-SonicDynPLC
		dc.w SonPLC_Stand-SonicDynPLC
		dc.w SonPLC_Wait1-SonicDynPLC
		dc.w SonPLC_Wait2-SonicDynPLC
		dc.w SonPLC_Wait3-SonicDynPLC
		dc.w SonPLC_LookUp-SonicDynPLC
		dc.w SonPLC_Walk11-SonicDynPLC
		dc.w SonPLC_Walk12-SonicDynPLC
		dc.w SonPLC_Walk13-SonicDynPLC
		dc.w SonPLC_Walk14-SonicDynPLC
		dc.w SonPLC_Walk15-SonicDynPLC
		dc.w SonPLC_Walk16-SonicDynPLC
		dc.w SonPLC_Walk21-SonicDynPLC
		dc.w SonPLC_Walk22-SonicDynPLC
		dc.w SonPLC_Walk23-SonicDynPLC
		dc.w SonPLC_Walk24-SonicDynPLC
		dc.w SonPLC_Walk25-SonicDynPLC
		dc.w SonPLC_Walk26-SonicDynPLC
		dc.w SonPLC_Walk31-SonicDynPLC
		dc.w SonPLC_Walk32-SonicDynPLC
		dc.w SonPLC_Walk33-SonicDynPLC
		dc.w SonPLC_Walk34-SonicDynPLC
		dc.w SonPLC_Walk35-SonicDynPLC
		dc.w SonPLC_Walk36-SonicDynPLC
		dc.w SonPLC_Walk41-SonicDynPLC
		dc.w SonPLC_Walk42-SonicDynPLC
		dc.w SonPLC_Walk43-SonicDynPLC
		dc.w SonPLC_Walk44-SonicDynPLC
		dc.w SonPLC_Walk45-SonicDynPLC
		dc.w SonPLC_Walk46-SonicDynPLC
		dc.w SonPLC_Run11-SonicDynPLC
		dc.w SonPLC_Run12-SonicDynPLC
		dc.w SonPLC_Run13-SonicDynPLC
		dc.w SonPLC_Run14-SonicDynPLC
		dc.w SonPLC_Run21-SonicDynPLC
		dc.w SonPLC_Run22-SonicDynPLC
		dc.w SonPLC_Run23-SonicDynPLC
		dc.w SonPLC_Run24-SonicDynPLC
		dc.w SonPLC_Run31-SonicDynPLC
		dc.w SonPLC_Run32-SonicDynPLC
		dc.w SonPLC_Run33-SonicDynPLC
		dc.w SonPLC_Run34-SonicDynPLC
		dc.w SonPLC_Run41-SonicDynPLC
		dc.w SonPLC_Run42-SonicDynPLC
		dc.w SonPLC_Run43-SonicDynPLC
		dc.w SonPLC_Run44-SonicDynPLC
		dc.w SonPLC_Roll1-SonicDynPLC
		dc.w SonPLC_Roll2-SonicDynPLC
		dc.w SonPLC_Roll3-SonicDynPLC
		dc.w SonPLC_Roll4-SonicDynPLC
		dc.w SonPLC_Roll5-SonicDynPLC
		dc.w SonPLC_Warp1-SonicDynPLC
		dc.w SonPLC_Warp2-SonicDynPLC
		dc.w SonPLC_Warp3-SonicDynPLC
		dc.w SonPLC_Warp4-SonicDynPLC
		dc.w SonPLC_Stop1-SonicDynPLC
		dc.w SonPLC_Stop2-SonicDynPLC
		dc.w SonPLC_Duck-SonicDynPLC
		dc.w SonPLC_Balance1-SonicDynPLC
		dc.w SonPLC_Balance2-SonicDynPLC
		dc.w SonPLC_Float1-SonicDynPLC
		dc.w SonPLC_Float2-SonicDynPLC
		dc.w SonPLC_Float3-SonicDynPLC
		dc.w SonPLC_Float4-SonicDynPLC
		dc.w SonPLC_Spring-SonicDynPLC
		dc.w SonPLC_Hang1-SonicDynPLC
		dc.w SonPLC_Hang2-SonicDynPLC
		dc.w SonPLC_Leap1-SonicDynPLC
		dc.w SonPLC_Leap2-SonicDynPLC
		dc.w SonPLC_Push1-SonicDynPLC
		dc.w SonPLC_Push2-SonicDynPLC
		dc.w SonPLC_Push3-SonicDynPLC
		dc.w SonPLC_Push4-SonicDynPLC
		dc.w SonPLC_Slide-SonicDynPLC
		dc.w SonPLC_BblUnk-SonicDynPLC
		dc.w SonPLC_Death1-SonicDynPLC
		dc.w SonPLC_Drown-SonicDynPLC
		dc.w SonPLC_Burnt-SonicDynPLC
		dc.w SonPLC_Shrink1-SonicDynPLC
		dc.w SonPLC_Shrink2-SonicDynPLC
		dc.w SonPLC_Shrink3-SonicDynPLC
		dc.w SonPLC_Shrink4-SonicDynPLC
		dc.w SonPLC_Shrink5-SonicDynPLC
		dc.w SonPLC_Float1-SonicDynPLC
		dc.w SonPLC_Float3-SonicDynPLC
		dc.w SonPLC_Injury1-SonicDynPLC
		dc.w SonPLC_Bubble-SonicDynPLC
		dc.w SonPLC_Injury2-SonicDynPLC
SonPLC_Blank:	dc.b 0
SonPLC_Stand:	dc.b 4,	$20, 0,	$70, 3,	$20, $B, $20, $E
SonPLC_Wait1:	dc.b 3,	$50, $11, $50, $17, $20, $1D
SonPLC_Wait2:	dc.b 3,	$50, $20, $50, $17, $20, $1D
SonPLC_Wait3:	dc.b 3,	$50, $20, $50, $17, $20, $26
SonPLC_LookUp:	dc.b 3,	$80, $29, $20, $B, $20,	$E
SonPLC_Walk11:	dc.b 4,	$70, $32, $50, $3A, $50, $40, $10, $46
SonPLC_Walk12:	dc.b 2,	$70, $32, $B0, $48
SonPLC_Walk13:	dc.b 2,	$50, $54, $80, $5A
SonPLC_Walk14:	dc.b 4,	$50, $54, $50, $63, $50, $69, $10, $6F
SonPLC_Walk15:	dc.b 2,	$50, $54, $B0, $71
SonPLC_Walk16:	dc.b 3,	$70, $32, $30, $7D, $50, $81
SonPLC_Walk21:	dc.b 5,	$50, $87, $50, $8D, $20, $93, $50, $96,	0, $9C
SonPLC_Walk22:	dc.b 6,	$50, $87, $10, $9D, $30, $9F, $50, $A3,	$30, $A9, 0, $AD
SonPLC_Walk23:	dc.b 4,	$50, $AE, $10, $B4, $70, $B6, $20, $BE
SonPLC_Walk24:	dc.b 5,	$50, $C1, $30, $C7, $70, $CB, $20, $D3,	$10, $D6
SonPLC_Walk25:	dc.b 4,	$50, $C1, $10, $D8, $70, $DA, $20, $E2
SonPLC_Walk26:	dc.b 5,	$50, $87, $10, $9D, 0, $93, $70, $E5, $20, $ED
SonPLC_Walk31:	dc.b 4,	$70, $F0, $50, $F8, $10, $FE, $51, 0
SonPLC_Walk32:	dc.b 2,	$70, $F0, $B1, 6
SonPLC_Walk33:	dc.b 2,	$51, $12, $81, $18
SonPLC_Walk34:	dc.b 4,	$51, $12, $51, $21, $11, $27, $51, $29
SonPLC_Walk35:	dc.b 2,	$51, $12, $B1, $2F
SonPLC_Walk36:	dc.b 3,	$70, $F0, 1, 6,	$81, $3B
SonPLC_Walk41:	dc.b 6,	$51, $44, $11, $4A, $11, $4C, $81, $4E,	1, $57,	1, $58
SonPLC_Walk42:	dc.b 6,	$51, $44, $21, $59, $11, $5C, $11, $5E,	$81, $60, 1, $57
SonPLC_Walk43:	dc.b 4,	$51, $69, $11, $6F, $81, $71, $11, $7A
SonPLC_Walk44:	dc.b 5,	$51, $7C, $21, $82, $11, $85, $71, $87,	$21, $8F
SonPLC_Walk45:	dc.b 4,	$51, $7C, $11, $92, $81, $94, $11, $9D
SonPLC_Walk46:	dc.b 5,	$51, $44, $81, $9F, $11, $5E, $11, $A8,	1, $57
SonPLC_Run11:	dc.b 2,	$51, $AA, $B1, $B0
SonPLC_Run12:	dc.b 2,	$50, $54, $B1, $BC
SonPLC_Run13:	dc.b 2,	$51, $AA, $B1, $C8
SonPLC_Run14:	dc.b 2,	$50, $54, $B1, $D4
SonPLC_Run21:	dc.b 4,	$51, $E0, $11, $E6, $B1, $E8, 1, $F4
SonPLC_Run22:	dc.b 3,	$51, $F5, $11, $FB, $B1, $FD
SonPLC_Run23:	dc.b 4,	$51, $E0, $12, 9, $B2, $B, 1, $F4
SonPLC_Run24:	dc.b 3,	$51, $F5, $11, $FB, $B2, $17
SonPLC_Run31:	dc.b 2,	$52, $23, $B2, $29
SonPLC_Run32:	dc.b 2,	$51, $12, $B2, $35
SonPLC_Run33:	dc.b 2,	$52, $23, $B2, $41
SonPLC_Run34:	dc.b 2,	$51, $12, $B2, $4D
SonPLC_Run41:	dc.b 4,	$52, $59, $12, $5F, $B2, $61, 2, $6D
SonPLC_Run42:	dc.b 2,	$72, $6E, $B2, $76
SonPLC_Run43:	dc.b 4,	$52, $59, $12, $82, $B2, $84, 2, $6D
SonPLC_Run44:	dc.b 2,	$72, $6E, $B2, $90
SonPLC_Roll1:	dc.b 1,	$F2, $9C
SonPLC_Roll2:	dc.b 1,	$F2, $AC
SonPLC_Roll3:	dc.b 1,	$F2, $BC
SonPLC_Roll4:	dc.b 1,	$F2, $CC
SonPLC_Roll5:	dc.b 1,	$F2, $DC
SonPLC_Warp1:	dc.b 2,	$B2, $EC, $22, $F8
SonPLC_Warp2:	dc.b 1,	$F2, $FB
SonPLC_Warp3:	dc.b 2,	$B3, $B, $23, $17
SonPLC_Warp4:	dc.b 1,	$F3, $1A
SonPLC_Stop1:	dc.b 2,	$53, $2A, $B3, $30
SonPLC_Stop2:	dc.b 4,	$53, $3C, $73, $42, $13, $4A, 3, $4C
SonPLC_Duck:	dc.b 4,	$13, $4D, $73, $4F, $23, $57, 3, $5A
SonPLC_Balance1:dc.b 3,	$23, $5B, $23, $5E, $F3, $61
SonPLC_Balance2:dc.b 3,	$B3, $71, $73, $7D, 0, $71
SonPLC_Float1:	dc.b 3,	$73, $85, $33, $8D, $23, $91
SonPLC_Float2:	dc.b 1,	$83, $94
SonPLC_Float3:	dc.b 3,	$73, $9D, 3, $A5, $33, $A6
SonPLC_Float4:	dc.b 3,	$73, $AA, $33, $B2, $23, $B6
SonPLC_Spring:	dc.b 3,	$B3, $B9, $13, $C5, 3, $C7
SonPLC_Hang1:	dc.b 4,	$B3, $C8, $33, $D4, 3, $D8, 3, $D9
SonPLC_Hang2:	dc.b 4,	$B3, $DA, $33, $E6, 3, $EA, 3, $EB
SonPLC_Leap1:	dc.b 5,	$83, $EC, $13, $F5, $53, $F7, $13, $FD,	3, $FF
SonPLC_Leap2:	dc.b 5,	$84, 0,	$14, 9,	$53, $F7, $13, $FD, 3, $FF
SonPLC_Push1:	dc.b 2,	$84, $B, $74, $14
SonPLC_Push2:	dc.b 3,	$84, $1C, $24, $25, $14, $28
SonPLC_Push3:	dc.b 2,	$84, $2A, $74, $33
SonPLC_Push4:	dc.b 3,	$84, $1C, $24, $3B, $14, $3E
SonPLC_Slide:	dc.b 2,	$54, $40, $B4, $46
SonPLC_BblUnk:	dc.b 3,	$84, $52, $34, $5B, 4, $5F
SonPLC_Death1:	dc.b 3,	$74, $60, $14, $68, $B4, $6A
SonPLC_Drown:	dc.b 5,	$74, $76, $14, $7E, $54, $80, $34, $86,	4, $8A
SonPLC_Burnt:	dc.b 5,	$74, $8B, $14, $7E, $54, $93, $34, $86,	4, $8A
SonPLC_Shrink1:	dc.b 2,	$24, $99, $F4, $9C
SonPLC_Shrink2:	dc.b 3,	$24, $AC, $B4, $AF, $24, $BB
SonPLC_Shrink3:	dc.b 1,	$B4, $BE
SonPLC_Shrink4:	dc.b 1,	$54, $CA
SonPLC_Shrink5:	dc.b 1,	$14, $D0
SonPLC_Injury1:	dc.b 3,	$B4, $D2, $14, $DE, $34, $E0
SonPLC_Bubble:	dc.b 3,	$54, $E4, $B4, $EA, $10, $6D
SonPLC_Injury2:	dc.b 2,	$F4, $F6, $25, 6
		even
; ---------------------------------------------------------------------------
; Uncompressed graphics	- Sonic
; ---------------------------------------------------------------------------
Art_Sonic:	incbin	artunc\sonic.bin	; Sonic
		even
; ---------------------------------------------------------------------------
; Compressed graphics - various
; ---------------------------------------------------------------------------
Nem_Smoke:	incbin	artnem\xxxsmoke.bin	; unused smoke
		even
Nem_SyzSparkle:	incbin	artnem\xxxstars.bin	; unused stars
		even
Nem_Shield:	incbin	artnem\shield.bin	; shield
		even
Nem_Stars:	incbin	artnem\invstars.bin	; invincibility stars
		even
Nem_LzSonic:	incbin	artnem\xxxlzson.bin	; unused LZ Sonic holding his breath
		even
Nem_UnkFire:	incbin	artnem\xxxfire.bin	; unused fireball
		even
Nem_Warp:	incbin	artnem\xxxflash.bin	; unused entry to special stage flash
		even
Nem_Goggle:	incbin	artnem\xxxgoggl.bin	; unused goggles
		even
; ---------------------------------------------------------------------------
; Sprite mappings - walls of the special stage
; ---------------------------------------------------------------------------
Map_SSWalls:
; ---------------------------------------------------------------------------
; Sprite mappings - walls of the special stage
; ---------------------------------------------------------------------------
		dc.w byte_2C584-Map_SSWalls, byte_2C58A-Map_SSWalls
		dc.w byte_2C590-Map_SSWalls, byte_2C596-Map_SSWalls
		dc.w byte_2C59C-Map_SSWalls, byte_2C5A2-Map_SSWalls
		dc.w byte_2C5A8-Map_SSWalls, byte_2C5AE-Map_SSWalls
		dc.w byte_2C5B4-Map_SSWalls, byte_2C5BA-Map_SSWalls
		dc.w byte_2C5C0-Map_SSWalls, byte_2C5C6-Map_SSWalls
		dc.w byte_2C5CC-Map_SSWalls, byte_2C5D2-Map_SSWalls
		dc.w byte_2C5D8-Map_SSWalls, byte_2C5DE-Map_SSWalls
byte_2C584:	dc.b 1
		dc.b $F4, $A, 0, 0, $F4
byte_2C58A:	dc.b 1
		dc.b $F0, $F, 0, 9, $F0
byte_2C590:	dc.b 1
		dc.b $F0, $F, 0, $19, $F0
byte_2C596:	dc.b 1
		dc.b $F0, $F, 0, $29, $F0
byte_2C59C:	dc.b 1
		dc.b $F0, $F, 0, $39, $F0
byte_2C5A2:	dc.b 1
		dc.b $F0, $F, 0, $49, $F0
byte_2C5A8:	dc.b 1
		dc.b $F0, $F, 0, $59, $F0
byte_2C5AE:	dc.b 1
		dc.b $F0, $F, 0, $69, $F0
byte_2C5B4:	dc.b 1
		dc.b $F0, $F, 0, $79, $F0
byte_2C5BA:	dc.b 1
		dc.b $F0, $F, 0, $89, $F0
byte_2C5C0:	dc.b 1
		dc.b $F0, $F, 0, $99, $F0
byte_2C5C6:	dc.b 1
		dc.b $F0, $F, 0, $A9, $F0
byte_2C5CC:	dc.b 1
		dc.b $F0, $F, 0, $B9, $F0
byte_2C5D2:	dc.b 1
		dc.b $F0, $F, 0, $C9, $F0
byte_2C5D8:	dc.b 1
		dc.b $F0, $F, 0, $D9, $F0
byte_2C5DE:	dc.b 1
		dc.b $F0, $F, 0, $E9, $F0
		even
; ---------------------------------------------------------------------------
; Compressed graphics - special stage
; ---------------------------------------------------------------------------
Nem_SSWalls:	incbin	artnem\sswalls.bin	; special stage walls
		even
Eni_SSBg1:	incbin	mapeni\ssbg1.bin	; special stage background (mappings)
		even
Nem_SSBgFish:	incbin	artnem\ssbg1.bin	; special stage birds and fish background
		even
Eni_SSBg2:	incbin	mapeni\ssbg2.bin	; special stage background (mappings)
		even
Nem_SSBgCloud:	incbin	artnem\ssbg2.bin	; special stage clouds background
		even
Nem_SSGOAL:	incbin	artnem\ssgoal.bin	; special stage GOAL block
		even
Nem_SSRBlock:	incbin	artnem\ssr.bin		; special stage R block
		even
Nem_SS1UpBlock:	incbin	artnem\ss1up.bin	; special stage 1UP block
		even
Nem_SSEmStars:	incbin	artnem\ssemstar.bin	; special stage stars from a collected emerald
		even
Nem_SSRedWhite:	incbin	artnem\ssredwhi.bin	; special stage red/white block
		even
Nem_SSZone1:	incbin	artnem\sszone1.bin	; special stage ZONE1 block
		even
Nem_SSZone2:	incbin	artnem\sszone2.bin	; ZONE2 block
		even
Nem_SSZone3:	incbin	artnem\sszone3.bin	; ZONE3 block
		even
Nem_SSZone4:	incbin	artnem\sszone4.bin	; ZONE4 block
		even
Nem_SSZone5:	incbin	artnem\sszone5.bin	; ZONE5 block
		even
Nem_SSZone6:	incbin	artnem\sszone6.bin	; ZONE6 block
		even
Nem_SSUpDown:	incbin	artnem\ssupdown.bin	; special stage UP/DOWN block
		even
Nem_SSEmerald:	incbin	artnem\ssemeral.bin	; special stage chaos emeralds
		even
Nem_SSGhost:	incbin	artnem\ssghost.bin	; special stage ghost block
		even
Nem_SSWBlock:	incbin	artnem\ssw.bin		; special stage W block
		even
Nem_SSGlass:	incbin	artnem\ssglass.bin	; special stage destroyable glass block
		even
Nem_ResultEm:	incbin	artnem\ssresems.bin	; chaos emeralds on special stage results screen
		even
; ---------------------------------------------------------------------------
; Compressed graphics - GHZ stuff
; ---------------------------------------------------------------------------
Nem_Stalk:	incbin	artnem\ghzstalk.bin	; GHZ flower stalk
		even
Nem_Swing:	incbin	artnem\ghzswing.bin	; GHZ swinging platform
		even
Nem_Bridge:	incbin	artnem\ghzbridg.bin	; GHZ bridge
		even
Nem_GhzUnkBlock:incbin	artnem\xxxghzbl.bin	; unused GHZ block
		even
Nem_Ball:	incbin	artnem\ghzball.bin	; GHZ giant ball
		even
Nem_Spikes:	incbin	artnem\spikes.bin	; spikes
		even
Nem_GhzLog:	incbin	artnem\xxxghzlo.bin	; unused GHZ log
		even
Nem_SpikePole:	incbin	artnem\ghzlog.bin	; GHZ spiked log
		even
Nem_PplRock:	incbin	artnem\ghzrock.bin	; GHZ purple rock
		even
Nem_GhzWall1:	incbin	artnem\ghzwall1.bin	; GHZ destroyable wall
		even
Nem_GhzWall2:	incbin	artnem\ghzwall2.bin	; GHZ normal wall
		even
; ---------------------------------------------------------------------------
; Compressed graphics - LZ stuff
; ---------------------------------------------------------------------------
Nem_Water:	incbin	artnem\lzwater.bin	; LZ water surface
		even
Nem_Splash:	incbin	artnem\lzsplash.bin	; LZ waterfalls and splashes
		even
Nem_LzSpikeBall:incbin	artnem\lzspball.bin	; LZ spiked ball on chain
		even
Nem_FlapDoor:	incbin	artnem\lzflapdo.bin	; LZ flapping door
		even
Nem_Bubbles:	incbin	artnem\lzbubble.bin	; LZ bubbles and countdown numbers
		even
Nem_LzBlock3:	incbin	artnem\lzblock3.bin	; LZ 32x16 block
		even
Nem_LzDoor1:	incbin	artnem\lzvdoor.bin	; LZ vertical door
		even
Nem_Harpoon:	incbin	artnem\lzharpoo.bin	; LZ harpoon
		even
Nem_LzPole:	incbin	artnem\lzpole.bin	; LZ pole that breaks
		even
Nem_LzDoor2:	incbin	artnem\lzhdoor.bin	; LZ large horizontal door
		even
Nem_LzWheel:	incbin	artnem\lzwheel.bin	; LZ wheel from corner of conveyor belt
		even
Nem_Gargoyle:	incbin	artnem\lzgargoy.bin	; LZ gargoyle head and spitting fire
		even
Nem_LzBlock2:	incbin	artnem\lzblock2.bin	; LZ blocks
		even
Nem_LzPlatfm:	incbin	artnem\lzptform.bin	; LZ rising platforms
		even
Nem_Cork:	incbin	artnem\lzcork.bin	; LZ cork block
		even
Nem_LzBlock1:	incbin	artnem\lzblock1.bin	; LZ 32x32 block
		even
; ---------------------------------------------------------------------------
; Compressed graphics - MZ stuff
; ---------------------------------------------------------------------------
Nem_MzMetal:	incbin	artnem\mzmetal.bin	; MZ metal blocks
		even
Nem_MzSwitch:	incbin	artnem\mzswitch.bin	; MZ switch
		even
Nem_MzGlass:	incbin	artnem\mzglassy.bin	; MZ green glassy block
		even
Nem_GhzGrass:	incbin	artnem\xxxgrass.bin	; unused grass (GHZ or MZ?)
		even
Nem_MzFire:	incbin	artnem\mzfire.bin	; MZ fireballs
		even
Nem_Lava:	incbin	artnem\mzlava.bin	; MZ lava
		even
Nem_MzBlock:	incbin	artnem\mzblock.bin	; MZ green pushable block
		even
Nem_MzUnkBlock:	incbin	artnem\xxxmzblo.bin	; MZ unused background block
		even
; ---------------------------------------------------------------------------
; Compressed graphics - SLZ stuff
; ---------------------------------------------------------------------------
Nem_Seesaw:	incbin	artnem\slzseesa.bin	; SLZ seesaw
		even
Nem_SlzSpike:	incbin	artnem\slzspike.bin	; SLZ spikeball that sits on a seesaw
		even
Nem_Fan:	incbin	artnem\slzfan.bin	; SLZ fan
		even
Nem_SlzWall:	incbin	artnem\slzwall.bin	; SLZ smashable wall
		even
Nem_Pylon:	incbin	artnem\slzpylon.bin	; SLZ foreground pylon
		even
Nem_SlzSwing:	incbin	artnem\slzswing.bin	; SLZ swinging platform
		even
Nem_SlzBlock:	incbin	artnem\slzblock.bin	; SLZ 32x32 block
		even
Nem_SlzCannon:	incbin	artnem\slzcanno.bin	; SLZ fireball launcher cannon
		even
; ---------------------------------------------------------------------------
; Compressed graphics - SYZ stuff
; ---------------------------------------------------------------------------
Nem_Bumper:	incbin	artnem\syzbumpe.bin	; SYZ bumper
		even
Nem_SyzSpike2:	incbin	artnem\syzsspik.bin	; SYZ small spikeball
		even
Nem_LzSwitch:	incbin	artnem\switch.bin	; LZ/SYZ/SBZ switch
		even
Nem_SyzSpike1:	incbin	artnem\syzlspik.bin	; SYZ/SBZ large spikeball
		even
; ---------------------------------------------------------------------------
; Compressed graphics - SBZ stuff
; ---------------------------------------------------------------------------
Nem_SbzWheel1:	incbin	artnem\sbzwhee1.bin	; SBZ spot on rotating wheel that Sonic runs around
		even
Nem_SbzWheel2:	incbin	artnem\sbzwhee2.bin	; SBZ wheel that grabs Sonic
		even
Nem_Cutter:	incbin	artnem\sbzcutte.bin	; SBZ pizza cutter
		even
Nem_Stomper:	incbin	artnem\sbzstomp.bin	; SBZ stomper
		even
Nem_SpinPform:	incbin	artnem\sbzpform.bin	; SBZ spinning platform
		even
Nem_TrapDoor:	incbin	artnem\sbztrapd.bin	; SBZ trapdoor
		even
Nem_SbzFloor:	incbin	artnem\sbzfloor.bin	; SBZ collapsing floor
		even
Nem_Electric:	incbin	artnem\sbzshock.bin	; SBZ electric shock orb
		even
Nem_SbzBlock:	incbin	artnem\sbzvanis.bin	; SBZ vanishing block
		even
Nem_FlamePipe:	incbin	artnem\sbzflame.bin	; SBZ flaming pipe
		even
Nem_SbzDoor1:	incbin	artnem\sbzvdoor.bin	; SBZ small vertical door
		even
Nem_SlideFloor:	incbin	artnem\sbzslide.bin	; SBZ floor that slides away
		even
Nem_SbzDoor2:	incbin	artnem\sbzhdoor.bin	; SBZ large horizontal door
		even
Nem_Girder:	incbin	artnem\sbzgirde.bin	; SBZ crushing girder
		even
; ---------------------------------------------------------------------------
; Compressed graphics - enemies
; ---------------------------------------------------------------------------
Nem_BallHog:	incbin	artnem\ballhog.bin	; ball hog
		even
Nem_Crabmeat:	incbin	artnem\crabmeat.bin	; crabmeat
		even
Nem_Buzz:	incbin	artnem\buzzbomb.bin	; buzz bomber
		even
Nem_UnkExplode:	incbin	artnem\xxxexplo.bin	; unused explosion
		even
Nem_Burrobot:	incbin	artnem\burrobot.bin	; burrobot
		even
Nem_Chopper:	incbin	artnem\chopper.bin	; chopper
		even
Nem_Jaws:	incbin	artnem\jaws.bin		; jaws
		even
Nem_Roller:	incbin	artnem\roller.bin	; roller
		even
Nem_Motobug:	incbin	artnem\motobug.bin	; moto bug
		even
Nem_Newtron:	incbin	artnem\newtron.bin	; newtron
		even
Nem_Yadrin:	incbin	artnem\yadrin.bin	; yadrin
		even
Nem_Basaran:	incbin	artnem\basaran.bin	; basaran
		even
Nem_Splats:	incbin	artnem\splats.bin	; splats
		even
Nem_Bomb:	incbin	artnem\bomb.bin		; bomb
		even
Nem_Orbinaut:	incbin	artnem\orbinaut.bin	; orbinaut
		even
Nem_Cater:	incbin	artnem\caterkil.bin	; caterkiller
		even
; ---------------------------------------------------------------------------
; Compressed graphics - various
; ---------------------------------------------------------------------------
Nem_TitleCard:	incbin	artnem\ttlcards.bin	; title cards
		even
Nem_Hud:	incbin	artnem\hud.bin		; HUD (rings, time, score)
		even
Nem_Lives:	incbin	artnem\lifeicon.bin	; life counter icon
		even
Nem_Ring:	incbin	artnem\rings.bin	; rings
		even
Nem_Monitors:	incbin	artnem\monitors.bin	; monitors
		even
Nem_Explode:	incbin	artnem\explosio.bin	; explosion
		even
Nem_Points:	incbin	artnem\points.bin	; points from destroyed enemy or object
		even
Nem_GameOver:	incbin	artnem\gameover.bin	; game over / time over
		even
Nem_HSpring:	incbin	artnem\springh.bin	; horizontal spring
		even
Nem_VSpring:	incbin	artnem\springv.bin	; vertical spring
		even
Nem_SignPost:	incbin	artnem\signpost.bin	; end of level signpost
		even
Nem_Lamp:	incbin	artnem\lamppost.bin	; lamppost
		even
Nem_BigFlash:	incbin	artnem\rngflash.bin	; flash from giant ring
		even
Nem_Bonus:	incbin	artnem\bonus.bin	; hidden bonuses at end of a level
		even
; ---------------------------------------------------------------------------
; Compressed graphics - continue screen
; ---------------------------------------------------------------------------
Nem_ContSonic:	incbin	artnem\cntsonic.bin	; Sonic on continue screen
		even
Nem_MiniSonic:	incbin	artnem\cntother.bin	; mini Sonic and text on continue screen
		even
; ---------------------------------------------------------------------------
; Compressed graphics - animals
; ---------------------------------------------------------------------------
Nem_Rabbit:	incbin	artnem\rabbit.bin	; rabbit
		even
Nem_Chicken:	incbin	artnem\chicken.bin	; chicken
		even
Nem_BlackBird:	incbin	artnem\blackbrd.bin	; blackbird
		even
Nem_Seal:	incbin	artnem\seal.bin		; seal
		even
Nem_Pig:	incbin	artnem\pig.bin		; pig
		even
Nem_Flicky:	incbin	artnem\flicky.bin	; flicky
		even
Nem_Squirrel:	incbin	artnem\squirrel.bin	; squirrel
		even
; ---------------------------------------------------------------------------
; Compressed graphics - primary patterns and block mappings
; ---------------------------------------------------------------------------
Blk16_GHZ:	incbin	map16\ghz.bin
		even
Nem_GHZ_1st:	incbin	artnem\8x8ghz1.bin	; GHZ primary patterns
		even
Nem_GHZ_2nd:	incbin	artnem\8x8ghz2.bin	; GHZ secondary patterns
		even
Blk256_GHZ:	incbin	map256\ghz.bin
		even
Blk16_LZ:	incbin	map16\lz.bin
		even
Nem_LZ:		incbin	artnem\8x8lz.bin	; LZ primary patterns
		even
Blk256_LZ:	incbin	map256\lz.bin
		even
Blk16_MZ:	incbin	map16\mz.bin
		even
Nem_MZ:		incbin	artnem\8x8mz.bin	; MZ primary patterns
		even
Blk256_MZ:	incbin	map256\mz.bin
		even
Blk16_SLZ:	incbin	map16\slz.bin
		even
Nem_SLZ:	incbin	artnem\8x8slz.bin	; SLZ primary patterns
		even
Blk256_SLZ:	incbin	map256\slz.bin
		even
Blk16_SYZ:	incbin	map16\syz.bin
		even
Nem_SYZ:	incbin	artnem\8x8syz.bin	; SYZ primary patterns
		even
Blk256_SYZ:	incbin	map256\syz.bin
		even
Blk16_SBZ:	incbin	map16\sbz.bin
		even
Nem_SBZ:	incbin	artnem\8x8sbz.bin	; SBZ primary patterns
		even
Blk256_SBZ:	incbin	map256\sbz.bin
		even
; ---------------------------------------------------------------------------
; Compressed graphics - bosses and ending sequence
; ---------------------------------------------------------------------------
Nem_Eggman:	incbin	artnem\bossmain.bin	; boss main patterns
		even
Nem_Weapons:	incbin	artnem\bossxtra.bin	; boss add-ons and weapons
		even
Nem_Prison:	incbin	artnem\prison.bin	; prison capsule
		even
Nem_Sbz2Eggman:	incbin	artnem\sbz2boss.bin	; Eggman in SBZ2 and FZ
		even
Nem_FzBoss:	incbin	artnem\fzboss.bin	; FZ boss
		even
Nem_FzEggman:	incbin	artnem\fzboss2.bin	; Eggman after the FZ boss
		even
Nem_Exhaust:	incbin	artnem\bossflam.bin	; boss exhaust flame
		even
Nem_EndEm:	incbin	artnem\endemera.bin	; ending sequence chaos emeralds
		even
Nem_EndSonic:	incbin	artnem\endsonic.bin	; ending sequence Sonic
		even
Nem_TryAgain:	incbin	artnem\tryagain.bin	; ending "try again" screen
		even
Nem_EndEggman:	incbin	artnem\xxxend.bin	; unused boss sequence on ending
		even
Kos_EndFlowers:	incbin	artkos\flowers.bin	; ending sequence animated flowers
		even
Nem_EndFlower:	incbin	artnem\endflowe.bin	; ending sequence flowers
		even
Nem_CreditText:	incbin	artnem\credits.bin	; credits alphabet
		even
Nem_EndStH:	incbin	artnem\endtext.bin	; ending sequence "Sonic the Hedgehog" text
		even
; ---------------------------------------------------------------------------
; Collision data
; ---------------------------------------------------------------------------
AngleMap:	incbin	collide\anglemap.bin	; floor angle map
		even
CollArray1:	incbin	collide\carray_n.bin	; normal collision array
		even
CollArray2:	incbin	collide\carray_r.bin	; rotated collision array
		even
Col_GHZ:	incbin	collide\ghz.bin		; GHZ index
		even
Col_LZ:		incbin	collide\lz.bin		; LZ index
		even
Col_MZ:		incbin	collide\mz.bin		; MZ index
		even
Col_SLZ:	incbin	collide\slz.bin		; SLZ index
		even
Col_SYZ:	incbin	collide\syz.bin		; SYZ index
		even
Col_SBZ:	incbin	collide\sbz.bin		; SBZ index
		even
; ---------------------------------------------------------------------------
; Special layouts
; ---------------------------------------------------------------------------
SS_1:		incbin	sslayout\1.bin
		even
SS_2:		incbin	sslayout\2.bin
		even
SS_3:		incbin	sslayout\3.bin
		even
SS_4:		incbin	sslayout\4.bin
		even
SS_5:		incbin	sslayout\5.bin
		even
SS_6:		incbin	sslayout\6.bin
		even
; ---------------------------------------------------------------------------
; Animated uncompressed graphics
; ---------------------------------------------------------------------------
Art_GhzWater:	incbin	artunc\ghzwater.bin	; GHZ waterfall
		even
Art_GhzFlower1:	incbin	artunc\ghzflowl.bin	; GHZ large flower
		even
Art_GhzFlower2:	incbin	artunc\ghzflows.bin	; GHZ small flower
		even
Art_MzLava1:	incbin	artunc\mzlava1.bin	; MZ lava surface
		even
Art_MzLava2:	incbin	artunc\mzlava2.bin	; MZ lava
		even
Art_MzTorch:	incbin	artunc\mztorch.bin	; MZ torch in background
		even
Art_SbzSmoke:	incbin	artunc\sbzsmoke.bin	; SBZ smoke in background
		even

Art_BigRing:	incbin	artunc\bigring.bin
		even
		
; ---------------------------------------------------------------------------
; Level	layout index
; ---------------------------------------------------------------------------
; ---------------------------------------------------------------------------
; Level	layout index
; ---------------------------------------------------------------------------
Level_Index:	dc.w Level_GHZ1-Level_Index, Level_GHZbg-Level_Index, byte_68D70-Level_Index
		dc.w Level_GHZ2-Level_Index, Level_GHZbg-Level_Index, byte_68E3C-Level_Index
		dc.w Level_GHZ3-Level_Index, Level_GHZbg-Level_Index, byte_68F84-Level_Index
		dc.w byte_68F88-Level_Index, byte_68F88-Level_Index, byte_68F88-Level_Index
		dc.w Level_LZ1-Level_Index, Level_LZbg-Level_Index, byte_69190-Level_Index
		dc.w Level_LZ2-Level_Index, Level_LZbg-Level_Index, byte_6922E-Level_Index
		dc.w Level_LZ3-Level_Index, Level_LZbg-Level_Index, byte_6934C-Level_Index
		dc.w Level_SBZ3-Level_Index, Level_LZbg-Level_Index, byte_6940A-Level_Index
		dc.w Level_MZ1-Level_Index, Level_MZ1bg-Level_Index, Level_MZ1-Level_Index
		dc.w Level_MZ2-Level_Index, Level_MZ2bg-Level_Index, byte_6965C-Level_Index
		dc.w Level_MZ3-Level_Index, Level_MZ3bg-Level_Index, byte_697E6-Level_Index
		dc.w byte_697EA-Level_Index, byte_697EA-Level_Index, byte_697EA-Level_Index
		dc.w Level_SLZ1-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
		dc.w Level_SLZ2-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
		dc.w Level_SLZ3-Level_Index, Level_SLZbg-Level_Index, byte_69B84-Level_Index
		dc.w byte_69B84-Level_Index, byte_69B84-Level_Index, byte_69B84-Level_Index
		dc.w Level_SYZ1-Level_Index, Level_SYZbg-Level_Index, byte_69C7E-Level_Index
		dc.w Level_SYZ2-Level_Index, Level_SYZbg-Level_Index, byte_69D86-Level_Index
		dc.w Level_SYZ3-Level_Index, Level_SYZbg-Level_Index, byte_69EE4-Level_Index
		dc.w byte_69EE8-Level_Index, byte_69EE8-Level_Index, byte_69EE8-Level_Index
		dc.w Level_SBZ1-Level_Index, Level_SBZ1bg-Level_Index, Level_SBZ1bg-Level_Index
		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, Level_SBZ2bg-Level_Index
		dc.w Level_SBZ2-Level_Index, Level_SBZ2bg-Level_Index, byte_6A2F8-Level_Index
		dc.w byte_6A2FC-Level_Index, byte_6A2FC-Level_Index, byte_6A2FC-Level_Index
		dc.w Level_End-Level_Index, Level_GHZbg-Level_Index, byte_6A320-Level_Index
		dc.w Level_End-Level_Index, Level_GHZbg-Level_Index, byte_6A320-Level_Index
		dc.w byte_6A320-Level_Index, byte_6A320-Level_Index, byte_6A320-Level_Index
		dc.w byte_6A320-Level_Index, byte_6A320-Level_Index, byte_6A320-Level_Index

Level_GHZ1:	incbin	levels/ghz1.bin
		even
byte_68D70:	dc.l	0
Level_GHZ2:	incbin	levels/ghz2.bin
		even
byte_68E3C:	dc.l	0
Level_GHZ3:	incbin	levels/ghz3.bin
		even
Level_GHZbg:	incbin	levels/ghzbg.bin
		even
byte_68F84:	dc.l	0
byte_68F88:	dc.l	0

Level_LZ1:	incbin	levels/lz1.bin
		even
Level_LZbg:	incbin	levels/lzbg.bin
		even
byte_69190:	dc.l	0
Level_LZ2:	incbin	levels/lz2.bin
		even
byte_6922E:	dc.l	0
Level_LZ3:	incbin	levels/lz3.bin
		even
byte_6934C:	dc.l	0
Level_SBZ3:	incbin	levels/sbz3.bin
		even
byte_6940A:	dc.l	0

Level_MZ1:	incbin	levels/mz1.bin
		even
Level_MZ1bg:	incbin	levels/mz1bg.bin
		even
Level_MZ2:	incbin	levels/mz2.bin
		even
Level_MZ2bg:	incbin	levels/mz2bg.bin
		even
byte_6965C:	dc.l	0
Level_MZ3:	incbin	levels/mz3.bin
		even
Level_MZ3bg:	incbin	levels/mz3bg.bin
		even
byte_697E6:	dc.l	0
byte_697EA:	dc.l	0

Level_SLZ1:	incbin	levels/slz1.bin
		even
Level_SLZbg:	incbin	levels/slzbg.bin
		even
Level_SLZ2:	incbin	levels/slz2.bin
		even
Level_SLZ3:	incbin	levels/slz3.bin
		even
byte_69B84:	dc.l	0

Level_SYZ1:	incbin	levels/syz1.bin
		even
Level_SYZbg:	incbin	levels/syzbg.bin
		even
byte_69C7E:	dc.l	0
Level_SYZ2:	incbin	levels/syz2.bin
		even
byte_69D86:	dc.l	0
Level_SYZ3:	incbin	levels/syz3.bin
		even
byte_69EE4:	dc.l	0
byte_69EE8:	dc.l	0

Level_SBZ1:	incbin	levels/sbz1.bin
		even
Level_SBZ1bg:	incbin	levels/sbz1bg.bin
		even
Level_SBZ2:	incbin	levels/sbz2.bin
		even
Level_SBZ2bg:	incbin	levels/sbz2bg.bin
		even
byte_6A2F8:	dc.l	0
byte_6A2FC:	dc.l	0
Level_End:	incbin	levels/ending.bin
		even
byte_6A320:	dc.l	0

		even

; ---------------------------------------------------------------------------
; Sprite locations index
; ---------------------------------------------------------------------------
ObjPos_Index:	dc.w ObjPos_GHZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_GHZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_GHZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_GHZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_LZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_LZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_LZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SBZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_MZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_MZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_MZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_MZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SLZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SLZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SLZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SLZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SYZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SYZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SYZ3-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SYZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SBZ2-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_FZ-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_SBZ1-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_End-ObjPos_Index, ObjPos_Null-ObjPos_Index
		dc.w ObjPos_LZ1pf1-ObjPos_Index, ObjPos_LZ1pf2-ObjPos_Index
		dc.w ObjPos_LZ2pf1-ObjPos_Index, ObjPos_LZ2pf2-ObjPos_Index
		dc.w ObjPos_LZ3pf1-ObjPos_Index, ObjPos_LZ3pf2-ObjPos_Index
		dc.w ObjPos_LZ1pf1-ObjPos_Index, ObjPos_LZ1pf2-ObjPos_Index
		dc.w ObjPos_SBZ1pf1-ObjPos_Index, ObjPos_SBZ1pf2-ObjPos_Index
		dc.w ObjPos_SBZ1pf3-ObjPos_Index, ObjPos_SBZ1pf4-ObjPos_Index
		dc.w ObjPos_SBZ1pf5-ObjPos_Index, ObjPos_SBZ1pf6-ObjPos_Index
		dc.w ObjPos_SBZ1pf1-ObjPos_Index, ObjPos_SBZ1pf2-ObjPos_Index
		dc.w -1,0,0
ObjPos_GHZ1:	incbin	objpos/ghz1.bin
		even
ObjPos_GHZ2:	incbin	objpos/ghz2.bin
		even
ObjPos_GHZ3:	incbin	objpos/ghz3.bin
		even
ObjPos_LZ1:	incbin	objpos/lz1.bin
		even
ObjPos_LZ2:	incbin	objpos/lz2.bin
		even
ObjPos_LZ3:	incbin	objpos/lz3.bin
		even
ObjPos_SBZ3:	incbin	objpos/sbz3.bin
		even
ObjPos_LZ1pf1:	incbin	objpos/lz1pf1.bin
		even
ObjPos_LZ1pf2:	incbin	objpos/lz1pf2.bin
		even
ObjPos_LZ2pf1:	incbin	objpos/lz2pf1.bin
		even
ObjPos_LZ2pf2:	incbin	objpos/lz2pf2.bin
		even
ObjPos_LZ3pf1:	incbin	objpos/lz3pf1.bin
		even
ObjPos_LZ3pf2:	incbin	objpos/lz3pf2.bin
		even
ObjPos_MZ1:	incbin	objpos/mz1.bin
		even
ObjPos_MZ2:	incbin	objpos/mz2.bin
		even
ObjPos_MZ3:	incbin	objpos/mz3.bin
		even
ObjPos_SLZ1:	incbin	objpos/slz1.bin
		even
ObjPos_SLZ2:	incbin	objpos/slz2.bin
		even
ObjPos_SLZ3:	incbin	objpos/slz3.bin
		even
ObjPos_SYZ1:	incbin	objpos/syz1.bin
		even
ObjPos_SYZ2:	incbin	objpos/syz2.bin
		even
ObjPos_SYZ3:	incbin	objpos/syz3.bin
		even
ObjPos_SBZ1:	incbin	objpos/sbz1.bin
		even
ObjPos_SBZ2:	incbin	objpos/sbz2.bin
		even
ObjPos_FZ:	incbin	objpos/fz.bin
		even
ObjPos_SBZ1pf1:	incbin	objpos/sbz1pf1.bin
		even
ObjPos_SBZ1pf2:	incbin	objpos/sbz1pf2.bin
		even
ObjPos_SBZ1pf3:	incbin	objpos/sbz1pf3.bin
		even
ObjPos_SBZ1pf4:	incbin	objpos/sbz1pf4.bin
		even
ObjPos_SBZ1pf5:	incbin	objpos/sbz1pf5.bin
		even
ObjPos_SBZ1pf6:	incbin	objpos/sbz1pf6.bin
		even
ObjPos_End:	incbin	objpos/ending.bin
		even
ObjPos_Null:	dc.w -1,0,0
		even



;--------------------------------
; CODE END
;--------------------------------
	END
